var __extends,Size,KeyCodeType,KeyCodes,TDB;(function(n){var t;(function(n){var t=function(){function n(n,t){this.index=n;this.count=t}return n.prototype.applyTo=function(n){if(typeof n=="string")return n.slice(0,this.index)+n.slice(this.index+this.count);var t=n.slice(0);return t.splice(this.index,this.count),t},n.prototype.toString=function(){return"d("+this.index+", "+this.count+")"},n}();n.Deletion=t})(t=n.Diff||(n.Diff={}))})(TDB||(TDB={})),function(n){var t;(function(n){var t=function(){function n(n,t,i){i===void 0&&(i=null);this.rows=n;this.columns=t;this.elements=i;var r=n*t;this.elements=i&&i.length>=r?i:new Array(r);this.stride=t}return n.prototype.get=function(n,t){return this.elements[n*this.stride+t]},n}();n.Matrix=t})(t=n.Diff||(n.Diff={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t=function(){function n(n,t){this.index=n;this.count=t}return n.prototype.applyTo=function(n,t){if(typeof n=="string")return n.slice(0,this.index)+t.slice(this.index,this.index+this.count)+n.slice(this.index);var i=n.slice(0);return i.splice.apply(i,[this.index,0].concat(t.slice(this.index,this.index+this.count))),i},n.prototype.toString=function(){return"i("+this.index+", "+this.count+")"},n}();n.Insertion=t})(t=n.Diff||(n.Diff={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t=function(){function t(n){this.edits=n}return t.fromSequences=function(i,r){for(var y,p,l,c,s=t.getEditDistanceMatrix(i,r),a=s.elements,v=s.stride,e=[],h,o,u=i.length,f=r.length;u>0||f>0;)y=a[u*v+f],f>0&&a[u*v+(f-1)]===y-1?(--f,h&&h.index===u?++h.count:(h=new n.Insertion(u,1),e.push(h))):u>0&&a[(u-1)*v+f]===y-1?(--u,o&&o.index===u+1?(--o.index,++o.count):(o=new n.Deletion(u,1),e.push(o))):(--u,--f);for(e.reverse(),p=0,l=0;l<e.length;++l)c=e[l],c.index+=p,p+=c instanceof n.Insertion?c.count:-c.count;return s.elements.length<=t.maxReusableBufferLength&&(!t.reusableMatrixBuffer||t.reusableMatrixBuffer.length<s.elements.length)&&(t.reusableMatrixBuffer=s.elements),new t(e)},t.prototype.applyTo=function(n,t){var i=typeof n=="string"?n:n.slice();for(var r in this.edits)i=this.edits[r].applyTo(i,t);return i},t.prototype.toString=function(){return this.edits.map(function(n){return n.toString()}).join(" ")},t.getEditDistanceMatrix=function(i,r){for(var u,s=i.length,h=r.length,c=new n.Matrix(s+1,h+1,t.reusableMatrixBuffer),e=c.elements,o=c.stride,f=0;f<=s;++f)e[f*o+0]=f;for(u=1;u<=h;++u)e[0*o+u]=u;for(f=1;f<=s;++f)for(u=1;u<=h;++u)e[f*o+u]=i[f-1]===r[u-1]?e[(f-1)*o+(u-1)]:1+Math.min(e[(f-1)*o+u],e[f*o+(u-1)]);return c},t.maxReusableBufferLength=1e4,t}();n.Diff=t})(t=n.Diff||(n.Diff={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t=function(){function t(n,t){this.deletions=n;this.insertions=t}return t.fromSequences=function(i,r){for(var u,o,a=n.Diff.fromSequences(i,r),s=a.edits,h=[],c=[],l=0,f,e=0;e<s.length;++e)u=s[e],u instanceof n.Deletion?(o=u.index+l,f&&f.index===o?f.count+=u.count:(f=new n.Deletion(o,u.count),h.push(f))):(l-=u.count,c.push(u));return new t(h,c)},t.prototype.applyTo=function(n,t){var i=typeof n=="string"?n:n.slice();for(var r in this.deletions)i=this.deletions[r].applyTo(i,t);for(r in this.insertions)i=this.insertions[r].applyTo(i,t);return i},t.prototype.toString=function(){return this.deletions.concat(this.insertions).map(function(n){return n.toString()}).join(" ")},t}();n.OrderedDiff=t})(t=n.Diff||(n.Diff={}))}(TDB||(TDB={})),function(n){function i(n,i,r,u){return new t(n,i,r,u)}var t=function(){function t(t,i,r,u){this.jElement=i;this.eventName=r;t&&t.addResource(this);this.handler=function(){var i=Array.prototype.slice.call(arguments),r=this,t;return n.applyUpdate(function(){t=u.apply(r,i)},3),t};i.on(r,this.handler)}return t.prototype.dispose=function(){this.jElement.off(this.eventName,this.handler)},t}();n.on=i}(TDB||(TDB={})),function(n){(function(n){n[n.InitialConversion=1]="InitialConversion";n[n.TestCode=2]="TestCode";n[n.SynchronousBrowserEvent=3]="SynchronousBrowserEvent";n[n.FocusManagement=4]="FocusManagement";n[n.DynamicMenu=5]="DynamicMenu";n[n.TextMeasurement=6]="TextMeasurement";n[n.SyncResponse=7]="SyncResponse";n[n.CalloutUpdate=8]="CalloutUpdate"})(n.Justification||(n.Justification={}));var t=n.Justification}(TDB||(TDB={})),function(n){var t={Ctrl:1,Alt:2,Shift:4,Meta:8},i=t,r=function(){function n(){}return n.createShortcutIdentifier=function(t){var r=new n,s,u,f,e,o;for(r.modifier=0,s=t.split("+"),u=0;u<s.length;u++)if(f=s[u],e=i[f],e&&(r.modifier|=e),o=KeyCodes[f],o&&(r.keyCode=o),!e&&!o)throw new Error("Invalid part: "+f+" of key code: "+t);if(!r.keyCode)throw new Error("Invalid key code: "+t);return r},n.createShortcutIdentifierFromEvent=function(i){var u=new n,r=0;return i.ctrlKey&&(r|=t.Ctrl),i.altKey&&(r|=t.Alt),i.shiftKey&&(r|=t.Shift),i.metaKey&&(r|=t.Meta),u.modifier=r,u.keyCode=i.keyCode,u},n.prototype.hashCode=function(){var n=this;return n.modifier*256+n.keyCode},n}();n.ShortcutIdentifier=r}(TDB||(TDB={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){function p(n){var t=i.indexOf(n);if(t!==-1)throw new Error("The updater is already registered.");i.push(n)}function w(n){var t=i.indexOf(n);if(t===-1)throw new Error("The updater is not currently registered.");i.splice(t,1)}function b(u,f){var s,e,o;t&&r===0&&!f&&n.raiseRecoverableError("un-justified update while applying the results of another update");++r;try{u()}finally{--r}if(!t&&r===0){t=!0;try{for(s=i.length,e=0;e<s;e++)for(i[e].onUpdate(),o=0;o<=e;++o)if(i[o].needsUpdate()){e=o-1;break}}finally{t=!1}}}function k(n){if(t)throw new Error("An update is already in progress.");t=!0;try{n()}finally{t=!1}}function d(n){return new u(null,n)}function g(n,t){return new u(n,t)}function nt(n,t){return new e(null,n,t)}function tt(n,t,i){return new e(n,t,i)}function it(n,t,i){return new f(null,n,t,i)}function rt(n,t,i,r){return new f(n,t,i,r)}function ut(n,t,i){return new a(null,n,t,i)}function ft(n,t,i,r){return new a(n,t,i,r)}function et(n,t,i){return new v(null,n,t,i)}function ot(n,t,i,r){return new v(n,t,i,r)}function st(n,t,i,r){return h(null,n,t,i,r)}function h(n,t,i,r,u){return new y(n,t,i,r,u,!1)}function ht(n,t,i,r){return c(null,n,t,i,r)}function c(n,t,i,r,u){return new y(n,t,i,r,u,!0)}var o=0,r=0,t=!1,i=[],s,u,e,l;n.registerUpdater=p;n.unregisterUpdater=w;n.applyUpdate=b;n.ensureNoUpdatesDuring=k;s=function(n){function t(t){n.call(this,t);this.id="s"+o++}return __extends(t,n),t.prototype.receiveNotification=function(){throw new Error("subclass must implement receiveNotification");},t.prototype._subscribeTo=function(n){n.subscribe(this)},t.prototype._unsubscribeFrom=function(n){n.unsubscribe(this)},t}(Disposable);n.Subscriber=s;n.notifier=d;n.notifierTag=g;n.watchable=nt;n.watchableTag=tt;n.watcher=it;n.watcherTag=rt;n.statefulWatcher=ut;n.statefulWatcherTag=ft;n.watcherOwner=et;n.watcherOwnerTag=ot;n.mappedWatcher=st;n.mappedWatcherTag=h;n.mappedWatcherOwner=ht;n.mappedWatcherOwnerTag=c;u=function(){function n(n,t){var i=this;i._tag=n;i._context=t;i._subscribers={}}return n.prototype.notify=function(){if(r===0)throw new Error("Can only notify when applying an update.");this.notifyInternal(!0)},n.prototype.notifyInternal=function(n){var i=this,t=i._subscribers;for(var r in t)t[r].receiveNotification(n)},n.prototype.subscribe=function(n){var r=this,t=n.id,i=r._subscribers;return i[t]?!1:(i[t]=n,!0)},n.prototype.unsubscribe=function(n){var t=this;delete t._subscribers[n.id]},n.prototype.resolveIfActive=function(){},n}();e=function(n){function t(t,i,r){n.call(this,t,i);var u=this;u._value=r}return __extends(t,n),t.prototype.getValue=function(){var n=this;return n._value},t.prototype.getWatchedValue=function(n){return n?n.watchValue(this):this.getValue()},t.prototype.setValue=function(n){if(r===0)throw new Error("Can only set a watchable's value when applying an update.");var t=this;t._value!=n&&(t._value=n,t.notifyInternal(!0))},t}(u),function(n){n[n.dirty=0]="dirty";n[n.clean=1]="clean";n[n.maybeDirty=2]="maybeDirty"}(l||(l={}));var f=function(n){function t(t,i,r,u){n.call(this,t,i);var f=this;f.id="w"+o++;f._calculateValue=u;f._dirty=0;f._watching=[];r&&r.addResource(f)}return __extends(t,n),t.prototype.clean=function(){return this._dirty===1},t.prototype.updateMaybeDirty=function(){var n=this,i,t,r;if(n._dirty===2){for(i=n._watching,t=0,r=i.length;t<r&&n._dirty===2;++t)i[t].resolveIfActive();n._dirty===2&&(n._dirty=1)}},t.prototype.resolve=function(){var n=this,t,i;n.updateMaybeDirty();n._dirty===0&&(n.stopWatchingAll(),t=n._currentValue,n._dirty=1,i=n._currentValue=n._calculateNewValue(),i!==t&&n.notifyInternal(!0))},t.prototype._calculateNewValue=function(){var n=this;return n._calculateValue.call(n._context,n)},t.prototype.resolveIfActive=function(){this._disposed||this.resolve()},t.prototype.watchValue=function(n){var t=this,i=n.getValue();return t.watchSubscribable(n),i},t.prototype.watch=function(n){var t=this;t.watchSubscribable(n)},t.prototype.watchSubscribable=function(n){var t=this;n.subscribe(t)&&t._watching.push(n)},t.prototype.getValue=function(){var n=this;return n.resolve(),n._currentValue},t.prototype.getWatchedValue=function(n){return n?n.watchValue(this):this.getValue()},t.prototype.receiveNotification=function(n){var t=this,i=t._dirty;i===1?(t._dirty=n?0:2,t.notifyInternal(!1)):i===2&&n&&(t._dirty=0)},t.prototype.dispose=function(){var n=this;n.stopWatchingAll();n._disposed=!0},t.prototype.stopWatchingAll=function(){for(var i=this,n=i._watching,r=n.length,t=0;t<r;t++)n[t].unsubscribe(i);n.length=0},t}(u),a=function(n){function t(t,i,r,u){n.call(this,t,i,r,undefined);var f=this;f._updateValue=u}return __extends(t,n),t.prototype._calculateNewValue=function(){var n=this;return n._updateValue.call(n._context,n._currentValue,n)},t}(f),v=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.resolve=function(){this.updateMaybeDirty();!this.clean()&&this._currentValue&&(this._currentValue.dispose(),this._currentValue=null);n.prototype.resolve.call(this)},t.prototype.dispose=function(){this._currentValue&&this._currentValue.dispose();n.prototype.dispose.call(this)},t}(f),y=function(n){function t(t,i,r,u,f,e){var o=this;n.call(this,t,this,r,o.calculateValue);o._mappedContext=i;o._ownObjects=e;o._getKeys=u;o._curKeys=[];o._curValues=[];o._valueConstructor=f}return __extends(t,n),t.prototype.calculateValue=function(n){var t=this,f=t._ownObjects,a=t._mappedContext,e,o=t._curValues,v=o.length,s=t._getKeys.call(a,n),y=s.length,h=[],r,c,u,l,i;for(f&&(e={}),r=0;r<y;r++)c=s[r],u=t.getValueIndex(c),u!==undefined?(l=o[u],f&&(e[u]=!0)):l=t._valueConstructor.call(a,c),h.push(l);if(f)for(i=0;i<v;i++)e[i]||o[i].dispose();return t._curKeys=s.slice(0),t._curValues=h.slice(0),h},t.prototype.getValueIndex=function(n){for(var r,u=this,i=u._curKeys,f=i.length,t=0;t<f;t++)if(r=i[t],r===n)return t},t.prototype.dispose=function(){var i,t,u,f,r,e;if(n.prototype.dispose.call(this),i=this,t=i._currentValue,t!==undefined){if(u=t.length,f=i._curKeys,i._ownObjects)for(r=0;r<u;r++)e=t[r],e.dispose();f.length=0;t.length=0}},t}(f)}(TDB||(TDB={})),function(n){(function(n){n[n.DeleteOnly=1]="DeleteOnly";n[n.WriteOnly=2]="WriteOnly";n[n.ReadWrite=4]="ReadWrite"})(n.UpdatePhase||(n.UpdatePhase={}));var t=n.UpdatePhase}(TDB||(TDB={})),function(n){var t;(function(n){var u=function(){function n(n,t,i){this.x=t;this.y=i;this.ismain=!1;this.id="c"+n}return n}(),t,i,r;n.Contact=u;t=function(){function n(n,t,i){this.ismain=n;this.touch=t;this.originalEvent=i}return n}();n.ContactStart=t;i=function(){function n(n,t,i,r,u){this.ismain=n;this.touch=t;this.delx=i;this.dely=r;this.originalEvent=u}return n}();n.ContactMove=i;r=function(){function n(n,t,i){this.ismain=n;this.touch=t;this.originalEvent=i}return n}();n.ContactStop=r})(t=n.Touch||(n.Touch={}))}(TDB||(TDB={})),function(n){var t;(function(t){function r(){var n;return n=navigator.msPointerEnabled||navigator.pointerEnabled?new u:new f,n.register(),n}t.CreateTouchManager=r;var i=function(){function t(){this.alltouches={};this.listeners=[]}return t.prototype.addTouchListener=function(n){this.listeners.push(n)},t.prototype.removeTouchListener=function(t){var i=this.listeners.indexOf(t);if(i==-1){n.logMessage(2,"Trying to remove listener that doesn't exist");return}this.listeners.splice(i,1)},t.prototype.dispatchTouchStart=function(n){for(var t=0;t<this.listeners.length;++t)this.listeners[t].dispatchTouchStart(n)},t.prototype.dispatchTouchMove=function(n){for(var t=0;t<this.listeners.length;++t)this.listeners[t].dispatchTouchMove(n)},t.prototype.dispatchTouchStop=function(n){for(var t=0;t<this.listeners.length;++t)this.listeners[t].dispatchTouchStop(n)},t}(),u=function(i){function r(){i.apply(this,arguments);this.events=this.getEvents()}return __extends(r,i),r.prototype.getEvents=function(){if(navigator.msPointerEnabled)return{MSPointerDown:this.onTouchStart.bind(this),MSPointerMove:this.onTouchMove.bind(this),MSPointerUp:this.onTouchStop.bind(this),MSPointerCancel:this.onTouchStop.bind(this)};if(navigator.pointerEnabled)return{pointerdown:this.onTouchStart.bind(this),pointermove:this.onTouchMove.bind(this),pointerup:this.onTouchStop.bind(this),pointercancel:this.onTouchStop.bind(this)};n.logMessage(2,"PointerManager should only be used in a browser that supports pointer events")},r.prototype.register=function(){for(var n in this.events)document.addEventListener(n,this.events[n])},r.prototype.unregister=function(){for(var n in this.events)document.removeEventListener(n,this.events[n])},r.prototype.onTouchStart=function(i){if(this.isTouchType(i.pointerType)){i.target.msSetPointerCapture?i.target.msSetPointerCapture(i.pointerId):i.target.setPointerCapture(i.pointerId);var r=new t.Contact(i.pointerId,i.clientX,i.clientY);this.alltouches[r.id]&&n.logMessage(2,"Tried overwriting touch object, we're not catching all events that represent TouchStop");this.alltouches[r.id]=r;this.maintouch||(this.maintouch=r);this.dispatchTouchStart(new t.ContactStart(r===this.maintouch,r,i))}},r.prototype.onTouchMove=function(n){var r,i,e,o,u,f;this.isTouchType(n.pointerType)&&(r=new t.Contact(n.pointerId,n.clientX,n.clientY),i=this.alltouches[r.id],i)&&(e=i.x,o=i.y,i.x=n.clientX,i.y=n.clientY,this.maintouch&&r.id===this.maintouch.id&&(this.maintouch=i),u=i.x-e,f=i.y-o,(u||f)&&this.dispatchTouchMove(new t.ContactMove(i===this.maintouch,i,u,f,n)))},r.prototype.onTouchStop=function(n){var i,r;this.isTouchType(n.pointerType)&&(i=new t.Contact(n.pointerId,n.clientX,n.clientY),this.alltouches[i.id])&&(delete this.alltouches[i.id],r=!1,this.maintouch&&i.id===this.maintouch.id&&(r=!0,this.maintouch=null),this.dispatchTouchStop(new t.ContactStop(r,i,n)))},r.prototype.isTouchType=function(n){return n==="touch"||n===2},r}(i),f=function(i){function r(){i.apply(this,arguments);this.events={touchstart:this.onTouchStart.bind(this),touchmove:this.onTouchMove.bind(this),touchend:this.onTouchStop.bind(this),touchcancel:this.onTouchStop.bind(this),touchleave:this.onTouchStop.bind(this)}}return __extends(r,i),r.prototype.register=function(){for(var n in this.events)document.addEventListener(n,this.events[n])},r.prototype.unregister=function(){for(var n in this.events)document.removeEventListener(n,this.events[n])},r.prototype.toTouches=function(n){return Array.prototype.map.call(n,function(n){return new t.Contact(n.identifier,n.clientX,n.clientY)})},r.prototype.onTouchStart=function(i){var f=this.toTouches(i.changedTouches),u,r;for(this.maintouch||(this.maintouch=f[0]),u=0;u<f.length;++u)r=f[u],this.alltouches[r.id]&&n.logMessage(2,"Tried overwriting touch object, we're not catching all events that represent TouchStop"),this.alltouches[r.id]=r,this.dispatchTouchStart(new t.ContactStart(r===this.maintouch,r,i))},r.prototype.onTouchMove=function(i){for(var u,r,o,s,e=this.toTouches(i.changedTouches),f=0;f<e.length;++f){if(u=e[f],r=this.alltouches[u.id],!r){n.logMessage(2,"Received a touch move from touch that wasn't registered");return}o=r.x;s=r.y;r.x=u.x;r.y=u.y;this.dispatchTouchMove(new t.ContactMove(r===this.maintouch,r,r.x-o,r.y-s,i))}},r.prototype.onTouchStop=function(n){for(var i,u,f=this.toTouches(n.changedTouches),r=0;r<f.length;++r)(i=f[r],this.alltouches[i.id])&&(delete this.alltouches[i.id],u=!1,this.maintouch&&this.maintouch.id===i.id&&(u=!0,this.maintouch=null),this.dispatchTouchStop(new t.ContactStop(u,i,n)))},r}(i)})(t=n.Touch||(n.Touch={}))}(TDB||(TDB={})),function(n){var t;(function(n){function e(n,t){return n[0]*t[0]+n[1]*t[1]}var o,t,i,r,u,f;(function(n){n[n.UP=0]="UP";n[n.RIGHT=1]="RIGHT";n[n.LEFT=2]="LEFT";n[n.DOWN=3]="DOWN"})(n.SwipeDirection||(n.SwipeDirection={}));o=n.SwipeDirection;t=function(){function n(n,t,i){this.direction=n;this.amount=t;this.target=i}return n}();n.Swipe=t;i=function(){function n(n){this.target=n}return n}();n.Tap=i;r=function(){function n(n,t){this.swipemin=n;this.tapTolerance=t;this.axis=[{type:0,vec:[0,-1]},{type:3,vec:[0,1]},{type:2,vec:[-1,0]},{type:1,vec:[1,0]},];this.target=null;this.movement=new u;this.listeners=[]}return n.prototype.dispatchTouchStart=function(n){this.movement.hasTouches()||(this.target=n.originalEvent.target);this.movement.add(n.touch)},n.prototype.dispatchTouchMove=function(n){this.movement.update(n.touch);this.movement.motion[0]+=n.delx;this.movement.motion[1]+=n.dely},n.prototype.dispatchTouchStop=function(n){if(this.movement.remove(n.touch),!this.movement.hasTouches()){var t=this.target;this.target=null;this.checkTap(t);this.checkSwipe(t);this.movement.motion=[0,0]}},n.prototype.checkSwipe=function(n){var i,r,u,f;if(!(this.movement.length()<this.swipemin)){for(i={axis:this.axis[0],val:0},r=0;r<this.axis.length;++r)(u=this.axis[r],f=e(u.vec,this.movement.motion),f<=i.val)||(i.axis=u,i.val=f);this.fireSwipe(new t(i.axis.type,i.val,n))}},n.prototype.checkTap=function(n){this.movement.length()>this.tapTolerance||this.movement.length()===0||this.fireTap(new i(n))},n.prototype.addGestureListener=function(n){this.listeners.push(n)},n.prototype.removeGestureListener=function(n){var t=this.listeners.indexOf(n);if(t==-1)throw new Error("trying to remove listener that doesn't exist");this.listeners.splice(t,1)},n.prototype.fireSwipe=function(n){for(var t=0;t<this.listeners.length;++t)this.listeners[t].dispatchSwipe(n)},n.prototype.fireTap=function(n){for(var t=0;t<this.listeners.length;++t)this.listeners[t].dispatchTap(n)},n}();n.GestureAnalyzer=r;u=function(){function n(){this.touchcount=0;this.touches={};this.motion=[0,0]}return n.prototype.add=function(n){this.touches[n.id]=n;this.touchcount++},n.prototype.update=function(n){this.touches[n.id]=n},n.prototype.remove=function(n){delete this.touches[n.id];this.touchcount--},n.prototype.length=function(){var n=this.motion;return f(e(n,n))},n.prototype.hasTouches=function(){return this.touchcount>0},n}();f=Math.sqrt})(t=n.Touch||(n.Touch={}))}(TDB||(TDB={})),function(n){var t=function(){function n(){this.disposed=!1;this.domlisteners=[]}return n.prototype.active=function(){return this.domlisteners.length>0},n.prototype.add=function(n){if(this.disposed)throw new Error("trying to add a dom listener to a disposed element");this.domlisteners.push(n)},n.prototype.remove=function(n){if(!this.disposed){var t=this.domlisteners.indexOf(n);if(t===-1)throw new Error("Tried removing dom listener that wasn't registered");this.domlisteners.splice(t,1)}},n.prototype.notifyAttached=function(n){for(var i=this.domlisteners,t=0,r=i.length;t<r;++t)i[t].domAttached(n)},n.prototype.notifyDetached=function(n){for(var i=this.domlisteners,t=0,r=i.length;t<r;++t)i[t].domDetached(n)},n.prototype.dispose=function(){this.disposed=!0;this.domlisteners.length=0},n}();n.DomListenerManager=t}(TDB||(TDB={})),function(n){var t=0,r=$.expando,u=$.cache,f=!1,e=function(){function n(n,i){this.ve=n;this.phase=i;this.id="v"+t++}return n.prototype.receiveNotification=function(){this.ve.receivePhaseNotification(this.phase)},n}(),o,i;(function(n){n[n.Bubble=0]="Bubble";n[n.Bypass=1]="Bypass";n[n.PreventDefault=2]="PreventDefault";n[n.StopPropagation=4]="StopPropagation";n[n.PreventDefaultStopPropagation=6]="PreventDefaultStopPropagation"})(n.EventPropagation||(n.EventPropagation={}));o=n.EventPropagation;i=function(i){function o(r){i.call(this,r&&r.constructing?r:null);this._culled=!1;this._chainInDom=!1;this._listeningToChain=!1;this._veSubs={};this.domlisteners=new n.DomListenerManager;this.domlistener=Obj.implement(this,{domAttached:this._onParentDomAttached,domDetached:this._onParentDomDetached});var u=this;this.id="v"+t++;r&&(u.parent=r);u.children=[];u._dirty=0;u.registerBuiltObject()}return __extends(o,i),o.prototype.registerBuiltObject=function(){},o.prototype.unregisterBuiltObject=function(){},o.prototype.getModelObjectId=function(){return null},o.prototype._create=function(){throw new Error("subclass should implement create");},o.prototype.add=function(t,i,r){var u=this,f=u._initialized;f&&u.update(1);u._directParent=t;u._directParent.receivePhaseNotification(u._dirty);f?u._addToDom(i,r):(u._create(i,r),u._initialized=!0,u._inDom=!u._culled,this.domlisteners.active()&&this.hookUpParentDomNotifications(),this.unculled()&&this.domlisteners.notifyAttached(this),n.logElementLoaded(u.getModelObjectId()))},o.prototype.createRoot=function(t){var i=this;n.ensureNoUpdatesDuring(function(){var r=new o(null);r.domElement=t;r._chainInDom=!0;r._initialized=!0;r.children.push(i);r.unregisterBuiltObject();n.ViewElementUpdater.register(i);i.add(r,t,null)});n.applyUpdate(function(){})},o.prototype.update=function(n){var t=this,r,f,i,u;t._dirty&=~n;t.onUpdate(n);if(!t.isDirty(n))for(r=t.children,f=r.length,i=0;i<f;i++)u=r[i],u.isDirty(n)&&u.update(n)},o.prototype.onUpdate=function(){},o.prototype.clearChildren=function(n){for(var r,t=this.children,u=t.length,i=0;i<u;++i)r=t[i],r.removeFromDOM(),n&&r.dispose();t.length=0},o.prototype.disposeBindings=function(){},o.prototype.dispose=function(n){var t=this,o,h,f,e,s;if(t.disposed=!0,!t._externalChildren)for(o=t.children,h=o.length,f=0;f<h;++f)o[f].dispose(n||!this._inDom);n||t.removeFromDOM();this._listeningToChain&&(this._directParent.removeDomListener(this.domlistener),this._listeningToChain=!1);this._chainInDom&&!this._culled&&this.domlisteners.notifyDetached(this);this.domlisteners.dispose();t.disposeBindings();i.prototype.dispose.call(this);e=t.domElement;e&&(s=e[r],s&&delete u[s],e._context=undefined);t.unregisterBuiltObject()},o.prototype.removeFromDOM=function(){var t,i,r,n;if(this._inDom){if(t=this.domElement,t)this.findParentElement().removeChild(t);else for(i=this.children,r=i.length,n=0;n<r;++n)i[n].removeFromDOM();this._inDom=!1}},o.prototype.addDomListener=function(n){var t=this.domlisteners.active();return this.domlisteners.add(n),!t&&this._initialized&&this.hookUpParentDomNotifications(),!!this._initialized&&!this._culled&&this._chainInDom},o.prototype.hookUpParentDomNotifications=function(){this._directParent&&(this._chainInDom=this._directParent.addDomListener(this.domlistener),this._listeningToChain=!0)},o.prototype.removeDomListener=function(n){this.domlisteners.remove(n);!this.domlisteners.active()&&this._listeningToChain&&(this._listeningToChain=!1,this._directParent.removeDomListener(this.domlistener))},o.prototype._onParentDomAttached=function(){(this._chainInDom=!0,this._culled)||this.domlisteners.notifyAttached(this)},o.prototype._onParentDomDetached=function(){(this._chainInDom=!1,this._culled)||this.domlisteners.notifyDetached(this)},o.prototype.unculled=function(){return!this._culled&&this._chainInDom},o.prototype.cull=function(){this._culled||(this._culled=!0,this._initialized&&(this.removeFromDOM(),this._chainInDom&&this.domlisteners.notifyDetached(this)))},o.prototype.uncull=function(){this._culled&&(this._culled=!1,this._initialized&&(this._addToDom(this.findParentElement(),this.findNextNode()),this._chainInDom&&this.domlisteners.notifyAttached(this)))},o.prototype.findParentElement=function(){for(var n=this._directParent;n&&!n.domElement;)n=n._directParent;return n.domElement},o.prototype.findNextNode=function(){var n=this,r,t,i,f,u;do{for(r=n._directParent,t=r.children,i=t.indexOf(n)+1,f=t.length;i<f;++i)if(u=t[i].findFirstNode(),u)return u;n=r}while(!n.domElement);return null},o.prototype.findFirstNode=function(){var n,i,t,r;if(this._inDom){if(n=this.domElement,n)return n;for(i=this.children,t=0,r=i.length;t<r;++t)if(n=i[t].findFirstNode(),n)return n}},o.prototype.findNodeAtOrAfter=function(n){for(var i,r=this.children,t=n,u=r.length;t<u;++t)if(i=r[t].findFirstNode(),i)return{node:i,index:t}},o.prototype._addToDom=function(n,t){var r,u,i,f;if(!this._culled){if(r=this.domElement,r)n.insertBefore(r,t);else for(u=this.children,i=0,f=u.length;i<f;++i)u[i]._addToDom(n,t);this._inDom=!0}},o.prototype.receivePhaseNotification=function(n){var t=this,i;t.isDirty(n)||(t._dirty|=n,i=t._directParent,i&&i.receivePhaseNotification(n))},o.prototype.isDirty=function(n){return(this._dirty&n)===n},o.prototype._subscribeToWatchable=function(n,t){var i=this._veSubs[t];i||(i=this._veSubs[t]=new e(this,t));n.subscribe(i)},o.prototype._unsubscribeFromWatchable=function(n,t){var i=this._veSubs[t];i&&n.unsubscribe(i)},o.prototype.traverse=function(n,t,i){return Obj.traverse(this,n,function(n){return!t||t(n)?n.children:null},i)},o.dataFor=function(n){if(!n)return null;for(var t=n;t._context==undefined&&t.parentElement!=undefined;)t=t.parentElement;return t._context},o.prototype.keyDown=function(){return 0},o.prototype.keyPress=function(){return 0},o.prototype.keyUp=function(){return 0},o.prototype.handleKeyEvent=function(n,t){var r=this,i=0;switch(t){case 1:i=r.keyDown(n);break;case 2:i=r.keyPress(n);break;case 3:i=r.keyUp(n)}return i===undefined&&(i=0),i!==0||!r.parent||(i=r.parent.handleKeyEvent(n,t)),i},o.prototype.mouseDown=function(){return!0},o.prototype.mouseUp=function(){return!0},o.prototype.mouseClicked=function(){return!0},o.prototype.mouseDoubleClicked=function(){return!0},o.prototype.mouseScrolled=function(){return!0},o.prototype.contextMenu=function(){return!0},o.prototype.handleMouseEvent=function(n,t){var r=this,i=!0;switch(t){case 1:i=r.mouseDown(n);break;case 2:i=r.mouseUp(n);break;case 3:i=r.mouseClicked(n);break;case 4:i=r.mouseDoubleClicked(n);break;case 6:i=r.mouseScrolled(n);break;case 5:i=r.contextMenu(n)}return i==undefined&&(i=!0),i&&r.parent!=null&&(i=r.parent.handleMouseEvent(n,t)),i},o.prototype.handleTouchStartEvent=function(n){return this.touchStart(n)?this.parent?this.parent.handleTouchStartEvent(n):!0:!1},o.prototype.handleTouchMoveEvent=function(n){return this.touchMove(n)?this.parent?this.parent.handleTouchMoveEvent(n):!0:!1},o.prototype.handleTouchStopEvent=function(n){return this.touchStop(n)?this.parent?this.parent.handleTouchStopEvent(n):!0:!1},o.prototype.touchStart=function(){return!0},o.prototype.touchMove=function(){return!0},o.prototype.touchStop=function(){return!0},o.prototype.handleSwipeEvent=function(n){return this.swipe(n)?this.parent?this.parent.handleSwipeEvent(n):!0:!1},o.prototype.swipe=function(){return!0},o.prototype.handleTapEvent=function(n){return this.tap(n)?this.parent?this.parent.handleTapEvent(n):!0:!1},o.prototype.tap=function(){return!0},o.prototype.paste=function(){return!0},o.prototype.handlePasteEvent=function(n){var i=this,t=i.paste(n);return t&&i.parent!=null&&(t=i.parent.handlePasteEvent(n)),t==undefined&&(t=!0),t},o.prototype.dragOver=function(){return!0},o.prototype.dragLeave=function(){return!0},o.prototype.drop=function(n){return n.preventDefault(),!0},o.prototype.handleDragOrDropEvent=function(n,t){var r=this,i=!0;switch(t){case 1:i=r.dragOver(n);break;case 2:i=r.dragLeave(n);break;case 3:i=r.drop(n)}return i==undefined&&(i=!0),i&&r.parent!=null&&(i=r.parent.handleDragOrDropEvent(n,t)),i},o.enableLeakDetection=function(){var t,i;f||(t={},o.prototype.registerBuiltObject=function(){t[this.id]=this},o.prototype.unregisterBuiltObject=function(){delete t[this.id]},i=o.prototype.add,o.prototype.add=function(n,t,r){if(this.disposed){var u="No Constructor",f=this.id,e=this.constructor.name||u,o=this.parent?this.parent.constructor.name||u:"No Parent";throw new Error("Attemped to add a VE that has been disposed.  Id: "+f+", Name: "+e+", Parent: "+o);}i.call(this,n,t,r)},addEventListener("beforeunload",function(i){n.ViewElementUpdater.clean();for(var r in t)return i.returnValue=typeof t[r].constructor!="undefined"?"Leaked view element: "+t[r].constructor.name:"Leaked view elements but we don't have a constructor name to display."},!1))},o.prototype.isInitialized=function(){var n=this;return n._initialized},o.prototype.className=function(){var t="VE",i=this.constructor,r,n;return i&&(r=/function\s(.+)\(/,n=r.exec(i.toString()),n&&n.length>1&&(t=n[1])),t},o.prototype.toString=function(){return this.className()+": Id='"+this.id+"' Culled="+this._culled+" InDom="+this._inDom+" ModelObjectId='"+this.getModelObjectId()+"'"},o.prototype.dump=function(){return this.dumpImp(0)},o.prototype.dumpImp=function(n){var t=o.getIndent(n)+this.toString();return this.children&&this.children.every(function(i){return t+="\n",t+=i.dumpImp(n+1),!0}),t},o.getIndent=function(n){return Array(n+1).join("\t")},o.prototype.registerShortcut=function(t,i,r){var u=this;if(r){r.addShortcutElement(t,i);return}u instanceof n.FocusablePanelViewElement?u.addShortcutElement(t,i):u.parent?u.parent.registerShortcut(t,i):n.raiseRecoverableError("Failed to register shortcuts: "+t)},o.prototype.unregisterShortcut=function(t,i,r){var u=this;if(r){r.removeShortcutElement(t,i);return}u instanceof n.FocusablePanelViewElement?u.removeShortcutElement(t,i):u.parent?u.parent.unregisterShortcut(t,i):n.raiseRecoverableError("Failed to unregister shortcuts: "+t)},o}(Disposable);n.ViewElement=i}(TDB||(TDB={})),function(n){var t=function(t){function i(n){t.call(this,n);var r=this;r.focusableChildren=[];i.focusListeners||(i.focusListeners=[])}return __extends(i,t),i.prototype.add=function(n,i,r){var u=this;t.prototype.add.call(this,n,i,r);u.parent&&u.parent.focusableChildren.push(u)},i.prototype.setFocus=function(){},i.prototype.clearFocus=function(n){var t=this;t.parent&&t.parent.clearFocus(n)},i.prototype.removeFromDOM=function(){var n=this;t.prototype.removeFromDOM.call(this);n.parent&&n.parent.focusableChildren.removefirst(n)},i.prototype.isFocused=function(){return!1},i.prototype.isFocusable=function(){return!1},i.prototype.onChildActiveStateChanged=function(n,t){var i=this;if(!i.notifying){if(i.notifying=!0,i.parent)i.parent.onChildActiveStateChanged(n,t);i.notifying=!1}},i.prototype.traverseFocusable=function(n,t,i){return Obj.traverse(this,n,function(n){return!t||t(n)?n.focusableChildren:null},i)},i.addFocusListener=function(n,t){i.removeFocusListener(n);i.focusListeners.push({context:n,focusChanged:t})},i.prototype.notifyFocusListeners=function(){for(var t=this,r=i.focusListeners.length,n=0;n<r;n++)i.focusListeners[n].focusChanged.call(i.focusListeners[n].context,t)},i.removeFocusListener=function(n){for(var r=i.focusListeners.length,t=0;t<r;t++)if(i.focusListeners[t].context===n){i.focusListeners.splice(t,1);return}},i.commitFocusedElement=function(){var t=n.FocusableViewElement.getFocusedElement();t&&t.isFocused()&&(t.setDomFocus(!1),t.setDomFocus(!0))},i.getFocusedElement=function(){var r=null,i=document.activeElement,t;if(i&&i instanceof HTMLElement)for(t=n.ViewElement.dataFor(i);t;){if(t instanceof n.FocusableDomViewElement){r=t;break}t=t.parent}return r},i.prototype.isElementUnder=function(n){for(var t=this;n;){if(n.parent===t)return!0;n=n.parent}return!1},i.prototype.firstChanceMouseEvent=function(n,t,i){var r=this;return r.parent?r.parent.firstChanceMouseEvent(n,t,i):!0},i.prototype.dumpFocusable=function(){return this.dumpFocusableImp(0)},i.prototype.dumpFocusableImp=function(t){var i=n.ViewElement.getIndent(t)+this.toString();return this.focusableChildren&&this.focusableChildren.every(function(n){return i+="\n",i+=n.dumpFocusableImp(t+1),!0}),i},i}(n.ViewElement);n.FocusableViewElement=t}(TDB||(TDB={})),function(n){var t=function(t){function i(i,r){r===void 0&&(r=!0);t.call(this,i);var u=this;u.domFocus=n.watchableTag(8713948,u,!1);u.domFocusEnabled=n.watchableTag(8713949,u,r);u._enabled=n.watchableTag(8988707,u,!0);u.enabled=u._enabled}return __extends(i,t),i.prototype.isEnabled=function(n){var t=this;return t.enabled.getWatchedValue(n)},i.prototype.setEnabled=function(n){var t=this;if(t.enabled!==t._enabled)throw new Error("Cannot set enabled if it has been overriden.");t._enabled.setValue(n)},i.prototype.setFocusDomElement=function(n){var t=this;t.focusDomElement=n},i.prototype.isVisible=function(){return!0},i.prototype.removeFromDOM=function(){var n=this;n.isFocused()&&n.clearFocus();t.prototype.removeFromDOM.call(this)},i.prototype.FocusableInitArgs=function(){var n=this;return{onfocus:n.focused,onblur:n.blurred,focused:n.domFocus,focusable:n.domFocusEnabled,tabindex:n.tabIndex,onSetFocusDomElement:n.setFocusDomElement}},i.prototype.compareTabbingOrderTo=function(n,t){var r=this,e=r.tabIndex?r.tabIndex:Number.MAX_VALUE,o=n.tabIndex?n.tabIndex:Number.MAX_VALUE,i=e-o,u,f;return i!==0||!r.focusDomElement||!n.focusDomElement?i:(u=r.focusDomElement.getBoundingClientRect(),f=n.focusDomElement.getBoundingClientRect(),i=u.top-f.top,Math.abs(i)>1)?i:t===1?f.right-u.right:u.left-f.left},i.prototype.checkFocusState=function(){var n=this,t=n.focusDomElement===document.activeElement;return t!==n.isFocused()&&n.setDomFocus(t),t},i.prototype.isFocused=function(n){var t=this;return t.domFocus.getWatchedValue(n)},i.prototype.isFocusable=function(n){var t=this;return(t.isInitialized()||!t.parent.isInitialized())&&t.isEnabled(n)&&t.isVisible(n)&&t.domFocusEnabled.getWatchedValue(n)},i.prototype.handleMouseEvent=function(n,i){var r=this;return i===3&&r.focusOnClick&&r.isFocusable()&&r.setFocus(),t.prototype.handleMouseEvent.call(this,n,i)},i.prototype.setFocus=function(){var t=this;t.isFocusable()&&!t.isFocused()&&n.applyUpdate(function(){return t.domFocus.setValue(!0)},4)},i.prototype.setDomFocus=function(t){var i=this;n.applyUpdate(function(){return i.domFocus.setValue(t)},4)},i.prototype.setFocusable=function(t){var i=this;n.applyUpdate(function(){return i.domFocusEnabled.setValue(t)},4)},i.prototype.onGainingFocus=function(){},i.prototype.onLosingFocus=function(){},i.prototype.toString=function(){var n=this;return t.prototype.toString.call(this)+" DomFocusEnabled="+n.domFocusEnabled.getValue()+" DomFocus="+n.domFocus.getValue()+" FocusOnClick="+n.focusOnClick},i.prototype.focused=function(){var n=this;n.onGainingFocus();n.onChildActiveStateChanged([n],!0);n.notifyFocusListeners()},i.prototype.blurred=function(){var n=this;n.onLosingFocus();n.onChildActiveStateChanged([n],!1)},i}(n.FocusableViewElement);n.FocusableDomViewElement=t}(TDB||(TDB={})),function(n){var i,r,u,t;(function(n){n[n.None=0]="None";n[n.Isolated=1]="Isolated";n[n.Region=2]="Region";n[n.VerticalList=4]="VerticalList";n[n.HorizontalList=8]="HorizontalList";n[n.PreserveFocusContext=16]="PreserveFocusContext";n[n.RegionGroup=32]="RegionGroup";n[n.HasActivatableChildren=64]="HasActivatableChildren";n[n.DomFocusable=128]="DomFocusable";n[n.NoWrappingNavigation=256]="NoWrappingNavigation";n[n.HomeEndNavigation=512]="HomeEndNavigation"})(n.FocusablePanelType||(n.FocusablePanelType={}));i=n.FocusablePanelType,function(n){n[n.LeftToRight=0]="LeftToRight";n[n.RightToLeft=1]="RightToLeft"}(n.ContentFlowDirection||(n.ContentFlowDirection={}));r=n.ContentFlowDirection,function(n){n[n.Current=0]="Current";n[n.Begin=1]="Begin";n[n.End=2]="End";n[n.Initial=3]="Initial";n[n.RemovedCurrent=4]="RemovedCurrent"}(n.OffsetOrigin||(n.OffsetOrigin={}));u=n.OffsetOrigin;t=function(t){function i(i,r){t.call(this,i,(r&128)!=0);var u=this;u.entered=n.watchableTag(8713950,u,!1);u.panelType=r;u.shortcutElements={}}return __extends(i,t),i.prototype.isEntered=function(n){var t=this;return t.entered.getWatchedValue(n)},i.prototype.canEnter=function(){return!0},i.prototype.setEntered=function(t){var i=this;n.applyUpdate(function(){return i.entered.setValue(t)},4)},i.prototype.mouseClicked=function(){var n=this;return n.setFocus(),!0},i.prototype.enter=function(){var n=this;return n.canEnter()&&(n.entered.getValue()||(n.setEntered(!0),n.onEntering()),n.updateActiveChild(3,0)),!0},i.prototype.exit=function(){var n=this;return n.entered.getValue()&&(n.setEntered(!1),n.onExiting()),!0},i.prototype.onChildActiveStateChanged=function(n,i){var r=this,u,f;i&&(u=n.last(),f=r.getActivatableChildren(),f.contains(u)&&(u!==r&&n.push(r),r.setActiveChild(u),r.enter()));t.prototype.onChildActiveStateChanged.call(this,n,i)},i.prototype.onEntering=function(){},i.prototype.onExiting=function(){},i.prototype.escape=function(){var n=this;n.panelType&1&&n.exit()},i.prototype.onNavigateList=function(n,t,i){var r=this;r.updateActiveChild(n,t+i)},i.prototype.shouldExit=function(){return!0},i.prototype.firstChanceMouseEvent=function(n,t,i){for(var r=this;i&&i!==r;)i=i.parent;return i?!0:r.onExternalMouseEvent(n,t,i)},i.prototype.onExternalMouseEvent=function(n,t){var i=this;return t===1&&i.exit(),!0},i.prototype.keyDown=function(n){var i=this,r;return i.isNavigationKey(n)?i.handleNavigationKey(n):(r=i.handleShortcutKey(n),r===0?t.prototype.keyDown.call(this,n):r)},i.prototype.toString=function(){var n=this;return t.prototype.toString.call(this)+" Visible="+n.isVisible()+" Type="+n.panelType+" Entered="+n.entered.getValue()},i.prototype.hasActivatableChildren=function(){var n=this;return(n.panelType&64)!=0},i.prototype.getActivatableChildren=function(){var n=this;return i.getActivatableChildren(n)},i.getActivatableChildren=function(t){var r=t.traverseFocusable(function(t){return t instanceof n.FocusableDomViewElement&&t.isFocusable()?t:null},function(n){return n===t||(n instanceof i?n.hasActivatableChildren()&&n.isVisible():!0)});return r.sort(function(n,t){return n.compareTabbingOrderTo(t)})},i.prototype.updateActiveChild=function(n,t){for(var i=this,r=i.getActivatableChildren(),u=0;u<r.length;u++){if(t=i.tryUpdateActiveChild(r,n,t),t===0)break;n=0}},i.prototype.onActivateChild=function(n){var t=n.isFocused();return t||(n.setFocus(),t=n.isFocused()),t},i.prototype.onDeativateChild=function(){},i.prototype.setActiveChild=function(n){var t=this;if(t.activeChild&&t.activeChild!==n)t.onDeativateChild(t.activeChild);t.activeChild=n},i.prototype.tryUpdateActiveChild=function(n,t,i){var f=this,u=f.activeChild,r,e;if(t===3)i=0,u&&u.checkFocusState()||f.panelType&16||(u=f.initialActiveChild),u&&!n.contains(u)&&(u=null),u||(u=n.first());else{r=0;switch(t){case 0:r=n.indexOf(f.activeChild);break;case 2:r=n.length-1;break;case 1:r=0;break;case 4:r=n.indexOf(f.activeChild);r>=0&&r<n.length&&(n.splice(r,1),r=r-1)}r+=i;f.panelType&256?r<0?r=0:r>=n.length&&(r=n.length-1):(r=r%n.length,r<0&&(r+=n.length));u=n[r]}return u&&(e=f.onActivateChild(u),e||(e=f.onActivateChild(u)),i=e?0:i<0?-1:1,f.setActiveChild(u)),i},i.prototype.handleNavigationKey=function(n){var t=this;if(n.keyCode===KeyCodeType.EscapeKey&&t.shouldExit(!0))t.escape();else if(n.keyCode===KeyCodeType.TabKey)t.onNavigateList(0,n.shiftKey?-1:1,0);else if(n.keyCode===KeyCodeType.DownArrowKey)t.onNavigateList(0,0,1);else if(n.keyCode===KeyCodeType.UpArrowKey)t.onNavigateList(0,0,-1);else if(n.keyCode===KeyCodeType.LeftArrowKey)t.onNavigateList(0,-1,0);else if(n.keyCode===KeyCodeType.RightArrowKey)t.onNavigateList(0,1,0);else if(n.keyCode===KeyCodeType.F6Key)t.onNavigateList(0,n.shiftKey?-1:1,0);else if(n.keyCode===KeyCodeType.EndKey)t.onNavigateList(2,0,0);else if(n.keyCode===KeyCodeType.HomeKey)t.onNavigateList(1,0,0);return 6},i.prototype.isNavigationKey=function(n){var t=this;return(t.entered.getValue()||t.panelType&32)&&(t.panelType&1&&(n.keyCode===KeyCodeType.EscapeKey||n.keyCode===KeyCodeType.TabKey)||t.panelType&4&&(n.keyCode===KeyCodeType.UpArrowKey||n.keyCode===KeyCodeType.DownArrowKey)||t.panelType&8&&(n.keyCode===KeyCodeType.RightArrowKey||n.keyCode===KeyCodeType.LeftArrowKey)||t.panelType&32&&n.keyCode===KeyCodeType.F6Key&&n.ctrlKey&&!n.altKey||t.panelType&512&&(n.keyCode===KeyCodeType.HomeKey||n.keyCode===KeyCodeType.EndKey))},i.prototype.handleShortcutKey=function(){return 0},i.prototype.addShortcutElement=function(n,t){for(var i,r=this,u=0;u<n.length;u++)i=n[u].hashCode(),r.shortcutElements[i]||(r.shortcutElements[i]=[]),r.shortcutElements[i].addunique(t)},i.prototype.removeShortcutElement=function(n,t){for(var u,i,f=this,r=0;r<n.length;r++)u=n[r].hashCode(),i=f.shortcutElements[u],i&&(i.removefirst(t),i.length==0&&delete f.shortcutElements[u])},i.prototype.getShortcutElements=function(n){var i=this,t=i.shortcutElements[n.hashCode()];return t?t:[]},i.prototype.executeShortcutElements=function(n,t){for(var i=0,r=0;r<n.length;r++)if(i=n[r].handleShortcutKey(t),i!=0)return i;return i},i.prototype.dispose=function(){t.prototype.dispose.call(this);var n=this;n.shortcutElements={}},i}(n.FocusableDomViewElement);n.FocusablePanelViewElement=t}(TDB||(TDB={})),function(n){(function(n){n[n.DragOverEvent=1]="DragOverEvent";n[n.DragLeaveEvent=2]="DragLeaveEvent";n[n.DropEvent=3]="DropEvent"})(n.ViewElementDragDropEventType||(n.ViewElementDragDropEventType={}));var t=n.ViewElementDragDropEventType}(TDB||(TDB={})),function(n){(function(n){n[n.KeyDownEvent=1]="KeyDownEvent";n[n.KeyPressEvent=2]="KeyPressEvent";n[n.KeyUpEvent=3]="KeyUpEvent"})(n.ViewElementKeyEventType||(n.ViewElementKeyEventType={}));var t=n.ViewElementKeyEventType}(TDB||(TDB={})),function(n){(function(n){n[n.MouseDownEvent=1]="MouseDownEvent";n[n.MouseUpEvent=2]="MouseUpEvent";n[n.MouseClickEvent=3]="MouseClickEvent";n[n.MouseDoubleClickedEvent=4]="MouseDoubleClickedEvent";n[n.ContextMenuEvent=5]="ContextMenuEvent";n[n.MouseScroll=6]="MouseScroll"})(n.ViewElementMouseEventType||(n.ViewElementMouseEventType={}));var t=n.ViewElementMouseEventType}(TDB||(TDB={})),function(n){var t=function(n){function t(t){n.call(this,null);var i=this;i._data=t;i._subscribeToWatchable(t,3)}return __extends(t,n),t.prototype._create=function(n,t){var i=this._data.getValue();this.handleChange(i,n,t)},t.prototype.onUpdate=function(n){var i=n===1,t;if((i||n===2)&&(t=this._data.getValue(),!this.inCorrectState(t)))if(i)this.handleRemoval(t);else{if(this.isDirty(1)){this.receivePhaseNotification(2);return}this.handleChange(t,this.findParentElement(),this.findNextNode())}},t.prototype.inCorrectState=function(){throw new Error("subclass must implement inCorrectState");},t.prototype.dispose=function(t){n.prototype.dispose.call(this,t);this._unsubscribeFromWatchable(this._data,3)},t.prototype.handleChange=function(){throw new Error("Subclasses must implement handleChange method");},t.prototype.handleRemoval=function(){throw new Error("Subclasses must implement handleRemoval method");},t}(n.ViewElement);n.InstructionViewElement=t}(TDB||(TDB={})),function(n){function f(n){t=n}function e(n,i){t&&t(n,i)}function o(n){i=n}function s(n){i&&i(n)}function h(n){r=n}function c(n){r&&r.loadedElement(n)}var t,i,u,r;(function(n){n[n.verbose=0]="verbose";n[n.info=1]="info";n[n.warning=2]="warning";n[n.error=3]="error"})(n.LogLevel||(n.LogLevel={}));u=n.LogLevel;n.setLoggingFunction=f;n.logMessage=e;n.setRaiseRecoverableErrorFunction=o;n.raiseRecoverableError=s;n.setLayoutElementLogger=h;n.logElementLoaded=c}(TDB||(TDB={})),function(n){var t=function(t){function i(n,i){this._externalChildren=n;t.call(this,i);this.recentNewData=null}return __extends(i,t),i.prototype.inCorrectState=function(n){return this.compareData(n,this.children)},i.prototype.compareData=function(n,t){var r=t.length,u=n.length,i;if(r!==u)return!1;for(i=0;i<r;i++)if(t[i]!==n[i])return!1;return!0},i.prototype.handleChange=function(t,i,r){var u=this,c=u.recentNewData&&u.compareData(t,u.recentNewData)?u.diff:n.Diff.OrderedDiff.fromSequences(u.children,t),e,o,l,f,a,s,h;for(u.diff=null,u.recentNewData=null,o=0,l=c.insertions.length;o<l;++o){for(f=c.insertions[o],e=e&&f.index<=e.index?e:o===0||e?u.findNodeAtOrAfter(f.index):null,a=e?e.node:null,s=f.index,h=f.count;h>0;++s,--h)t[s].add(u,i,a||r);u.children.splice.apply(u.children,[f.index,0].concat(t.slice(f.index,f.index+f.count)))}},i.prototype.handleRemoval=function(t){for(var r,c,u,f,i=this,s=i.children,v=!i._externalChildren,h={},e=0,y=t.length;e<y;++e)h[t[e].id]=!0;for(i.diff=n.Diff.OrderedDiff.fromSequences(s,t),i.recentNewData=t.slice(),r=0,c=i.diff.deletions.length;r<c;++r){var l=i.diff.deletions[r],o=l.index,a=l.count;for(u=o+a-1;u>=o;--u)f=s[u],f.removeFromDOM(),!v||f.id in h||f.dispose();i.children.splice(o,a)}},i}(n.InstructionViewElement);n.ForeachInstructionVE=t}(TDB||(TDB={})),function(n){var t=function(n){function t(t,i){this._externalChildren=t;n.call(this,i)}return __extends(t,n),t.prototype.inCorrectState=function(n){return n?this.children[0]===n:this.children.length===0},t.prototype.handleChange=function(n,t,i){var r=this;n&&(n.add(r,t,i),r.children.push(n))},t.prototype.handleRemoval=function(){var n=this;n.clearChildren(!n._externalChildren)},t}(n.InstructionViewElement);n.SubTemplateInstructionVE=t}(TDB||(TDB={})),function(n){var t=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.inCorrectState=function(n){return this.children.length>0?!!n:!n},t.prototype.handleChange=function(n,t,i){n&&this.buildChildren(t,i)},t.prototype.handleRemoval=function(n){n||this.clearChildren(!0)},t.prototype.buildChildren=function(){throw new Error("Subclass must implement buildChildren");},t}(n.InstructionViewElement);n.IfInstructionVE=t}(TDB||(TDB={})),function(n){var t=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.inCorrectState=function(n){return n===this._currentValue&&this.children.length>0},t.prototype.handleChange=function(n,t,i){this._currentValue=n;this.buildChildren(n,t,i)},t.prototype.handleRemoval=function(){this.clearChildren(!0)},t.prototype.buildChildren=function(){throw new Error("subclass must implement buildChildren");},t}(n.InstructionViewElement);n.SwitchInstructionVE=t}(TDB||(TDB={})),function(n){var t=function(){function t(n){this._phase=n}return t.prototype.onUpdate=function(){for(var r,i=t.s_viewElements,u=i.length,f=this._phase,n=0;n<u;++n)r=i[n],r.update(f)},t.prototype.needsUpdate=function(){for(var i=t.s_viewElements,r=i.length,u=this._phase,n=0;n<r;++n)if(i[n].isDirty(u))return!0;return!1},t.register=function(i){var r=t.s_viewElements;if(r){if(r.indexOf(i)!==-1)throw new Error("The given view element has already been registered for updates");}else r=t.s_viewElements=[],n.registerUpdater(new t(1)),n.registerUpdater(new t(2)),n.registerUpdater(new t(4));r.push(i)},t.unregister=function(n){var i=t.s_viewElements,r;if(!i)throw new Error("No view elements have yet been registered, so none can unregister");if(r=i.indexOf(n),r===-1)throw new Error("The given view element wasn't registered for updates, so can't be removed");i.splice(r,1)},t.clean=function(){var n=t.s_viewElements,i,r;if(n){for(i=0,r=n.length;i<r;++i)n[i].dispose();n.length=0}},t}();n.ViewElementUpdater=t}(TDB||(TDB={}));Size=function(){function n(n,t){var i=this;i.width=n!==undefined?n:0;i.height=t!==undefined?t:0}return n.prototype.flipped=function(){var t=this;return new n(t.height,t.width)},n.prototype.plus=function(t){return new n(this.width+t.width,this.height+t.height)},n.prototype.minus=function(t){return new n(this.width-t.width,this.height-t.height)},n.prototype.leq=function(n){return this.width<=n.width&&this.height<=n.height},n}(),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateAttr=function(n,t){var u=this,i,r;for(i in t)r=t[i],r===null||r===undefined?u._el.removeAttribute(i):u._el.getAttribute(i)!==r&&u._el.setAttribute(i,r)},n}();n.BindingBase=t})(t=n.Attr||(n.Attr={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(n,t,i){var r=this;r._element=n;r._viewElement=i}return t.prototype.init=function(n){var t=this;t._initArgs=n},t.prototype.updateAutoDownload=function(t){var i=this,r,u;if(i._initArgs.url!=null&&(r=t.watchValue(i._initArgs.url),r!=null)){n.applyUpdate(function(){i._initArgs.url.setValue(null)},1);u=$("<iframe style='display: none' src='"+r+"' />");u.on("load",null,null,function(n){$(n.delegateTarget).remove()});$(document.body).append(u)}},t}();t.BindingBase=i})(i=t.AutoDownload||(t.AutoDownload={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t,i){var r=this;if(r._element=n,r._viewElement=i,!(r._element instanceof HTMLInputElement)&&r._element.type.toLowerCase()!=="file")throw new Error("The auto upload binding only works on file input elements.");}return n.prototype.init=function(n){var t=this;$(t._element).change(function(i){var r=i.target.files;(t._element.value!==""||r.length!=0)&&($.browser.msie&&parseInt($.browser.version,10)<10||n.filesReadyForUpload.call(t._viewElement,r),t._element.form.reset())})},n}();n.BindingBase=t})(t=n.AutoUpload||(n.AutoUpload={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i){t.call(this,null);var r=this;r._element=i;r._scrollbarBuffer=20;r._layoutRecentlyRan=!1;r._layoutRequestPending=!1;r._layoutOnResizeDelay=50;r._resizeNotifier=n.notifierTag(6111950,r)}return __extends(i,t),i.prototype.init=function(n){var t=this;t._defaultMargin=n.defaultMargin;t._defaultPadding=n.defaultPadding;t._maxPadding=n.maxPadding;t._maxRows=n.maxRows;t._height=n.height;t.addResource(Utilities.onResize(t.sendUpdateLayoutNotification,t))},i.prototype.sendUpdateLayoutNotification=function(){var t=this;n.applyUpdate(function(){t._resizeNotifier.notify()})},i.prototype.updateElements=function(n,t){var i=this;i._viewElements=t;i.layoutContent(n)},i.prototype.layoutContent=function(t){var i=this,v,f,r,p,l,s;if((t.watch(i._resizeNotifier),v=t.watchValue(i._maxRows),i._viewElements.length!==0)&&(f=$(i._element).width(),f-=i._scrollbarBuffer,!(f<=0))){var h=i._element.children,y=h.length,u=0,e=0,o=0,a=0,c=0;for(r=0;r<y;r++){if(p=h[r],l=n.ViewElement.dataFor(p),i._viewElements.indexOf(l)<0)throw new Error("A dom element has a child that doesn't have a corresponding liquid layout element.");s=t.watchValue(l.naturalWidth);s>c&&l.isShrinkable.getWatchedValue(t)&&(c=s);i.setButtonTextWidth(p,"");i.checkVisible(l,a,v);u+s+o<f?(u+=o+s,o=i._defaultMargin):(r==e||c/2<f-u-o)&&l.isShrinkable.getValue()?(u+=o+s,i.adjustRow(h,e,r,f-u),e=r+1,u=0,c=0,o=0,++a):(i.adjustRow(h,e,r-1,f-u),e=r,u=s,c=s,o=i._defaultMargin,++a,i.checkVisible(i._viewElements[r],a,v),u>=f&&(i.adjustRow(h,r,r,f-u),e=r+1,u=0,c=0,o=0,++a))}y!=e&&i.adjustRow(h,e,y-1,0);n.applyUpdate(function(){i._height.setValue($(i._element).outerHeight(!0))},1)}},i.prototype.checkVisible=function(t,i,r){n.applyUpdate(function(){t.visible.setValue(i<r)},1)},i.prototype.adjustRow=function(t,i,r,u){var o=this,s=r-i+1,l,c,y,f,e,b,p;if(u>0)if(l=2*(o._maxPadding-o._defaultPadding),u<=s*l){var a=Math.floor(u/s/2),h=u-2*s*a,k=h>s?s:h,d=h>s?h-s:0;for(f=0;f<s;++f)e=t[i+f],e.style.paddingLeft=o._defaultPadding+a+(f<k?1:0)+"px",e.style.paddingRight=o._defaultPadding+a+(f<d?1:0)+"px",e.style.marginRight=(i+f<r?o._defaultMargin:0)+"px"}else if(s>1){var w=u-s*l,v=Math.floor(w/(s-1)),g=w-v*(s-1);for(f=0;f<s;++f)e=t[i+f],e.style.paddingLeft=o._maxPadding+"px",e.style.paddingRight=o._maxPadding+"px",e.style.marginRight=f<g?o._defaultMargin+v+1+"px":f<s-1?o._defaultMargin+v+"px":"0px"}else e=t[i],e.style.paddingLeft=o._defaultPadding+Math.ceil(u/2)+"px",e.style.paddingRight=o._defaultPadding+Math.floor(u/2)+"px",e.style.marginRight="0px";else{for(c=0,y=i,f=i;f<=r;++f)e=t[f],e.style.paddingLeft=o._defaultPadding+"px",e.style.paddingRight=o._defaultPadding+"px",e.style.marginRight=(f<r?o._defaultMargin:0)+"px",b=n.ViewElement.dataFor(e),p=b.naturalWidth.getValue(),p>c&&(c=p,y=f);u<0&&o.setButtonTextWidth(t[y],c+u-2*(o._defaultPadding+1)+"px")}},i.prototype.setButtonTextWidth=function(n,t){var i=this;n.firstChild.style.width=t},i}(Disposable);t.BindingBase=i})(i=t.ButtonsLiquidLayout||(t.ButtonsLiquidLayout={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t){n.call(this,null);var i=this;i._element=t}return __extends(t,n),t.prototype.init=function(n){var t=this;t._args=n;t.adjustLayout();t.addResource(Utilities.onResize(t.adjustLayout,t))},t.prototype.adjustLayout=function(){var t=this,n=t._element,i,r,u,f;t._args.horizontal&&(i=$(n).outerWidth(),r=Math.max((window.innerWidth-i)/2,0),$(n).css("left",r+"px"));t._args.vertical&&(u=$(n).outerHeight(),f=Math.max((window.innerHeight-u)/2,0),$(n).css("top",f+"px"))},t.prototype.updateCenter=function(n,t){var i=this;t&&i.adjustLayout()},t}(Disposable);n.BindingBase=t})(t=n.Center||(n.Center={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(n){var t=this;t._element=n}return t.prototype.init=function(t){var i=this,r;if(t!==null){if(r=i._element.type.toLowerCase(),!(i._element instanceof HTMLInputElement)&&r!=="checkbox"&&r!=="radio")throw new Error("The checked binding only works on checkboxes and radio buttons.");i._checked=t;i._onChangeHandler=function(){i._element.checked!=i._checked.getValue()&&n.applyUpdate(function(){i._checked.setValue(i._element.checked)})};$(i._element).on("change",i._onChangeHandler)}},t.prototype.updateChecked=function(n){var t=this,i;t._checked!==undefined&&(i=n.watchValue(t._checked),t._element.checked=i)},t.prototype.dispose=function(){var n=this;$(n._element).off("change",n._onChangeHandler)},t}();t.BindingBase=i})(i=t.Checked||(t.Checked={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateCss=function(n,t){var f=this,i=f._el.className.match(/\S+/g),r,e,u;i=i!==null?i:[];for(r in t)e=t[r],u=i.indexOf(r),e?u===-1&&i.push(r):u>=0&&i.splice(u,1);f._el.className=i.join(" ")},n}();n.BindingBase=t})(t=n.Css||(n.Css={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._element=n}return n.prototype.init=function(){var n=this;n._dragStartHandler=function(){return!1};$(n._element).on("dragstart",n._dragStartHandler);n._dragHandler=function(n){return n.originalEvent.dataTransfer.dropEffect="none",n.stopPropagation(),n.preventDefault(),!1};$(n._element).on("dragenter",n._dragHandler);$(n._element).on("dragover",n._dragHandler);$(n._element).on("drop",n._dragHandler)},n.prototype.dispose=function(){var n=this;$(n._element).off("dragstart",n._dragStartHandler);$(n._element).off("dragenter",n._dragHandler);$(n._element).off("dragover",n._dragHandler);$(n._element).off("drop",n._dragHandler)},n}();n.BindingBase=t})(t=n.DisableDragDrop||(n.DisableDragDrop={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t,i){this._timeoutId=null;var r=this;r._element=n;r._viewElement=i}return n.prototype.init=function(n){var t=this,f=n.appendTo!==undefined?n.appendTo:"#pane-holder",e=n.cursor!==undefined?n.cursor:"move",o=n.opacity!==undefined?n.opacity:1,s=n.handle!==undefined?n.handle:"",h=n.helper!==undefined?n.helper:"clone",c=n.scroll!==undefined?n.scroll:!0,l=n.axis!==undefined?n.axis:"",a=n.containment!==undefined?n.containment:"",r=n.start,u=n.stop,i=n.revert,v=n.drag;t._args={zIndex:1e4,cursor:e,cursorAt:n.cursorAt,distance:10,refreshPositions:!0,handle:s,helper:h,appendTo:f,opacity:o,scroll:c,scrollSensitivity:100,axis:l,containment:a,cancel:n.cancel,drag:function(i,r){n.drag!==undefined&&v(i,r,$(t._element))},start:function(n,i){r!==undefined&&r(n,i,$(t._element))},stop:function(n,i){u!==undefined&&u(n,i,$(t._element))},revert:function(n){return(i&&i(n,$(t._element)),$("body").css("cursor","auto"),n)?(t._timeoutId===null&&(t._timeoutId=setTimeout(function(){t.resetDraggable()},0)),!1):i!==null}};t._previousOptions={};t.createDraggable()},n.prototype.createDraggable=function(){var n=this;$(n._element).draggable(n._args)},n.prototype.updateOptions=function(n,t){var r=this,i;r._previousOptions=t;for(i in t)i=="disabled"&&t[i]=="false"?$(r._element).draggable("enable"):i=="start"?$(r._element).draggable("option","start",function(n,u){t[i]!==undefined&&t[i](n,u,$(r._element))}):$(r._element).draggable("option",i,t[i])},n.prototype.resetDraggable=function(){var n=this;n._timeoutId!==null&&(n.clearFromDDManager(),$(n._element).draggable("destroy"),n._disposed||(n.createDraggable(),n.updateOptions(null,n._previousOptions),n._timeoutId=null))},n.prototype.clearFromDDManager=function(){var t=this,n=$.ui.ddmanager;n.current==$(t._element).draggable("instance")&&(n.current=null)},n.prototype.dispose=function(){var n=this,t;n._disposed||(n._disposed=!0,t=$.ui.ddmanager,t.current!=$(n._element).draggable("instance")&&$(n._element).draggable("destroy"),n._previousOptions=null,n._args=null)},n}();n.BindingBase=t})(t=n.Draggable||(n.Draggable={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(n,t,i){var r=this;r._element=n;r._viewElement=i}return t.prototype.init=function(t){var i=this;$(i._element).droppable({tolerance:"pointer",hoverClass:t.hoverClass,accept:function(r){var u=n.ViewElement.dataFor(r.get()[0]);return t.allowDrop?t.allowDrop.call(i._viewElement,u):!0},over:function(r,u){var f=n.ViewElement.dataFor(u.draggable.get()[0]);t.onOver&&t.onOver.call(i._viewElement,f)},out:function(r,u){var f=n.ViewElement.dataFor(u.draggable.get()[0]);t.onOut&&t.onOut.call(i._viewElement,f)},drop:function(r,u){var f=n.ViewElement.dataFor(u.draggable.get()[0]);t.onDrop&&t.onDrop.call(i._viewElement,f)}})},t.prototype.dispose=function(){var n=this;n._disposed||($(n._element).droppable("destroy"),n._disposed=!0)},t}();t.BindingBase=i})(i=t.Droppable||(t.Droppable={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateEnable=function(n,t){var i=this;t?i._el.removeAttribute("disabled"):i._el.disabled=!0},n}();n.BindingBase=t})(t=n.Enable||(n.Enable={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t,i){var r=this;r._element=n;r._viewElement=i;r._addedEvents={}}return n.prototype.init=function(n){var i=this;for(var t in n)i.setupEventListener(n[t],t)},n.prototype.setupEventListener=function(n,t){var i=this,r=function(t){var r=n.call(i._viewElement,t);return r||(t.stopPropagation(),t.preventDefault()),r};$(i._element).on(t,r);i._addedEvents[t]=r},n.prototype.dispose=function(){var n=this;for(var t in n._addedEvents)$(n._element).off(t,n._addedEvents[t]),n._addedEvents[t]=null;n._addedEvents={}},n}();n.BindingBase=t})(t=n.Events||(n.Events={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(n,i,r){t.call(this,null);var u=this;u._element=n;u._viewElement=r}return __extends(i,t),i.prototype.init=function(t){if(t&&t.focused!==null){var i=this;i._focused=t.focused;i._onFocusUpdated=t.onFocusUpdated;i._context=t.context;n.on(i,$(i._element),"focus",function(){i._focused.getValue()||n.applyUpdate(function(){i._focused.setValue(!0)},1)});n.on(i,$(i._element),"blur",function(){i._focused.getValue()&&n.applyUpdate(function(){i._focused.setValue(!1)},1)})}},i.prototype.updateFocus=function(n){var t=this,r,u,i;t._focused!==undefined&&(r=n.watchValue(t._focused),t._onFocusUpdated&&t._onFocusUpdated.call(t._context||t._viewElement,r),r?(t._element.focus(),u=t._element.nodeName.toLowerCase(),(u==="input"||u==="textarea")&&(i=t._element,i.value&&i.type!="email"&&i.type!="number"&&i.setSelectionRange(i.value.length,i.value.length))):t._element.blur())},i.prototype.dispose=function(){var n=this;t.prototype.dispose.call(this);n._onFocusUpdated=null;n._context=null;n._viewElement=null},i}(Disposable);t.BindingBase=i})(i=t.Focus||(t.Focus={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.init=function(n){var t=this;t._context=n.context;t._htmlDispose=n.onDispose},n.prototype.dispose=function(){var n=this;n._context&&n._htmlDispose&&n._htmlDispose.call(n._context,n._el);n._htmlDispose=null;n._context=null},n}();n.BindingBase=t})(t=n.HtmlDispose||(n.HtmlDispose={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(n,i,r){t.call(this,null);var u=this;u._element=n;u.ve=r}return __extends(i,t),i.prototype.init=function(t){var i=this;if(t){i._focused=t.focused;i._focusable=t.focusable;i._tabindex=t.tabindex?t.tabindex:0;i._onfocus=t.onfocus;i._onblur=t.onblur;i._onSetFocusDomElement=t.onSetFocusDomElement;i._onSetFocusDomElement&&i._onSetFocusDomElement.call(i.ve,i._element);n.on(i,$(i._element),"focus",function(){i.setFocusedValue(!0);i._onfocus&&i._onfocus.call(i.ve)});n.on(i,$(i._element),"blur",function(){i.setFocusedValue(!1);i._onblur&&i._onblur.call(i.ve)})}},i.prototype.updateFocus=function(n){var t=this,u,r,i;t._focused!==undefined&&(u=n.watchValue(t._focused),u?(t._element.focus(),document.activeElement!==t._element?t.setFocusedValue(!1):(r=t._element.nodeName.toLowerCase(),(r==="input"||r==="textarea")&&(i=t._element,i.value&&i.type!="email"&&i.type!="number"&&i.setSelectionRange(i.value.length,i.value.length)))):t._element.blur())},i.prototype.updateFocusable=function(n){var t=this,i=!t._focusable||n.watchValue(t._focusable);t._element.tabIndex=i?t._tabindex:-1},i.prototype.dispose=function(){var n=this;n._onSetFocusDomElement&&n._onSetFocusDomElement.call(n.ve,undefined);t.prototype.dispose.call(this);n._onfocus=undefined;n._onblur=undefined;n._onSetFocusDomElement=undefined},i.prototype.setFocusedValue=function(t){var i=this;n.applyUpdate(function(){return i._focused.setValue(t)},4)},i}(Disposable);t.BindingBase=i})(i=t.Focusable||(t.Focusable={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this,i;if(this.loaded=!1,i=this,i._el=n,!(i._el instanceof HTMLIFrameElement)&&i._el.nodeName.toLowerCase()!=="iframe")throw new Error("This bindings should only be used on iframe elements.");$(n).load(function(){t.loaded||(t.loaded=!0,t.pendingHTML!==undefined)&&(t.updateHtml(t.pendingHTML),t.pendingHTML=undefined)})}return n.prototype.updateHtml=function(n){$(this._el).contents().find("html").html(n)},n.prototype.updateIframe=function(n,t){var i=this._el;t.width&&$(i).attr({width:t.width});t.height&&$(i).attr({height:t.height});t.html&&(this.loaded?(this.updateHtml(t.html),this.pendingHTML=undefined):this.pendingHTML=t.html)},n}();n.BindingBase=t})(t=n.Iframe||(n.Iframe={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r){n.call(this,null);var u=this;u._element=t;u._viewElement=r;u._scrollbarBuffer=20}return __extends(t,n),t.prototype.init=function(n){var t=this;n.checkHeightReference.checkHeight=function(){return t.checkHeight()};t.addResource(Utilities.onResize(function(){t.checkHeight()||n.bottomReached.call(t._viewElement)}));t._scrollHandler=function(){var i=$(t._element).scrollTop(),r=i+$(t._element).outerHeight(),u=$(t._element).prop("scrollHeight");u-r<200&&n.bottomReached.call(t._viewElement)};$(t._element).on("scroll",t._scrollHandler)},t.prototype.checkHeight=function(){var n=this,i=$(n._element).prop("scrollHeight"),t=$(n._element).height();return t==0||i>t},t.prototype.dispose=function(){var t=this;$(t._element).off("scroll",t._scrollHandler);n.prototype.dispose.call(this)},t}(Disposable);n.BindingBase=t})(t=n.InfinitelyScrollableArea||(n.InfinitelyScrollableArea={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r){n.call(this,null);var u=this;u._viewElement=r;u._scrollbarBuffer=20}return __extends(t,n),t.prototype.init=function(n){var t=this;n.checkHeightReference.checkHeight=function(){return t.checkHeight()};t.addResource(Utilities.onResize(function(){t.checkHeight()||n.bottomReached.call(t._viewElement)}));t._scrollHandler=function(){var i=$(window),r=i.height(),u=i.scrollTop(),f=$(document).height();f-r-u<200&&n.bottomReached.call(t._viewElement)};$(window).on("scroll",t._scrollHandler)},t.prototype.checkHeight=function(){var n=$(window),t=n.height(),i=n.scrollTop(),r=$(document).height();return r-t-i>200},t.prototype.dispose=function(){var t=this;$(window).off("scroll",t._scrollHandler);n.prototype.dispose.call(this)},t}(Disposable);n.BindingBase=t})(t=n.InfinitelyScrollablePage||(n.InfinitelyScrollablePage={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._element=n}return n.prototype.updateStyle=function(n,t){var i=this;$(i._element).css(t)},n}();n.BindingBase=t})(t=n.JQStyle||(n.JQStyle={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(n){t.call(this,null);var i=this;i._element=n;i._scrollbarBuffer=20;i._layoutRecentlyRan=!1;i._layoutRequestPending=!1;i._layoutOnResizeDelay=50}return __extends(i,t),i.prototype.init=function(n){var t=this;t._desiredRowHeight=n;t.addResource(Utilities.onResize(t.requestLayoutContent,t))},i.prototype.updateElements=function(n,t){var i=this;i._viewElements=t;i.layoutContent(n)},i.prototype.requestLayoutContent=function(n){var t=this;if(!t._layoutRecentlyRan){t._layoutRecentlyRan=!0;t.layoutContent(n);return}t._layoutRequestPending||(t._layoutRequestPending=!0,setTimeout(function(){t._layoutRequestPending=!1;t._layoutRecentlyRan=!1;t.requestLayoutContent(n)},t._layoutOnResizeDelay))},i.prototype.layoutContent=function(t){var i=this,u=$(i._element).width(),r,a,h,c;if(i._viewElements&&i._viewElements.length!==0&&!(u<=0)){u-=i._scrollbarBuffer;var o=i._element.children,l=o.length,f=0,e=0;for(r=0;r<l;r++){if(a=o[r],h=n.ViewElement.dataFor(a),i._viewElements.indexOf(h)<0)throw new Error("A dom element has a child that doesn't have a corresponding liquid layout element.");var v=i.getNaturalSize(h,t),y=h.getMarginWidth(),p=i.scaleWidth(v,i._desiredRowHeight),s=p+y;f+s>=u?(c=u-f,s/2<c?(c-=s,i.adjustRow(o,e,r,u),e=r+1,f=0):(i.adjustRow(o,e,r-1,u),e=r,f=s,f>=u&&(c=u-f,i.adjustRow(o,r,r,u),e=r+1,f=0))):f+=s}l!=e&&i.adjustRow(o,e,l-1,0)}},i.prototype.adjustRow=function(t,i,r,u){for(var c,a,o,v,e=this,s=e._desiredRowHeight,l=0,h=[],f=i;f<=r;f++)o=t[f],c=n.ViewElement.dataFor(o),h[f]=e.getNaturalSize(c),a=c.getMarginWidth(),l+=e.scaleWidth(h[f],e._desiredRowHeight)+a;for(u>0&&(s=u/l*e._desiredRowHeight),f=i;f<=r;f++)o=t[f],v=e.scaleWidth(h[f],s),o.style.height=s+"px",o.style.width=v+"px"},i.prototype.getNaturalSize=function(n,t){var u=this,r;return r=t?t.watchValue(n.naturalSize):n.naturalSize.getValue(),(r===undefined||r.width===undefined||r.width===0||r.height===undefined||r.height===0)&&(r=new Size(u._desiredRowHeight,u._desiredRowHeight)),r.width/r.height>i._maxImageRatio?r.width=r.height*i._maxImageRatio:r.height/r.width>i._maxImageRatio&&(r.height=r.width*i._maxImageRatio),r},i.prototype.scaleWidth=function(n,t){if(n.height===0)return n.width;var i=n.width/n.height;return t*i},i._maxImageRatio=3,i}(Disposable);t.BindingBase=i})(i=t.LiquidLayout||(t.LiquidLayout={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(n){t.call(this,null);var i=this;i._element=n;i._scrollbarBuffer=20;i._layoutRecentlyRan=!1;i._layoutRequestPending=!1;i._layoutDelay=50}return __extends(i,t),i.prototype.init=function(n){var t=this;t._allViewElement=n.allContentPieces;t._hasDisplayedElements=n.hasDisplayedElements;t._nextProvider=n.nextProvider;t._providerDecompNexts=n.providerDecompNexts;t._providerRules=n.providerRules;t._elementTopMargin=n.elementTopMargin;t._elementBottomMargin=n.elementBottomMargin;t._elementLeftPadding=n.elementLeftPadding;t.addResource(Utilities.onResize(t.requestLayoutContent,t))},i.prototype.updateElements=function(n,t){var i=this;n.watch(t);i._liquidElementsSet=t;i.requestLayoutContent(n)},i.prototype.requestLayoutContent=function(n){var t=this;if(!t._layoutRecentlyRan){t._layoutRecentlyRan=!0;t.layoutContent(n);return}t._layoutRequestPending||(t._layoutRequestPending=!0,setTimeout(function(){t._layoutRequestPending=!1;t._layoutRecentlyRan=!1;t.requestLayoutContent(n)},t._layoutDelay))},i.prototype.layoutContent=function(t){var i=this,l,p,nt,ut,k,c,tt,h,b,e,it,o;if((i._currentTop=0,l=$(i._element).width(),l-=i._scrollbarBuffer,!(l<=0))&&i._hasDisplayedElements.getWatchedValue(t)&&i._liquidElementsSet&&(p=i._liquidElementsSet.getValue(),!jQuery.isEmptyObject(p))){var g=i._providerRules.getWatchedValue(t),r=[],w={};for(nt in g)p[g[nt].provider].length>0&&r.push(g[nt]),w[g[nt].provider]=0;if(r!=null&&r.length!=0){var ft=i._element.children,ht=ft.length,a=0,f=[],u=0,s=0,v=0,y=[],rt=0;for(ut in p)rt+=p[ut].length;for(k=!1;y.length<rt;){if(h=r[u].provider,b=p[h],w[h]>=b.length){if(i._providerDecompNexts.getValue()[h]!=null){for(i.updateNextProvider(i._providerDecompNexts.getValue()[h]),k=!0,o=0;o<f.length;o++)y.removefirst(f[o]);break}f.length>0&&(i.adjustRow(f,0,f.length,0,u,s==0),s=0,v=0,f=[],a=0);u=(u+1)%r.length;continue}if(e=b[w[h]++],v++,c=e.children.first().domElement,c.style.visibility="hidden",c.style.top="0px",e.isSelfAdjusting){f.length>0&&i.adjustRow(f,0,f.length,0,u,s==0);i._currentTop+=i._elementBottomMargin+i._elementTopMargin;c.style.visibility="visible";c.style.width=l-i._elementLeftPadding+"px";c.style.top=i._currentTop+"px";c.style.left=i._elementLeftPadding+"px";c.style.marginTop="0px";i._currentTop+=c.clientHeight+i._elementBottomMargin;y.push(e);v>=r[u].minNumberOfItems&&(s=0,a=0,v=0,u=(u+1)%r.length);continue}var et=i.getNaturalSize(e,t),ot=e.getMarginWidth(),st=i.scaleWidth(et,r[u].preferedSize),d=st+ot;a+d>=l?(tt=l-a,d/2<tt?(tt-=d,f.push(e),y.push(e),i.adjustRow(f,0,f.length,l,u,s==0),s++,f=[],v>=r[u].minNumberOfItems&&s>=r[u].minNumberOfItems&&(s=0,v=0,u=(u+1)%r.length),a=0):(i.adjustRow(f,0,f.length,l,u,s==0),a=d,s++,v>=r[u].minNumberOfItems&&s>=r[u].minNumberOfItems?(s=0,v=0,a=0,f=[],w[h]--,u=(u+1)%r.length):(f=[e],y.push(e)))):(a+=d,f.push(e),y.push(e))}for(o=0;o<r.length;o++)for(h=r[o].provider,b=p[h];w[h]<b.length;)e=b[w[h]++],it=e.children.first().domElement,it.style.visibility="hidden",it.style.top="0px",y.push(e);if(n.applyUpdate(function(){i._allViewElement.setValue(y)}),!k){for(o=0;o<r.length;o++)i._providerDecompNexts.getValue()[r[o].provider]!=null&&(i.updateNextProvider(i._providerDecompNexts.getValue()[r[o].provider]),k=!0);k||i.updateNextProvider(null)}}}},i.prototype.updateNextProvider=function(t){var i=this;n.applyUpdate(function(){i._nextProvider.setValue(t)},1)},i.prototype.adjustRow=function(n,t,i,r,u,f){for(var y,l,s,p,o=this,a=o._providerRules.getValue(),h=a[u].preferedSize,w=0,v=[],c=0,e=t;e<i;e++)y=n[e],s=n[e].children.first().domElement,v[e]=o.getNaturalSize(y),l=y.getMarginWidth(),u==1&&e==t&&(l=0),w+=o.scaleWidth(v[e],a[u].preferedSize)+l;for(r>0&&(h=r/w*a[u].preferedSize),e=t;e<i;e++)s=n[e].children.first().domElement,e==t?(c+=o._elementLeftPadding,o._currentTop+=f?o._elementTopMargin:o._elementBottomMargin):c+=l,p=o.scaleWidth(v[e],h),s.style.visibility="visible",s.style.height=h+"px",s.style.width=p+"px",s.style.top=o._currentTop+"px",s.style.left=c+"px",s.style.marginTop="0px",c+=p;o._currentTop+=h},i.prototype.getNaturalSize=function(n,t){var u=this,r;return r=t?t.watchValue(n.naturalSize):n.naturalSize.getValue(),(r===undefined||r.width===undefined||r.width===0||r.height===undefined||r.height===0)&&(r=new Size(0,0)),r.width/r.height>i._maxImageRatio?r.width=r.height*i._maxImageRatio:r.height/r.width>i._maxImageRatio&&(r.height=r.width*i._maxImageRatio),r},i.prototype.scaleWidth=function(n,t){if(n.height===0)return n.width;var i=n.width/n.height;return t*i},i._maxImageRatio=3,i}(Disposable);t.BindingBase=i})(i=t.MagazineLiquidLayout||(t.MagazineLiquidLayout={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._element=n}return n.prototype.updateNamespaceAttr=function(n,t){for(var i,u=this,f=t.length,r=0;r<f;r++)i=t[r],u._element.setAttributeNS(i.namespaceUri===undefined?null:i.namespaceUri,i.qualifiedName,i.value)},n}();n.BindingBase=t})(t=n.NamespaceAttr||(n.NamespaceAttr={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateProps=function(n,t){var r=this._el;for(var i in t)r[i]=t[i]},n}();n.BindingBase=t})(t=n.Props||(n.Props={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(n,t,i){var r=this;if(r._element=n,r._viewElement=i,!(r._element instanceof HTMLSelectElement))throw new Error("The select binding only works on select elements.");}return t.prototype.init=function(t){var i=this;if(t){i._selectedIndex=t;i._onChangeHandler=function(){i._element.selectedIndex!=i._selectedIndex.getValue()&&n.applyUpdate(function(){i._selectedIndex.setValue(i._element.selectedIndex)})};$(i._element).on("change",i._onChangeHandler)}},t.prototype.updateSelectedIndex=function(n){var t=this,i;t._selectedIndex!==undefined&&t._selectedIndex!==null&&(i=n.watchValue(t._selectedIndex),t._element.selectedIndex=i)},t.prototype.updateOptions=function(n,t){var i=this,f,r,u;if(t!==null){for(i._element.options.length=0,f=t.length,r=0;r<f;r++)u=t[r],i._element.options[r]=new Option(u.text,u.value);i._selectedIndex!==undefined&&i._selectedIndex!==null&&(i._element.selectedIndex=i._selectedIndex.getValue())}},t.prototype.dispose=function(){var n=this;$(n._element).off("change",n._onChangeHandler)},t}();t.BindingBase=i})(i=t.Select||(t.Select={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateStyle=function(n,t){var r=this,u,i;for(u in t)i=t[u],r._el.style[u]=i||"",u=="float"?r._el.style.cssFloat=i||"":u=="flex-shrink"?(r._el.style.flexShrink=i||"",r._el.style["-ms-flex-negative"]=i||"",r._el.style["-webkit-flex-shrink"]=i||""):u=="flex-grow"?(r._el.style.flexGrow=i||"",r._el.style["-ms-flex-positive"]=i||"",r._el.style["-webkit-flex-grow"]=i||""):u=="background-color"?r._el.style.backgroundColor=i||"":u=="background-image"?r._el.style.backgroundImage=i||"":u=="margin-left"?r._el.style.marginLeft=i||"":u=="margin-right"?r._el.style.marginRight=i||"":u=="margin-top"?r._el.style.marginTop=i||"":u=="margin-bottom"&&(r._el.style.marginBottom=i||"")},n}();n.BindingBase=t})(t=n.Style||(n.Style={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateText=function(n,t){var i=this;i._el.textContent=t||""},n}();n.BindingBase=t})(t=n.Text||(n.Text={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(n){var t=this;t._element=n}return t.prototype.init=function(n){var t,i;if(n!==null){if(t=this,t._context=n.context,t._getValue=n.getValue,t._setValue=n.setValue,i=t._element.tagName.toLowerCase(),i!=="input"&&i!=="select"&&i!=="option"&&i!=="textarea")throw new Error("The value binding only works on input elements.");t._onChangeHandler=function(){t.commitValue()};$(t._element).on("change",t._onChangeHandler)}},t.prototype.commitValue=function(){var t=this;t._element.value!=t._getValue.call(t._context)&&n.applyUpdate(function(){t._setValue.call(t._context,t._element.value)},1)},t.prototype.updateValue=function(n){var t=this;t._context!==undefined&&t._getValue!==undefined&&(t._element.value=t._getValue.call(t._context,n))},t.prototype.dispose=function(){var n=this;$(n._element).off("change",n._onChangeHandler)},t}();t.BindingBase=i})(i=t.Value||(t.Value={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateVisible=function(n,t){var i=this;i._el.style.display=t?"":"none"},n}();n.BindingBase=t})(t=n.Visible||(n.Visible={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={}));KeyCodeType={BackspaceKey:8,TabKey:9,EnterKey:13,AltKey:18,EscapeKey:27,SpaceKey:32,EndKey:35,HomeKey:36,LeftArrowKey:37,UpArrowKey:38,RightArrowKey:39,DownArrowKey:40,InsertKey:45,DeleteKey:46,OneKey:49,EqualFFKey:61,AKey:65,BKey:66,CKey:67,DKey:68,EKey:69,FKey:70,GKey:71,HKey:72,IKey:73,JKey:74,KKey:75,MKey:77,NKey:78,PKey:80,RKey:82,SKey:83,TKey:84,UKey:85,VKey:86,WKey:87,XKey:88,YKey:89,ZKey:90,AddKey:107,F6Key:117,EqualKey:187,PeriodKey:190,SlashKey:191};KeyCodes=KeyCodeType,function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._attrArgs=e;s=o._attrWatcher=n.watcherTag(4800663,o,f,o._resolveAttr);f._subscribeToWatchable(s,2);o._attrWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._attrWatcher.resolve()},i.prototype._resolveAttr=function(n){var t=this,i=t._attrArgs.call(t._ve,n);t.updateAttr(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Attr||(t.Attr={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o.init(e);s=o._autoDownloadWatcher=n.watcherTag(4800663,o,f,o._resolveAutoDownload);f._subscribeToWatchable(s,2);o._autoDownloadWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._autoDownloadWatcher.resolve()},i.prototype._resolveAutoDownload=function(n){var t=this;t.updateAutoDownload(n)},i}(t.BindingBase);t.Binding=i})(i=t.AutoDownload||(t.AutoDownload={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.AutoUpload||(n.AutoUpload={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e,o){var s,h;t.call(this,i,r,u);s=this;s._ve=u;s.init(e);s._centerArgs=o;h=s._centerWatcher=n.watcherTag(4800663,s,f,s._resolveCenter);f._subscribeToWatchable(h,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._centerWatcher.resolve()},i.prototype._resolveCenter=function(n){var t=this,i=t._centerArgs.call(t._ve,n);t.updateCenter(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Center||(t.Center={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e,o){var s,h;t.call(this,i,r,u);s=this;s._ve=u;s.init(e);s._elementsArgs=o;h=s._elementsWatcher=n.watcherTag(4800663,s,f,s._resolveElements);f._subscribeToWatchable(h,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._elementsWatcher.resolve()},i.prototype._resolveElements=function(n){var t=this,i=t._elementsArgs.call(t._ve,n);t.updateElements(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.ButtonsLiquidLayout||(t.ButtonsLiquidLayout={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o.init(e);s=o._checkedWatcher=n.watcherTag(4800663,o,f,o._resolveChecked);f._subscribeToWatchable(s,2);o._checkedWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._checkedWatcher.resolve()},i.prototype._resolveChecked=function(n){var t=this;t.updateChecked(n)},i}(t.BindingBase);t.Binding=i})(i=t.Checked||(t.Checked={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._cssArgs=e;s=o._cssWatcher=n.watcherTag(4800663,o,f,o._resolveCss);f._subscribeToWatchable(s,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._cssWatcher.resolve()},i.prototype._resolveCss=function(n){var t=this,i=t._cssArgs.call(t._ve,n);t.updateCss(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Css||(t.Css={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r){n.call(this,t,i,r);var u=this;u._ve=r;u.init()}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.DisableDragDrop||(n.DisableDragDrop={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e,o){var s,h;t.call(this,i,r,u);s=this;s._ve=u;s.init(e);s._optionsArgs=o;h=s._optionsWatcher=n.watcherTag(4800663,s,f,s._resolveOptions);f._subscribeToWatchable(h,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._optionsWatcher.resolve()},i.prototype._resolveOptions=function(n){var t=this,i=t._optionsArgs.call(t._ve,n);t.updateOptions(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Draggable||(t.Draggable={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.Droppable||(n.Droppable={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._enableArgs=e;s=o._enableWatcher=n.watcherTag(4800663,o,f,o._resolveEnable);f._subscribeToWatchable(s,2);o._enableWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._enableWatcher.resolve()},i.prototype._resolveEnable=function(n){var t=this,i=t._enableArgs.call(t._ve,n);t.updateEnable(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Enable||(t.Enable={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.Events||(n.Events={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o.init(e);s=o._focusWatcher=n.watcherTag(4800663,o,f,o._resolveFocus);f._subscribeToWatchable(s,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._focusWatcher.resolve()},i.prototype._resolveFocus=function(n){var t=this;t.updateFocus(n)},i}(t.BindingBase);t.Binding=i})(i=t.Focus||(t.Focus={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.HtmlDispose||(n.HtmlDispose={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o.init(e);s=o._focusWatcher=n.watcherTag(4800663,o,f,o._resolveFocus);f._subscribeToWatchable(s,4);s=o._focusableWatcher=n.watcherTag(4800663,o,f,o._resolveFocusable);f._subscribeToWatchable(s,2);o._focusableWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._focusableWatcher.resolve();n==4&&t._focusWatcher.resolve()},i.prototype._resolveFocus=function(n){var t=this;t.updateFocus(n)},i.prototype._resolveFocusable=function(n){var t=this;t.updateFocusable(n)},i}(t.BindingBase);t.Binding=i})(i=t.Focusable||(t.Focusable={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._iframeArgs=e;s=o._iframeWatcher=n.watcherTag(4800663,o,f,o._resolveIframe);f._subscribeToWatchable(s,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._iframeWatcher.resolve()},i.prototype._resolveIframe=function(n){var t=this,i=t._iframeArgs.call(t._ve,n);t.updateIframe(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Iframe||(t.Iframe={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.InfinitelyScrollableArea||(n.InfinitelyScrollableArea={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.InfinitelyScrollablePage||(n.InfinitelyScrollablePage={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._styleArgs=e;s=o._styleWatcher=n.watcherTag(4800663,o,f,o._resolveStyle);f._subscribeToWatchable(s,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._styleWatcher.resolve()},i.prototype._resolveStyle=function(n){var t=this,i=t._styleArgs.call(t._ve,n);t.updateStyle(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.JQStyle||(t.JQStyle={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e,o){var s,h;t.call(this,i,r,u);s=this;s._ve=u;s.init(e);s._elementsArgs=o;h=s._elementsWatcher=n.watcherTag(4800663,s,f,s._resolveElements);f._subscribeToWatchable(h,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._elementsWatcher.resolve()},i.prototype._resolveElements=function(n){var t=this,i=t._elementsArgs.call(t._ve,n);t.updateElements(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.LiquidLayout||(t.LiquidLayout={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e,o){var s,h;t.call(this,i,r,u);s=this;s._ve=u;s.init(e);s._elementsArgs=o;h=s._elementsWatcher=n.watcherTag(4800663,s,f,s._resolveElements);f._subscribeToWatchable(h,4)}return __extends(i,t),i.prototype.update=function(n){var t=this;n==4&&t._elementsWatcher.resolve()},i.prototype._resolveElements=function(n){var t=this,i=t._elementsArgs.call(t._ve,n);t.updateElements(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.MagazineLiquidLayout||(t.MagazineLiquidLayout={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._namespaceAttrArgs=e;s=o._namespaceAttrWatcher=n.watcherTag(4800663,o,f,o._resolveNamespaceAttr);f._subscribeToWatchable(s,2);o._namespaceAttrWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._namespaceAttrWatcher.resolve()},i.prototype._resolveNamespaceAttr=function(n){var t=this,i=t._namespaceAttrArgs.call(t._ve,n);t.updateNamespaceAttr(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.NamespaceAttr||(t.NamespaceAttr={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._propsArgs=e;s=o._propsWatcher=n.watcherTag(4800663,o,f,o._resolveProps);f._subscribeToWatchable(s,2);o._propsWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._propsWatcher.resolve()},i.prototype._resolveProps=function(n){var t=this,i=t._propsArgs.call(t._ve,n);t.updateProps(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Props||(t.Props={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e,o){var s,h;t.call(this,i,r,u);s=this;s._ve=u;s.init(e);s._optionsArgs=o;h=s._optionsWatcher=n.watcherTag(4800663,s,f,s._resolveOptions);f._subscribeToWatchable(h,2);h=s._selectedIndexWatcher=n.watcherTag(4800663,s,f,s._resolveSelectedIndex);f._subscribeToWatchable(h,2);s._optionsWatcher.resolve();s._selectedIndexWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&(t._optionsWatcher.resolve(),t._selectedIndexWatcher.resolve())},i.prototype._resolveOptions=function(n){var t=this,i=t._optionsArgs.call(t._ve,n);t.updateOptions(n,i)},i.prototype._resolveSelectedIndex=function(n){var t=this;t.updateSelectedIndex(n)},i}(t.BindingBase);t.Binding=i})(i=t.Select||(t.Select={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._styleArgs=e;s=o._styleWatcher=n.watcherTag(4800663,o,f,o._resolveStyle);f._subscribeToWatchable(s,2);o._styleWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._styleWatcher.resolve()},i.prototype._resolveStyle=function(n){var t=this,i=t._styleArgs.call(t._ve,n);t.updateStyle(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Style||(t.Style={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._textArgs=e;s=o._textWatcher=n.watcherTag(4800663,o,f,o._resolveText);f._subscribeToWatchable(s,2);o._textWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._textWatcher.resolve()},i.prototype._resolveText=function(n){var t=this,i=t._textArgs.call(t._ve,n);t.updateText(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Text||(t.Text={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o.init(e);s=o._valueWatcher=n.watcherTag(4800663,o,f,o._resolveValue);f._subscribeToWatchable(s,2);o._valueWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._valueWatcher.resolve()},i.prototype._resolveValue=function(n){var t=this;t.updateValue(n)},i}(t.BindingBase);t.Binding=i})(i=t.Value||(t.Value={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(t){function i(i,r,u,f,e){var o,s;t.call(this,i,r,u);o=this;o._ve=u;o._visibleArgs=e;s=o._visibleWatcher=n.watcherTag(4800663,o,f,o._resolveVisible);f._subscribeToWatchable(s,2);o._visibleWatcher.resolve()}return __extends(i,t),i.prototype.update=function(n){var t=this;n==2&&t._visibleWatcher.resolve()},i.prototype._resolveVisible=function(n){var t=this,i=t._visibleArgs.call(t._ve,n);t.updateVisible(n,i)},i}(t.BindingBase);t.Binding=i})(i=t.Visible||(t.Visible={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(TDB||(TDB={}));
//# sourceMappingURL=tdb_min.js.map
