var __extends,MathUtils,Platform,AnimationKernel,CssAnimation,StoryPageSettings,StoryApp,StoryPageMain;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t){this._storyPageSettings=n;this._overrideRenderModel=TDB.watchableTag(9286148,this,null);this._renderModelRoot=t}return n.prototype.getRenderModel=function(n){var t=this,i=t._overrideRenderModel.getWatchedValue(n);return i?i:t._renderModelRoot.getWatchedValue(n)},n.prototype.overrideRenderModel=function(n){var t=this;TDB.applyUpdate(function(){t._overrideRenderModel.setValue(n)})},n.prototype.renderModelOverriden=function(n){return!!this._overrideRenderModel.getWatchedValue(n)},n.prototype.watchForSync=function(n){this.getRenderModel(n).getEditVersion(n)},n.prototype.getLastSyncTime=function(){return""},n.prototype.getStoryId=function(){return this._storyPageSettings.StoryId},n.prototype.getLookupId=function(){return this._storyPageSettings.LookupId},n}();n.CurrentStory=t})(t=n.Common||(n.Common={}))})(t=n.View||(n.View={}))})(StoryApp||(StoryApp={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(n){var t=function(t){function i(n,r,u){var f,o,h,e,c,l,a,v,s;for(t.call(this),f=this,f._store=n,f._propDefaultValues=r,f._propNotifierMaps=u,f._parents={},f._propNotifiers={},f._childNotifiers={},f._parentNotifiers={},o=n.getPropBagIds(),h=o.length,e=0;e<h;e++)f.initializeObjectState(o[e]);for(e=0;e<h;e++)if(c=o[e],l=n.getPropBag(c),i.IsNodeBag(l))for(a=l.children,v=a.length,s=0;s<v;s++){var p=a[s],y=n.getPropBag(p),w=f.getMeaningFromEdgeBag(y);f.notifyParentsChanged(c,w,[],y.children)}f._store.registerUpdateCallback(function(n){f.updatePropBags(n)});f._store.registerDisposalCallback(function(n){f.disposePropBags(n)})}return __extends(i,t),i.prototype.createObject=function(t,r){var u=this,f=u._store,e,o;if(r||(r=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),r.length>i.MaxNodeIdLength)throw new Error("Invalid ID.");if(u.containsObject(r))throw new Error("Object already exists.");return e=Object.create(u._propDefaultValues[t]),o=new n.PropBag(r,i.NodeTypePrefix+t,e,[]),f.addPropBag(o),f.markPropBagDirty(r),u.initializeObjectState(r),r},i.prototype.containsObject=function(n){var t=this;return t._store.getPropBag(n)!==undefined},i.prototype.getObjectType=function(n){var t=this;if(!t.containsObject(n))throw new Error("Object doesn't exist.");return t.stripTypePrefix(t._store.getPropBag(n).type)},i.prototype.getProperty=function(n,t,i){var r=this,f,e;if(!r.containsObject(n))throw new Error("Object doesn't exist.");if(f=r._store.getPropBag(n),e=f.props[t],i){var h=r.getObjectType(n),o=r._propNotifierMaps[h][t],s=r._propNotifiers[n],u=s[o];u||(u=s[o]=TDB.notifierTag(5306139,n));i.watch(u)}return e},i.prototype.setProperty=function(n,t,i,r){var u,f;if(r===void 0&&(r=!0),u=this,f=u._store,!u.containsObject(n))throw new Error("Object doesn't exist.");var e=f.getPropBag(n),o=e.props,s=u.getObjectType(e.id),h=e.createCopy();i!==o[t]&&(i!==u._propDefaultValues[s][t]?o[t]=i:delete o[t],r&&(f.markPropBagDirty(n,h),u.notifyPropertyChanged(n,t)))},i.prototype.updateProperty=function(n,t){var i=this,u=i._store;if(!i.containsObject(n))throw new Error("Object doesn't exist.");var r=u.getPropBag(n),f=r.props,o=i.getObjectType(r.id),e=r.createCopy();if(!f.hasOwnProperty(t))throw new Error("Property not set");u.markPropBagDirty(n,e);i.notifyPropertyChanged(n,t)},i.prototype.resetProperty=function(n,t){var i=this,r=i._store;if(!i.containsObject(n))throw new Error("Object doesn't exist.");var u=r.getPropBag(n),f=u.props,e=u.createCopy();f.hasOwnProperty(t)&&(delete f[t],r.markPropBagDirty(n,e),i.notifyPropertyChanged(n,t))},i.prototype.addRelationship=function(n,t,r,u){var f=this,s=f._store;if(!f.containsObject(n))throw new Error("Source object doesn't exist.");if(!f.containsObject(t))throw new Error("Target object doesn't exist.");if(!r||r.length>i._maxEdgeMeaningLength)throw new Error("Invalid meaning.");var e=f.getEdgeBag(n,r,!0),o=e.children,h=e.createCopy();if(o.indexOf(t)!==-1)throw new Error("Relationship already exists.");u===undefined?o.push(t):o.splice(u,0,t);s.markPropBagDirty(e.id,h);f.notifyChildrenChanged(n,r);f.notifyParentChanged(n,t,r,!0)},i.prototype.removeRelationship=function(n,t,r){var u=this,e=u._store,f;if(!u.containsObject(n))throw new Error("Source object doesn't exist.");if(!u.containsObject(t))throw new Error("Target object doesn't exist.");if(!r||r.length>i._maxEdgeMeaningLength)throw new Error("Invalid meaning.");if(f=u.getEdgeBag(n,r),!f)throw new Error("Relationship doesn't exist.");var l=f.createCopy(),o=f.children,s=o.indexOf(t);if(s===-1)throw new Error("Relationship doesn't exist.");if(o.splice(s,1),e.markPropBagDirty(f.id,l),o.length===0){var h=e.getPropBag(n),a=h.createCopy(),c=h.children,v=c.indexOf(f.id);c.splice(v,1);e.markPropBagDirty(n,a)}u.notifyChildrenChanged(n,r);u.notifyParentChanged(n,t,r,!1)},i.prototype.setRelationships=function(n,t,r){var f=this,s=f._store,e,o,h,u;if(!f.containsObject(n))throw new Error("Source object doesn't exist.");for(e=0;e<t.length;e++)if(!f.containsObject(t[e]))throw new Error("Target object doesn't exist.");if(!r||r.length>i._maxEdgeMeaningLength)throw new Error("Invalid meaning.");if(t.length>0)u=f.getEdgeBag(n,r,!0),h=u.createCopy(),o=u.children,u.children=t,s.markPropBagDirty(u.id,h);else if(u=f.getEdgeBag(n,r),u){var c=s.getPropBag(n),a=c.createCopy(),l=c.children,v=l.indexOf(u.id);o=u.children;l.splice(v,1);s.markPropBagDirty(n,a)}else o=[];f.notifyChildrenChanged(n,r);f.notifyParentsChanged(n,r,o,t)},i.prototype.getObjectsRelatedFrom=function(n,t,r){var f=this,e,u,o;if(!f.containsObject(n))throw new Error("Source object doesn't exist.");if(!t||t.length>i._maxEdgeMeaningLength)throw new Error("Invalid meaning.");return r&&(e=f._childNotifiers[n],u=e[t],u||(u=e[t]=TDB.notifierTag(5306140,n+" "+t)),r.watch(u)),o=f.getEdgeBag(n,t),o?o.children:null},i.prototype.getObjectsRelatedTo=function(n,t,r){var f=this,e,u;if(!f.containsObject(n))throw new Error("Target object doesn't exist.");if(!t||t.length>i._maxEdgeMeaningLength)throw new Error("Invalid meaning.");return r&&(e=f._parentNotifiers[n],u=e[t],u||(u=e[t]=TDB.notifierTag(5306141,n+" "+t)),r.watch(u)),f._parents[n][t]||null},i.prototype.isExternalObject=function(n){var t=this;if(!t.containsObject(n))throw new Error("Object doesn't exist.");return t._store.getPropBag(n).externalDataId!==undefined},i.prototype.getExternalDataId=function(n){var t=this;if(!t.containsObject(n))throw new Error("Object doesn't exist.");if(!t.isExternalObject(n))throw new Error("Object is not externally backed.");return t._store.getPropBag(n).externalDataId},i.prototype.registerObjectDisposalCallback=function(n){var t=this;t._objectDisposalCallback=n},i.prototype.updatePropBags=function(n){for(var r,f=this,t=0,u=n.length;t<u;t++)r=n[t],(i.IsNodeBag(r)||i.IsExternalDataBag(r))&&f.updatePropBag(r);for(t=0,u=n.length;t<u;t++)r=n[t],i.IsEdgeBag(r)&&f.updatePropBag(r)},i.prototype.isEmpty=function(){var n=this;return n._store.getPropBagIds().length===0},i.GetObjectTypeFromPropBagType=function(n){var r=this,t=i.NodeTypePrefix;return n&&n.substr(0,t.length)===t?n.substr(t.length):undefined},i.prototype.notifyPropertiesChanged=function(n,t,i){var e=this,s=e.getObjectType(n),h=e._propNotifierMaps[s],c=e._propNotifiers[n],r,u,f,o;for(u in t)t[u]!==i[u]&&(r||(r={}),f=h[u],r[f]||(o=c[f],o&&o.notify(),r[f]=!0))},i.prototype.notifyPropertyChanged=function(n,t){var i=this,u=i.getObjectType(n),f=i._propNotifierMaps[u],e=i._propNotifiers[n],r=e[f[t]];r&&r.notify()},i.prototype.notifyChildrenChanged=function(n,t){var u=this,r=u._childNotifiers[n],i;r&&(i=r[t],i&&i.notify())},i.prototype.notifyParentsChanged=function(n,t,i,r){for(var e,h,u,o,s=this,c=r.length,f=0;f<c;f++)e=r[f],i&&i.indexOf(e)!==-1||s.notifyParentChanged(n,e,t,!0);for(h=i.length,u=0;u<h;u++)o=i[u],r&&r.indexOf(o)!==-1||s.notifyParentChanged(n,o,t,!1)},i.prototype.notifyParentChanged=function(n,t,i,r){var f=this,e=f._parentNotifiers[t];if(e){var o=f._parents[t],s=e[i],u=o[i];u||(u=o[i]=[]);r?u.push(n):u.splice(u.indexOf(n),1);s&&s.notify()}},i.IsNodeBag=function(n){var t=this;return n.type!==undefined&&n.type.substr(0,i.NodeTypePrefix.length)==i.NodeTypePrefix},i.IsEdgeBag=function(n){var t=this;return n.type!==undefined&&n.type.substr(0,i.NodeTypePrefix.length)==i.EdgeTypePrefix},i.IsExternalDataBag=function(n){var t=this;return n.externalDataId!==undefined},i.prototype.initializeObjectState=function(n){var t=this,r=t._store.getPropBag(n);if(i.IsNodeBag(r)||i.IsExternalDataBag(r)){if(t._propNotifiers[n]!==undefined)throw new Error("Property notifiers already added for object "+n);if(t._propNotifiers[n]={},t._parents[n]!==undefined)throw new Error("Parents already added for object "+n);if(t._parents[n]={},t._childNotifiers[n]!==undefined)throw new Error("Child notifiers already added for object "+n);if(t._childNotifiers[n]={},t._parentNotifiers[n]!==undefined)throw new Error("Parent notifiers already added for object "+n);t._parentNotifiers[n]={}}},i.prototype.clearObjectState=function(n){var t=this;delete t._parents[n];delete t._propNotifiers[n];delete t._childNotifiers[n];delete t._parentNotifiers[n]},i.prototype.getEdgeBag=function(t,i,r){for(var f,l,h=this,u=h._store,e=u.getPropBag(t),o=e.children,y=o.length,s=0;s<o.length;s++){var a=o[s],c=u.getPropBag(a),v=h.getMeaningFromEdgeBag(c);if(v===i)return c}if(r)return f=new n.PropBag(t+i,"Edge-"+i,{},[]),u.addPropBag(f),u.markPropBagDirty(f.id),l=e.createCopy(),e.children.push(f.id),u.markPropBagDirty(e.id,l),f},i.prototype.stripTypePrefix=function(n){var t=this;return n.substring(i.NodeTypePrefix.length)},i.prototype.getMeaningFromEdgeBag=function(n){var t=this;return t.stripTypePrefix(n.type)},i.prototype.getObjectIdFromEdgeBag=function(n){var i=this,t=n.id,r=n.type,u=i.stripTypePrefix(r);return t.substr(0,t.length-u.length)},i.prototype.updatePropBag=function(n){var t=this;if(i.IsNodeBag(n)||i.IsExternalDataBag(n))t.updateNodeBag(n);else if(i.IsEdgeBag(n))t.updateEdgeBag(n);else throw new Error("Unknown type of bag.");},i.prototype.updateNodeBag=function(n){var t=this,r=t._store,i=n.id,f=r.getPropBag(i),u,e,o,s;if(f){var l=f.props,v=n.props,h=f.children,a=h.length,c=n.children,y=c.length;for(r.addPropBag(n),t.notifyPropertiesChanged(i,l,n.props),u=0;u<a;u++)e=h[u],c.indexOf(e)===-1&&(o=r.getPropBag(e),s=t.getMeaningFromEdgeBag(o),t.notifyChildrenChanged(i,s),t.notifyParentsChanged(i,s,o.children,[]))}else r.addPropBag(n),t.initializeObjectState(i)},i.prototype.updateEdgeBag=function(n){var t=this,i=t._store,e=n.id,r=t.getObjectIdFromEdgeBag(n),u=t.getMeaningFromEdgeBag(n),f=i.getPropBag(e),o=f?f.children:[],s=n.children;i.addPropBag(n);t.notifyChildrenChanged(r,u);t.notifyParentsChanged(r,u,o,s)},i.prototype.disposePropBags=function(n){var t=this,u=n.filter(function(n){var r=t._store.getPropBag(n);return r&&(i.IsNodeBag(r)||i.IsExternalDataBag(r))}),r,f;for(t._objectDisposalCallback&&t._objectDisposalCallback(u),r=0;r<u.length;r++)f=u[r],t.clearObjectState(f)},i.NodeTypePrefix="Node-",i.EdgeTypePrefix="Edge-",i._maxEdgeMeaningLength=6,i.MaxNodeIdLength=14,i}(ObjectOM);n.GraphModel=t})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i=n.Model.GraphModel,r;(function(n){var a,ti,s,ii,b,k,d,l,h,g,ri,ui,fi,ei,c,nt,tt,it,rt,ut,e,f,ft,et,ot,st,v,oi,si,ht,hi,ct,y,p,ci,li,lt,at,t,ai,vi,yi,r,vt,yt,o,pt,wt,bt,u,pi,kt,dt,gt,wi,bi,ni;(function(n){n[n.RenderModelRoot=0]="RenderModelRoot";n[n.LayoutTree=1]="LayoutTree";n[n.LayoutNode=2]="LayoutNode";n[n.LayoutElement=3]="LayoutElement";n[n.ContainerLayoutElement=4]="ContainerLayoutElement";n[n.MediaViewportLayoutElement=5]="MediaViewportLayoutElement";n[n.TextLayoutElement=6]="TextLayoutElement";n[n.TextRunElement=7]="TextRunElement";n[n.TextBlockLayoutElement=8]="TextBlockLayoutElement";n[n.TextSection=9]="TextSection";n[n.TextParagraph=10]="TextParagraph";n[n.TextList=11]="TextList";n[n.DecorationLayoutElement=12]="DecorationLayoutElement";n[n.GraphicsLayoutElement=13]="GraphicsLayoutElement";n[n.ImageLayoutElement=14]="ImageLayoutElement";n[n.VideoLayoutElement=15]="VideoLayoutElement";n[n.MapLayoutElement=16]="MapLayoutElement";n[n.ProjectionLayoutElement=17]="ProjectionLayoutElement";n[n.ViewportLayoutElement=18]="ViewportLayoutElement";n[n.EmbedLayoutElement=19]="EmbedLayoutElement";n[n.ClientLayoutElement=20]="ClientLayoutElement";n[n.AgaveLayoutElement=21]="AgaveLayoutElement";n[n.StatusUpdateLayoutElement=22]="StatusUpdateLayoutElement";n[n.SceneGraphElement=23]="SceneGraphElement";n[n.ContainerSceneGraphElement=24]="ContainerSceneGraphElement";n[n.TextureSceneGraphElement=25]="TextureSceneGraphElement";n[n.AnimationSequence=26]="AnimationSequence";n[n.Animation=27]="Animation";n[n.AnimationTarget=28]="AnimationTarget";n[n.AnimationFunction=29]="AnimationFunction";n[n.AnimationTransition=30]="AnimationTransition";n[n.TransitionContainer=31]="TransitionContainer";n[n.TransitionEffect=32]="TransitionEffect";n[n.AnimationParameter=33]="AnimationParameter";n[n.StaticImage=34]="StaticImage";n[n.Path=35]="Path";n[n.LayoutDebugInfo=36]="LayoutDebugInfo";n[n.RuleResult=37]="RuleResult";n[n.InteractionModel=38]="InteractionModel";n[n.FsmNode=39]="FsmNode";n[n.FsmEdge=40]="FsmEdge";n[n.KeyFrame=41]="KeyFrame";n[n.TriggerSet=42]="TriggerSet";n[n.Trigger=43]="Trigger";n[n.DefaultAction=44]="DefaultAction";n[n.SelectMethod=45]="SelectMethod";n[n.TargetSelectMethod=46]="TargetSelectMethod";n[n.SwipeSelectMethod=47]="SwipeSelectMethod";n[n.ClientSelectMethod=48]="ClientSelectMethod";n[n.ClientSignal=49]="ClientSignal";n[n.EditModeClientSignal=50]="EditModeClientSignal";n[n.KeyboardSelectMethod=51]="KeyboardSelectMethod";n[n.KeyClick=52]="KeyClick";n[n.MouseSelectMethod=53]="MouseSelectMethod";n[n.CameraSelect=54]="CameraSelect";n[n.CameraSelectMethod=55]="CameraSelectMethod";n[n.TimingSelect=56]="TimingSelect";n[n.TimingSelectMethod=57]="TimingSelectMethod";n[n.StatelessRule=58]="StatelessRule";n[n.Transform=59]="Transform";n[n.RotationTransform2D=60]="RotationTransform2D";n[n.TranslateTransform2D=61]="TranslateTransform2D";n[n.ScaleTransform2D=62]="ScaleTransform2D";n[n.RotationTransform3D=63]="RotationTransform3D";n[n.TranslateTransform3D=64]="TranslateTransform3D";n[n.ScaleTransform3D=65]="ScaleTransform3D";n[n.LayoutContext=66]="LayoutContext";n[n.ContentProxy=67]="ContentProxy";n[n.AudioLayoutElement=68]="AudioLayoutElement";n[n.Root=69]="Root"})(n.ObjectType||(n.ObjectType={}));a=n.ObjectType,function(n){n[n.BorderRadius=0]="BorderRadius";n[n.MapPin=1]="MapPin";n[n.PaletteColorValue=2]="PaletteColorValue";n[n.SnapPoint=3]="SnapPoint";n[n.ClientState=4]="ClientState";n[n.TextStyle=5]="TextStyle";n[n.GeoCoordinate=6]="GeoCoordinate";n[n.Transition=7]="Transition";n[n.AnimationContainer=8]="AnimationContainer";n[n.AnimationEffect=9]="AnimationEffect";n[n.TransformOrigin=10]="TransformOrigin";n[n.NavigationMarker=11]="NavigationMarker";n[n.ContentNavigationMarkerCollection=12]="ContentNavigationMarkerCollection";n[n.AccessibilityInfo=13]="AccessibilityInfo";n[n.AriaAttribute=14]="AriaAttribute"}(n.StructType||(n.StructType={}));ti=n.StructType,function(n){n[n.WorldId=0]="WorldId";n[n.LayoutStyleId=1]="LayoutStyleId";n[n.StyleVersion=2]="StyleVersion";n[n.WorldVersion=3]="WorldVersion";n[n.EditVersion=4]="EditVersion";n[n.RemoteDesignObjects=5]="RemoteDesignObjects";n[n.Title=6]="Title";n[n.Culture=7]="Culture";n[n.PaletteColors=8]="PaletteColors";n[n.Device=9]="Device";n[n.ViewportHeight=10]="ViewportHeight";n[n.ViewportWidth=11]="ViewportWidth";n[n.PreviousLayoutSucceeded=12]="PreviousLayoutSucceeded";n[n.LayoutFailed=13]="LayoutFailed";n[n.ErrorMessage=14]="ErrorMessage";n[n.TextStyles=15]="TextStyles";n[n.UnhashedId=16]="UnhashedId";n[n.KeyFrameType=17]="KeyFrameType";n[n.ContentId=18]="ContentId";n[n.Opacity=19]="Opacity";n[n.Hidden=20]="Hidden";n[n.Animated=21]="Animated";n[n.ContentType=22]="ContentType";n[n.Flags=23]="Flags";n[n.Cursor=24]="Cursor";n[n.TransformOrigin=25]="TransformOrigin";n[n.AccessibilityInfo=26]="AccessibilityInfo";n[n.PositionLeft=27]="PositionLeft";n[n.PositionTop=28]="PositionTop";n[n.PositionWidth=29]="PositionWidth";n[n.PositionHeight=30]="PositionHeight";n[n.BorderRadius=31]="BorderRadius";n[n.DropShadowXOff=32]="DropShadowXOff";n[n.DropShadowYOff=33]="DropShadowYOff";n[n.DropShadowBlur=34]="DropShadowBlur";n[n.DropShadowColor=35]="DropShadowColor";n[n.DropShadowSpread=36]="DropShadowSpread";n[n.DropShadowInset=37]="DropShadowInset";n[n.BackgroundPathShadowXOff=38]="BackgroundPathShadowXOff";n[n.BackgroundPathShadowYOff=39]="BackgroundPathShadowYOff";n[n.BackgroundPathShadowBlur=40]="BackgroundPathShadowBlur";n[n.BackgroundPathShadowColor=41]="BackgroundPathShadowColor";n[n.ZOrder=42]="ZOrder";n[n.FillOpacityOverride=43]="FillOpacityOverride";n[n.FillColorOverride=44]="FillColorOverride";n[n.IsOverlay=45]="IsOverlay";n[n.IsClickThrough=46]="IsClickThrough";n[n.FillColorName=47]="FillColorName";n[n.DownscaleFactor=48]="DownscaleFactor";n[n.VisibleCullingRegionLeft=49]="VisibleCullingRegionLeft";n[n.VisibleCullingRegionTop=50]="VisibleCullingRegionTop";n[n.VisibleCullingRegionWidth=51]="VisibleCullingRegionWidth";n[n.VisibleCullingRegionHeight=52]="VisibleCullingRegionHeight";n[n.Type=53]="Type";n[n.CanVisualize=54]="CanVisualize";n[n.ContainerType=55]="ContainerType";n[n.Scrollability=56]="Scrollability";n[n.Overflow=57]="Overflow";n[n.Text=58]="Text";n[n.FontKey=59]="FontKey";n[n.TextColorName=60]="TextColorName";n[n.TextOpacityOverride=61]="TextOpacityOverride";n[n.TextColorOverride=62]="TextColorOverride";n[n.TextShadowXOff=63]="TextShadowXOff";n[n.TextShadowYOff=64]="TextShadowYOff";n[n.TextShadowBlur=65]="TextShadowBlur";n[n.TextShadowColor=66]="TextShadowColor";n[n.HyperlinkUri=67]="HyperlinkUri";n[n.TextStyle=68]="TextStyle";n[n.TextStyleId=69]="TextStyleId";n[n.TextColorId=70]="TextColorId";n[n.LineHeight=71]="LineHeight";n[n.SpacingRatioAfter=72]="SpacingRatioAfter";n[n.SpacingAfter=73]="SpacingAfter";n[n.ParagraphStyle=74]="ParagraphStyle";n[n.Style=75]="Style";n[n.StartNum=76]="StartNum";n[n.ImageId=77]="ImageId";n[n.ImageUrl=78]="ImageUrl";n[n.ImageOriginalWidth=79]="ImageOriginalWidth";n[n.ImageOriginalHeight=80]="ImageOriginalHeight";n[n.ImageCropLeft=81]="ImageCropLeft";n[n.ImageCropTop=82]="ImageCropTop";n[n.ImageCropWidth=83]="ImageCropWidth";n[n.ImageCropHeight=84]="ImageCropHeight";n[n.FilterColorName=85]="FilterColorName";n[n.VideoPlayerDescriptor=86]="VideoPlayerDescriptor";n[n.VideoPlayerType=87]="VideoPlayerType";n[n.Pins=88]="Pins";n[n.HorizontalAlignment=89]="HorizontalAlignment";n[n.VerticalAlignment=90]="VerticalAlignment";n[n.ContentStretch=91]="ContentStretch";n[n.BackgroundType=92]="BackgroundType";n[n.SafeViewportLeft=93]="SafeViewportLeft";n[n.SafeViewportTop=94]="SafeViewportTop";n[n.SafeViewportWidth=95]="SafeViewportWidth";n[n.SafeViewportHeight=96]="SafeViewportHeight";n[n.EmbedSourceUrl=97]="EmbedSourceUrl";n[n.Height=98]="Height";n[n.Width=99]="Width";n[n.AllowFullScreen=100]="AllowFullScreen";n[n.Scrolling=101]="Scrolling";n[n.ShouldScale=102]="ShouldScale";n[n.ClientRecipe=103]="ClientRecipe";n[n.AgaveId=104]="AgaveId";n[n.Manifest=105]="Manifest";n[n.AgaveData=106]="AgaveData";n[n.AgaveSettings=107]="AgaveSettings";n[n.SourceId=108]="SourceId";n[n.Name=109]="Name";n[n.AnimationsCompleteFunction=110]="AnimationsCompleteFunction";n[n.ClientRequirements=111]="ClientRequirements";n[n.AnimationName=112]="AnimationName";n[n.AnimationTrigger=113]="AnimationTrigger";n[n.TransitionIds=114]="TransitionIds";n[n.ClientState=115]="ClientState";n[n.Behaviors=116]="Behaviors";n[n.ElementId=117]="ElementId";n[n.AnimatablePropertyName=118]="AnimatablePropertyName";n[n.TransformIndex=119]="TransformIndex";n[n.TransformComponent=120]="TransformComponent";n[n.FunctionId=121]="FunctionId";n[n.Expression=122]="Expression";n[n.MaintainStateOnStart=123]="MaintainStateOnStart";n[n.Curve=124]="Curve";n[n.Duration=125]="Duration";n[n.Delay=126]="Delay";n[n.StartValue=127]="StartValue";n[n.EndValue=128]="EndValue";n[n.ParameterName=129]="ParameterName";n[n.ParameterValue=130]="ParameterValue";n[n.Filename=131]="Filename";n[n.FillStyle=132]="FillStyle";n[n.Tiling=133]="Tiling";n[n.StrokeWidth=134]="StrokeWidth";n[n.PathType=135]="PathType";n[n.Values=136]="Values";n[n.RecipeId=137]="RecipeId";n[n.IsCulled=138]="IsCulled";n[n.IsAborted=139]="IsAborted";n[n.TotalScore=140]="TotalScore";n[n.CropDescription=141]="CropDescription";n[n.CropName=142]="CropName";n[n.Description=143]="Description";n[n.Weight=144]="Weight";n[n.Level=145]="Level";n[n.Score=146]="Score";n[n.NormalizedScore=147]="NormalizedScore";n[n.ExecutionStage=148]="ExecutionStage";n[n.RequiresParallax=149]="RequiresParallax";n[n.Transitions=150]="Transitions";n[n.AnimationContainers=151]="AnimationContainers";n[n.AnimationEffects=152]="AnimationEffects";n[n.ContentNavigationMarkerCollections=153]="ContentNavigationMarkerCollections";n[n.CanNavigateTo=154]="CanNavigateTo";n[n.AllowDeferredExit=155]="AllowDeferredExit";n[n.IsModal=156]="IsModal";n[n.ResetDescendants=157]="ResetDescendants";n[n.AllowBubbling=158]="AllowBubbling";n[n.PreFetchAnimations=159]="PreFetchAnimations";n[n.HistoricallyRelevant=160]="HistoricallyRelevant";n[n.ScrollWidth=161]="ScrollWidth";n[n.ScrollHeight=162]="ScrollHeight";n[n.CoverageMethod=163]="CoverageMethod";n[n.SnapPointsHorizontal=164]="SnapPointsHorizontal";n[n.SnapPointsVertical=165]="SnapPointsVertical";n[n.IsDefaultNavigation=166]="IsDefaultNavigation";n[n.AlwaysTryDefaultAction=167]="AlwaysTryDefaultAction";n[n.Action=168]="Action";n[n.Method=169]="Method";n[n.Target=170]="Target";n[n.KeyNames=171]="KeyNames";n[n.TargetId=172]="TargetId";n[n.TriggerTarget=173]="TriggerTarget";n[n.TriggerTargetId=174]="TriggerTargetId";n[n.Direction=175]="Direction";n[n.Key=176]="Key";n[n.Modifier=177]="Modifier";n[n.KeyDown=178]="KeyDown";n[n.Button=179]="Button";n[n.VisibilityRatio=180]="VisibilityRatio";n[n.ViewportScaleX=181]="ViewportScaleX";n[n.ViewportScaleY=182]="ViewportScaleY";n[n.ViewportOffsetRatioX=183]="ViewportOffsetRatioX";n[n.ViewportOffsetRatioY=184]="ViewportOffsetRatioY";n[n.Time=185]="Time";n[n.Variance=186]="Variance";n[n.FireOnStart=187]="FireOnStart";n[n.Value=188]="Value";n[n.TranslateX=189]="TranslateX";n[n.TranslateY=190]="TranslateY";n[n.ScaleX=191]="ScaleX";n[n.ScaleY=192]="ScaleY";n[n.ProjectX=193]="ProjectX";n[n.ProjectY=194]="ProjectY";n[n.ProjectZ=195]="ProjectZ";n[n.TranslateZ=196]="TranslateZ";n[n.ScaleZ=197]="ScaleZ";n[n.AudioPlayerDescriptor=198]="AudioPlayerDescriptor";n[n.AudioPlayerType=199]="AudioPlayerType";n[n.SchemaVersion=200]="SchemaVersion"}(n.Prop||(n.Prop={}));s=n.Prop,function(n){n[n.RenderModelRootHasAnimationSequence=0]="RenderModelRootHasAnimationSequence";n[n.RenderModelRootHasLayoutTree=1]="RenderModelRootHasLayoutTree";n[n.LayoutTreeHasContainerLayoutElement=2]="LayoutTreeHasContainerLayoutElement";n[n.LayoutTreeHasInteractionModel=3]="LayoutTreeHasInteractionModel";n[n.LayoutNodeHasTransform=4]="LayoutNodeHasTransform";n[n.LayoutNodeLayoutContextPointsToLayoutContext=5]="LayoutNodeLayoutContextPointsToLayoutContext";n[n.LayoutElementBackgroundPointsToStaticImage=6]="LayoutElementBackgroundPointsToStaticImage";n[n.LayoutElementBackgroundPathPointsToPath=7]="LayoutElementBackgroundPathPointsToPath";n[n.LayoutElementBackgroundFilterPointsToPath=8]="LayoutElementBackgroundFilterPointsToPath";n[n.ContainerLayoutElementHasLayoutElement=9]="ContainerLayoutElementHasLayoutElement";n[n.ContainerLayoutElementHasLayoutDebugInfo=10]="ContainerLayoutElementHasLayoutDebugInfo";n[n.TextBlockLayoutElementHasTextList=11]="TextBlockLayoutElementHasTextList";n[n.TextParagraphHasTextLayoutElement=12]="TextParagraphHasTextLayoutElement";n[n.TextParagraphHasTextRunElement=13]="TextParagraphHasTextRunElement";n[n.TextParagraphLayoutContextPointsToLayoutContext=14]="TextParagraphLayoutContextPointsToLayoutContext";n[n.TextListHasTextSection=15]="TextListHasTextSection";n[n.ImageLayoutElementPathPointsToPath=16]="ImageLayoutElementPathPointsToPath";n[n.ImageLayoutElementFilterPathPointsToPath=17]="ImageLayoutElementFilterPathPointsToPath";n[n.ProjectionLayoutElementHasSceneGraphElement=18]="ProjectionLayoutElementHasSceneGraphElement";n[n.ViewportLayoutElementHasLayoutElement=19]="ViewportLayoutElementHasLayoutElement";n[n.ContainerSceneGraphElementHasSceneGraphElement=20]="ContainerSceneGraphElementHasSceneGraphElement";n[n.TextureSceneGraphElementHasLayoutElement=21]="TextureSceneGraphElementHasLayoutElement";n[n.AnimationSequenceHasAnimation=22]="AnimationSequenceHasAnimation";n[n.AnimationHasAnimationParameter=23]="AnimationHasAnimationParameter";n[n.AnimationHasAnimationFunction=24]="AnimationHasAnimationFunction";n[n.AnimationHasAnimationTransition=25]="AnimationHasAnimationTransition";n[n.AnimationFunctionHasAnimationTarget=26]="AnimationFunctionHasAnimationTarget";n[n.AnimationTransitionHasTransitionContainer=27]="AnimationTransitionHasTransitionContainer";n[n.TransitionContainerHasTransitionEffect=28]="TransitionContainerHasTransitionEffect";n[n.LayoutDebugInfoHasRuleResult=29]="LayoutDebugInfoHasRuleResult";n[n.InteractionModelHasKeyFrame=30]="InteractionModelHasKeyFrame";n[n.InteractionModelHasTriggerSet=31]="InteractionModelHasTriggerSet";n[n.InteractionModelHasFsmNode=32]="InteractionModelHasFsmNode";n[n.InteractionModelStartFsmNode=33]="InteractionModelStartFsmNode";n[n.FsmNodeHasFsmNode=34]="FsmNodeHasFsmNode";n[n.FsmNodeHasFsmEdge=35]="FsmNodeHasFsmEdge";n[n.FsmNodeHasKeyFrame=36]="FsmNodeHasKeyFrame";n[n.FsmNodeAmbientPointsToAnimationSequence=37]="FsmNodeAmbientPointsToAnimationSequence";n[n.FsmNodeExitPointsToAnimationSequence=38]="FsmNodeExitPointsToAnimationSequence";n[n.FsmEdgePointsToFsmNode=39]="FsmEdgePointsToFsmNode";n[n.FsmEdgePointsToTriggerSet=40]="FsmEdgePointsToTriggerSet";n[n.FsmEdgeOutPointsToAnimationSequence=41]="FsmEdgeOutPointsToAnimationSequence";n[n.FsmEdgeInPointsToAnimationSequence=42]="FsmEdgeInPointsToAnimationSequence";n[n.KeyFramePointsToLayoutNode=43]="KeyFramePointsToLayoutNode";n[n.KeyFrameHasKeyFrame=44]="KeyFrameHasKeyFrame";n[n.TriggerSetHasTrigger=45]="TriggerSetHasTrigger";n[n.TriggerHasSelectMethod=46]="TriggerHasSelectMethod";n[n.TriggerHasDefaultAction=47]="TriggerHasDefaultAction";n[n.DefaultActionHasAnimationParameter=48]="DefaultActionHasAnimationParameter";n[n.SelectMethodHasCameraSelect=49]="SelectMethodHasCameraSelect";n[n.SelectMethodHasTimingSelect=50]="SelectMethodHasTimingSelect";n[n.ClientSelectMethodHasClientSignal=51]="ClientSelectMethodHasClientSignal";n[n.KeyboardSelectMethodHasKeyClick=52]="KeyboardSelectMethodHasKeyClick";n[n.StatelessRuleHasTriggerSet=53]="StatelessRuleHasTriggerSet";n[n.StatelessRuleHasAnimationSequence=54]="StatelessRuleHasAnimationSequence";n[n.LayoutContextLayoutPointsToContentProxy=55]="LayoutContextLayoutPointsToContentProxy";n[n.ModelRoot=56]="ModelRoot";n[n.ExternalData=57]="ExternalData"}(n.Meaning||(n.Meaning={}));ii=n.Meaning,function(n){n[n.Override=0]="Override";n[n.Desktop=1]="Desktop";n[n.Mobile=2]="Mobile";n[n.Tablet=3]="Tablet"}(n.ClientDevice||(n.ClientDevice={}));b=n.ClientDevice,function(n){n[n.YouTube=0]="YouTube";n[n.OneDrive=1]="OneDrive";n[n.Azure=2]="Azure"}(n.VideoPlayerType||(n.VideoPlayerType={}));k=n.VideoPlayerType,function(n){n[n.Browser=0]="Browser";n[n.Custom=1]="Custom"}(n.AudioPlayerType||(n.AudioPlayerType={}));d=n.AudioPlayerType,function(n){n[n.GenericGroup=0]="GenericGroup";n[n.ClipPreview=1]="ClipPreview";n[n.TextBlock=2]="TextBlock";n[n.TextGroup=3]="TextGroup";n[n.TextLine=4]="TextLine";n[n.TextRun=5]="TextRun";n[n.Viewports=6]="Viewports";n[n.Map=7]="Map"}(n.LayoutContainerType||(n.LayoutContainerType={}));l=n.LayoutContainerType,function(n){n[n.None=0]="None";n[n.Horizontal=1]="Horizontal";n[n.Vertical=2]="Vertical"}(n.LayoutScrollability||(n.LayoutScrollability={}));h=n.LayoutScrollability,function(n){n[n.Enter=0]="Enter";n[n.Exit=1]="Exit";n[n.Continuous=2]="Continuous";n[n.ViewportBound=3]="ViewportBound";n[n.EnterExit=4]="EnterExit"}(n.AnimationTrigger||(n.AnimationTrigger={}));g=n.AnimationTrigger,function(n){n[n.Near=0]="Near";n[n.Center=1]="Center";n[n.Far=2]="Far";n[n.Justified=3]="Justified"}(n.LayoutTextAlignment||(n.LayoutTextAlignment={}));ri=n.LayoutTextAlignment,function(n){n[n.Thin=0]="Thin";n[n.ExtraThin=1]="ExtraThin";n[n.UltraThin=2]="UltraThin";n[n.ExtraLight=3]="ExtraLight";n[n.UltraLight=4]="UltraLight";n[n.Light=5]="Light";n[n.SemiLight=6]="SemiLight";n[n.Normal=7]="Normal";n[n.Regular=8]="Regular";n[n.Medium=9]="Medium";n[n.DemiBold=10]="DemiBold";n[n.SemiBold=11]="SemiBold";n[n.Bold=12]="Bold";n[n.ExtraBold=13]="ExtraBold";n[n.UltraBold=14]="UltraBold";n[n.Black=15]="Black";n[n.Heavy=16]="Heavy";n[n.ExtraBlack=17]="ExtraBlack";n[n.UltraBlack=18]="UltraBlack"}(n.FontWeight||(n.FontWeight={}));ui=n.FontWeight,function(n){n[n.Normal=0]="Normal";n[n.Oblique=1]="Oblique";n[n.Italic=2]="Italic"}(n.FontStyle||(n.FontStyle={}));fi=n.FontStyle,function(n){n[n.Undefined=0]="Undefined";n[n.UltraCondensed=1]="UltraCondensed";n[n.ExtraCompressed=2]="ExtraCompressed";n[n.UltraCompressed=3]="UltraCompressed";n[n.ExtraCondensed=4]="ExtraCondensed";n[n.Compressed=5]="Compressed";n[n.Condensed=6]="Condensed";n[n.SemiCondensed=7]="SemiCondensed";n[n.Narrow=8]="Narrow";n[n.Compact=9]="Compact";n[n.Normal=10]="Normal";n[n.Medium=11]="Medium";n[n.SemiExpanded=12]="SemiExpanded";n[n.Wide=13]="Wide";n[n.Expanded=14]="Expanded";n[n.Extended=15]="Extended";n[n.ExtraExpanded=16]="ExtraExpanded";n[n.ExtraExtended=17]="ExtraExtended";n[n.UltraExpanded=18]="UltraExpanded";n[n.UltraExtended=19]="UltraExtended"}(n.FontStretch||(n.FontStretch={}));ei=n.FontStretch,function(n){n[n.Near=0]="Near";n[n.Center=1]="Center";n[n.Far=2]="Far"}(n.Alignment||(n.Alignment={}));c=n.Alignment,function(n){n[n.Fit=0]="Fit";n[n.Fill=1]="Fill";n[n.Stretch=2]="Stretch";n[n.Fixed=3]="Fixed";n[n.None=4]="None"}(n.ContentStretch||(n.ContentStretch={}));nt=n.ContentStretch,function(n){n[n.None=0]="None";n[n.HorizontalFill=1]="HorizontalFill";n[n.VerticalFill=2]="VerticalFill"}(n.ViewportBackgroundType||(n.ViewportBackgroundType={}));tt=n.ViewportBackgroundType,function(n){n[n.None=0]="None";n[n.FillHorizontal=1]="FillHorizontal";n[n.FillVertical=2]="FillVertical";n[n.Fill=3]="Fill";n[n.Fit=4]="Fit";n[n.Stretch=5]="Stretch"}(n.ImageFillStyle||(n.ImageFillStyle={}));it=n.ImageFillStyle,function(n){n[n.Undefined=0]="Undefined";n[n.Level1=1]="Level1";n[n.Level2=2]="Level2";n[n.Level3=3]="Level3"}(n.RuleLevel||(n.RuleLevel={}));rt=n.RuleLevel,function(n){n[n.Unacceptable=0]="Unacceptable";n[n.Undesirable=1]="Undesirable";n[n.Bad=2]="Bad";n[n.Ok=3]="Ok";n[n.Good=4]="Good";n[n.Great=5]="Great";n[n.Perfect=6]="Perfect";n[n.Skip=7]="Skip";n[n.Abort=8]="Abort"}(n.NormalizedScore||(n.NormalizedScore={}));ut=n.NormalizedScore,function(n){n[n.Keypress=0]="Keypress";n[n.Swipe=1]="Swipe";n[n.Click=2]="Click";n[n.DoubleClick=3]="DoubleClick";n[n.Left=4]="Left";n[n.Right=5]="Right";n[n.Camera=6]="Camera";n[n.WheelUp=7]="WheelUp";n[n.WheelDown=8]="WheelDown";n[n.Timing=9]="Timing";n[n.Client=10]="Client"}(n.TriggerMethod||(n.TriggerMethod={}));e=n.TriggerMethod,function(n){n[n.None=0]="None";n[n.SourceKeyframe=1]="SourceKeyframe";n[n.TargetKeyframe=2]="TargetKeyframe";n[n.TriggerKeyframe=3]="TriggerKeyframe"}(n.TriggerTarget||(n.TriggerTarget={}));f=n.TriggerTarget,function(n){n[n.Left=0]="Left";n[n.Middle=1]="Middle";n[n.Right=2]="Right";n[n.XButton1=3]="XButton1";n[n.XButton2=4]="XButton2"}(n.MouseButton||(n.MouseButton={}));ft=n.MouseButton,function(n){n[n.Click=0]="Click";n[n.DoubleClick=1]="DoubleClick"}(n.MouseAction||(n.MouseAction={}));et=n.MouseAction,function(n){n[n.None=0]="None";n[n.Shift=1]="Shift";n[n.Alt=2]="Alt";n[n.Control=3]="Control";n[n.Windows=4]="Windows"}(n.Modifier||(n.Modifier={}));ot=n.Modifier,function(n){n[n.None=0]="None";n[n.Cancel=1]="Cancel";n[n.Back=2]="Back";n[n.Tab=3]="Tab";n[n.LineFeed=4]="LineFeed";n[n.Clear=5]="Clear";n[n.Return=6]="Return";n[n.Enter=7]="Enter";n[n.Pause=8]="Pause";n[n.CapsLock=9]="CapsLock";n[n.Capital=10]="Capital";n[n.HangulMode=11]="HangulMode";n[n.KanaMode=12]="KanaMode";n[n.JunjaMode=13]="JunjaMode";n[n.FinalMode=14]="FinalMode";n[n.KanjiMode=15]="KanjiMode";n[n.HanjaMode=16]="HanjaMode";n[n.Escape=17]="Escape";n[n.ImeConvert=18]="ImeConvert";n[n.ImeNonConvert=19]="ImeNonConvert";n[n.ImeAccept=20]="ImeAccept";n[n.ImeModeChange=21]="ImeModeChange";n[n.Space=22]="Space";n[n.PageUp=23]="PageUp";n[n.Prior=24]="Prior";n[n.PageDown=25]="PageDown";n[n.Next=26]="Next";n[n.End=27]="End";n[n.Home=28]="Home";n[n.Left=29]="Left";n[n.Up=30]="Up";n[n.Right=31]="Right";n[n.Down=32]="Down";n[n.Select=33]="Select";n[n.Print=34]="Print";n[n.Execute=35]="Execute";n[n.Snapshot=36]="Snapshot";n[n.PrintScreen=37]="PrintScreen";n[n.Insert=38]="Insert";n[n.Delete=39]="Delete";n[n.Help=40]="Help";n[n.D0=41]="D0";n[n.D1=42]="D1";n[n.D2=43]="D2";n[n.D3=44]="D3";n[n.D4=45]="D4";n[n.D5=46]="D5";n[n.D6=47]="D6";n[n.D7=48]="D7";n[n.D8=49]="D8";n[n.D9=50]="D9";n[n.A=51]="A";n[n.B=52]="B";n[n.C=53]="C";n[n.D=54]="D";n[n.E=55]="E";n[n.F=56]="F";n[n.G=57]="G";n[n.H=58]="H";n[n.I=59]="I";n[n.J=60]="J";n[n.K=61]="K";n[n.L=62]="L";n[n.M=63]="M";n[n.N=64]="N";n[n.O=65]="O";n[n.P=66]="P";n[n.Q=67]="Q";n[n.R=68]="R";n[n.S=69]="S";n[n.T=70]="T";n[n.U=71]="U";n[n.V=72]="V";n[n.W=73]="W";n[n.X=74]="X";n[n.Y=75]="Y";n[n.Z=76]="Z";n[n.LWin=77]="LWin";n[n.RWin=78]="RWin";n[n.Apps=79]="Apps";n[n.Sleep=80]="Sleep";n[n.NumPad0=81]="NumPad0";n[n.NumPad1=82]="NumPad1";n[n.NumPad2=83]="NumPad2";n[n.NumPad3=84]="NumPad3";n[n.NumPad4=85]="NumPad4";n[n.NumPad5=86]="NumPad5";n[n.NumPad6=87]="NumPad6";n[n.NumPad7=88]="NumPad7";n[n.NumPad8=89]="NumPad8";n[n.NumPad9=90]="NumPad9";n[n.Multiply=91]="Multiply";n[n.Add=92]="Add";n[n.Separator=93]="Separator";n[n.Subtract=94]="Subtract";n[n.Decimal=95]="Decimal";n[n.Divide=96]="Divide";n[n.F1=97]="F1";n[n.F2=98]="F2";n[n.F3=99]="F3";n[n.F4=100]="F4";n[n.F5=101]="F5";n[n.F6=102]="F6";n[n.F7=103]="F7";n[n.F8=104]="F8";n[n.F9=105]="F9";n[n.F10=106]="F10";n[n.F11=107]="F11";n[n.F12=108]="F12";n[n.F13=109]="F13";n[n.F14=110]="F14";n[n.F15=111]="F15";n[n.F16=112]="F16";n[n.F17=113]="F17";n[n.F18=114]="F18";n[n.F19=115]="F19";n[n.F20=116]="F20";n[n.F21=117]="F21";n[n.F22=118]="F22";n[n.F23=119]="F23";n[n.F24=120]="F24";n[n.NumLock=121]="NumLock";n[n.Scroll=122]="Scroll";n[n.LeftShift=123]="LeftShift";n[n.RightShift=124]="RightShift";n[n.LeftCtrl=125]="LeftCtrl";n[n.RightCtrl=126]="RightCtrl";n[n.LeftAlt=127]="LeftAlt";n[n.RightAlt=128]="RightAlt";n[n.BrowserBack=129]="BrowserBack";n[n.BrowserForward=130]="BrowserForward";n[n.BrowserRefresh=131]="BrowserRefresh";n[n.BrowserStop=132]="BrowserStop";n[n.BrowserSearch=133]="BrowserSearch";n[n.BrowserFavorites=134]="BrowserFavorites";n[n.BrowserHome=135]="BrowserHome";n[n.VolumeMute=136]="VolumeMute";n[n.VolumeDown=137]="VolumeDown";n[n.VolumeUp=138]="VolumeUp";n[n.MediaNextTrack=139]="MediaNextTrack";n[n.MediaPreviousTrack=140]="MediaPreviousTrack";n[n.MediaStop=141]="MediaStop";n[n.MediaPlayPause=142]="MediaPlayPause";n[n.LaunchMail=143]="LaunchMail";n[n.SelectMedia=144]="SelectMedia";n[n.LaunchApplication1=145]="LaunchApplication1";n[n.LaunchApplication2=146]="LaunchApplication2";n[n.OemSemicolon=147]="OemSemicolon";n[n.Oem1=148]="Oem1";n[n.OemPlus=149]="OemPlus";n[n.OemComma=150]="OemComma";n[n.OemMinus=151]="OemMinus";n[n.OemPeriod=152]="OemPeriod";n[n.OemQuestion=153]="OemQuestion";n[n.Oem2=154]="Oem2";n[n.OemTilde=155]="OemTilde";n[n.Oem3=156]="Oem3";n[n.AbntC1=157]="AbntC1";n[n.AbntC2=158]="AbntC2";n[n.OemOpenBrackets=159]="OemOpenBrackets";n[n.Oem4=160]="Oem4";n[n.OemPipe=161]="OemPipe";n[n.Oem5=162]="Oem5";n[n.OemCloseBrackets=163]="OemCloseBrackets";n[n.Oem6=164]="Oem6";n[n.OemQuotes=165]="OemQuotes";n[n.Oem7=166]="Oem7";n[n.Oem8=167]="Oem8";n[n.OemBackslash=168]="OemBackslash";n[n.Oem102=169]="Oem102";n[n.ImeProcessed=170]="ImeProcessed";n[n.System=171]="System";n[n.OemAttn=172]="OemAttn";n[n.DbeAlphanumeric=173]="DbeAlphanumeric";n[n.OemFinish=174]="OemFinish";n[n.DbeKatakana=175]="DbeKatakana";n[n.DbeHiragana=176]="DbeHiragana";n[n.OemCopy=177]="OemCopy";n[n.DbeSbcsChar=178]="DbeSbcsChar";n[n.OemAuto=179]="OemAuto";n[n.DbeDbcsChar=180]="DbeDbcsChar";n[n.OemEnlw=181]="OemEnlw";n[n.OemBackTab=182]="OemBackTab";n[n.DbeRoman=183]="DbeRoman";n[n.DbeNoRoman=184]="DbeNoRoman";n[n.Attn=185]="Attn";n[n.CrSel=186]="CrSel";n[n.DbeEnterWordRegisterMode=187]="DbeEnterWordRegisterMode";n[n.ExSel=188]="ExSel";n[n.DbeEnterImeConfigureMode=189]="DbeEnterImeConfigureMode";n[n.EraseEof=190]="EraseEof";n[n.DbeFlushString=191]="DbeFlushString";n[n.Play=192]="Play";n[n.DbeCodeInput=193]="DbeCodeInput";n[n.DbeNoCodeInput=194]="DbeNoCodeInput";n[n.Zoom=195]="Zoom";n[n.NoName=196]="NoName";n[n.DbeDetermineString=197]="DbeDetermineString";n[n.DbeEnterDialogConversionMode=198]="DbeEnterDialogConversionMode";n[n.Pa1=199]="Pa1";n[n.OemClear=200]="OemClear";n[n.DeadCharProcessed=201]="DeadCharProcessed"}(n.KeyName||(n.KeyName={}));st=n.KeyName,function(n){n[n.Enter=0]="Enter";n[n.Exit=1]="Exit"}(n.ViewAction||(n.ViewAction={}));v=n.ViewAction,function(n){n[n.Left=0]="Left";n[n.Right=1]="Right";n[n.Top=2]="Top";n[n.Bottom=3]="Bottom";n[n.Front=4]="Front";n[n.Rear=5]="Rear"}(n.CameraSide||(n.CameraSide={}));oi=n.CameraSide,function(n){n[n.Object=0]="Object";n[n.Camera=1]="Camera"}(n.RelativeTo||(n.RelativeTo={}));si=n.RelativeTo,function(n){n[n.Polygon=0]="Polygon";n[n.Ellipse=1]="Ellipse";n[n.RoundedRect=2]="RoundedRect";n[n.SvgPath=3]="SvgPath"}(n.PathType||(n.PathType={}));ht=n.PathType,function(n){n[n.None=0]="None";n[n.Cutout=1]="Cutout";n[n.Clip=2]="Clip"}(n.MaskNext||(n.MaskNext={}));hi=n.MaskNext,function(n){n[n.None=0]="None";n[n.Horizontal=1]="Horizontal";n[n.Vertical=2]="Vertical";n[n.Both=3]="Both"}(n.ImageTiling||(n.ImageTiling={}));ct=n.ImageTiling,function(n){n[n.Transform=0]="Transform";n[n.Opacity=1]="Opacity";n[n.Hidden=2]="Hidden";n[n.ZOrder=3]="ZOrder";n[n.Width=4]="Width";n[n.Height=5]="Height"}(n.AnimatableProperty||(n.AnimatableProperty={}));y=n.AnimatableProperty,function(n){n[n.X=0]="X";n[n.Y=1]="Y";n[n.Z=2]="Z";n[n.Value=3]="Value"}(n.AnimatableTransformComponent||(n.AnimatableTransformComponent={}));p=n.AnimatableTransformComponent,function(n){n[n.None=0]="None";n[n.SnapOnStart=1]="SnapOnStart";n[n.SnapOnMiddle=2]="SnapOnMiddle";n[n.SnapOnEnd=3]="SnapOnEnd";n[n.StraightLine=4]="StraightLine";n[n.Staircase=5]="Staircase";n[n.EaseIn=6]="EaseIn";n[n.EaseInRadial=7]="EaseInRadial";n[n.EaseInOut=8]="EaseInOut";n[n.EaseOut=9]="EaseOut";n[n.EaseCenter=10]="EaseCenter";n[n.SquarePulse=11]="SquarePulse";n[n.WaveSin=12]="WaveSin";n[n.ThreeStateWaveSin=13]="ThreeStateWaveSin";n[n.Elastic=14]="Elastic";n[n.Bounce=15]="Bounce"}(n.AnimationCurve||(n.AnimationCurve={}));ci=n.AnimationCurve,function(n){n[n.DontCare=0]="DontCare";n[n.True=1]="True";n[n.False=2]="False"}(n.ClientStateValue||(n.ClientStateValue={}));li=n.ClientStateValue,function(n){n[n.SetInterrogable=0]="SetInterrogable";n[n.OffSetInterrogable=1]="OffSetInterrogable";n[n.SnapInterrogable=2]="SnapInterrogable"}(n.DefaultTriggerAction||(n.DefaultTriggerAction={}));lt=n.DefaultTriggerAction,function(n){n[n.None=0]="None";n[n.DisabledWhenEmbedHostMode=1]="DisabledWhenEmbedHostMode"}(n.TriggerSetBehaviors||(n.TriggerSetBehaviors={}));at=n.TriggerSetBehaviors,function(n){n[n.None=0]="None";n[n.Image=1]="Image";n[n.Text=2]="Text";n[n.Video=3]="Video";n[n.Caption=4]="Caption";n[n.Embed=5]="Embed";n[n.StatusUpdate=6]="StatusUpdate";n[n.Title=7]="Title";n[n.Audio=8]="Audio";n[n.BingLocalEntity=9]="BingLocalEntity"}(n.ContentType||(n.ContentType={}));t=n.ContentType,function(n){n[n.Auto=0]="Auto";n[n.Less=1]="Less";n[n.None=2]="None";n[n.More=3]="More";n[n.Very=4]="Very"}(n.EmphasisLevel||(n.EmphasisLevel={}));ai=n.EmphasisLevel,function(n){n[n.Auto=0]="Auto";n[n.Map=1]="Map";n[n.Stack=2]="Stack";n[n.Comparison=3]="Comparison"}(n.Visualization||(n.Visualization={}));vi=n.Visualization,function(n){n[n.Light1=0]="Light1";n[n.Light2=1]="Light2";n[n.Dark1=2]="Dark1";n[n.Dark2=3]="Dark2";n[n.Accent1=4]="Accent1";n[n.Accent2=5]="Accent2";n[n.Accent3=6]="Accent3";n[n.Accent4=7]="Accent4";n[n.Accent5=8]="Accent5";n[n.Accent6=9]="Accent6";n[n.Hyperlink=10]="Hyperlink";n[n.FollowedHyperlink=11]="FollowedHyperlink"}(n.PaletteColor||(n.PaletteColor={}));yi=n.PaletteColor,function(n){n[n.ParallaxRoot=1]="ParallaxRoot";n[n.Parallaxed=2]="Parallaxed";n[n.Optional=4]="Optional";n[n.Cullable=8]="Cullable";n[n.HardwareAccelerate=16]="HardwareAccelerate";n[n.ForceImageAnimation=32]="ForceImageAnimation";n[n.Button=64]="Button";n[n.ScrollableX=128]="ScrollableX";n[n.ScrollableY=256]="ScrollableY";n[n.ClickTarget=512]="ClickTarget";n[n.ClickTargetParent=1024]="ClickTargetParent"}(n.LayoutFlags||(n.LayoutFlags={}));r=n.LayoutFlags,function(n){n[n.CameraParallax=1]="CameraParallax";n[n.Parallax=2]="Parallax"}(n.AnimationFlags||(n.AnimationFlags={}));vt=n.AnimationFlags,function(n){n[n.VisibilityDetection=1]="VisibilityDetection"}(n.ClientCapabilities||(n.ClientCapabilities={}));yt=n.ClientCapabilities,function(n){n[n.Parallax=1]="Parallax";n[n.Optional=2]="Optional"}(n.TransformFlags||(n.TransformFlags={}));o=n.TransformFlags,function(n){n[n.Right=0]="Right";n[n.Left=1]="Left";n[n.Up=2]="Up";n[n.Down=3]="Down"}(n.Direction||(n.Direction={}));pt=n.Direction,function(n){n[n.None=0]="None";n[n.Flat=1]="Flat";n[n.Bulleted=2]="Bulleted";n[n.Numbered=3]="Numbered"}(n.ListStyle||(n.ListStyle={}));wt=n.ListStyle,function(n){n[n.Normal=0]="Normal";n[n.ListItem=1]="ListItem"}(n.ParagraphStyle||(n.ParagraphStyle={}));bt=n.ParagraphStyle,function(n){n[n.Default=0]="Default";n[n.Pointer=1]="Pointer";n[n.Wait=2]="Wait";n[n.Progress=3]="Progress";n[n.Text=4]="Text"}(n.Cursor||(n.Cursor={}));u=n.Cursor,function(n){n[n.Content=0]="Content";n[n.Section=1]="Section"}(n.SnapPointType||(n.SnapPointType={}));pi=n.SnapPointType,function(n){n[n.None=0]="None";n[n.Visited=1]="Visited";n[n.Scrolled=2]="Scrolled"}(n.CoverageMethod||(n.CoverageMethod={}));kt=n.CoverageMethod,function(n){n[n.Auto=0]="Auto";n[n.Yes=1]="Yes";n[n.No=2]="No"}(n.EmbedScrolling||(n.EmbedScrolling={}));dt=n.EmbedScrolling,function(n){n[n.None=0]="None";n[n.EndOfStory=1]="EndOfStory";n[n.MadeWithSway=2]="MadeWithSway"}(n.ClientRecipe||(n.ClientRecipe={}));gt=n.ClientRecipe,function(n){n[n.Translation=0]="Translation";n[n.Rotation=1]="Rotation";n[n.Scale=2]="Scale"}(n.TransformType||(n.TransformType={}));wi=n.TransformType,function(n){n[n.Width=0]="Width";n[n.Height=1]="Height"}(n.AnimatableDimension||(n.AnimatableDimension={}));bi=n.AnimatableDimension,function(n){n[n.ZeroDurationInEditMode=1]="ZeroDurationInEditMode";n[n.ExternalAction=2]="ExternalAction"}(n.AnimationBehaviors||(n.AnimationBehaviors={}));ni=n.AnimationBehaviors,function(n){n[n.AutoFollowInEditMode=1]="AutoFollowInEditMode";n[n.ResetDescendants=2]="ResetDescendants";n[n.AllowBubbling=4]="AllowBubbling";n[n.PreFetchAnimations=8]="PreFetchAnimations";n[n.HistoricallyRelevant=16]="HistoricallyRelevant"}(n.EdgeBehaviors||(n.EdgeBehaviors={}));var ki=n.EdgeBehaviors,di=function(){function n(){}return n.prototype.serializeProperties=function(n,t){var i=this;return w.SerializeProperties(n,t)},n.prototype.deserializeProperties=function(n,t){var i=this;return w.DeserializeProperties(n,t)},n}(),w=function(){function w(n){var t=this;t._model=new i(n,w.DefaultProps,w.PropNotifierMappings);t._model.isEmpty()&&(t.createObject(69,"ModelRoot"),t.createObject(0,"RenderRoot"),t.addRelationship("ModelRoot","RenderRoot",56))}return w.prototype.createObject=function(n,t){var i=this;return i._model.createObject(a[n],t)},w.prototype.containsObject=function(n){var t=this;return t._model.containsObject(n)},w.prototype.getObjectType=function(n){var t=this;return a[t._model.getObjectType(n)]},w.prototype.getProperty=function(n,t,i){var r=this;return r._model.getProperty(n,s[t],i)},w.prototype.setProperty=function(n,t,i,r){r===void 0&&(r=!0);var u=this;u._model.setProperty(n,s[t],i,r)},w.prototype.updateProperty=function(n,t){var i=this;i._model.updateProperty(n,s[t])},w.prototype.resetProperty=function(n,t){var i=this;i._model.resetProperty(n,s[t])},w.prototype.addRelationship=function(n,t,i,r){var u=this;u._model.addRelationship(n,t,w.HashedMeanings[i],r)},w.prototype.removeRelationship=function(n,t,i){var r=this;r._model.removeRelationship(n,t,w.HashedMeanings[i])},w.prototype.setRelationships=function(n,t,i){var r=this;r._model.setRelationships(n,t,w.HashedMeanings[i])},w.prototype.getObjectsRelatedFrom=function(n,t,i){var r=this;return r._model.getObjectsRelatedFrom(n,w.HashedMeanings[t],i)},w.prototype.getObjectsRelatedTo=function(n,t,i){var r=this;return r._model.getObjectsRelatedTo(n,w.HashedMeanings[t],i)},w.prototype.isExternalObject=function(n){var t=this;return t._model.isExternalObject(n)},w.prototype.getExternalDataId=function(n){var t=this;return t._model.getExternalDataId(n)},w.prototype.registerObjectDisposalCallback=function(n){var t=this;t._model.registerObjectDisposalCallback(n)},w.SerializeProperties=function(n,t){var c=this,u=i.GetObjectTypeFromPropBagType(n),e,o,r;if(u){e={};o=0;for(r in t)if(t.hasOwnProperty(r)){var f=w.EnumValues[u][r],s=w.StructValues[u][r],h=w.StructCollectionValues[u][r];e[r]=f?f.flags?Flags.serialize(f,t[r]):f.type[t[r]]:s?t[r].serialize():h?t[r].serialize():t[r];o++}return o>0?e:undefined}},w.DeserializeProperties=function(t,r){var l=this,e=i.GetObjectTypeFromPropBagType(t),f,u;if(e){f=Object.create(w.DefaultProps[e]);for(u in r){var o=w.EnumValues[e][u],s=w.StructValues[e][u],h=w.StructCollectionValues[e][u],c=w.PropertyCollectionValues[e][u];o?f[u]=o.flags?Flags.deserialize(o.type,r[u]):o.type[r[u]]:s?f[u]=s.Deserialize(r[u]):h?(f[u]=new n.StructCollection,f[u].deserializeStructCollection(r[u],h.Deserialize)):c?(f[u]=new n.PropertyCollection,f[u].deserializePropertyCollection(r[u])):f[u]=r[u]}return f}},w.getHashedMeanings=function(){var t=this,n={};return n[0]="AlRUTI",n[1]="RUetQy",n[2]="Ov99Ai",n[3]="CUAYmB",n[4]="3GzvKJ",n[5]="6WgBOz",n[6]="87gsGH",n[7]="hvDC0w",n[8]="UF8l1l",n[9]="3Lvhsc",n[10]="A92Ktc",n[11]="7d0Hrv",n[12]="JNTYvB",n[13]="6mjsNi",n[14]="79FtFs",n[15]="CXueRx",n[16]="OnpQ5k",n[17]="SSi6Tf",n[18]="FEJawz",n[19]="FQEZST",n[20]="Nwp6tR",n[21]="Du4EGy",n[22]="A2M9Ji",n[23]="1ULJsD",n[24]="DsoHu8",n[25]="7EH7bw",n[26]="B5oxiW",n[27]="PNlDMp",n[28]="6ttih1",n[29]="SjJwdJ",n[30]="Exr3FQ",n[31]="Iif34w",n[32]="Da5GO9",n[33]="6DyJeV",n[34]="RC1cmv",n[35]="Oz1PIq",n[36]="Ay0hSo",n[37]="GghDgN",n[38]="OHU6RM",n[39]="MC5W3Y",n[40]="HeIKjp",n[41]="PeEYxs",n[42]="1Dt15n",n[43]="Cya7gg",n[44]="U6DYsN",n[45]="QxaZwi",n[46]="ON43vi",n[47]="AAm4Cx",n[48]="QXLWeR",n[49]="Irz8PI",n[50]="B0f8NI",n[51]="S3MshQ",n[52]="BHOdqD",n[53]="BNzLsq",n[54]="1sDXiR",n[55]="PK5lSk",n[56]="2SLmQk",n[57]="9w0IDE",n},w.getDefaultProps=function(){var n=this;return{RenderModelRoot:{WorldId:"",LayoutStyleId:"",StyleVersion:"",WorldVersion:"",EditVersion:0,RemoteDesignObjects:!1,Title:"",Culture:"",PaletteColors:null},LayoutTree:{Device:0,ViewportHeight:720,ViewportWidth:1280,PreviousLayoutSucceeded:!0,LayoutFailed:!1,ErrorMessage:"",TextStyles:null},ContainerLayoutElement:{Type:"",CanVisualize:!1,ContainerType:0,Scrollability:0,Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},MediaViewportLayoutElement:{Type:"",CanVisualize:!1,ContainerType:0,Scrollability:0,Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},TextLayoutElement:{Text:"",FontKey:"",TextColorName:"",TextOpacityOverride:0,TextColorOverride:"",TextShadowXOff:0,TextShadowYOff:0,TextShadowBlur:0,TextShadowColor:"",HyperlinkUri:"",TextStyle:null,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},TextRunElement:{Text:"",FontKey:"",TextColorName:"",TextOpacityOverride:0,TextColorOverride:"",TextShadowXOff:0,TextShadowYOff:0,TextShadowBlur:0,TextShadowColor:"",HyperlinkUri:"",TextStyle:null},TextBlockLayoutElement:{TextStyleId:"",TextColorId:"",LineHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},TextSection:{},TextParagraph:{SpacingRatioAfter:0,SpacingAfter:0,ParagraphStyle:0},TextList:{Style:0,StartNum:1},DecorationLayoutElement:{PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},ImageLayoutElement:{FilterColorName:"",ImageId:"",ImageUrl:"",ImageOriginalWidth:0,ImageOriginalHeight:0,ImageCropLeft:0,ImageCropTop:0,ImageCropWidth:0,ImageCropHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},VideoLayoutElement:{VideoPlayerDescriptor:"",VideoPlayerType:0,ImageId:"",ImageUrl:"",ImageOriginalWidth:0,ImageOriginalHeight:0,ImageCropLeft:0,ImageCropTop:0,ImageCropWidth:0,ImageCropHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},MapLayoutElement:{Pins:null,Type:"",CanVisualize:!1,ContainerType:0,Scrollability:0,Overflow:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},ProjectionLayoutElement:{PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},ViewportLayoutElement:{HorizontalAlignment:0,VerticalAlignment:0,ContentStretch:0,BackgroundType:0,SafeViewportLeft:0,SafeViewportTop:0,SafeViewportWidth:1,SafeViewportHeight:1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},EmbedLayoutElement:{EmbedSourceUrl:"",Height:"",Width:"",AllowFullScreen:!1,Scrolling:0,ShouldScale:!1,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},ClientLayoutElement:{ClientRecipe:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},AgaveLayoutElement:{AgaveId:"",Manifest:"",AgaveData:"",AgaveSettings:"",PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},StatusUpdateLayoutElement:{SourceId:"",PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},ContainerSceneGraphElement:{UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},TextureSceneGraphElement:{UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},AnimationSequence:{Name:"",AnimationsCompleteFunction:"",ClientRequirements:0},Animation:{AnimationName:"",AnimationTrigger:0,TransitionIds:null,ClientState:null,Behaviors:0},AnimationTarget:{ElementId:"",AnimatablePropertyName:0,TransformIndex:0,TransformComponent:0},AnimationFunction:{Name:"",FunctionId:"",Expression:"",MaintainStateOnStart:!1,Flags:0},AnimationTransition:{ElementId:""},TransitionContainer:{AnimatablePropertyName:0,Curve:"",Duration:0,Delay:0},TransitionEffect:{TransformComponent:0,TransformIndex:0,StartValue:0,EndValue:0},AnimationParameter:{ParameterName:"",ParameterValue:""},StaticImage:{Name:"",Filename:"",FillStyle:0,HorizontalAlignment:0,VerticalAlignment:0,Tiling:0},Path:{Name:"",StrokeWidth:0,PathType:0,Values:""},LayoutDebugInfo:{RecipeId:"",IsCulled:!1,IsAborted:!1,TotalScore:0,CropDescription:"",CropName:""},RuleResult:{Description:"",Name:"",Weight:0,Level:0,Score:0,NormalizedScore:0,ExecutionStage:""},InteractionModel:{RequiresParallax:!0,Transitions:null,AnimationContainers:null,AnimationEffects:null,ContentNavigationMarkerCollections:null},FsmNode:{Name:"",CanNavigateTo:!0,AllowDeferredExit:!1,IsModal:!1},FsmEdge:{Name:"",ResetDescendants:!1,AllowBubbling:!1,PreFetchAnimations:!1,HistoricallyRelevant:!1,Behaviors:0},KeyFrame:{Type:"",ScrollWidth:0,ScrollHeight:0,Scrollability:0,CoverageMethod:0,SnapPointsHorizontal:null,SnapPointsVertical:null,IsDefaultNavigation:!1},TriggerSet:{Name:"",AlwaysTryDefaultAction:!1,ClientState:null,Behaviors:0},Trigger:{},DefaultAction:{Action:0},SelectMethod:{Method:0,Target:0,KeyNames:"",TargetId:""},SwipeSelectMethod:{Direction:0,Method:0,Target:0,KeyNames:"",TargetId:""},ClientSelectMethod:{Method:0,Target:0,KeyNames:"",TargetId:""},EditModeClientSignal:{},KeyboardSelectMethod:{Method:0,Target:0,KeyNames:"",TargetId:""},KeyClick:{Key:0,Modifier:0,KeyDown:!1},MouseSelectMethod:{Action:0,Button:0,TriggerTarget:0,TriggerTargetId:"",Method:0,Target:0,KeyNames:"",TargetId:""},CameraSelect:{Action:0,VisibilityRatio:0,ViewportScaleX:0,ViewportScaleY:0,ViewportOffsetRatioX:0,ViewportOffsetRatioY:0},CameraSelectMethod:{Action:0,VisibilityRatio:0,ViewportScaleX:0,ViewportScaleY:0,ViewportOffsetRatioX:0,ViewportOffsetRatioY:0,TriggerTarget:0,TriggerTargetId:"",Method:0,Target:0,KeyNames:"",TargetId:""},TimingSelect:{Time:"",Variance:0,FireOnStart:!1},TimingSelectMethod:{Time:"",Variance:0,FireOnStart:!1,Method:0,Target:0,KeyNames:"",TargetId:""},StatelessRule:{},RotationTransform2D:{Value:0,Flags:0},TranslateTransform2D:{TranslateX:0,TranslateY:0,Flags:0},ScaleTransform2D:{ScaleX:0,ScaleY:0,Flags:0},RotationTransform3D:{Value:0,ProjectX:0,ProjectY:0,ProjectZ:0,Flags:0},TranslateTransform3D:{TranslateX:0,TranslateY:0,TranslateZ:0,Flags:0},ScaleTransform3D:{ScaleX:0,ScaleY:0,ScaleZ:0,Flags:0},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{AudioPlayerDescriptor:"",AudioPlayerType:0,ImageId:"",ImageUrl:"",ImageOriginalWidth:0,ImageOriginalHeight:0,ImageCropLeft:0,ImageCropTop:0,ImageCropWidth:0,ImageCropHeight:0,PositionLeft:0,PositionTop:0,PositionWidth:0,PositionHeight:0,BorderRadius:null,DropShadowXOff:0,DropShadowYOff:0,DropShadowBlur:0,DropShadowColor:"",DropShadowSpread:0,DropShadowInset:!1,BackgroundPathShadowXOff:0,BackgroundPathShadowYOff:0,BackgroundPathShadowBlur:0,BackgroundPathShadowColor:"",ZOrder:0,FillOpacityOverride:0,FillColorOverride:"",IsOverlay:!1,IsClickThrough:!1,FillColorName:"",DownscaleFactor:1,VisibleCullingRegionLeft:0,VisibleCullingRegionTop:0,VisibleCullingRegionWidth:0,VisibleCullingRegionHeight:0,UnhashedId:"",KeyFrameType:"",ContentId:"",Opacity:1,Hidden:!1,Animated:!1,ContentType:0,Flags:0,Cursor:0,TransformOrigin:null,AccessibilityInfo:null},Root:{SchemaVersion:0}}},w.getPropNotifierMappings=function(){var n=this;return{RenderModelRoot:{WorldId:"Main",LayoutStyleId:"Main",StyleVersion:"Main",WorldVersion:"Main",EditVersion:"Main",RemoteDesignObjects:"RemoteDesignObjectsChanged",Title:"Main",Culture:"Main",PaletteColors:"ColorsChanged"},LayoutTree:{Device:"Main",ViewportHeight:"Main",ViewportWidth:"Main",PreviousLayoutSucceeded:"Main",LayoutFailed:"Main",ErrorMessage:"Main",TextStyles:"Main"},ContainerLayoutElement:{Type:"Main",CanVisualize:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},MediaViewportLayoutElement:{Type:"Main",CanVisualize:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},TextLayoutElement:{Text:"Main",FontKey:"Main",TextColorName:"Main",TextOpacityOverride:"Main",TextColorOverride:"Main",TextShadowXOff:"Main",TextShadowYOff:"Main",TextShadowBlur:"Main",TextShadowColor:"Main",HyperlinkUri:"Main",TextStyle:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},TextRunElement:{Text:"Main",FontKey:"Main",TextColorName:"Main",TextOpacityOverride:"Main",TextColorOverride:"Main",TextShadowXOff:"Main",TextShadowYOff:"Main",TextShadowBlur:"Main",TextShadowColor:"Main",HyperlinkUri:"Main",TextStyle:"Main"},TextBlockLayoutElement:{TextStyleId:"Main",TextColorId:"Main",LineHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},TextSection:{},TextParagraph:{SpacingRatioAfter:"Main",SpacingAfter:"Main",ParagraphStyle:"Main"},TextList:{Style:"Main",StartNum:"Main"},DecorationLayoutElement:{PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ImageLayoutElement:{FilterColorName:"complex",ImageId:"Main",ImageUrl:"Main",ImageOriginalWidth:"Main",ImageOriginalHeight:"Main",ImageCropLeft:"Main",ImageCropTop:"Main",ImageCropWidth:"Main",ImageCropHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},VideoLayoutElement:{VideoPlayerDescriptor:"Main",VideoPlayerType:"Main",ImageId:"Main",ImageUrl:"Main",ImageOriginalWidth:"Main",ImageOriginalHeight:"Main",ImageCropLeft:"Main",ImageCropTop:"Main",ImageCropWidth:"Main",ImageCropHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},MapLayoutElement:{Pins:"Main",Type:"Main",CanVisualize:"Main",ContainerType:"Main",Scrollability:"ScrollabilityNotifier",Overflow:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ProjectionLayoutElement:{PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ViewportLayoutElement:{HorizontalAlignment:"Main",VerticalAlignment:"Main",ContentStretch:"Main",BackgroundType:"Main",SafeViewportLeft:"Main",SafeViewportTop:"Main",SafeViewportWidth:"Main",SafeViewportHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},EmbedLayoutElement:{EmbedSourceUrl:"Main",Height:"Main",Width:"Main",AllowFullScreen:"Main",Scrolling:"Main",ShouldScale:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ClientLayoutElement:{ClientRecipe:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},AgaveLayoutElement:{AgaveId:"Main",Manifest:"Main",AgaveData:"Main",AgaveSettings:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},StatusUpdateLayoutElement:{SourceId:"sourceId",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},ContainerSceneGraphElement:{UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},TextureSceneGraphElement:{UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},AnimationSequence:{Name:"Main",AnimationsCompleteFunction:"Main",ClientRequirements:"Main"},Animation:{AnimationName:"Main",AnimationTrigger:"Main",TransitionIds:"Main",ClientState:"Main",Behaviors:"Main"},AnimationTarget:{ElementId:"Main",AnimatablePropertyName:"Main",TransformIndex:"Main",TransformComponent:"Main"},AnimationFunction:{Name:"Main",FunctionId:"Main",Expression:"Main",MaintainStateOnStart:"Main",Flags:"Main"},AnimationTransition:{ElementId:"Main"},TransitionContainer:{AnimatablePropertyName:"Main",Curve:"Main",Duration:"Main",Delay:"Main"},TransitionEffect:{TransformComponent:"Main",TransformIndex:"Main",StartValue:"Main",EndValue:"Main"},AnimationParameter:{ParameterName:"Main",ParameterValue:"Main"},StaticImage:{Name:"Main",Filename:"Main",FillStyle:"Main",HorizontalAlignment:"Main",VerticalAlignment:"Main",Tiling:"Main"},Path:{Name:"Main",StrokeWidth:"Main",PathType:"Main",Values:"Main"},LayoutDebugInfo:{RecipeId:"Main",IsCulled:"Main",IsAborted:"Main",TotalScore:"Main",CropDescription:"Main",CropName:"Main"},RuleResult:{Description:"Main",Name:"Main",Weight:"Main",Level:"Main",Score:"Main",NormalizedScore:"Main",ExecutionStage:"Main"},InteractionModel:{RequiresParallax:"Main",Transitions:"Main",AnimationContainers:"Main",AnimationEffects:"Main",ContentNavigationMarkerCollections:"Main"},FsmNode:{Name:"Main",CanNavigateTo:"Main",AllowDeferredExit:"Main",IsModal:"Main"},FsmEdge:{Name:"Main",ResetDescendants:"Main",AllowBubbling:"Main",PreFetchAnimations:"Main",HistoricallyRelevant:"Main",Behaviors:"Main"},KeyFrame:{Type:"Main",ScrollWidth:"Main",ScrollHeight:"Main",Scrollability:"Main",CoverageMethod:"Main",SnapPointsHorizontal:"Main",SnapPointsVertical:"Main",IsDefaultNavigation:"Main"},TriggerSet:{Name:"Main",AlwaysTryDefaultAction:"Main",ClientState:"Main",Behaviors:"Main"},Trigger:{},DefaultAction:{Action:"Main"},SelectMethod:{Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},SwipeSelectMethod:{Direction:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},ClientSelectMethod:{Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},EditModeClientSignal:{},KeyboardSelectMethod:{Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},KeyClick:{Key:"Main",Modifier:"Main",KeyDown:"Main"},MouseSelectMethod:{Action:"Main",Button:"Main",TriggerTarget:"Main",TriggerTargetId:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},CameraSelect:{Action:"Main",VisibilityRatio:"Main",ViewportScaleX:"Main",ViewportScaleY:"Main",ViewportOffsetRatioX:"Main",ViewportOffsetRatioY:"Main"},CameraSelectMethod:{Action:"Main",VisibilityRatio:"Main",ViewportScaleX:"Main",ViewportScaleY:"Main",ViewportOffsetRatioX:"Main",ViewportOffsetRatioY:"Main",TriggerTarget:"Main",TriggerTargetId:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},TimingSelect:{Time:"Main",Variance:"Main",FireOnStart:"Main"},TimingSelectMethod:{Time:"Main",Variance:"Main",FireOnStart:"Main",Method:"Main",Target:"Main",KeyNames:"Main",TargetId:"Main"},StatelessRule:{},RotationTransform2D:{Value:"Main",Flags:"Main"},TranslateTransform2D:{TranslateX:"Main",TranslateY:"Main",Flags:"Main"},ScaleTransform2D:{ScaleX:"Main",ScaleY:"Main",Flags:"Main"},RotationTransform3D:{Value:"Main",ProjectX:"Main",ProjectY:"Main",ProjectZ:"Main",Flags:"Main"},TranslateTransform3D:{TranslateX:"Main",TranslateY:"Main",TranslateZ:"Main",Flags:"Main"},ScaleTransform3D:{ScaleX:"Main",ScaleY:"Main",ScaleZ:"Main",Flags:"Main"},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{AudioPlayerDescriptor:"Main",AudioPlayerType:"Main",ImageId:"Main",ImageUrl:"Main",ImageOriginalWidth:"Main",ImageOriginalHeight:"Main",ImageCropLeft:"Main",ImageCropTop:"Main",ImageCropWidth:"Main",ImageCropHeight:"Main",PositionLeft:"Main",PositionTop:"Main",PositionWidth:"Main",PositionHeight:"Main",BorderRadius:"Main",DropShadowXOff:"Main",DropShadowYOff:"Main",DropShadowBlur:"Main",DropShadowColor:"Main",DropShadowSpread:"Main",DropShadowInset:"Main",BackgroundPathShadowXOff:"Main",BackgroundPathShadowYOff:"Main",BackgroundPathShadowBlur:"Main",BackgroundPathShadowColor:"Main",ZOrder:"Main",FillOpacityOverride:"Main",FillColorOverride:"Main",IsOverlay:"Main",IsClickThrough:"Main",FillColorName:"Main",DownscaleFactor:"Main",VisibleCullingRegionLeft:"Main",VisibleCullingRegionTop:"Main",VisibleCullingRegionWidth:"Main",VisibleCullingRegionHeight:"Main",UnhashedId:"Main",KeyFrameType:"Main",ContentId:"Main",Opacity:"Main",Hidden:"Main",Animated:"Animation",ContentType:"Main",Flags:"Main",Cursor:"Main",TransformOrigin:"Main",AccessibilityInfo:"Main"},Root:{SchemaVersion:"Main"}}},w.getEnumValues=function(){var n=this;return{RenderModelRoot:{},LayoutTree:{Device:{flags:!1,type:b}},ContainerLayoutElement:{ContainerType:{flags:!1,type:l},Scrollability:{flags:!1,type:h},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},MediaViewportLayoutElement:{ContainerType:{flags:!1,type:l},Scrollability:{flags:!1,type:h},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},TextLayoutElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},TextRunElement:{},TextBlockLayoutElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},TextSection:{},TextParagraph:{ParagraphStyle:{flags:!1,type:bt}},TextList:{Style:{flags:!1,type:wt}},DecorationLayoutElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},ImageLayoutElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},VideoLayoutElement:{VideoPlayerType:{flags:!1,type:k},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},MapLayoutElement:{ContainerType:{flags:!1,type:l},Scrollability:{flags:!1,type:h},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},ProjectionLayoutElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},ViewportLayoutElement:{HorizontalAlignment:{flags:!1,type:c},VerticalAlignment:{flags:!1,type:c},ContentStretch:{flags:!1,type:nt},BackgroundType:{flags:!1,type:tt},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},EmbedLayoutElement:{Scrolling:{flags:!1,type:dt},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},ClientLayoutElement:{ClientRecipe:{flags:!1,type:gt},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},AgaveLayoutElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},StatusUpdateLayoutElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},ContainerSceneGraphElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},TextureSceneGraphElement:{ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},AnimationSequence:{ClientRequirements:{flags:!0,type:yt}},Animation:{AnimationTrigger:{flags:!1,type:g},Behaviors:{flags:!0,type:ni}},AnimationTarget:{AnimatablePropertyName:{flags:!1,type:y},TransformComponent:{flags:!1,type:p}},AnimationFunction:{Flags:{flags:!0,type:vt}},AnimationTransition:{},TransitionContainer:{AnimatablePropertyName:{flags:!1,type:y}},TransitionEffect:{TransformComponent:{flags:!1,type:p}},AnimationParameter:{},StaticImage:{FillStyle:{flags:!1,type:it},HorizontalAlignment:{flags:!1,type:c},VerticalAlignment:{flags:!1,type:c},Tiling:{flags:!1,type:ct}},Path:{PathType:{flags:!1,type:ht}},LayoutDebugInfo:{},RuleResult:{Level:{flags:!1,type:rt},NormalizedScore:{flags:!1,type:ut}},InteractionModel:{},FsmNode:{},FsmEdge:{Behaviors:{flags:!0,type:ki}},KeyFrame:{Scrollability:{flags:!1,type:h},CoverageMethod:{flags:!1,type:kt}},TriggerSet:{Behaviors:{flags:!1,type:at}},Trigger:{},DefaultAction:{Action:{flags:!1,type:lt}},SelectMethod:{Method:{flags:!1,type:e},Target:{flags:!1,type:f}},SwipeSelectMethod:{Direction:{flags:!1,type:pt},Method:{flags:!1,type:e},Target:{flags:!1,type:f}},ClientSelectMethod:{Method:{flags:!1,type:e},Target:{flags:!1,type:f}},EditModeClientSignal:{},KeyboardSelectMethod:{Method:{flags:!1,type:e},Target:{flags:!1,type:f}},KeyClick:{Key:{flags:!1,type:st},Modifier:{flags:!1,type:ot}},MouseSelectMethod:{Action:{flags:!1,type:et},Button:{flags:!1,type:ft},TriggerTarget:{flags:!1,type:f},Method:{flags:!1,type:e},Target:{flags:!1,type:f}},CameraSelect:{Action:{flags:!1,type:v}},CameraSelectMethod:{Action:{flags:!1,type:v},TriggerTarget:{flags:!1,type:f},Method:{flags:!1,type:e},Target:{flags:!1,type:f}},TimingSelect:{},TimingSelectMethod:{Method:{flags:!1,type:e},Target:{flags:!1,type:f}},StatelessRule:{},RotationTransform2D:{Flags:{flags:!0,type:o}},TranslateTransform2D:{Flags:{flags:!0,type:o}},ScaleTransform2D:{Flags:{flags:!0,type:o}},RotationTransform3D:{Flags:{flags:!0,type:o}},TranslateTransform3D:{Flags:{flags:!0,type:o}},ScaleTransform3D:{Flags:{flags:!0,type:o}},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{AudioPlayerType:{flags:!1,type:d},ContentType:{flags:!1,type:t},Flags:{flags:!0,type:r},Cursor:{flags:!1,type:u}},Root:{}}},w.SetStructValues=function(){var t=this;w.StructValues={RenderModelRoot:{},LayoutTree:{},ContainerLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},MediaViewportLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},TextLayoutElement:{TextStyle:n.TextStyle,BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},TextRunElement:{TextStyle:n.TextStyle},TextBlockLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},ImageLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},VideoLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},MapLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},ProjectionLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},ViewportLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},EmbedLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},ClientLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},AgaveLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},StatusUpdateLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},ContainerSceneGraphElement:{TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},TextureSceneGraphElement:{TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},AnimationSequence:{},Animation:{ClientState:n.ClientState},AnimationTarget:{},AnimationFunction:{},AnimationTransition:{},TransitionContainer:{},TransitionEffect:{},AnimationParameter:{},StaticImage:{},Path:{},LayoutDebugInfo:{},RuleResult:{},InteractionModel:{},FsmNode:{},FsmEdge:{},KeyFrame:{},TriggerSet:{ClientState:n.ClientState},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{BorderRadius:n.BorderRadius,TransformOrigin:n.TransformOrigin,AccessibilityInfo:n.AccessibilityInfo},Root:{}}},w.SetStructCollectionValues=function(){var t=this;w.StructCollectionValues={RenderModelRoot:{PaletteColors:n.PaletteColorValue},LayoutTree:{TextStyles:n.TextStyle},ContainerLayoutElement:{},MediaViewportLayoutElement:{},TextLayoutElement:{},TextRunElement:{},TextBlockLayoutElement:{},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{},ImageLayoutElement:{},VideoLayoutElement:{},MapLayoutElement:{Pins:n.MapPin},ProjectionLayoutElement:{},ViewportLayoutElement:{},EmbedLayoutElement:{},ClientLayoutElement:{},AgaveLayoutElement:{},StatusUpdateLayoutElement:{},ContainerSceneGraphElement:{},TextureSceneGraphElement:{},AnimationSequence:{},Animation:{},AnimationTarget:{},AnimationFunction:{},AnimationTransition:{},TransitionContainer:{},TransitionEffect:{},AnimationParameter:{},StaticImage:{},Path:{},LayoutDebugInfo:{},RuleResult:{},InteractionModel:{Transitions:n.Transition,AnimationContainers:n.AnimationContainer,AnimationEffects:n.AnimationEffect,ContentNavigationMarkerCollections:n.ContentNavigationMarkerCollection},FsmNode:{},FsmEdge:{},KeyFrame:{SnapPointsHorizontal:n.SnapPoint,SnapPointsVertical:n.SnapPoint},TriggerSet:{},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{},Root:{}}},w.SetPropertyCollectionValues=function(){var n=this;w.PropertyCollectionValues={RenderModelRoot:{},LayoutTree:{},ContainerLayoutElement:{},MediaViewportLayoutElement:{},TextLayoutElement:{},TextRunElement:{},TextBlockLayoutElement:{},TextSection:{},TextParagraph:{},TextList:{},DecorationLayoutElement:{},ImageLayoutElement:{},VideoLayoutElement:{},MapLayoutElement:{},ProjectionLayoutElement:{},ViewportLayoutElement:{},EmbedLayoutElement:{},ClientLayoutElement:{},AgaveLayoutElement:{},StatusUpdateLayoutElement:{},ContainerSceneGraphElement:{},TextureSceneGraphElement:{},AnimationSequence:{},Animation:{TransitionIds:!0},AnimationTarget:{},AnimationFunction:{},AnimationTransition:{},TransitionContainer:{},TransitionEffect:{},AnimationParameter:{},StaticImage:{},Path:{},LayoutDebugInfo:{},RuleResult:{},InteractionModel:{},FsmNode:{},FsmEdge:{},KeyFrame:{},TriggerSet:{},Trigger:{},DefaultAction:{},SelectMethod:{},SwipeSelectMethod:{},ClientSelectMethod:{},EditModeClientSignal:{},KeyboardSelectMethod:{},KeyClick:{},MouseSelectMethod:{},CameraSelect:{},CameraSelectMethod:{},TimingSelect:{},TimingSelectMethod:{},StatelessRule:{},RotationTransform2D:{},TranslateTransform2D:{},ScaleTransform2D:{},RotationTransform3D:{},TranslateTransform3D:{},ScaleTransform3D:{},LayoutContext:{},ContentProxy:{},AudioLayoutElement:{},Root:{}}},w.PropSerializer=new di,w.DefaultProps=w.getDefaultProps(),w.PropNotifierMappings=w.getPropNotifierMappings(),w.EnumValues=w.getEnumValues(),w.HashedMeanings=w.getHashedMeanings(),w.RootId="ModelRoot",w}();n.RenderGraph=w})(r=t.RM||(t.RM={}))})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i=n.Model.GraphModel,r;(function(n){var t=function(n){function t(t,i,r){var u=this;if(n.call(this,null),!i.graph.containsObject(t))throw new Error("Object does not exist.");u.id=t;u.renderModel=i;u.objectType=r}return __extends(t,n),t.prototype.getProperty=function(n,t){var i=this;return i.renderModel.graph.getProperty(i.id,n,t)},t.prototype.setProperty=function(n,t,i){i===void 0&&(i=!0);var r=this;r.renderModel.graph.setProperty(r.id,n,t,i)},t.prototype.updateProperty=function(n){var t=this;t.renderModel.graph.updateProperty(t.id,n)},t.prototype.getRelationshipsFrom=function(n,t){var r=this,u=r.renderModel.graph.getObjectsRelatedFrom(r.id,n,t),i;if(!u)return[];var e=u.length,f=[],o=r.renderModel;for(i=0;i<e;i++)f.push(o.getModelObject(u[i]));return f},t.prototype.getRelationshipsTo=function(n,t){var r=this,u=r.renderModel.graph.getObjectsRelatedTo(r.id,n,t),i;if(!u)return[];var e=u.length,f=[],o=r.renderModel;for(i=0;i<e;i++)f.push(o.getModelObject(u[i]));return f},t.prototype.getRelationshipFrom=function(n,t){var i=this,r=i.renderModel.graph.getObjectsRelatedFrom(i.id,n,t);return!r||r.length==0?undefined:i.renderModel.getModelObject(r[0])},t.prototype.getRelationshipTo=function(n,t){var i=this,r=i.renderModel.graph.getObjectsRelatedTo(i.id,n,t);return!r||r.length==0?undefined:i.renderModel.getModelObject(r[0])},t.prototype.addRelationship=function(n,t,i){var r=this;r.renderModel.graph.addRelationship(r.id,n.id,t,i)},t.prototype.removeRelationship=function(n,t){var i=this;i.renderModel.graph.removeRelationship(i.id,n.id,t)},t.prototype.setRelationships=function(n,t){for(var r=this,f=n.length,u=[],i=0;i<f;i++)u.push(n[i].id);r.renderModel.graph.setRelationships(r.id,u,t)},t.prototype.getExternalDataId=function(n){var i=this,r=i.renderModel.graph,t=r.getObjectsRelatedFrom(i.id,57,n);return t&&t.length>0?r.getExternalDataId(t[0]):undefined},t}(DisposableObjectOM),w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi,yi,pi,wi,bi,ki,di,gi,nr,tr,ir,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,ru,u,v,f,r,l,c,s,h,pr,wr,y,p,a,br,kr,dr,gr,e,nu,tu,o,iu;n.ModelObject=t;w=function(t){function u(n,i){var u=this;t.call(this,n,i,0);u.model=i.renderModelRoot;u.animationSequences=new r(u,0);u.layoutTrees=new r(u,1)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(0,t);return n.getModelObject(i)},u.prototype.getWorldId=function(n){var t=this;return t.getProperty(0,n)},u.prototype.setWorldId=function(n){var t=this;t.setProperty(0,n)},u.prototype.getLayoutStyleId=function(n){var t=this;return t.getProperty(1,n)},u.prototype.setLayoutStyleId=function(n){var t=this;t.setProperty(1,n)},u.prototype.getStyleVersion=function(n){var t=this;return t.getProperty(2,n)},u.prototype.setStyleVersion=function(n){var t=this;t.setProperty(2,n)},u.prototype.getWorldVersion=function(n){var t=this;return t.getProperty(3,n)},u.prototype.setWorldVersion=function(n){var t=this;t.setProperty(3,n)},u.prototype.getEditVersion=function(n){var t=this;return t.getProperty(4,n)},u.prototype.setEditVersion=function(n){var t=this;t.setProperty(4,n)},u.prototype.getRemoteDesignObjects=function(n){var t=this;return t.getProperty(5,n)},u.prototype.setRemoteDesignObjects=function(n){var t=this;t.setProperty(5,n)},u.prototype.getTitle=function(n){var t=this;return t.getProperty(6,n)},u.prototype.setTitle=function(n){var t=this;t.setProperty(6,n)},u.prototype.getCulture=function(n){var t=this;return t.getProperty(7,n)},u.prototype.setCulture=function(n){var t=this;t.setProperty(7,n)},u.prototype.getPaletteColors=function(n){var i=this,t=i.getProperty(8,n);return t==null&&(t=new c,i.setProperty(8,t,!1)),t.setObjectProperty(i,8),t},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[0],t[r.id]=!0,i.worldId=r.getWorldId(),i.layoutStyleId=r.getLayoutStyleId(),i.styleVersion=r.getStyleVersion(),i.worldVersion=r.getWorldVersion(),i.editVersion=r.getEditVersion(),i.remoteDesignObjects=r.getRemoteDesignObjects(),i.title=r.getTitle(),i.culture=r.getCulture(),r.getPaletteColors()!=null&&(i.paletteColors=r.getPaletteColors().serialize()),i.animationSequences=r.animationSequences.serialize(t),i.layoutTrees=r.layoutTrees.serialize(t),i)},u.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e="RenderRoot",u=n.getModelObject(e),t.worldId!==undefined&&u.setWorldId(t.worldId),t.layoutStyleId!==undefined&&u.setLayoutStyleId(t.layoutStyleId),t.styleVersion!==undefined&&u.setStyleVersion(t.styleVersion),t.worldVersion!==undefined&&u.setWorldVersion(t.worldVersion),t.editVersion!==undefined&&u.setEditVersion(t.editVersion),t.remoteDesignObjects!==undefined&&u.setRemoteDesignObjects(t.remoteDesignObjects),t.title!==undefined&&u.setTitle(t.title),t.culture!==undefined&&u.setCulture(t.culture),t.paletteColors!==undefined&&u.getPaletteColors().deserializeStructCollection(t.paletteColors,wr.Deserialize),t.animationSequences!==undefined&&u.animationSequences.deserialize(t.animationSequences,r),t.layoutTrees!==undefined&&u.layoutTrees.deserialize(t.layoutTrees,r),u)},u}(t);n.RenderModelRoot=w;b=function(t){function r(n,i){var r=this;t.call(this,n,i,1);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(1,t);return n.getModelObject(i)},r.prototype.getDevice=function(n){var t=this;return t.getProperty(9,n)},r.prototype.setDevice=function(n){var t=this;t.setProperty(9,n)},r.prototype.getViewportHeight=function(n){var t=this;return t.getProperty(10,n)},r.prototype.setViewportHeight=function(n){var t=this;t.setProperty(10,n)},r.prototype.getViewportWidth=function(n){var t=this;return t.getProperty(11,n)},r.prototype.setViewportWidth=function(n){var t=this;t.setProperty(11,n)},r.prototype.getPreviousLayoutSucceeded=function(n){var t=this;return t.getProperty(12,n)},r.prototype.setPreviousLayoutSucceeded=function(n){var t=this;t.setProperty(12,n)},r.prototype.getLayoutFailed=function(n){var t=this;return t.getProperty(13,n)},r.prototype.setLayoutFailed=function(n){var t=this;t.setProperty(13,n)},r.prototype.getErrorMessage=function(n){var t=this;return t.getProperty(14,n)},r.prototype.setErrorMessage=function(n){var t=this;t.setProperty(14,n)},r.prototype.getTextStyles=function(n){var i=this,t=i.getProperty(15,n);return t==null&&(t=new c,i.setProperty(15,t,!1)),t.setObjectProperty(i,15),t},r.prototype.getRootContainer=function(n){var t=this;return t.getRelationshipFrom(2,n)},r.prototype.setRootContainer=function(n){var t=this;t.setRelationships(n?[n]:[],2)},r.prototype.getInteractionModel=function(n){var t=this;return t.getRelationshipFrom(3,n)},r.prototype.setInteractionModel=function(n){var t=this;t.setRelationships(n?[n]:[],3)},r.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[1],t[i.id]=!0,r.device=n.ClientDevice[i.getDevice()],r.viewportHeight=i.getViewportHeight(),r.viewportWidth=i.getViewportWidth(),r.previousLayoutSucceeded=i.getPreviousLayoutSucceeded(),r.layoutFailed=i.getLayoutFailed(),r.errorMessage=i.getErrorMessage(),i.getTextStyles()!=null&&(r.textStyles=i.getTextStyles().serialize()),i.getRootContainer()!==undefined&&(r.rootContainer=i.getRootContainer().serialize(t)),i.getInteractionModel()!==undefined&&(r.interactionModel=i.getInteractionModel().serialize(t)),r)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(1,e),f=t.getModelObject(o),r.device!==undefined&&f.setDevice(n.ClientDevice[r.device]),r.viewportHeight!==undefined&&f.setViewportHeight(r.viewportHeight),r.viewportWidth!==undefined&&f.setViewportWidth(r.viewportWidth),r.previousLayoutSucceeded!==undefined&&f.setPreviousLayoutSucceeded(r.previousLayoutSucceeded),r.layoutFailed!==undefined&&f.setLayoutFailed(r.layoutFailed),r.errorMessage!==undefined&&f.setErrorMessage(r.errorMessage),r.textStyles!==undefined&&f.getTextStyles().deserializeStructCollection(r.textStyles,a.Deserialize),r.rootContainer!==undefined&&f.setRootContainer(t.deserialize(r.rootContainer,u)),r.interactionModel!==undefined&&f.setInteractionModel(t.deserialize(r.interactionModel,u)),f)},r}(t);n.LayoutTree=b;k=function(t){function s(n,i){var e=this;t.call(this,n,i,4);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.children=new r(e,9);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(4,t);return n.getModelObject(i)},s.prototype.getType=function(n){var t=this;return t.getProperty(53,n)},s.prototype.setType=function(n){var t=this;t.setProperty(53,n)},s.prototype.getCanVisualize=function(n){var t=this;return t.getProperty(54,n)},s.prototype.setCanVisualize=function(n){var t=this;t.setProperty(54,n)},s.prototype.getContainerType=function(n){var t=this;return t.getProperty(55,n)},s.prototype.setContainerType=function(n){var t=this;t.setProperty(55,n)},s.prototype.getScrollability=function(n){var t=this;return t.getProperty(56,n)},s.prototype.setScrollability=function(n){var t=this;t.setProperty(56,n)},s.prototype.getOverflow=function(n){var t=this;return t.getProperty(57,n)},s.prototype.setOverflow=function(n){var t=this;t.setProperty(57,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getDebugInfo=function(n){var t=this;return t.getRelationshipFrom(10,n)},s.prototype.setDebugInfo=function(n){var t=this;t.setRelationships(n?[n]:[],10)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[4],t[i.id]=!0,r.type=i.getType(),r.canVisualize=i.getCanVisualize(),r.containerType=n.LayoutContainerType[i.getContainerType()],r.scrollability=n.LayoutScrollability[i.getScrollability()],r.overflow=i.getOverflow(),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),r.children=i.children.serialize(t),i.getDebugInfo()!==undefined&&(r.debugInfo=i.getDebugInfo().serialize(t)),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(4,s),f=t.getModelObject(c),r.type!==undefined&&f.setType(r.type),r.canVisualize!==undefined&&f.setCanVisualize(r.canVisualize),r.containerType!==undefined&&f.setContainerType(n.LayoutContainerType[r.containerType]),r.scrollability!==undefined&&f.setScrollability(n.LayoutScrollability[r.scrollability]),r.overflow!==undefined&&f.setOverflow(r.overflow),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.children!==undefined&&f.children.deserialize(r.children,u),r.debugInfo!==undefined&&f.setDebugInfo(t.deserialize(r.debugInfo,u)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.ContainerLayoutElement=k;d=function(t){function s(n,i){var e=this;t.call(this,n,i,5);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.children=new r(e,9);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(5,t);return n.getModelObject(i)},s.prototype.getType=function(n){var t=this;return t.getProperty(53,n)},s.prototype.setType=function(n){var t=this;t.setProperty(53,n)},s.prototype.getCanVisualize=function(n){var t=this;return t.getProperty(54,n)},s.prototype.setCanVisualize=function(n){var t=this;t.setProperty(54,n)},s.prototype.getContainerType=function(n){var t=this;return t.getProperty(55,n)},s.prototype.setContainerType=function(n){var t=this;t.setProperty(55,n)},s.prototype.getScrollability=function(n){var t=this;return t.getProperty(56,n)},s.prototype.setScrollability=function(n){var t=this;t.setProperty(56,n)},s.prototype.getOverflow=function(n){var t=this;return t.getProperty(57,n)},s.prototype.setOverflow=function(n){var t=this;t.setProperty(57,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getDebugInfo=function(n){var t=this;return t.getRelationshipFrom(10,n)},s.prototype.setDebugInfo=function(n){var t=this;t.setRelationships(n?[n]:[],10)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[5],t[i.id]=!0,r.type=i.getType(),r.canVisualize=i.getCanVisualize(),r.containerType=n.LayoutContainerType[i.getContainerType()],r.scrollability=n.LayoutScrollability[i.getScrollability()],r.overflow=i.getOverflow(),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),r.children=i.children.serialize(t),i.getDebugInfo()!==undefined&&(r.debugInfo=i.getDebugInfo().serialize(t)),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(5,s),f=t.getModelObject(c),r.type!==undefined&&f.setType(r.type),r.canVisualize!==undefined&&f.setCanVisualize(r.canVisualize),r.containerType!==undefined&&f.setContainerType(n.LayoutContainerType[r.containerType]),r.scrollability!==undefined&&f.setScrollability(n.LayoutScrollability[r.scrollability]),r.overflow!==undefined&&f.setOverflow(r.overflow),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.children!==undefined&&f.children.deserialize(r.children,u),r.debugInfo!==undefined&&f.setDebugInfo(t.deserialize(r.debugInfo,u)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.MediaViewportLayoutElement=d;g=function(t){function s(n,i){var e=this;t.call(this,n,i,6);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(6,t);return n.getModelObject(i)},s.prototype.getText=function(n){var t=this;return t.getProperty(58,n)},s.prototype.setText=function(n){var t=this;t.setProperty(58,n)},s.prototype.getFontKey=function(n){var t=this;return t.getProperty(59,n)},s.prototype.setFontKey=function(n){var t=this;t.setProperty(59,n)},s.prototype.getTextColorName=function(n){var t=this;return t.getProperty(60,n)},s.prototype.setTextColorName=function(n){var t=this;t.setProperty(60,n)},s.prototype.getTextOpacityOverride=function(n){var t=this;return t.getProperty(61,n)},s.prototype.setTextOpacityOverride=function(n){var t=this;t.setProperty(61,n)},s.prototype.getTextColorOverride=function(n){var t=this;return t.getProperty(62,n)},s.prototype.setTextColorOverride=function(n){var t=this;t.setProperty(62,n)},s.prototype.getTextShadowXOff=function(n){var t=this;return t.getProperty(63,n)},s.prototype.setTextShadowXOff=function(n){var t=this;t.setProperty(63,n)},s.prototype.getTextShadowYOff=function(n){var t=this;return t.getProperty(64,n)},s.prototype.setTextShadowYOff=function(n){var t=this;t.setProperty(64,n)},s.prototype.getTextShadowBlur=function(n){var t=this;return t.getProperty(65,n)},s.prototype.setTextShadowBlur=function(n){var t=this;t.setProperty(65,n)},s.prototype.getTextShadowColor=function(n){var t=this;return t.getProperty(66,n)},s.prototype.setTextShadowColor=function(n){var t=this;t.setProperty(66,n)},s.prototype.getHyperlinkUri=function(n){var t=this;return t.getProperty(67,n)},s.prototype.setHyperlinkUri=function(n){var t=this;t.setProperty(67,n)},s.prototype.getTextStyle=function(n){var i=this,t=i.getProperty(68,n);return t!=null&&t.setObjectProperty(i,68),t},s.prototype.setTextStyle=function(n){var t=this;n!=null&&n.setObjectProperty(t,68);t.setProperty(68,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentParagraph=function(n){var t=this;return t.getRelationshipTo(12,n)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[6],t[i.id]=!0,r.text=i.getText(),r.fontKey=i.getFontKey(),r.textColorName=i.getTextColorName(),r.textOpacityOverride=i.getTextOpacityOverride(),r.textColorOverride=i.getTextColorOverride(),r.textShadowXOff=i.getTextShadowXOff(),r.textShadowYOff=i.getTextShadowYOff(),r.textShadowBlur=i.getTextShadowBlur(),r.textShadowColor=i.getTextShadowColor(),r.hyperlinkUri=i.getHyperlinkUri(),i.getTextStyle()!=null&&(r.textStyle=i.getTextStyle().serialize()),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(6,s),f=t.getModelObject(c),r.text!==undefined&&f.setText(r.text),r.fontKey!==undefined&&f.setFontKey(r.fontKey),r.textColorName!==undefined&&f.setTextColorName(r.textColorName),r.textOpacityOverride!==undefined&&f.setTextOpacityOverride(r.textOpacityOverride),r.textColorOverride!==undefined&&f.setTextColorOverride(r.textColorOverride),r.textShadowXOff!==undefined&&f.setTextShadowXOff(r.textShadowXOff),r.textShadowYOff!==undefined&&f.setTextShadowYOff(r.textShadowYOff),r.textShadowBlur!==undefined&&f.setTextShadowBlur(r.textShadowBlur),r.textShadowColor!==undefined&&f.setTextShadowColor(r.textShadowColor),r.hyperlinkUri!==undefined&&f.setHyperlinkUri(r.hyperlinkUri),r.textStyle!==undefined&&f.setTextStyle(a.Deserialize(r.textStyle)),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.TextLayoutElement=g;nt=function(t){function r(n,i){var r=this;t.call(this,n,i,7);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(7,t);return n.getModelObject(i)},r.prototype.getText=function(n){var t=this;return t.getProperty(58,n)},r.prototype.setText=function(n){var t=this;t.setProperty(58,n)},r.prototype.getFontKey=function(n){var t=this;return t.getProperty(59,n)},r.prototype.setFontKey=function(n){var t=this;t.setProperty(59,n)},r.prototype.getTextColorName=function(n){var t=this;return t.getProperty(60,n)},r.prototype.setTextColorName=function(n){var t=this;t.setProperty(60,n)},r.prototype.getTextOpacityOverride=function(n){var t=this;return t.getProperty(61,n)},r.prototype.setTextOpacityOverride=function(n){var t=this;t.setProperty(61,n)},r.prototype.getTextColorOverride=function(n){var t=this;return t.getProperty(62,n)},r.prototype.setTextColorOverride=function(n){var t=this;t.setProperty(62,n)},r.prototype.getTextShadowXOff=function(n){var t=this;return t.getProperty(63,n)},r.prototype.setTextShadowXOff=function(n){var t=this;t.setProperty(63,n)},r.prototype.getTextShadowYOff=function(n){var t=this;return t.getProperty(64,n)},r.prototype.setTextShadowYOff=function(n){var t=this;t.setProperty(64,n)},r.prototype.getTextShadowBlur=function(n){var t=this;return t.getProperty(65,n)},r.prototype.setTextShadowBlur=function(n){var t=this;t.setProperty(65,n)},r.prototype.getTextShadowColor=function(n){var t=this;return t.getProperty(66,n)},r.prototype.setTextShadowColor=function(n){var t=this;t.setProperty(66,n)},r.prototype.getHyperlinkUri=function(n){var t=this;return t.getProperty(67,n)},r.prototype.setHyperlinkUri=function(n){var t=this;t.setProperty(67,n)},r.prototype.getTextStyle=function(n){var i=this,t=i.getProperty(68,n);return t!=null&&t.setObjectProperty(i,68),t},r.prototype.setTextStyle=function(n){var t=this;n!=null&&n.setObjectProperty(t,68);t.setProperty(68,n)},r.prototype.getParentParagraph=function(n){var t=this;return t.getRelationshipTo(13,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[7],t[r.id]=!0,i.text=r.getText(),i.fontKey=r.getFontKey(),i.textColorName=r.getTextColorName(),i.textOpacityOverride=r.getTextOpacityOverride(),i.textColorOverride=r.getTextColorOverride(),i.textShadowXOff=r.getTextShadowXOff(),i.textShadowYOff=r.getTextShadowYOff(),i.textShadowBlur=r.getTextShadowBlur(),i.textShadowColor=r.getTextShadowColor(),i.hyperlinkUri=r.getHyperlinkUri(),r.getTextStyle()!=null&&(i.textStyle=r.getTextStyle().serialize()),i)},r.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(7,f),u=n.getModelObject(e),t.text!==undefined&&u.setText(t.text),t.fontKey!==undefined&&u.setFontKey(t.fontKey),t.textColorName!==undefined&&u.setTextColorName(t.textColorName),t.textOpacityOverride!==undefined&&u.setTextOpacityOverride(t.textOpacityOverride),t.textColorOverride!==undefined&&u.setTextColorOverride(t.textColorOverride),t.textShadowXOff!==undefined&&u.setTextShadowXOff(t.textShadowXOff),t.textShadowYOff!==undefined&&u.setTextShadowYOff(t.textShadowYOff),t.textShadowBlur!==undefined&&u.setTextShadowBlur(t.textShadowBlur),t.textShadowColor!==undefined&&u.setTextShadowColor(t.textShadowColor),t.hyperlinkUri!==undefined&&u.setHyperlinkUri(t.hyperlinkUri),t.textStyle!==undefined&&u.setTextStyle(a.Deserialize(t.textStyle)),u)},r}(t);n.TextRunElement=nt;tt=function(t){function s(n,i){var e=this;t.call(this,n,i,8);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(8,t);return n.getModelObject(i)},s.prototype.getTextStyleId=function(n){var t=this;return t.getProperty(69,n)},s.prototype.setTextStyleId=function(n){var t=this;t.setProperty(69,n)},s.prototype.getTextColorId=function(n){var t=this;return t.getProperty(70,n)},s.prototype.setTextColorId=function(n){var t=this;t.setProperty(70,n)},s.prototype.getLineHeight=function(n){var t=this;return t.getProperty(71,n)},s.prototype.setLineHeight=function(n){var t=this;t.setProperty(71,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getSectionList=function(n){var t=this;return t.getRelationshipFrom(11,n)},s.prototype.setSectionList=function(n){var t=this;t.setRelationships(n?[n]:[],11)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[8],t[i.id]=!0,r.textStyleId=i.getTextStyleId(),r.textColorId=i.getTextColorId(),r.lineHeight=i.getLineHeight(),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getSectionList()!==undefined&&(r.sectionList=i.getSectionList().serialize(t)),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(8,s),f=t.getModelObject(c),r.textStyleId!==undefined&&f.setTextStyleId(r.textStyleId),r.textColorId!==undefined&&f.setTextColorId(r.textColorId),r.lineHeight!==undefined&&f.setLineHeight(r.lineHeight),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.sectionList!==undefined&&f.setSectionList(t.deserialize(r.sectionList,u)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.TextBlockLayoutElement=tt;it=function(t){function r(n,i){var r=this;t.call(this,n,i,9);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(9,t);return n.getModelObject(i)},r.prototype.getParentList=function(n){var t=this;return t.getRelationshipTo(15,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[9],t[r.id]=!0,i)},r.Deserialize=function(n,t,r){var u,f,e;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),u=r[t.id],t.ref)?n.getModelObject(u):(f=n.graph.createObject(9,u),e=n.getModelObject(f),e)},r}(t);n.TextSection=it;rt=function(t){function u(n,i){var u=this;t.call(this,n,i,10);u.model=i.renderModelRoot;u.children=new r(u,12);u.runs=new r(u,13)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(10,t);return n.getModelObject(i)},u.prototype.getSpacingRatioAfter=function(n){var t=this;return t.getProperty(72,n)},u.prototype.setSpacingRatioAfter=function(n){var t=this;t.setProperty(72,n)},u.prototype.getSpacingAfter=function(n){var t=this;return t.getProperty(73,n)},u.prototype.setSpacingAfter=function(n){var t=this;t.setProperty(73,n)},u.prototype.getParagraphStyle=function(n){var t=this;return t.getProperty(74,n)},u.prototype.setParagraphStyle=function(n){var t=this;t.setProperty(74,n)},u.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(14,n)},u.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],14)},u.prototype.getParentList=function(n){var t=this;return t.getRelationshipTo(15,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[10],t[r.id]=!0,i.spacingRatioAfter=r.getSpacingRatioAfter(),i.spacingAfter=r.getSpacingAfter(),i.paragraphStyle=n.ParagraphStyle[r.getParagraphStyle()],i.children=r.children.serialize(t),i.runs=r.runs.serialize(t),r.getLayoutContext()!==undefined&&(i.layoutContext=r.getLayoutContext().serialize(t)),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(10,e),f=t.getModelObject(o),r.spacingRatioAfter!==undefined&&f.setSpacingRatioAfter(r.spacingRatioAfter),r.spacingAfter!==undefined&&f.setSpacingAfter(r.spacingAfter),r.paragraphStyle!==undefined&&f.setParagraphStyle(n.ParagraphStyle[r.paragraphStyle]),r.children!==undefined&&f.children.deserialize(r.children,u),r.runs!==undefined&&f.runs.deserialize(r.runs,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},u}(t);n.TextParagraph=rt;ut=function(t){function u(n,i){var u=this;t.call(this,n,i,11);u.model=i.renderModelRoot;u.children=new r(u,15)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(11,t);return n.getModelObject(i)},u.prototype.getStyle=function(n){var t=this;return t.getProperty(75,n)},u.prototype.setStyle=function(n){var t=this;t.setProperty(75,n)},u.prototype.getStartNum=function(n){var t=this;return t.getProperty(76,n)},u.prototype.setStartNum=function(n){var t=this;t.setProperty(76,n)},u.prototype.getParentBlock=function(n){var t=this;return t.getRelationshipTo(11,n)},u.prototype.getParentList=function(n){var t=this;return t.getRelationshipTo(15,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[11],t[r.id]=!0,i.style=n.ListStyle[r.getStyle()],i.startNum=r.getStartNum(),i.children=r.children.serialize(t),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(11,e),f=t.getModelObject(o),r.style!==undefined&&f.setStyle(n.ListStyle[r.style]),r.startNum!==undefined&&f.setStartNum(r.startNum),r.children!==undefined&&f.children.deserialize(r.children,u),f)},u}(t);n.TextList=ut;ft=function(t){function s(n,i){var e=this;t.call(this,n,i,12);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(12,t);return n.getModelObject(i)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[12],t[i.id]=!0,r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(12,s),f=t.getModelObject(c),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.DecorationLayoutElement=ft;et=function(t){function s(n,i){var e=this;t.call(this,n,i,14);e.model=i.renderModelRoot;e.imageCrop=new u(e,81,82,83,84);e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(14,t);return n.getModelObject(i)},s.prototype.getFilterColorName=function(n){var t=this;return t.getProperty(85,n)},s.prototype.setFilterColorName=function(n){var t=this;t.setProperty(85,n)},s.prototype.getImageId=function(n){var t=this;return t.getProperty(77,n)},s.prototype.setImageId=function(n){var t=this;t.setProperty(77,n)},s.prototype.getImageUrl=function(n){var t=this;return t.getProperty(78,n)},s.prototype.setImageUrl=function(n){var t=this;t.setProperty(78,n)},s.prototype.getImageOriginalWidth=function(n){var t=this;return t.getProperty(79,n)},s.prototype.setImageOriginalWidth=function(n){var t=this;t.setProperty(79,n)},s.prototype.getImageOriginalHeight=function(n){var t=this;return t.getProperty(80,n)},s.prototype.setImageOriginalHeight=function(n){var t=this;t.setProperty(80,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getPath=function(n){var t=this;return t.getRelationshipFrom(16,n)},s.prototype.setPath=function(n){var t=this;t.setRelationships(n?[n]:[],16)},s.prototype.getFilterPath=function(n){var t=this;return t.getRelationshipFrom(17,n)},s.prototype.setFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],17)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[14],t[i.id]=!0,r.filterColorName=i.getFilterColorName(),r.imageId=i.getImageId(),r.imageUrl=i.getImageUrl(),r.imageOriginalWidth=i.getImageOriginalWidth(),r.imageOriginalHeight=i.getImageOriginalHeight(),r.imageCrop={left:i.imageCrop.getLeft(),top:i.imageCrop.getTop(),width:i.imageCrop.getWidth(),height:i.imageCrop.getHeight()},r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getPath()!==undefined&&(r.path=i.getPath().serialize(t)),i.getFilterPath()!==undefined&&(r.filterPath=i.getFilterPath().serialize(t)),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(14,s),f=t.getModelObject(c),r.filterColorName!==undefined&&f.setFilterColorName(r.filterColorName),r.imageId!==undefined&&f.setImageId(r.imageId),r.imageUrl!==undefined&&f.setImageUrl(r.imageUrl),r.imageOriginalWidth!==undefined&&f.setImageOriginalWidth(r.imageOriginalWidth),r.imageOriginalHeight!==undefined&&f.setImageOriginalHeight(r.imageOriginalHeight),r.imageCrop!==undefined&&(f.imageCrop.setLeft(r.imageCrop.left),f.imageCrop.setTop(r.imageCrop.top),f.imageCrop.setWidth(r.imageCrop.width),f.imageCrop.setHeight(r.imageCrop.height)),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.path!==undefined&&f.setPath(t.deserialize(r.path,u)),r.filterPath!==undefined&&f.setFilterPath(t.deserialize(r.filterPath,u)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.ImageLayoutElement=et;ot=function(t){function s(n,i){var e=this;t.call(this,n,i,15);e.model=i.renderModelRoot;e.imageCrop=new u(e,81,82,83,84);e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(15,t);return n.getModelObject(i)},s.prototype.getVideoPlayerDescriptor=function(n){var t=this;return t.getProperty(86,n)},s.prototype.setVideoPlayerDescriptor=function(n){var t=this;t.setProperty(86,n)},s.prototype.getVideoPlayerType=function(n){var t=this;return t.getProperty(87,n)},s.prototype.setVideoPlayerType=function(n){var t=this;t.setProperty(87,n)},s.prototype.getImageId=function(n){var t=this;return t.getProperty(77,n)},s.prototype.setImageId=function(n){var t=this;t.setProperty(77,n)},s.prototype.getImageUrl=function(n){var t=this;return t.getProperty(78,n)},s.prototype.setImageUrl=function(n){var t=this;t.setProperty(78,n)},s.prototype.getImageOriginalWidth=function(n){var t=this;return t.getProperty(79,n)},s.prototype.setImageOriginalWidth=function(n){var t=this;t.setProperty(79,n)},s.prototype.getImageOriginalHeight=function(n){var t=this;return t.getProperty(80,n)},s.prototype.setImageOriginalHeight=function(n){var t=this;t.setProperty(80,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[15],t[i.id]=!0,r.videoPlayerDescriptor=i.getVideoPlayerDescriptor(),r.videoPlayerType=n.VideoPlayerType[i.getVideoPlayerType()],r.imageId=i.getImageId(),r.imageUrl=i.getImageUrl(),r.imageOriginalWidth=i.getImageOriginalWidth(),r.imageOriginalHeight=i.getImageOriginalHeight(),r.imageCrop={left:i.imageCrop.getLeft(),top:i.imageCrop.getTop(),width:i.imageCrop.getWidth(),height:i.imageCrop.getHeight()},r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(15,s),f=t.getModelObject(c),r.videoPlayerDescriptor!==undefined&&f.setVideoPlayerDescriptor(r.videoPlayerDescriptor),r.videoPlayerType!==undefined&&f.setVideoPlayerType(n.VideoPlayerType[r.videoPlayerType]),r.imageId!==undefined&&f.setImageId(r.imageId),r.imageUrl!==undefined&&f.setImageUrl(r.imageUrl),r.imageOriginalWidth!==undefined&&f.setImageOriginalWidth(r.imageOriginalWidth),r.imageOriginalHeight!==undefined&&f.setImageOriginalHeight(r.imageOriginalHeight),r.imageCrop!==undefined&&(f.imageCrop.setLeft(r.imageCrop.left),f.imageCrop.setTop(r.imageCrop.top),f.imageCrop.setWidth(r.imageCrop.width),f.imageCrop.setHeight(r.imageCrop.height)),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.VideoLayoutElement=ot;st=function(t){function s(n,i){var e=this;t.call(this,n,i,16);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.children=new r(e,9);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(16,t);return n.getModelObject(i)},s.prototype.getPins=function(n){var i=this,t=i.getProperty(88,n);return t==null&&(t=new c,i.setProperty(88,t,!1)),t.setObjectProperty(i,88),t},s.prototype.getType=function(n){var t=this;return t.getProperty(53,n)},s.prototype.setType=function(n){var t=this;t.setProperty(53,n)},s.prototype.getCanVisualize=function(n){var t=this;return t.getProperty(54,n)},s.prototype.setCanVisualize=function(n){var t=this;t.setProperty(54,n)},s.prototype.getContainerType=function(n){var t=this;return t.getProperty(55,n)},s.prototype.setContainerType=function(n){var t=this;t.setProperty(55,n)},s.prototype.getScrollability=function(n){var t=this;return t.getProperty(56,n)},s.prototype.setScrollability=function(n){var t=this;t.setProperty(56,n)},s.prototype.getOverflow=function(n){var t=this;return t.getProperty(57,n)},s.prototype.setOverflow=function(n){var t=this;t.setProperty(57,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getDebugInfo=function(n){var t=this;return t.getRelationshipFrom(10,n)},s.prototype.setDebugInfo=function(n){var t=this;t.setRelationships(n?[n]:[],10)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[16],t[i.id]=!0,i.getPins()!=null&&(r.pins=i.getPins().serialize()),r.type=i.getType(),r.canVisualize=i.getCanVisualize(),r.containerType=n.LayoutContainerType[i.getContainerType()],r.scrollability=n.LayoutScrollability[i.getScrollability()],r.overflow=i.getOverflow(),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),r.children=i.children.serialize(t),i.getDebugInfo()!==undefined&&(r.debugInfo=i.getDebugInfo().serialize(t)),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(16,s),f=t.getModelObject(c),r.pins!==undefined&&f.getPins().deserializeStructCollection(r.pins,pr.Deserialize),r.type!==undefined&&f.setType(r.type),r.canVisualize!==undefined&&f.setCanVisualize(r.canVisualize),r.containerType!==undefined&&f.setContainerType(n.LayoutContainerType[r.containerType]),r.scrollability!==undefined&&f.setScrollability(n.LayoutScrollability[r.scrollability]),r.overflow!==undefined&&f.setOverflow(r.overflow),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.children!==undefined&&f.children.deserialize(r.children,u),r.debugInfo!==undefined&&f.setDebugInfo(t.deserialize(r.debugInfo,u)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.MapLayoutElement=st;ht=function(t){function s(n,i){var e=this;t.call(this,n,i,17);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(17,t);return n.getModelObject(i)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getScene3D=function(n){var t=this;return t.getRelationshipFrom(18,n)},s.prototype.setScene3D=function(n){var t=this;t.setRelationships(n?[n]:[],18)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[17],t[i.id]=!0,r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getScene3D()!==undefined&&(r.scene3D=i.getScene3D().serialize(t)),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(17,s),f=t.getModelObject(c),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.scene3D!==undefined&&f.setScene3D(t.deserialize(r.scene3D,u)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.ProjectionLayoutElement=ht;ct=function(t){function s(n,i){var e=this;t.call(this,n,i,18);e.model=i.renderModelRoot;e.safeViewport=new u(e,93,94,95,96);e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(18,t);return n.getModelObject(i)},s.prototype.getHorizontalAlignment=function(n){var t=this;return t.getProperty(89,n)},s.prototype.setHorizontalAlignment=function(n){var t=this;t.setProperty(89,n)},s.prototype.getVerticalAlignment=function(n){var t=this;return t.getProperty(90,n)},s.prototype.setVerticalAlignment=function(n){var t=this;t.setProperty(90,n)},s.prototype.getContentStretch=function(n){var t=this;return t.getProperty(91,n)},s.prototype.setContentStretch=function(n){var t=this;t.setProperty(91,n)},s.prototype.getBackgroundType=function(n){var t=this;return t.getProperty(92,n)},s.prototype.setBackgroundType=function(n){var t=this;t.setProperty(92,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getChild=function(n){var t=this;return t.getRelationshipFrom(19,n)},s.prototype.setChild=function(n){var t=this;t.setRelationships(n?[n]:[],19)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[18],t[i.id]=!0,r.horizontalAlignment=n.Alignment[i.getHorizontalAlignment()],r.verticalAlignment=n.Alignment[i.getVerticalAlignment()],r.contentStretch=n.ContentStretch[i.getContentStretch()],r.backgroundType=n.ViewportBackgroundType[i.getBackgroundType()],r.safeViewport={left:i.safeViewport.getLeft(),top:i.safeViewport.getTop(),width:i.safeViewport.getWidth(),height:i.safeViewport.getHeight()},r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getChild()!==undefined&&(r.child=i.getChild().serialize(t)),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(18,s),f=t.getModelObject(c),r.horizontalAlignment!==undefined&&f.setHorizontalAlignment(n.Alignment[r.horizontalAlignment]),r.verticalAlignment!==undefined&&f.setVerticalAlignment(n.Alignment[r.verticalAlignment]),r.contentStretch!==undefined&&f.setContentStretch(n.ContentStretch[r.contentStretch]),r.backgroundType!==undefined&&f.setBackgroundType(n.ViewportBackgroundType[r.backgroundType]),r.safeViewport!==undefined&&(f.safeViewport.setLeft(r.safeViewport.left),f.safeViewport.setTop(r.safeViewport.top),f.safeViewport.setWidth(r.safeViewport.width),f.safeViewport.setHeight(r.safeViewport.height)),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.child!==undefined&&f.setChild(t.deserialize(r.child,u)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.ViewportLayoutElement=ct;lt=function(t){function s(n,i){var e=this;t.call(this,n,i,19);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(19,t);return n.getModelObject(i)},s.prototype.getEmbedSourceUrl=function(n){var t=this;return t.getProperty(97,n)},s.prototype.setEmbedSourceUrl=function(n){var t=this;t.setProperty(97,n)},s.prototype.getHeight=function(n){var t=this;return t.getProperty(98,n)},s.prototype.setHeight=function(n){var t=this;t.setProperty(98,n)},s.prototype.getWidth=function(n){var t=this;return t.getProperty(99,n)},s.prototype.setWidth=function(n){var t=this;t.setProperty(99,n)},s.prototype.getAllowFullScreen=function(n){var t=this;return t.getProperty(100,n)},s.prototype.setAllowFullScreen=function(n){var t=this;t.setProperty(100,n)},s.prototype.getScrolling=function(n){var t=this;return t.getProperty(101,n)},s.prototype.setScrolling=function(n){var t=this;t.setProperty(101,n)},s.prototype.getShouldScale=function(n){var t=this;return t.getProperty(102,n)},s.prototype.setShouldScale=function(n){var t=this;t.setProperty(102,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[19],t[i.id]=!0,r.embedSourceUrl=i.getEmbedSourceUrl(),r.height=i.getHeight(),r.width=i.getWidth(),r.allowFullScreen=i.getAllowFullScreen(),r.scrolling=n.EmbedScrolling[i.getScrolling()],r.shouldScale=i.getShouldScale(),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(19,s),f=t.getModelObject(c),r.embedSourceUrl!==undefined&&f.setEmbedSourceUrl(r.embedSourceUrl),r.height!==undefined&&f.setHeight(r.height),r.width!==undefined&&f.setWidth(r.width),r.allowFullScreen!==undefined&&f.setAllowFullScreen(r.allowFullScreen),r.scrolling!==undefined&&f.setScrolling(n.EmbedScrolling[r.scrolling]),r.shouldScale!==undefined&&f.setShouldScale(r.shouldScale),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.EmbedLayoutElement=lt;at=function(t){function s(n,i){var e=this;t.call(this,n,i,20);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(20,t);return n.getModelObject(i)},s.prototype.getClientRecipe=function(n){var t=this;return t.getProperty(103,n)},s.prototype.setClientRecipe=function(n){var t=this;t.setProperty(103,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[20],t[i.id]=!0,r.clientRecipe=n.ClientRecipe[i.getClientRecipe()],r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(20,s),f=t.getModelObject(c),r.clientRecipe!==undefined&&f.setClientRecipe(n.ClientRecipe[r.clientRecipe]),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.ClientLayoutElement=at;vt=function(t){function s(n,i){var e=this;t.call(this,n,i,21);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(21,t);return n.getModelObject(i)},s.prototype.getAgaveId=function(n){var t=this;return t.getProperty(104,n)},s.prototype.setAgaveId=function(n){var t=this;t.setProperty(104,n)},s.prototype.getManifest=function(n){var t=this;return t.getProperty(105,n)},s.prototype.setManifest=function(n){var t=this;t.setProperty(105,n)},s.prototype.getAgaveData=function(n){var t=this;return t.getProperty(106,n)},s.prototype.setAgaveData=function(n){var t=this;t.setProperty(106,n)},s.prototype.getAgaveSettings=function(n){var t=this;return t.getProperty(107,n)},s.prototype.setAgaveSettings=function(n){var t=this;t.setProperty(107,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[21],t[i.id]=!0,r.agaveId=i.getAgaveId(),r.manifest=i.getManifest(),r.agaveData=i.getAgaveData(),r.agaveSettings=i.getAgaveSettings(),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(21,s),f=t.getModelObject(c),r.agaveId!==undefined&&f.setAgaveId(r.agaveId),r.manifest!==undefined&&f.setManifest(r.manifest),r.agaveData!==undefined&&f.setAgaveData(r.agaveData),r.agaveSettings!==undefined&&f.setAgaveSettings(r.agaveSettings),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.AgaveLayoutElement=vt;yt=function(t){function s(n,i){var e=this;t.call(this,n,i,22);e.model=i.renderModelRoot;e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(22,t);return n.getModelObject(i)},s.prototype.getSourceId=function(n){var t=this;return t.getProperty(108,n)},s.prototype.setSourceId=function(n){var t=this;t.setProperty(108,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[22],t[i.id]=!0,r.sourceId=i.getSourceId(),r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(22,s),f=t.getModelObject(c),r.sourceId!==undefined&&f.setSourceId(r.sourceId),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.StatusUpdateLayoutElement=yt;pt=function(t){function u(n,i){var u=this;t.call(this,n,i,24);u.model=i.renderModelRoot;u.children=new r(u,20);u.transforms=new r(u,4);u.parentKeyFrames=new f(u,43,!1)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(24,t);return n.getModelObject(i)},u.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},u.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},u.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},u.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},u.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},u.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},u.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},u.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},u.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},u.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},u.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},u.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},u.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},u.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},u.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},u.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},u.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},u.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},u.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},u.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},u.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},u.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},u.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},u.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},u.prototype.getParentProjection=function(n){var t=this;return t.getRelationshipTo(18,n)},u.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(20,n)},u.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[24],t[i.id]=!0,r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),r.children=i.children.serialize(t),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},u.Deserialize=function(t,r,u){var s,h,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(h=t.graph.createObject(24,s),f=t.getModelObject(h),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.children!==undefined&&f.children.deserialize(r.children,u),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},u}(t);n.ContainerSceneGraphElement=pt;wt=function(t){function u(n,i){var u=this;t.call(this,n,i,25);u.model=i.renderModelRoot;u.transforms=new r(u,4);u.parentKeyFrames=new f(u,43,!1)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(25,t);return n.getModelObject(i)},u.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},u.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},u.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},u.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},u.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},u.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},u.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},u.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},u.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},u.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},u.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},u.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},u.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},u.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},u.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},u.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},u.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},u.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},u.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},u.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},u.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},u.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},u.prototype.getTexture=function(n){var t=this;return t.getRelationshipFrom(21,n)},u.prototype.setTexture=function(n){var t=this;t.setRelationships(n?[n]:[],21)},u.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},u.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},u.prototype.getParentProjection=function(n){var t=this;return t.getRelationshipTo(18,n)},u.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(20,n)},u.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[25],t[i.id]=!0,r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getTexture()!==undefined&&(r.texture=i.getTexture().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},u.Deserialize=function(t,r,u){var s,h,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(h=t.graph.createObject(25,s),f=t.getModelObject(h),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.texture!==undefined&&f.setTexture(t.deserialize(r.texture,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},u}(t);n.TextureSceneGraphElement=wt;bt=function(t){function u(n,i){var u=this;t.call(this,n,i,26);u.model=i.renderModelRoot;u.animations=new r(u,22)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(26,t);return n.getModelObject(i)},u.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},u.prototype.setName=function(n){var t=this;t.setProperty(109,n)},u.prototype.getAnimationsCompleteFunction=function(n){var t=this;return t.getProperty(110,n)},u.prototype.setAnimationsCompleteFunction=function(n){var t=this;t.setProperty(110,n)},u.prototype.getClientRequirements=function(t){var i=this;return new Flags(n.ClientCapabilities,i.getProperty(111,t))},u.prototype.setClientRequirements=function(n){var t=this;t.setProperty(111,n.raw())},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[26],t[r.id]=!0,i.name=r.getName(),i.animationsCompleteFunction=r.getAnimationsCompleteFunction(),i.clientRequirements=r.getClientRequirements().serialize(),i.animations=r.animations.serialize(t),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(26,e),f=t.getModelObject(o),r.name!==undefined&&f.setName(r.name),r.animationsCompleteFunction!==undefined&&f.setAnimationsCompleteFunction(r.animationsCompleteFunction),r.clientRequirements!==undefined&&f.setClientRequirements(new Flags(n.ClientCapabilities,Flags.deserialize(n.ClientCapabilities,r.clientRequirements))),r.animations!==undefined&&f.animations.deserialize(r.animations,u),f)},u}(t);n.AnimationSequence=bt;kt=function(t){function u(n,i){var u=this;t.call(this,n,i,27);u.model=i.renderModelRoot;u.parameters=new r(u,23);u.animationFunctions=new r(u,24);u.animationTransitions=new r(u,25)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(27,t);return n.getModelObject(i)},u.prototype.getAnimationName=function(n){var t=this;return t.getProperty(112,n)},u.prototype.setAnimationName=function(n){var t=this;t.setProperty(112,n)},u.prototype.getAnimationTrigger=function(n){var t=this;return t.getProperty(113,n)},u.prototype.setAnimationTrigger=function(n){var t=this;t.setProperty(113,n)},u.prototype.getTransitionIds=function(n){var i=this,t=i.getProperty(114,n);return t==null&&(t=new l,i.setProperty(114,t,!1)),t.setObjectProperty(i,114),t},u.prototype.getClientState=function(n){var i=this,t=i.getProperty(115,n);return t!=null&&t.setObjectProperty(i,115),t},u.prototype.setClientState=function(n){var t=this;n!=null&&n.setObjectProperty(t,115);t.setProperty(115,n)},u.prototype.getBehaviors=function(t){var i=this;return new Flags(n.AnimationBehaviors,i.getProperty(116,t))},u.prototype.setBehaviors=function(n){var t=this;t.setProperty(116,n.raw())},u.prototype.getParentAnimationSequence=function(n){var t=this;return t.getRelationshipTo(22,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[27],t[r.id]=!0,i.animationName=r.getAnimationName(),i.animationTrigger=n.AnimationTrigger[r.getAnimationTrigger()],r.getTransitionIds()!=null&&(i.transitionIds=r.getTransitionIds().serialize()),r.getClientState()!=null&&(i.clientState=r.getClientState().serialize()),i.behaviors=r.getBehaviors().serialize(),i.parameters=r.parameters.serialize(t),i.animationFunctions=r.animationFunctions.serialize(t),i.animationTransitions=r.animationTransitions.serialize(t),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(27,e),f=t.getModelObject(o),r.animationName!==undefined&&f.setAnimationName(r.animationName),r.animationTrigger!==undefined&&f.setAnimationTrigger(n.AnimationTrigger[r.animationTrigger]),r.transitionIds!==undefined&&f.getTransitionIds().deserializePropertyCollection(r.transitionIds),r.clientState!==undefined&&f.setClientState(p.Deserialize(r.clientState)),r.behaviors!==undefined&&f.setBehaviors(new Flags(n.AnimationBehaviors,Flags.deserialize(n.AnimationBehaviors,r.behaviors))),r.parameters!==undefined&&f.parameters.deserialize(r.parameters,u),r.animationFunctions!==undefined&&f.animationFunctions.deserialize(r.animationFunctions,u),r.animationTransitions!==undefined&&f.animationTransitions.deserialize(r.animationTransitions,u),f)},u}(t);n.Animation=kt;dt=function(t){function r(n,i){var r=this;t.call(this,n,i,28);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(28,t);return n.getModelObject(i)},r.prototype.getElementId=function(n){var t=this;return t.getProperty(117,n)},r.prototype.setElementId=function(n){var t=this;t.setProperty(117,n)},r.prototype.getAnimatablePropertyName=function(n){var t=this;return t.getProperty(118,n)},r.prototype.setAnimatablePropertyName=function(n){var t=this;t.setProperty(118,n)},r.prototype.getTransformIndex=function(n){var t=this;return t.getProperty(119,n)},r.prototype.setTransformIndex=function(n){var t=this;t.setProperty(119,n)},r.prototype.getTransformComponent=function(n){var t=this;return t.getProperty(120,n)},r.prototype.setTransformComponent=function(n){var t=this;t.setProperty(120,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[28],t[r.id]=!0,i.elementId=r.getElementId(),i.animatablePropertyName=n.AnimatableProperty[r.getAnimatablePropertyName()],i.transformIndex=r.getTransformIndex(),i.transformComponent=n.AnimatableTransformComponent[r.getTransformComponent()],i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(28,e),f=t.getModelObject(o),r.elementId!==undefined&&f.setElementId(r.elementId),r.animatablePropertyName!==undefined&&f.setAnimatablePropertyName(n.AnimatableProperty[r.animatablePropertyName]),r.transformIndex!==undefined&&f.setTransformIndex(r.transformIndex),r.transformComponent!==undefined&&f.setTransformComponent(n.AnimatableTransformComponent[r.transformComponent]),f)},r}(t);n.AnimationTarget=dt;gt=function(t){function r(n,i){var r=this;t.call(this,n,i,29);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(29,t);return n.getModelObject(i)},r.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},r.prototype.setName=function(n){var t=this;t.setProperty(109,n)},r.prototype.getFunctionId=function(n){var t=this;return t.getProperty(121,n)},r.prototype.setFunctionId=function(n){var t=this;t.setProperty(121,n)},r.prototype.getExpression=function(n){var t=this;return t.getProperty(122,n)},r.prototype.setExpression=function(n){var t=this;t.setProperty(122,n)},r.prototype.getMaintainStateOnStart=function(n){var t=this;return t.getProperty(123,n)},r.prototype.setMaintainStateOnStart=function(n){var t=this;t.setProperty(123,n)},r.prototype.getFlags=function(t){var i=this;return new Flags(n.AnimationFlags,i.getProperty(23,t))},r.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},r.prototype.getTarget=function(n){var t=this;return t.getRelationshipFrom(26,n)},r.prototype.setTarget=function(n){var t=this;t.setRelationships(n?[n]:[],26)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[29],t[r.id]=!0,i.name=r.getName(),i.functionId=r.getFunctionId(),i.expression=r.getExpression(),i.maintainStateOnStart=r.getMaintainStateOnStart(),i.flags=r.getFlags().serialize(),r.getTarget()!==undefined&&(i.target=r.getTarget().serialize(t)),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(29,e),f=t.getModelObject(o),r.name!==undefined&&f.setName(r.name),r.functionId!==undefined&&f.setFunctionId(r.functionId),r.expression!==undefined&&f.setExpression(r.expression),r.maintainStateOnStart!==undefined&&f.setMaintainStateOnStart(r.maintainStateOnStart),r.flags!==undefined&&f.setFlags(new Flags(n.AnimationFlags,Flags.deserialize(n.AnimationFlags,r.flags))),r.target!==undefined&&f.setTarget(t.deserialize(r.target,u)),f)},r}(t);n.AnimationFunction=gt;ni=function(t){function u(n,i){var u=this;t.call(this,n,i,30);u.model=i.renderModelRoot;u.containers=new r(u,27)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(30,t);return n.getModelObject(i)},u.prototype.getElementId=function(n){var t=this;return t.getProperty(117,n)},u.prototype.setElementId=function(n){var t=this;t.setProperty(117,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[30],t[r.id]=!0,i.elementId=r.getElementId(),i.containers=r.containers.serialize(t),i)},u.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(30,f),u=n.getModelObject(e),t.elementId!==undefined&&u.setElementId(t.elementId),t.containers!==undefined&&u.containers.deserialize(t.containers,r),u)},u}(t);n.AnimationTransition=ni;ti=function(t){function u(n,i){var u=this;t.call(this,n,i,31);u.model=i.renderModelRoot;u.effects=new r(u,28)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(31,t);return n.getModelObject(i)},u.prototype.getAnimatablePropertyName=function(n){var t=this;return t.getProperty(118,n)},u.prototype.setAnimatablePropertyName=function(n){var t=this;t.setProperty(118,n)},u.prototype.getCurve=function(n){var t=this;return t.getProperty(124,n)},u.prototype.setCurve=function(n){var t=this;t.setProperty(124,n)},u.prototype.getDuration=function(n){var t=this;return t.getProperty(125,n)},u.prototype.setDuration=function(n){var t=this;t.setProperty(125,n)},u.prototype.getDelay=function(n){var t=this;return t.getProperty(126,n)},u.prototype.setDelay=function(n){var t=this;t.setProperty(126,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[31],t[r.id]=!0,i.animatablePropertyName=n.AnimatableProperty[r.getAnimatablePropertyName()],i.curve=r.getCurve(),i.duration=r.getDuration(),i.delay=r.getDelay(),i.effects=r.effects.serialize(t),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(31,e),f=t.getModelObject(o),r.animatablePropertyName!==undefined&&f.setAnimatablePropertyName(n.AnimatableProperty[r.animatablePropertyName]),r.curve!==undefined&&f.setCurve(r.curve),r.duration!==undefined&&f.setDuration(r.duration),r.delay!==undefined&&f.setDelay(r.delay),r.effects!==undefined&&f.effects.deserialize(r.effects,u),f)},u}(t);n.TransitionContainer=ti;ii=function(t){function r(n,i){var r=this;t.call(this,n,i,32);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(32,t);return n.getModelObject(i)},r.prototype.getTransformComponent=function(n){var t=this;return t.getProperty(120,n)},r.prototype.setTransformComponent=function(n){var t=this;t.setProperty(120,n)},r.prototype.getTransformIndex=function(n){var t=this;return t.getProperty(119,n)},r.prototype.setTransformIndex=function(n){var t=this;t.setProperty(119,n)},r.prototype.getStartValue=function(n){var t=this;return t.getProperty(127,n)},r.prototype.setStartValue=function(n){var t=this;t.setProperty(127,n)},r.prototype.getEndValue=function(n){var t=this;return t.getProperty(128,n)},r.prototype.setEndValue=function(n){var t=this;t.setProperty(128,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[32],t[r.id]=!0,i.transformComponent=n.AnimatableTransformComponent[r.getTransformComponent()],i.transformIndex=r.getTransformIndex(),i.startValue=r.getStartValue(),i.endValue=r.getEndValue(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(32,e),f=t.getModelObject(o),r.transformComponent!==undefined&&f.setTransformComponent(n.AnimatableTransformComponent[r.transformComponent]),r.transformIndex!==undefined&&f.setTransformIndex(r.transformIndex),r.startValue!==undefined&&f.setStartValue(r.startValue),r.endValue!==undefined&&f.setEndValue(r.endValue),f)},r}(t);n.TransitionEffect=ii;ri=function(t){function r(n,i){var r=this;t.call(this,n,i,33);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(33,t);return n.getModelObject(i)},r.prototype.getParameterName=function(n){var t=this;return t.getProperty(129,n)},r.prototype.setParameterName=function(n){var t=this;t.setProperty(129,n)},r.prototype.getParameterValue=function(n){var t=this;return t.getProperty(130,n)},r.prototype.setParameterValue=function(n){var t=this;t.setProperty(130,n)},r.prototype.getParentAnimation=function(n){var t=this;return t.getRelationshipTo(23,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[33],t[r.id]=!0,i.parameterName=r.getParameterName(),i.parameterValue=r.getParameterValue(),i)},r.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(33,f),u=n.getModelObject(e),t.parameterName!==undefined&&u.setParameterName(t.parameterName),t.parameterValue!==undefined&&u.setParameterValue(t.parameterValue),u)},r}(t);n.AnimationParameter=ri;ui=function(t){function r(n,i){var r=this;t.call(this,n,i,34);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(34,t);return n.getModelObject(i)},r.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},r.prototype.setName=function(n){var t=this;t.setProperty(109,n)},r.prototype.getFilename=function(n){var t=this;return t.getProperty(131,n)},r.prototype.setFilename=function(n){var t=this;t.setProperty(131,n)},r.prototype.getFillStyle=function(n){var t=this;return t.getProperty(132,n)},r.prototype.setFillStyle=function(n){var t=this;t.setProperty(132,n)},r.prototype.getHorizontalAlignment=function(n){var t=this;return t.getProperty(89,n)},r.prototype.setHorizontalAlignment=function(n){var t=this;t.setProperty(89,n)},r.prototype.getVerticalAlignment=function(n){var t=this;return t.getProperty(90,n)},r.prototype.setVerticalAlignment=function(n){var t=this;t.setProperty(90,n)},r.prototype.getTiling=function(n){var t=this;return t.getProperty(133,n)},r.prototype.setTiling=function(n){var t=this;t.setProperty(133,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[34],t[r.id]=!0,i.name=r.getName(),i.filename=r.getFilename(),i.fillStyle=n.ImageFillStyle[r.getFillStyle()],i.horizontalAlignment=n.Alignment[r.getHorizontalAlignment()],i.verticalAlignment=n.Alignment[r.getVerticalAlignment()],i.tiling=n.ImageTiling[r.getTiling()],i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(34,e),f=t.getModelObject(o),r.name!==undefined&&f.setName(r.name),r.filename!==undefined&&f.setFilename(r.filename),r.fillStyle!==undefined&&f.setFillStyle(n.ImageFillStyle[r.fillStyle]),r.horizontalAlignment!==undefined&&f.setHorizontalAlignment(n.Alignment[r.horizontalAlignment]),r.verticalAlignment!==undefined&&f.setVerticalAlignment(n.Alignment[r.verticalAlignment]),r.tiling!==undefined&&f.setTiling(n.ImageTiling[r.tiling]),f)},r}(t);n.StaticImage=ui;fi=function(t){function r(n,i){var r=this;t.call(this,n,i,35);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(35,t);return n.getModelObject(i)},r.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},r.prototype.setName=function(n){var t=this;t.setProperty(109,n)},r.prototype.getStrokeWidth=function(n){var t=this;return t.getProperty(134,n)},r.prototype.setStrokeWidth=function(n){var t=this;t.setProperty(134,n)},r.prototype.getPathType=function(n){var t=this;return t.getProperty(135,n)},r.prototype.setPathType=function(n){var t=this;t.setProperty(135,n)},r.prototype.getValues=function(n){var t=this;return t.getProperty(136,n)},r.prototype.setValues=function(n){var t=this;t.setProperty(136,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[35],t[r.id]=!0,i.name=r.getName(),i.strokeWidth=r.getStrokeWidth(),i.pathType=n.PathType[r.getPathType()],i.values=r.getValues(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(35,e),f=t.getModelObject(o),r.name!==undefined&&f.setName(r.name),r.strokeWidth!==undefined&&f.setStrokeWidth(r.strokeWidth),r.pathType!==undefined&&f.setPathType(n.PathType[r.pathType]),r.values!==undefined&&f.setValues(r.values),f)},r}(t);n.Path=fi;ei=function(t){function u(n,i){var u=this;t.call(this,n,i,36);u.model=i.renderModelRoot;u.ruleResults=new r(u,29)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(36,t);return n.getModelObject(i)},u.prototype.getRecipeId=function(n){var t=this;return t.getProperty(137,n)},u.prototype.setRecipeId=function(n){var t=this;t.setProperty(137,n)},u.prototype.getIsCulled=function(n){var t=this;return t.getProperty(138,n)},u.prototype.setIsCulled=function(n){var t=this;t.setProperty(138,n)},u.prototype.getIsAborted=function(n){var t=this;return t.getProperty(139,n)},u.prototype.setIsAborted=function(n){var t=this;t.setProperty(139,n)},u.prototype.getTotalScore=function(n){var t=this;return t.getProperty(140,n)},u.prototype.setTotalScore=function(n){var t=this;t.setProperty(140,n)},u.prototype.getCropDescription=function(n){var t=this;return t.getProperty(141,n)},u.prototype.setCropDescription=function(n){var t=this;t.setProperty(141,n)},u.prototype.getCropName=function(n){var t=this;return t.getProperty(142,n)},u.prototype.setCropName=function(n){var t=this;t.setProperty(142,n)},u.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(10,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[36],t[r.id]=!0,i.recipeId=r.getRecipeId(),i.isCulled=r.getIsCulled(),i.isAborted=r.getIsAborted(),i.totalScore=r.getTotalScore(),i.cropDescription=r.getCropDescription(),i.cropName=r.getCropName(),i.ruleResults=r.ruleResults.serialize(t),i)},u.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(36,f),u=n.getModelObject(e),t.recipeId!==undefined&&u.setRecipeId(t.recipeId),t.isCulled!==undefined&&u.setIsCulled(t.isCulled),t.isAborted!==undefined&&u.setIsAborted(t.isAborted),t.totalScore!==undefined&&u.setTotalScore(t.totalScore),t.cropDescription!==undefined&&u.setCropDescription(t.cropDescription),t.cropName!==undefined&&u.setCropName(t.cropName),t.ruleResults!==undefined&&u.ruleResults.deserialize(t.ruleResults,r),u)},u}(t);n.LayoutDebugInfo=ei;oi=function(t){function r(n,i){var r=this;t.call(this,n,i,37);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(37,t);return n.getModelObject(i)},r.prototype.getDescription=function(n){var t=this;return t.getProperty(143,n)},r.prototype.setDescription=function(n){var t=this;t.setProperty(143,n)},r.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},r.prototype.setName=function(n){var t=this;t.setProperty(109,n)},r.prototype.getWeight=function(n){var t=this;return t.getProperty(144,n)},r.prototype.setWeight=function(n){var t=this;t.setProperty(144,n)},r.prototype.getLevel=function(n){var t=this;return t.getProperty(145,n)},r.prototype.setLevel=function(n){var t=this;t.setProperty(145,n)},r.prototype.getScore=function(n){var t=this;return t.getProperty(146,n)},r.prototype.setScore=function(n){var t=this;t.setProperty(146,n)},r.prototype.getNormalizedScore=function(n){var t=this;return t.getProperty(147,n)},r.prototype.setNormalizedScore=function(n){var t=this;t.setProperty(147,n)},r.prototype.getExecutionStage=function(n){var t=this;return t.getProperty(148,n)},r.prototype.setExecutionStage=function(n){var t=this;t.setProperty(148,n)},r.prototype.getParentDebugInfo=function(n){var t=this;return t.getRelationshipTo(29,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[37],t[r.id]=!0,i.description=r.getDescription(),i.name=r.getName(),i.weight=r.getWeight(),i.level=n.RuleLevel[r.getLevel()],i.score=r.getScore(),i.normalizedScore=n.NormalizedScore[r.getNormalizedScore()],i.executionStage=r.getExecutionStage(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(37,e),f=t.getModelObject(o),r.description!==undefined&&f.setDescription(r.description),r.name!==undefined&&f.setName(r.name),r.weight!==undefined&&f.setWeight(r.weight),r.level!==undefined&&f.setLevel(n.RuleLevel[r.level]),r.score!==undefined&&f.setScore(r.score),r.normalizedScore!==undefined&&f.setNormalizedScore(n.NormalizedScore[r.normalizedScore]),r.executionStage!==undefined&&f.setExecutionStage(r.executionStage),f)},r}(t);n.RuleResult=oi;si=function(t){function u(n,i){var u=this;t.call(this,n,i,38);u.model=i.renderModelRoot;u.keyFrames=new r(u,30);u.triggerSets=new r(u,31);u.nodes=new r(u,32)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(38,t);return n.getModelObject(i)},u.prototype.getRequiresParallax=function(n){var t=this;return t.getProperty(149,n)},u.prototype.setRequiresParallax=function(n){var t=this;t.setProperty(149,n)},u.prototype.getTransitions=function(n){var i=this,t=i.getProperty(150,n);return t==null&&(t=new c,i.setProperty(150,t,!1)),t.setObjectProperty(i,150),t},u.prototype.getAnimationContainers=function(n){var i=this,t=i.getProperty(151,n);return t==null&&(t=new c,i.setProperty(151,t,!1)),t.setObjectProperty(i,151),t},u.prototype.getAnimationEffects=function(n){var i=this,t=i.getProperty(152,n);return t==null&&(t=new c,i.setProperty(152,t,!1)),t.setObjectProperty(i,152),t},u.prototype.getContentNavigationMarkerCollections=function(n){var i=this,t=i.getProperty(153,n);return t==null&&(t=new c,i.setProperty(153,t,!1)),t.setObjectProperty(i,153),t},u.prototype.getStartNode=function(n){var t=this;return t.getRelationshipFrom(33,n)},u.prototype.setStartNode=function(n){var t=this;t.setRelationships(n?[n]:[],33)},u.prototype.getParentLayoutTree=function(n){var t=this;return t.getRelationshipTo(3,n)},u.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[38],t[i.id]=!0,r.requiresParallax=i.getRequiresParallax(),i.getTransitions()!=null&&(r.transitions=i.getTransitions().serialize()),i.getAnimationContainers()!=null&&(r.animationContainers=i.getAnimationContainers().serialize()),i.getAnimationEffects()!=null&&(r.animationEffects=i.getAnimationEffects().serialize()),i.getContentNavigationMarkerCollections()!=null&&(r.contentNavigationMarkerCollections=i.getContentNavigationMarkerCollections().serialize()),r.keyFrames=i.keyFrames.serialize(t),r.triggerSets=i.triggerSets.serialize(t),r.nodes=i.nodes.serialize(t),i.getStartNode()!==undefined&&(r.startNode=i.getStartNode().serialize(t)),r)},u.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(38,f),u=n.getModelObject(e),t.requiresParallax!==undefined&&u.setRequiresParallax(t.requiresParallax),t.transitions!==undefined&&u.getTransitions().deserializeStructCollection(t.transitions,kr.Deserialize),t.animationContainers!==undefined&&u.getAnimationContainers().deserializeStructCollection(t.animationContainers,dr.Deserialize),t.animationEffects!==undefined&&u.getAnimationEffects().deserializeStructCollection(t.animationEffects,gr.Deserialize),t.contentNavigationMarkerCollections!==undefined&&u.getContentNavigationMarkerCollections().deserializeStructCollection(t.contentNavigationMarkerCollections,tu.Deserialize),t.keyFrames!==undefined&&u.keyFrames.deserialize(t.keyFrames,r),t.triggerSets!==undefined&&u.triggerSets.deserialize(t.triggerSets,r),t.nodes!==undefined&&u.nodes.deserialize(t.nodes,r),t.startNode!==undefined&&u.setStartNode(n.deserialize(t.startNode,r)),u)},u}(t);n.InteractionModel=si;hi=function(t){function u(n,i){var u=this;t.call(this,n,i,39);u.model=i.renderModelRoot;u.childStartStates=new r(u,34);u.edges=new r(u,35);u.parentEdges=new f(u,39,!1)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(39,t);return n.getModelObject(i)},u.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},u.prototype.setName=function(n){var t=this;t.setProperty(109,n)},u.prototype.getCanNavigateTo=function(n){var t=this;return t.getProperty(154,n)},u.prototype.setCanNavigateTo=function(n){var t=this;t.setProperty(154,n)},u.prototype.getAllowDeferredExit=function(n){var t=this;return t.getProperty(155,n)},u.prototype.setAllowDeferredExit=function(n){var t=this;t.setProperty(155,n)},u.prototype.getIsModal=function(n){var t=this;return t.getProperty(156,n)},u.prototype.setIsModal=function(n){var t=this;t.setProperty(156,n)},u.prototype.getKeyFrame=function(n){var t=this;return t.getRelationshipFrom(36,n)},u.prototype.setKeyFrame=function(n){var t=this;t.setRelationships(n?[n]:[],36)},u.prototype.getAmbientAnimationSequence=function(n){var t=this;return t.getRelationshipFrom(37,n)},u.prototype.setAmbientAnimationSequence=function(n){var t=this;t.setRelationships(n?[n]:[],37)},u.prototype.getExitAnimationSequence=function(n){var t=this;return t.getRelationshipFrom(38,n)},u.prototype.setExitAnimationSequence=function(n){var t=this;t.setRelationships(n?[n]:[],38)},u.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[39],t[i.id]=!0,r.name=i.getName(),r.canNavigateTo=i.getCanNavigateTo(),r.allowDeferredExit=i.getAllowDeferredExit(),r.isModal=i.getIsModal(),r.childStartStates=i.childStartStates.serialize(t),r.edges=i.edges.serialize(t),i.getKeyFrame()!==undefined&&(r.keyFrame=i.getKeyFrame().serialize(t)),i.getAmbientAnimationSequence()!==undefined&&(r.ambientAnimationSequence=i.getAmbientAnimationSequence().serialize(t)),i.getExitAnimationSequence()!==undefined&&(r.exitAnimationSequence=i.getExitAnimationSequence().serialize(t)),r)},u.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(39,f),u=n.getModelObject(e),t.name!==undefined&&u.setName(t.name),t.canNavigateTo!==undefined&&u.setCanNavigateTo(t.canNavigateTo),t.allowDeferredExit!==undefined&&u.setAllowDeferredExit(t.allowDeferredExit),t.isModal!==undefined&&u.setIsModal(t.isModal),t.childStartStates!==undefined&&u.childStartStates.deserialize(t.childStartStates,r),t.edges!==undefined&&u.edges.deserialize(t.edges,r),t.keyFrame!==undefined&&u.setKeyFrame(n.deserialize(t.keyFrame,r)),t.ambientAnimationSequence!==undefined&&u.setAmbientAnimationSequence(n.deserialize(t.ambientAnimationSequence,r)),t.exitAnimationSequence!==undefined&&u.setExitAnimationSequence(n.deserialize(t.exitAnimationSequence,r)),u)},u}(t);n.FsmNode=hi;ci=function(t){function r(n,i){var r=this;t.call(this,n,i,40);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(40,t);return n.getModelObject(i)},r.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},r.prototype.setName=function(n){var t=this;t.setProperty(109,n)},r.prototype.getResetDescendants=function(n){var t=this;return t.getProperty(157,n)},r.prototype.setResetDescendants=function(n){var t=this;t.setProperty(157,n)},r.prototype.getAllowBubbling=function(n){var t=this;return t.getProperty(158,n)},r.prototype.setAllowBubbling=function(n){var t=this;t.setProperty(158,n)},r.prototype.getPreFetchAnimations=function(n){var t=this;return t.getProperty(159,n)},r.prototype.setPreFetchAnimations=function(n){var t=this;t.setProperty(159,n)},r.prototype.getHistoricallyRelevant=function(n){var t=this;return t.getProperty(160,n)},r.prototype.setHistoricallyRelevant=function(n){var t=this;t.setProperty(160,n)},r.prototype.getBehaviors=function(t){var i=this;return new Flags(n.EdgeBehaviors,i.getProperty(116,t))},r.prototype.setBehaviors=function(n){var t=this;t.setProperty(116,n.raw())},r.prototype.getTarget=function(n){var t=this;return t.getRelationshipFrom(39,n)},r.prototype.setTarget=function(n){var t=this;t.setRelationships(n?[n]:[],39)},r.prototype.getTriggerSet=function(n){var t=this;return t.getRelationshipFrom(40,n)},r.prototype.setTriggerSet=function(n){var t=this;t.setRelationships(n?[n]:[],40)},r.prototype.getTransitionOutAnimationSequence=function(n){var t=this;return t.getRelationshipFrom(41,n)},r.prototype.setTransitionOutAnimationSequence=function(n){var t=this;t.setRelationships(n?[n]:[],41)},r.prototype.getTransitionInAnimationSequence=function(n){var t=this;return t.getRelationshipFrom(42,n)},r.prototype.setTransitionInAnimationSequence=function(n){var t=this;t.setRelationships(n?[n]:[],42)},r.prototype.getParentNode=function(n){var t=this;return t.getRelationshipTo(35,n)},r.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[40],t[i.id]=!0,r.name=i.getName(),r.resetDescendants=i.getResetDescendants(),r.allowBubbling=i.getAllowBubbling(),r.preFetchAnimations=i.getPreFetchAnimations(),r.historicallyRelevant=i.getHistoricallyRelevant(),r.behaviors=i.getBehaviors().serialize(),i.getTarget()!==undefined&&(r.target=i.getTarget().serialize(t)),i.getTriggerSet()!==undefined&&(r.triggerSet=i.getTriggerSet().serialize(t)),i.getTransitionOutAnimationSequence()!==undefined&&(r.transitionOutAnimationSequence=i.getTransitionOutAnimationSequence().serialize(t)),i.getTransitionInAnimationSequence()!==undefined&&(r.transitionInAnimationSequence=i.getTransitionInAnimationSequence().serialize(t)),r)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(40,e),f=t.getModelObject(o),r.name!==undefined&&f.setName(r.name),r.resetDescendants!==undefined&&f.setResetDescendants(r.resetDescendants),r.allowBubbling!==undefined&&f.setAllowBubbling(r.allowBubbling),r.preFetchAnimations!==undefined&&f.setPreFetchAnimations(r.preFetchAnimations),r.historicallyRelevant!==undefined&&f.setHistoricallyRelevant(r.historicallyRelevant),r.behaviors!==undefined&&f.setBehaviors(new Flags(n.EdgeBehaviors,Flags.deserialize(n.EdgeBehaviors,r.behaviors))),r.target!==undefined&&f.setTarget(t.deserialize(r.target,u)),r.triggerSet!==undefined&&f.setTriggerSet(t.deserialize(r.triggerSet,u)),r.transitionOutAnimationSequence!==undefined&&f.setTransitionOutAnimationSequence(t.deserialize(r.transitionOutAnimationSequence,u)),r.transitionInAnimationSequence!==undefined&&f.setTransitionInAnimationSequence(t.deserialize(r.transitionInAnimationSequence,u)),f)},r}(t);n.FsmEdge=ci;li=function(t){function u(n,i){var u=this;t.call(this,n,i,41);u.model=i.renderModelRoot;u.layoutElements=new r(u,43);u.children=new r(u,44)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(41,t);return n.getModelObject(i)},u.prototype.getType=function(n){var t=this;return t.getProperty(53,n)},u.prototype.setType=function(n){var t=this;t.setProperty(53,n)},u.prototype.getScrollWidth=function(n){var t=this;return t.getProperty(161,n)},u.prototype.setScrollWidth=function(n){var t=this;t.setProperty(161,n)},u.prototype.getScrollHeight=function(n){var t=this;return t.getProperty(162,n)},u.prototype.setScrollHeight=function(n){var t=this;t.setProperty(162,n)},u.prototype.getScrollability=function(n){var t=this;return t.getProperty(56,n)},u.prototype.setScrollability=function(n){var t=this;t.setProperty(56,n)},u.prototype.getCoverageMethod=function(n){var t=this;return t.getProperty(163,n)},u.prototype.setCoverageMethod=function(n){var t=this;t.setProperty(163,n)},u.prototype.getSnapPointsHorizontal=function(n){var i=this,t=i.getProperty(164,n);return t==null&&(t=new c,i.setProperty(164,t,!1)),t.setObjectProperty(i,164),t},u.prototype.getSnapPointsVertical=function(n){var i=this,t=i.getProperty(165,n);return t==null&&(t=new c,i.setProperty(165,t,!1)),t.setObjectProperty(i,165),t},u.prototype.getIsDefaultNavigation=function(n){var t=this;return t.getProperty(166,n)},u.prototype.setIsDefaultNavigation=function(n){var t=this;t.setProperty(166,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[41],t[r.id]=!0,i.type=r.getType(),i.scrollWidth=r.getScrollWidth(),i.scrollHeight=r.getScrollHeight(),i.scrollability=n.LayoutScrollability[r.getScrollability()],i.coverageMethod=n.CoverageMethod[r.getCoverageMethod()],r.getSnapPointsHorizontal()!=null&&(i.snapPointsHorizontal=r.getSnapPointsHorizontal().serialize()),r.getSnapPointsVertical()!=null&&(i.snapPointsVertical=r.getSnapPointsVertical().serialize()),i.isDefaultNavigation=r.getIsDefaultNavigation(),i.layoutElements=r.layoutElements.serialize(t),i.children=r.children.serialize(t),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(41,e),f=t.getModelObject(o),r.type!==undefined&&f.setType(r.type),r.scrollWidth!==undefined&&f.setScrollWidth(r.scrollWidth),r.scrollHeight!==undefined&&f.setScrollHeight(r.scrollHeight),r.scrollability!==undefined&&f.setScrollability(n.LayoutScrollability[r.scrollability]),r.coverageMethod!==undefined&&f.setCoverageMethod(n.CoverageMethod[r.coverageMethod]),r.snapPointsHorizontal!==undefined&&f.getSnapPointsHorizontal().deserializeStructCollection(r.snapPointsHorizontal,y.Deserialize),r.snapPointsVertical!==undefined&&f.getSnapPointsVertical().deserializeStructCollection(r.snapPointsVertical,y.Deserialize),r.isDefaultNavigation!==undefined&&f.setIsDefaultNavigation(r.isDefaultNavigation),r.layoutElements!==undefined&&f.layoutElements.deserialize(r.layoutElements,u),r.children!==undefined&&f.children.deserialize(r.children,u),f)},u}(t);n.KeyFrame=li;ai=function(t){function u(n,i){var u=this;t.call(this,n,i,42);u.model=i.renderModelRoot;u.triggers=new r(u,45)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(42,t);return n.getModelObject(i)},u.prototype.getName=function(n){var t=this;return t.getProperty(109,n)},u.prototype.setName=function(n){var t=this;t.setProperty(109,n)},u.prototype.getAlwaysTryDefaultAction=function(n){var t=this;return t.getProperty(167,n)},u.prototype.setAlwaysTryDefaultAction=function(n){var t=this;t.setProperty(167,n)},u.prototype.getClientState=function(n){var i=this,t=i.getProperty(115,n);return t!=null&&t.setObjectProperty(i,115),t},u.prototype.setClientState=function(n){var t=this;n!=null&&n.setObjectProperty(t,115);t.setProperty(115,n)},u.prototype.getBehaviors=function(n){var t=this;return t.getProperty(116,n)},u.prototype.setBehaviors=function(n){var t=this;t.setProperty(116,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[42],t[r.id]=!0,i.name=r.getName(),i.alwaysTryDefaultAction=r.getAlwaysTryDefaultAction(),r.getClientState()!=null&&(i.clientState=r.getClientState().serialize()),i.behaviors=n.TriggerSetBehaviors[r.getBehaviors()],i.triggers=r.triggers.serialize(t),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(42,e),f=t.getModelObject(o),r.name!==undefined&&f.setName(r.name),r.alwaysTryDefaultAction!==undefined&&f.setAlwaysTryDefaultAction(r.alwaysTryDefaultAction),r.clientState!==undefined&&f.setClientState(p.Deserialize(r.clientState)),r.behaviors!==undefined&&f.setBehaviors(n.TriggerSetBehaviors[r.behaviors]),r.triggers!==undefined&&f.triggers.deserialize(r.triggers,u),f)},u}(t);n.TriggerSet=ai;vi=function(t){function u(n,i){var u=this;t.call(this,n,i,43);u.model=i.renderModelRoot;u.selectMethods=new r(u,46);u.defaultActions=new r(u,47)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(43,t);return n.getModelObject(i)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[43],t[r.id]=!0,i.selectMethods=r.selectMethods.serialize(t),i.defaultActions=r.defaultActions.serialize(t),i)},u.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(43,f),u=n.getModelObject(e),t.selectMethods!==undefined&&u.selectMethods.deserialize(t.selectMethods,r),t.defaultActions!==undefined&&u.defaultActions.deserialize(t.defaultActions,r),u)},u}(t);n.Trigger=vi;yi=function(t){function u(n,i){var u=this;t.call(this,n,i,44);u.model=i.renderModelRoot;u.parameters=new r(u,48)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(44,t);return n.getModelObject(i)},u.prototype.getAction=function(n){var t=this;return t.getProperty(168,n)},u.prototype.setAction=function(n){var t=this;t.setProperty(168,n)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[44],t[r.id]=!0,i.action=n.DefaultTriggerAction[r.getAction()],i.parameters=r.parameters.serialize(t),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(44,e),f=t.getModelObject(o),r.action!==undefined&&f.setAction(n.DefaultTriggerAction[r.action]),r.parameters!==undefined&&f.parameters.deserialize(r.parameters,u),f)},u}(t);n.DefaultAction=yi;pi=function(t){function r(n,i){var r=this;t.call(this,n,i,45);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(45,t);return n.getModelObject(i)},r.prototype.getMethod=function(n){var t=this;return t.getProperty(169,n)},r.prototype.setMethod=function(n){var t=this;t.setProperty(169,n)},r.prototype.getTarget=function(n){var t=this;return t.getProperty(170,n)},r.prototype.setTarget=function(n){var t=this;t.setProperty(170,n)},r.prototype.getKeyNames=function(n){var t=this;return t.getProperty(171,n)},r.prototype.setKeyNames=function(n){var t=this;t.setProperty(171,n)},r.prototype.getTargetId=function(n){var t=this;return t.getProperty(172,n)},r.prototype.setTargetId=function(n){var t=this;t.setProperty(172,n)},r.prototype.getCameraSelect=function(n){var t=this;return t.getRelationshipFrom(49,n)},r.prototype.setCameraSelect=function(n){var t=this;t.setRelationships(n?[n]:[],49)},r.prototype.getTimingSelect=function(n){var t=this;return t.getRelationshipFrom(50,n)},r.prototype.setTimingSelect=function(n){var t=this;t.setRelationships(n?[n]:[],50)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[45],t[r.id]=!0,i.method=n.TriggerMethod[r.getMethod()],i.target=n.TriggerTarget[r.getTarget()],i.keyNames=r.getKeyNames(),i.targetId=r.getTargetId(),r.getCameraSelect()!==undefined&&(i.cameraSelect=r.getCameraSelect().serialize(t)),r.getTimingSelect()!==undefined&&(i.timingSelect=r.getTimingSelect().serialize(t)),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(45,e),f=t.getModelObject(o),r.method!==undefined&&f.setMethod(n.TriggerMethod[r.method]),r.target!==undefined&&f.setTarget(n.TriggerTarget[r.target]),r.keyNames!==undefined&&f.setKeyNames(r.keyNames),r.targetId!==undefined&&f.setTargetId(r.targetId),r.cameraSelect!==undefined&&f.setCameraSelect(t.deserialize(r.cameraSelect,u)),r.timingSelect!==undefined&&f.setTimingSelect(t.deserialize(r.timingSelect,u)),f)},r}(t);n.SelectMethod=pi;wi=function(t){function r(n,i){var r=this;t.call(this,n,i,47);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(47,t);return n.getModelObject(i)},r.prototype.getDirection=function(n){var t=this;return t.getProperty(175,n)},r.prototype.setDirection=function(n){var t=this;t.setProperty(175,n)},r.prototype.getMethod=function(n){var t=this;return t.getProperty(169,n)},r.prototype.setMethod=function(n){var t=this;t.setProperty(169,n)},r.prototype.getTarget=function(n){var t=this;return t.getProperty(170,n)},r.prototype.setTarget=function(n){var t=this;t.setProperty(170,n)},r.prototype.getKeyNames=function(n){var t=this;return t.getProperty(171,n)},r.prototype.setKeyNames=function(n){var t=this;t.setProperty(171,n)},r.prototype.getTargetId=function(n){var t=this;return t.getProperty(172,n)},r.prototype.setTargetId=function(n){var t=this;t.setProperty(172,n)},r.prototype.getCameraSelect=function(n){var t=this;return t.getRelationshipFrom(49,n)},r.prototype.setCameraSelect=function(n){var t=this;t.setRelationships(n?[n]:[],49)},r.prototype.getTimingSelect=function(n){var t=this;return t.getRelationshipFrom(50,n)},r.prototype.setTimingSelect=function(n){var t=this;t.setRelationships(n?[n]:[],50)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[47],t[r.id]=!0,i.direction=n.Direction[r.getDirection()],i.method=n.TriggerMethod[r.getMethod()],i.target=n.TriggerTarget[r.getTarget()],i.keyNames=r.getKeyNames(),i.targetId=r.getTargetId(),r.getCameraSelect()!==undefined&&(i.cameraSelect=r.getCameraSelect().serialize(t)),r.getTimingSelect()!==undefined&&(i.timingSelect=r.getTimingSelect().serialize(t)),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(47,e),f=t.getModelObject(o),r.direction!==undefined&&f.setDirection(n.Direction[r.direction]),r.method!==undefined&&f.setMethod(n.TriggerMethod[r.method]),r.target!==undefined&&f.setTarget(n.TriggerTarget[r.target]),r.keyNames!==undefined&&f.setKeyNames(r.keyNames),r.targetId!==undefined&&f.setTargetId(r.targetId),r.cameraSelect!==undefined&&f.setCameraSelect(t.deserialize(r.cameraSelect,u)),r.timingSelect!==undefined&&f.setTimingSelect(t.deserialize(r.timingSelect,u)),f)},r}(t);n.SwipeSelectMethod=wi;bi=function(t){function r(n,i){var r=this;t.call(this,n,i,48);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(48,t);return n.getModelObject(i)},r.prototype.getMethod=function(n){var t=this;return t.getProperty(169,n)},r.prototype.setMethod=function(n){var t=this;t.setProperty(169,n)},r.prototype.getTarget=function(n){var t=this;return t.getProperty(170,n)},r.prototype.setTarget=function(n){var t=this;t.setProperty(170,n)},r.prototype.getKeyNames=function(n){var t=this;return t.getProperty(171,n)},r.prototype.setKeyNames=function(n){var t=this;t.setProperty(171,n)},r.prototype.getTargetId=function(n){var t=this;return t.getProperty(172,n)},r.prototype.setTargetId=function(n){var t=this;t.setProperty(172,n)},r.prototype.getSignal=function(n){var t=this;return t.getRelationshipFrom(51,n)},r.prototype.setSignal=function(n){var t=this;t.setRelationships(n?[n]:[],51)},r.prototype.getCameraSelect=function(n){var t=this;return t.getRelationshipFrom(49,n)},r.prototype.setCameraSelect=function(n){var t=this;t.setRelationships(n?[n]:[],49)},r.prototype.getTimingSelect=function(n){var t=this;return t.getRelationshipFrom(50,n)},r.prototype.setTimingSelect=function(n){var t=this;t.setRelationships(n?[n]:[],50)},r.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[48],t[i.id]=!0,r.method=n.TriggerMethod[i.getMethod()],r.target=n.TriggerTarget[i.getTarget()],r.keyNames=i.getKeyNames(),r.targetId=i.getTargetId(),i.getSignal()!==undefined&&(r.signal=i.getSignal().serialize(t)),i.getCameraSelect()!==undefined&&(r.cameraSelect=i.getCameraSelect().serialize(t)),i.getTimingSelect()!==undefined&&(r.timingSelect=i.getTimingSelect().serialize(t)),r)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(48,e),f=t.getModelObject(o),r.method!==undefined&&f.setMethod(n.TriggerMethod[r.method]),r.target!==undefined&&f.setTarget(n.TriggerTarget[r.target]),r.keyNames!==undefined&&f.setKeyNames(r.keyNames),r.targetId!==undefined&&f.setTargetId(r.targetId),r.signal!==undefined&&f.setSignal(t.deserialize(r.signal,u)),r.cameraSelect!==undefined&&f.setCameraSelect(t.deserialize(r.cameraSelect,u)),r.timingSelect!==undefined&&f.setTimingSelect(t.deserialize(r.timingSelect,u)),f)},r}(t);n.ClientSelectMethod=bi;ki=function(t){function r(n,i){var r=this;t.call(this,n,i,50);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(50,t);return n.getModelObject(i)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[50],t[r.id]=!0,i)},r.Deserialize=function(n,t,r){var u,f,e;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),u=r[t.id],t.ref)?n.getModelObject(u):(f=n.graph.createObject(50,u),e=n.getModelObject(f),e)},r}(t);n.EditModeClientSignal=ki;di=function(t){function u(n,i){var u=this;t.call(this,n,i,51);u.model=i.renderModelRoot;u.keyClicks=new r(u,52)}return __extends(u,t),u.Create=function(n,t){var r=this,i=n.graph.createObject(51,t);return n.getModelObject(i)},u.prototype.getMethod=function(n){var t=this;return t.getProperty(169,n)},u.prototype.setMethod=function(n){var t=this;t.setProperty(169,n)},u.prototype.getTarget=function(n){var t=this;return t.getProperty(170,n)},u.prototype.setTarget=function(n){var t=this;t.setProperty(170,n)},u.prototype.getKeyNames=function(n){var t=this;return t.getProperty(171,n)},u.prototype.setKeyNames=function(n){var t=this;t.setProperty(171,n)},u.prototype.getTargetId=function(n){var t=this;return t.getProperty(172,n)},u.prototype.setTargetId=function(n){var t=this;t.setProperty(172,n)},u.prototype.getCameraSelect=function(n){var t=this;return t.getRelationshipFrom(49,n)},u.prototype.setCameraSelect=function(n){var t=this;t.setRelationships(n?[n]:[],49)},u.prototype.getTimingSelect=function(n){var t=this;return t.getRelationshipFrom(50,n)},u.prototype.setTimingSelect=function(n){var t=this;t.setRelationships(n?[n]:[],50)},u.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[51],t[r.id]=!0,i.method=n.TriggerMethod[r.getMethod()],i.target=n.TriggerTarget[r.getTarget()],i.keyNames=r.getKeyNames(),i.targetId=r.getTargetId(),i.keyClicks=r.keyClicks.serialize(t),r.getCameraSelect()!==undefined&&(i.cameraSelect=r.getCameraSelect().serialize(t)),r.getTimingSelect()!==undefined&&(i.timingSelect=r.getTimingSelect().serialize(t)),i)},u.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(51,e),f=t.getModelObject(o),r.method!==undefined&&f.setMethod(n.TriggerMethod[r.method]),r.target!==undefined&&f.setTarget(n.TriggerTarget[r.target]),r.keyNames!==undefined&&f.setKeyNames(r.keyNames),r.targetId!==undefined&&f.setTargetId(r.targetId),r.keyClicks!==undefined&&f.keyClicks.deserialize(r.keyClicks,u),r.cameraSelect!==undefined&&f.setCameraSelect(t.deserialize(r.cameraSelect,u)),r.timingSelect!==undefined&&f.setTimingSelect(t.deserialize(r.timingSelect,u)),f)},u}(t);n.KeyboardSelectMethod=di;gi=function(t){function r(n,i){var r=this;t.call(this,n,i,52);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(52,t);return n.getModelObject(i)},r.prototype.getKey=function(n){var t=this;return t.getProperty(176,n)},r.prototype.setKey=function(n){var t=this;t.setProperty(176,n)},r.prototype.getModifier=function(n){var t=this;return t.getProperty(177,n)},r.prototype.setModifier=function(n){var t=this;t.setProperty(177,n)},r.prototype.getKeyDown=function(n){var t=this;return t.getProperty(178,n)},r.prototype.setKeyDown=function(n){var t=this;t.setProperty(178,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[52],t[r.id]=!0,i.key=n.KeyName[r.getKey()],i.modifier=n.Modifier[r.getModifier()],i.keyDown=r.getKeyDown(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(52,e),f=t.getModelObject(o),r.key!==undefined&&f.setKey(n.KeyName[r.key]),r.modifier!==undefined&&f.setModifier(n.Modifier[r.modifier]),r.keyDown!==undefined&&f.setKeyDown(r.keyDown),f)},r}(t);n.KeyClick=gi;nr=function(t){function r(n,i){var r=this;t.call(this,n,i,53);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(53,t);return n.getModelObject(i)},r.prototype.getAction=function(n){var t=this;return t.getProperty(168,n)},r.prototype.setAction=function(n){var t=this;t.setProperty(168,n)},r.prototype.getButton=function(n){var t=this;return t.getProperty(179,n)},r.prototype.setButton=function(n){var t=this;t.setProperty(179,n)},r.prototype.getTriggerTarget=function(n){var t=this;return t.getProperty(173,n)},r.prototype.setTriggerTarget=function(n){var t=this;t.setProperty(173,n)},r.prototype.getTriggerTargetId=function(n){var t=this;return t.getProperty(174,n)},r.prototype.setTriggerTargetId=function(n){var t=this;t.setProperty(174,n)},r.prototype.getMethod=function(n){var t=this;return t.getProperty(169,n)},r.prototype.setMethod=function(n){var t=this;t.setProperty(169,n)},r.prototype.getTarget=function(n){var t=this;return t.getProperty(170,n)},r.prototype.setTarget=function(n){var t=this;t.setProperty(170,n)},r.prototype.getKeyNames=function(n){var t=this;return t.getProperty(171,n)},r.prototype.setKeyNames=function(n){var t=this;t.setProperty(171,n)},r.prototype.getTargetId=function(n){var t=this;return t.getProperty(172,n)},r.prototype.setTargetId=function(n){var t=this;t.setProperty(172,n)},r.prototype.getCameraSelect=function(n){var t=this;return t.getRelationshipFrom(49,n)},r.prototype.setCameraSelect=function(n){var t=this;t.setRelationships(n?[n]:[],49)},r.prototype.getTimingSelect=function(n){var t=this;return t.getRelationshipFrom(50,n)},r.prototype.setTimingSelect=function(n){var t=this;t.setRelationships(n?[n]:[],50)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[53],t[r.id]=!0,i.action=n.MouseAction[r.getAction()],i.button=n.MouseButton[r.getButton()],i.triggerTarget=n.TriggerTarget[r.getTriggerTarget()],i.triggerTargetId=r.getTriggerTargetId(),i.method=n.TriggerMethod[r.getMethod()],i.target=n.TriggerTarget[r.getTarget()],i.keyNames=r.getKeyNames(),i.targetId=r.getTargetId(),r.getCameraSelect()!==undefined&&(i.cameraSelect=r.getCameraSelect().serialize(t)),r.getTimingSelect()!==undefined&&(i.timingSelect=r.getTimingSelect().serialize(t)),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(53,e),f=t.getModelObject(o),r.action!==undefined&&f.setAction(n.MouseAction[r.action]),r.button!==undefined&&f.setButton(n.MouseButton[r.button]),r.triggerTarget!==undefined&&f.setTriggerTarget(n.TriggerTarget[r.triggerTarget]),r.triggerTargetId!==undefined&&f.setTriggerTargetId(r.triggerTargetId),r.method!==undefined&&f.setMethod(n.TriggerMethod[r.method]),r.target!==undefined&&f.setTarget(n.TriggerTarget[r.target]),r.keyNames!==undefined&&f.setKeyNames(r.keyNames),r.targetId!==undefined&&f.setTargetId(r.targetId),r.cameraSelect!==undefined&&f.setCameraSelect(t.deserialize(r.cameraSelect,u)),r.timingSelect!==undefined&&f.setTimingSelect(t.deserialize(r.timingSelect,u)),f)},r}(t);n.MouseSelectMethod=nr;tr=function(t){function r(n,i){var r=this;t.call(this,n,i,54);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(54,t);return n.getModelObject(i)},r.prototype.getAction=function(n){var t=this;return t.getProperty(168,n)},r.prototype.setAction=function(n){var t=this;t.setProperty(168,n)},r.prototype.getVisibilityRatio=function(n){var t=this;return t.getProperty(180,n)},r.prototype.setVisibilityRatio=function(n){var t=this;t.setProperty(180,n)},r.prototype.getViewportScaleX=function(n){var t=this;return t.getProperty(181,n)},r.prototype.setViewportScaleX=function(n){var t=this;t.setProperty(181,n)},r.prototype.getViewportScaleY=function(n){var t=this;return t.getProperty(182,n)},r.prototype.setViewportScaleY=function(n){var t=this;t.setProperty(182,n)},r.prototype.getViewportOffsetRatioX=function(n){var t=this;return t.getProperty(183,n)},r.prototype.setViewportOffsetRatioX=function(n){var t=this;t.setProperty(183,n)},r.prototype.getViewportOffsetRatioY=function(n){var t=this;return t.getProperty(184,n)},r.prototype.setViewportOffsetRatioY=function(n){var t=this;t.setProperty(184,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[54],t[r.id]=!0,i.action=n.ViewAction[r.getAction()],i.visibilityRatio=r.getVisibilityRatio(),i.viewportScaleX=r.getViewportScaleX(),i.viewportScaleY=r.getViewportScaleY(),i.viewportOffsetRatioX=r.getViewportOffsetRatioX(),i.viewportOffsetRatioY=r.getViewportOffsetRatioY(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(54,e),f=t.getModelObject(o),r.action!==undefined&&f.setAction(n.ViewAction[r.action]),r.visibilityRatio!==undefined&&f.setVisibilityRatio(r.visibilityRatio),r.viewportScaleX!==undefined&&f.setViewportScaleX(r.viewportScaleX),r.viewportScaleY!==undefined&&f.setViewportScaleY(r.viewportScaleY),r.viewportOffsetRatioX!==undefined&&f.setViewportOffsetRatioX(r.viewportOffsetRatioX),r.viewportOffsetRatioY!==undefined&&f.setViewportOffsetRatioY(r.viewportOffsetRatioY),f)},r}(t);n.CameraSelect=tr;ir=function(t){function r(n,i){var r=this;t.call(this,n,i,55);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(55,t);return n.getModelObject(i)},r.prototype.getAction=function(n){var t=this;return t.getProperty(168,n)},r.prototype.setAction=function(n){var t=this;t.setProperty(168,n)},r.prototype.getVisibilityRatio=function(n){var t=this;return t.getProperty(180,n)},r.prototype.setVisibilityRatio=function(n){var t=this;t.setProperty(180,n)},r.prototype.getViewportScaleX=function(n){var t=this;return t.getProperty(181,n)},r.prototype.setViewportScaleX=function(n){var t=this;t.setProperty(181,n)},r.prototype.getViewportScaleY=function(n){var t=this;return t.getProperty(182,n)},r.prototype.setViewportScaleY=function(n){var t=this;t.setProperty(182,n)},r.prototype.getViewportOffsetRatioX=function(n){var t=this;return t.getProperty(183,n)},r.prototype.setViewportOffsetRatioX=function(n){var t=this;t.setProperty(183,n)},r.prototype.getViewportOffsetRatioY=function(n){var t=this;return t.getProperty(184,n)},r.prototype.setViewportOffsetRatioY=function(n){var t=this;t.setProperty(184,n)},r.prototype.getTriggerTarget=function(n){var t=this;return t.getProperty(173,n)},r.prototype.setTriggerTarget=function(n){var t=this;t.setProperty(173,n)},r.prototype.getTriggerTargetId=function(n){var t=this;return t.getProperty(174,n)},r.prototype.setTriggerTargetId=function(n){var t=this;t.setProperty(174,n)},r.prototype.getMethod=function(n){var t=this;return t.getProperty(169,n)},r.prototype.setMethod=function(n){var t=this;t.setProperty(169,n)},r.prototype.getTarget=function(n){var t=this;return t.getProperty(170,n)},r.prototype.setTarget=function(n){var t=this;t.setProperty(170,n)},r.prototype.getKeyNames=function(n){var t=this;return t.getProperty(171,n)},r.prototype.setKeyNames=function(n){var t=this;t.setProperty(171,n)},r.prototype.getTargetId=function(n){var t=this;return t.getProperty(172,n)},r.prototype.setTargetId=function(n){var t=this;t.setProperty(172,n)},r.prototype.getCameraSelect=function(n){var t=this;return t.getRelationshipFrom(49,n)},r.prototype.setCameraSelect=function(n){var t=this;t.setRelationships(n?[n]:[],49)},r.prototype.getTimingSelect=function(n){var t=this;return t.getRelationshipFrom(50,n)},r.prototype.setTimingSelect=function(n){var t=this;t.setRelationships(n?[n]:[],50)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[55],t[r.id]=!0,i.action=n.ViewAction[r.getAction()],i.visibilityRatio=r.getVisibilityRatio(),i.viewportScaleX=r.getViewportScaleX(),i.viewportScaleY=r.getViewportScaleY(),i.viewportOffsetRatioX=r.getViewportOffsetRatioX(),i.viewportOffsetRatioY=r.getViewportOffsetRatioY(),i.triggerTarget=n.TriggerTarget[r.getTriggerTarget()],i.triggerTargetId=r.getTriggerTargetId(),i.method=n.TriggerMethod[r.getMethod()],i.target=n.TriggerTarget[r.getTarget()],i.keyNames=r.getKeyNames(),i.targetId=r.getTargetId(),r.getCameraSelect()!==undefined&&(i.cameraSelect=r.getCameraSelect().serialize(t)),r.getTimingSelect()!==undefined&&(i.timingSelect=r.getTimingSelect().serialize(t)),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(55,e),f=t.getModelObject(o),r.action!==undefined&&f.setAction(n.ViewAction[r.action]),r.visibilityRatio!==undefined&&f.setVisibilityRatio(r.visibilityRatio),r.viewportScaleX!==undefined&&f.setViewportScaleX(r.viewportScaleX),r.viewportScaleY!==undefined&&f.setViewportScaleY(r.viewportScaleY),r.viewportOffsetRatioX!==undefined&&f.setViewportOffsetRatioX(r.viewportOffsetRatioX),r.viewportOffsetRatioY!==undefined&&f.setViewportOffsetRatioY(r.viewportOffsetRatioY),r.triggerTarget!==undefined&&f.setTriggerTarget(n.TriggerTarget[r.triggerTarget]),r.triggerTargetId!==undefined&&f.setTriggerTargetId(r.triggerTargetId),r.method!==undefined&&f.setMethod(n.TriggerMethod[r.method]),r.target!==undefined&&f.setTarget(n.TriggerTarget[r.target]),r.keyNames!==undefined&&f.setKeyNames(r.keyNames),r.targetId!==undefined&&f.setTargetId(r.targetId),r.cameraSelect!==undefined&&f.setCameraSelect(t.deserialize(r.cameraSelect,u)),r.timingSelect!==undefined&&f.setTimingSelect(t.deserialize(r.timingSelect,u)),f)},r}(t);n.CameraSelectMethod=ir;rr=function(t){function r(n,i){var r=this;t.call(this,n,i,56);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(56,t);return n.getModelObject(i)},r.prototype.getTime=function(n){var t=this;return t.getProperty(185,n)},r.prototype.setTime=function(n){var t=this;t.setProperty(185,n)},r.prototype.getVariance=function(n){var t=this;return t.getProperty(186,n)},r.prototype.setVariance=function(n){var t=this;t.setProperty(186,n)},r.prototype.getFireOnStart=function(n){var t=this;return t.getProperty(187,n)},r.prototype.setFireOnStart=function(n){var t=this;t.setProperty(187,n)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[56],t[r.id]=!0,i.time=r.getTime(),i.variance=r.getVariance(),i.fireOnStart=r.getFireOnStart(),i)},r.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(56,f),u=n.getModelObject(e),t.time!==undefined&&u.setTime(t.time),t.variance!==undefined&&u.setVariance(t.variance),t.fireOnStart!==undefined&&u.setFireOnStart(t.fireOnStart),u)},r}(t);n.TimingSelect=rr;ur=function(t){function r(n,i){var r=this;t.call(this,n,i,57);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(57,t);return n.getModelObject(i)},r.prototype.getTime=function(n){var t=this;return t.getProperty(185,n)},r.prototype.setTime=function(n){var t=this;t.setProperty(185,n)},r.prototype.getVariance=function(n){var t=this;return t.getProperty(186,n)},r.prototype.setVariance=function(n){var t=this;t.setProperty(186,n)},r.prototype.getFireOnStart=function(n){var t=this;return t.getProperty(187,n)},r.prototype.setFireOnStart=function(n){var t=this;t.setProperty(187,n)},r.prototype.getMethod=function(n){var t=this;return t.getProperty(169,n)},r.prototype.setMethod=function(n){var t=this;t.setProperty(169,n)},r.prototype.getTarget=function(n){var t=this;return t.getProperty(170,n)},r.prototype.setTarget=function(n){var t=this;t.setProperty(170,n)},r.prototype.getKeyNames=function(n){var t=this;return t.getProperty(171,n)},r.prototype.setKeyNames=function(n){var t=this;t.setProperty(171,n)},r.prototype.getTargetId=function(n){var t=this;return t.getProperty(172,n)},r.prototype.setTargetId=function(n){var t=this;t.setProperty(172,n)},r.prototype.getCameraSelect=function(n){var t=this;return t.getRelationshipFrom(49,n)},r.prototype.setCameraSelect=function(n){var t=this;t.setRelationships(n?[n]:[],49)},r.prototype.getTimingSelect=function(n){var t=this;return t.getRelationshipFrom(50,n)},r.prototype.setTimingSelect=function(n){var t=this;t.setRelationships(n?[n]:[],50)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[57],t[r.id]=!0,i.time=r.getTime(),i.variance=r.getVariance(),i.fireOnStart=r.getFireOnStart(),i.method=n.TriggerMethod[r.getMethod()],i.target=n.TriggerTarget[r.getTarget()],i.keyNames=r.getKeyNames(),i.targetId=r.getTargetId(),r.getCameraSelect()!==undefined&&(i.cameraSelect=r.getCameraSelect().serialize(t)),r.getTimingSelect()!==undefined&&(i.timingSelect=r.getTimingSelect().serialize(t)),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(57,e),f=t.getModelObject(o),r.time!==undefined&&f.setTime(r.time),r.variance!==undefined&&f.setVariance(r.variance),r.fireOnStart!==undefined&&f.setFireOnStart(r.fireOnStart),r.method!==undefined&&f.setMethod(n.TriggerMethod[r.method]),r.target!==undefined&&f.setTarget(n.TriggerTarget[r.target]),r.keyNames!==undefined&&f.setKeyNames(r.keyNames),r.targetId!==undefined&&f.setTargetId(r.targetId),r.cameraSelect!==undefined&&f.setCameraSelect(t.deserialize(r.cameraSelect,u)),r.timingSelect!==undefined&&f.setTimingSelect(t.deserialize(r.timingSelect,u)),f)},r}(t);n.TimingSelectMethod=ur;fr=function(t){function r(n,i){var r=this;t.call(this,n,i,58);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(58,t);return n.getModelObject(i)},r.prototype.getTriggerSet=function(n){var t=this;return t.getRelationshipFrom(53,n)},r.prototype.setTriggerSet=function(n){var t=this;t.setRelationships(n?[n]:[],53)},r.prototype.getAnimationSequence=function(n){var t=this;return t.getRelationshipFrom(54,n)},r.prototype.setAnimationSequence=function(n){var t=this;t.setRelationships(n?[n]:[],54)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[58],t[r.id]=!0,r.getTriggerSet()!==undefined&&(i.triggerSet=r.getTriggerSet().serialize(t)),r.getAnimationSequence()!==undefined&&(i.animationSequence=r.getAnimationSequence().serialize(t)),i)},r.Deserialize=function(n,t,r){var f,e,u;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),f=r[t.id],t.ref)?n.getModelObject(f):(e=n.graph.createObject(58,f),u=n.getModelObject(e),t.triggerSet!==undefined&&u.setTriggerSet(n.deserialize(t.triggerSet,r)),t.animationSequence!==undefined&&u.setAnimationSequence(n.deserialize(t.animationSequence,r)),u)},r}(t);n.StatelessRule=fr;er=function(t){function r(n,i){var r=this;t.call(this,n,i,60);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(60,t);return n.getModelObject(i)},r.prototype.getValue=function(n){var t=this;return t.getProperty(188,n)},r.prototype.setValue=function(n){var t=this;t.setProperty(188,n)},r.prototype.getFlags=function(t){var i=this;return new Flags(n.TransformFlags,i.getProperty(23,t))},r.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[60],t[r.id]=!0,i.value=r.getValue(),i.flags=r.getFlags().serialize(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(60,e),f=t.getModelObject(o),r.value!==undefined&&f.setValue(r.value),r.flags!==undefined&&f.setFlags(new Flags(n.TransformFlags,Flags.deserialize(n.TransformFlags,r.flags))),f)},r}(t);n.RotationTransform2D=er;or=function(t){function r(n,i){var r=this;t.call(this,n,i,61);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(61,t);return n.getModelObject(i)},r.prototype.getTranslateX=function(n){var t=this;return t.getProperty(189,n)},r.prototype.setTranslateX=function(n){var t=this;t.setProperty(189,n)},r.prototype.getTranslateY=function(n){var t=this;return t.getProperty(190,n)},r.prototype.setTranslateY=function(n){var t=this;t.setProperty(190,n)},r.prototype.getFlags=function(t){var i=this;return new Flags(n.TransformFlags,i.getProperty(23,t))},r.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[61],t[r.id]=!0,i.translateX=r.getTranslateX(),i.translateY=r.getTranslateY(),i.flags=r.getFlags().serialize(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(61,e),f=t.getModelObject(o),r.translateX!==undefined&&f.setTranslateX(r.translateX),r.translateY!==undefined&&f.setTranslateY(r.translateY),r.flags!==undefined&&f.setFlags(new Flags(n.TransformFlags,Flags.deserialize(n.TransformFlags,r.flags))),f)},r}(t);n.TranslateTransform2D=or;sr=function(t){function r(n,i){var r=this;t.call(this,n,i,62);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(62,t);return n.getModelObject(i)},r.prototype.getScaleX=function(n){var t=this;return t.getProperty(191,n)},r.prototype.setScaleX=function(n){var t=this;t.setProperty(191,n)},r.prototype.getScaleY=function(n){var t=this;return t.getProperty(192,n)},r.prototype.setScaleY=function(n){var t=this;t.setProperty(192,n)},r.prototype.getFlags=function(t){var i=this;return new Flags(n.TransformFlags,i.getProperty(23,t))},r.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[62],t[r.id]=!0,i.scaleX=r.getScaleX(),i.scaleY=r.getScaleY(),i.flags=r.getFlags().serialize(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(62,e),f=t.getModelObject(o),r.scaleX!==undefined&&f.setScaleX(r.scaleX),r.scaleY!==undefined&&f.setScaleY(r.scaleY),r.flags!==undefined&&f.setFlags(new Flags(n.TransformFlags,Flags.deserialize(n.TransformFlags,r.flags))),f)},r}(t);n.ScaleTransform2D=sr;hr=function(t){function r(n,i){var r=this;t.call(this,n,i,63);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(63,t);return n.getModelObject(i)},r.prototype.getValue=function(n){var t=this;return t.getProperty(188,n)},r.prototype.setValue=function(n){var t=this;t.setProperty(188,n)},r.prototype.getProjectX=function(n){var t=this;return t.getProperty(193,n)},r.prototype.setProjectX=function(n){var t=this;t.setProperty(193,n)},r.prototype.getProjectY=function(n){var t=this;return t.getProperty(194,n)},r.prototype.setProjectY=function(n){var t=this;t.setProperty(194,n)},r.prototype.getProjectZ=function(n){var t=this;return t.getProperty(195,n)},r.prototype.setProjectZ=function(n){var t=this;t.setProperty(195,n)},r.prototype.getFlags=function(t){var i=this;return new Flags(n.TransformFlags,i.getProperty(23,t))},r.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[63],t[r.id]=!0,i.value=r.getValue(),i.projectX=r.getProjectX(),i.projectY=r.getProjectY(),i.projectZ=r.getProjectZ(),i.flags=r.getFlags().serialize(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(63,e),f=t.getModelObject(o),r.value!==undefined&&f.setValue(r.value),r.projectX!==undefined&&f.setProjectX(r.projectX),r.projectY!==undefined&&f.setProjectY(r.projectY),r.projectZ!==undefined&&f.setProjectZ(r.projectZ),r.flags!==undefined&&f.setFlags(new Flags(n.TransformFlags,Flags.deserialize(n.TransformFlags,r.flags))),f)},r}(t);n.RotationTransform3D=hr;cr=function(t){function r(n,i){var r=this;t.call(this,n,i,64);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(64,t);return n.getModelObject(i)},r.prototype.getTranslateX=function(n){var t=this;return t.getProperty(189,n)},r.prototype.setTranslateX=function(n){var t=this;t.setProperty(189,n)},r.prototype.getTranslateY=function(n){var t=this;return t.getProperty(190,n)},r.prototype.setTranslateY=function(n){var t=this;t.setProperty(190,n)},r.prototype.getTranslateZ=function(n){var t=this;return t.getProperty(196,n)},r.prototype.setTranslateZ=function(n){var t=this;t.setProperty(196,n)},r.prototype.getFlags=function(t){var i=this;return new Flags(n.TransformFlags,i.getProperty(23,t))},r.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[64],t[r.id]=!0,i.translateX=r.getTranslateX(),i.translateY=r.getTranslateY(),i.translateZ=r.getTranslateZ(),i.flags=r.getFlags().serialize(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(64,e),f=t.getModelObject(o),r.translateX!==undefined&&f.setTranslateX(r.translateX),r.translateY!==undefined&&f.setTranslateY(r.translateY),r.translateZ!==undefined&&f.setTranslateZ(r.translateZ),r.flags!==undefined&&f.setFlags(new Flags(n.TransformFlags,Flags.deserialize(n.TransformFlags,r.flags))),f)},r}(t);n.TranslateTransform3D=cr;lr=function(t){function r(n,i){var r=this;t.call(this,n,i,65);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(65,t);return n.getModelObject(i)},r.prototype.getScaleX=function(n){var t=this;return t.getProperty(191,n)},r.prototype.setScaleX=function(n){var t=this;t.setProperty(191,n)},r.prototype.getScaleY=function(n){var t=this;return t.getProperty(192,n)},r.prototype.setScaleY=function(n){var t=this;t.setProperty(192,n)},r.prototype.getScaleZ=function(n){var t=this;return t.getProperty(197,n)},r.prototype.setScaleZ=function(n){var t=this;t.setProperty(197,n)},r.prototype.getFlags=function(t){var i=this;return new Flags(n.TransformFlags,i.getProperty(23,t))},r.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[65],t[r.id]=!0,i.scaleX=r.getScaleX(),i.scaleY=r.getScaleY(),i.scaleZ=r.getScaleZ(),i.flags=r.getFlags().serialize(),i)},r.Deserialize=function(t,r,u){var e,o,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),e=u[r.id],r.ref)?t.getModelObject(e):(o=t.graph.createObject(65,e),f=t.getModelObject(o),r.scaleX!==undefined&&f.setScaleX(r.scaleX),r.scaleY!==undefined&&f.setScaleY(r.scaleY),r.scaleZ!==undefined&&f.setScaleZ(r.scaleZ),r.flags!==undefined&&f.setFlags(new Flags(n.TransformFlags,Flags.deserialize(n.TransformFlags,r.flags))),f)},r}(t);n.ScaleTransform3D=lr;ar=function(t){function r(n,i){var r=this;t.call(this,n,i,66);r.model=i.renderModelRoot;r.parentLayoutNodes=new f(r,5,!1);r.textParagraphs=new f(r,14,!1)}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(66,t);return n.getModelObject(i)},r.prototype.getContentProxy=function(n){var t=this;return t.getRelationshipFrom(55,n)},r.prototype.setContentProxy=function(n){var t=this;t.setRelationships(n?[n]:[],55)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[66],t[r.id]=!0,r.getContentProxy()!==undefined&&(i.contentProxy=r.getContentProxy().serialize(t)),i)},r.Deserialize=function(n,t,r){var u,e,f;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),u=r[t.id],t.ref)?n.getModelObject(u):(e=n.graph.createObject(66,u),f=n.getModelObject(e),t.contentProxy!==undefined&&f.setContentProxy(n.deserialize(t.contentProxy,r)),f)},r}(t);n.LayoutContext=ar;vr=function(t){function r(n,i){var r=this;t.call(this,n,i,67);r.model=i.renderModelRoot}return __extends(r,t),r.Create=function(n,t){var r=this,i=n.graph.createObject(67,t);return n.getModelObject(i)},r.prototype.serialize=function(t){var r=this,i;return(t===undefined&&(t={}),i={},i.id=r.id,t[r.id]!==undefined)?(i.ref=!0,i):(i.objType=n.ObjectType[67],t[r.id]=!0,i)},r.Deserialize=function(n,t,r){var u,f,e;return(r[t.id]||(r[t.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),u=r[t.id],t.ref)?n.getModelObject(u):(f=n.graph.createObject(67,u),e=n.getModelObject(f),e)},r}(t);n.ContentProxy=vr;yr=function(t){function s(n,i){var e=this;t.call(this,n,i,68);e.model=i.renderModelRoot;e.imageCrop=new u(e,81,82,83,84);e.position=new u(e,27,28,29,30);e.visibleCullingRegion=new u(e,49,50,51,52);e.transforms=new r(e,4);e.parentKeyFrames=new f(e,43,!1)}return __extends(s,t),s.Create=function(n,t){var r=this,i=n.graph.createObject(68,t);return n.getModelObject(i)},s.prototype.getAudioPlayerDescriptor=function(n){var t=this;return t.getProperty(198,n)},s.prototype.setAudioPlayerDescriptor=function(n){var t=this;t.setProperty(198,n)},s.prototype.getAudioPlayerType=function(n){var t=this;return t.getProperty(199,n)},s.prototype.setAudioPlayerType=function(n){var t=this;t.setProperty(199,n)},s.prototype.getImageId=function(n){var t=this;return t.getProperty(77,n)},s.prototype.setImageId=function(n){var t=this;t.setProperty(77,n)},s.prototype.getImageUrl=function(n){var t=this;return t.getProperty(78,n)},s.prototype.setImageUrl=function(n){var t=this;t.setProperty(78,n)},s.prototype.getImageOriginalWidth=function(n){var t=this;return t.getProperty(79,n)},s.prototype.setImageOriginalWidth=function(n){var t=this;t.setProperty(79,n)},s.prototype.getImageOriginalHeight=function(n){var t=this;return t.getProperty(80,n)},s.prototype.setImageOriginalHeight=function(n){var t=this;t.setProperty(80,n)},s.prototype.getBorderRadius=function(n){var i=this,t=i.getProperty(31,n);return t!=null&&t.setObjectProperty(i,31),t},s.prototype.setBorderRadius=function(n){var t=this;n!=null&&n.setObjectProperty(t,31);t.setProperty(31,n)},s.prototype.getDropShadowXOff=function(n){var t=this;return t.getProperty(32,n)},s.prototype.setDropShadowXOff=function(n){var t=this;t.setProperty(32,n)},s.prototype.getDropShadowYOff=function(n){var t=this;return t.getProperty(33,n)},s.prototype.setDropShadowYOff=function(n){var t=this;t.setProperty(33,n)},s.prototype.getDropShadowBlur=function(n){var t=this;return t.getProperty(34,n)},s.prototype.setDropShadowBlur=function(n){var t=this;t.setProperty(34,n)},s.prototype.getDropShadowColor=function(n){var t=this;return t.getProperty(35,n)},s.prototype.setDropShadowColor=function(n){var t=this;t.setProperty(35,n)},s.prototype.getDropShadowSpread=function(n){var t=this;return t.getProperty(36,n)},s.prototype.setDropShadowSpread=function(n){var t=this;t.setProperty(36,n)},s.prototype.getDropShadowInset=function(n){var t=this;return t.getProperty(37,n)},s.prototype.setDropShadowInset=function(n){var t=this;t.setProperty(37,n)},s.prototype.getBackgroundPathShadowXOff=function(n){var t=this;return t.getProperty(38,n)},s.prototype.setBackgroundPathShadowXOff=function(n){var t=this;t.setProperty(38,n)},s.prototype.getBackgroundPathShadowYOff=function(n){var t=this;return t.getProperty(39,n)},s.prototype.setBackgroundPathShadowYOff=function(n){var t=this;t.setProperty(39,n)},s.prototype.getBackgroundPathShadowBlur=function(n){var t=this;return t.getProperty(40,n)},s.prototype.setBackgroundPathShadowBlur=function(n){var t=this;t.setProperty(40,n)},s.prototype.getBackgroundPathShadowColor=function(n){var t=this;return t.getProperty(41,n)},s.prototype.setBackgroundPathShadowColor=function(n){var t=this;t.setProperty(41,n)},s.prototype.getZOrder=function(n){var t=this;return t.getProperty(42,n)},s.prototype.setZOrder=function(n){var t=this;t.setProperty(42,n)},s.prototype.getFillOpacityOverride=function(n){var t=this;return t.getProperty(43,n)},s.prototype.setFillOpacityOverride=function(n){var t=this;t.setProperty(43,n)},s.prototype.getFillColorOverride=function(n){var t=this;return t.getProperty(44,n)},s.prototype.setFillColorOverride=function(n){var t=this;t.setProperty(44,n)},s.prototype.getIsOverlay=function(n){var t=this;return t.getProperty(45,n)},s.prototype.setIsOverlay=function(n){var t=this;t.setProperty(45,n)},s.prototype.getIsClickThrough=function(n){var t=this;return t.getProperty(46,n)},s.prototype.setIsClickThrough=function(n){var t=this;t.setProperty(46,n)},s.prototype.getFillColorName=function(n){var t=this;return t.getProperty(47,n)},s.prototype.setFillColorName=function(n){var t=this;t.setProperty(47,n)},s.prototype.getDownscaleFactor=function(n){var t=this;return t.getProperty(48,n)},s.prototype.setDownscaleFactor=function(n){var t=this;t.setProperty(48,n)},s.prototype.getUnhashedId=function(n){var t=this;return t.getProperty(16,n)},s.prototype.setUnhashedId=function(n){var t=this;t.setProperty(16,n)},s.prototype.getKeyFrameType=function(n){var t=this;return t.getProperty(17,n)},s.prototype.setKeyFrameType=function(n){var t=this;t.setProperty(17,n)},s.prototype.getContentId=function(n){var t=this;return t.getProperty(18,n)},s.prototype.setContentId=function(n){var t=this;t.setProperty(18,n)},s.prototype.getOpacity=function(n){var t=this;return t.getProperty(19,n)},s.prototype.setOpacity=function(n){var t=this;t.setProperty(19,n)},s.prototype.getHidden=function(n){var t=this;return t.getProperty(20,n)},s.prototype.setHidden=function(n){var t=this;t.setProperty(20,n)},s.prototype.getAnimated=function(n){var t=this;return t.getProperty(21,n)},s.prototype.setAnimated=function(n){var t=this;t.setProperty(21,n)},s.prototype.getContentType=function(n){var t=this;return t.getProperty(22,n)},s.prototype.setContentType=function(n){var t=this;t.setProperty(22,n)},s.prototype.getFlags=function(t){var i=this;return new Flags(n.LayoutFlags,i.getProperty(23,t))},s.prototype.setFlags=function(n){var t=this;t.setProperty(23,n.raw())},s.prototype.getCursor=function(n){var t=this;return t.getProperty(24,n)},s.prototype.setCursor=function(n){var t=this;t.setProperty(24,n)},s.prototype.getTransformOrigin=function(n){var i=this,t=i.getProperty(25,n);return t!=null&&t.setObjectProperty(i,25),t},s.prototype.setTransformOrigin=function(n){var t=this;n!=null&&n.setObjectProperty(t,25);t.setProperty(25,n)},s.prototype.getAccessibilityInfo=function(n){var i=this,t=i.getProperty(26,n);return t!=null&&t.setObjectProperty(i,26),t},s.prototype.setAccessibilityInfo=function(n){var t=this;n!=null&&n.setObjectProperty(t,26);t.setProperty(26,n)},s.prototype.getBackgroundImage=function(n){var t=this;return t.getRelationshipFrom(6,n)},s.prototype.setBackgroundImage=function(n){var t=this;t.setRelationships(n?[n]:[],6)},s.prototype.getBackgroundPath=function(n){var t=this;return t.getRelationshipFrom(7,n)},s.prototype.setBackgroundPath=function(n){var t=this;t.setRelationships(n?[n]:[],7)},s.prototype.getBackgroundFilterPath=function(n){var t=this;return t.getRelationshipFrom(8,n)},s.prototype.setBackgroundFilterPath=function(n){var t=this;t.setRelationships(n?[n]:[],8)},s.prototype.getLayoutContext=function(n){var t=this;return t.getRelationshipFrom(5,n)},s.prototype.setLayoutContext=function(n){var t=this;t.setRelationships(n?[n]:[],5)},s.prototype.getParentContainer=function(n){var t=this;return t.getRelationshipTo(9,n)},s.prototype.getParentViewport=function(n){var t=this;return t.getRelationshipTo(19,n)},s.prototype.getParentTexture=function(n){var t=this;return t.getRelationshipTo(21,n)},s.prototype.serialize=function(t){var i=this,r;return(t===undefined&&(t={}),r={},r.id=i.id,t[i.id]!==undefined)?(r.ref=!0,r):(r.objType=n.ObjectType[68],t[i.id]=!0,r.audioPlayerDescriptor=i.getAudioPlayerDescriptor(),r.audioPlayerType=n.AudioPlayerType[i.getAudioPlayerType()],r.imageId=i.getImageId(),r.imageUrl=i.getImageUrl(),r.imageOriginalWidth=i.getImageOriginalWidth(),r.imageOriginalHeight=i.getImageOriginalHeight(),r.imageCrop={left:i.imageCrop.getLeft(),top:i.imageCrop.getTop(),width:i.imageCrop.getWidth(),height:i.imageCrop.getHeight()},r.position={left:i.position.getLeft(),top:i.position.getTop(),width:i.position.getWidth(),height:i.position.getHeight()},i.getBorderRadius()!=null&&(r.borderRadius=i.getBorderRadius().serialize()),r.dropShadowXOff=i.getDropShadowXOff(),r.dropShadowYOff=i.getDropShadowYOff(),r.dropShadowBlur=i.getDropShadowBlur(),r.dropShadowColor=i.getDropShadowColor(),r.dropShadowSpread=i.getDropShadowSpread(),r.dropShadowInset=i.getDropShadowInset(),r.backgroundPathShadowXOff=i.getBackgroundPathShadowXOff(),r.backgroundPathShadowYOff=i.getBackgroundPathShadowYOff(),r.backgroundPathShadowBlur=i.getBackgroundPathShadowBlur(),r.backgroundPathShadowColor=i.getBackgroundPathShadowColor(),r.zOrder=i.getZOrder(),r.fillOpacityOverride=i.getFillOpacityOverride(),r.fillColorOverride=i.getFillColorOverride(),r.isOverlay=i.getIsOverlay(),r.isClickThrough=i.getIsClickThrough(),r.fillColorName=i.getFillColorName(),r.downscaleFactor=i.getDownscaleFactor(),r.visibleCullingRegion={left:i.visibleCullingRegion.getLeft(),top:i.visibleCullingRegion.getTop(),width:i.visibleCullingRegion.getWidth(),height:i.visibleCullingRegion.getHeight()},r.unhashedId=i.getUnhashedId(),r.keyFrameType=i.getKeyFrameType(),r.contentId=i.getContentId(),r.opacity=i.getOpacity(),r.hidden=i.getHidden(),r.animated=i.getAnimated(),r.contentType=n.ContentType[i.getContentType()],r.flags=i.getFlags().serialize(),r.cursor=n.Cursor[i.getCursor()],i.getTransformOrigin()!=null&&(r.transformOrigin=i.getTransformOrigin().serialize()),i.getAccessibilityInfo()!=null&&(r.accessibilityInfo=i.getAccessibilityInfo().serialize()),i.getBackgroundImage()!==undefined&&(r.backgroundImage=i.getBackgroundImage().serialize(t)),i.getBackgroundPath()!==undefined&&(r.backgroundPath=i.getBackgroundPath().serialize(t)),i.getBackgroundFilterPath()!==undefined&&(r.backgroundFilterPath=i.getBackgroundFilterPath().serialize(t)),r.transforms=i.transforms.serialize(t),i.getLayoutContext()!==undefined&&(r.layoutContext=i.getLayoutContext().serialize(t)),r)},s.Deserialize=function(t,r,u){var s,c,f;return(u[r.id]||(u[r.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),s=u[r.id],r.ref)?t.getModelObject(s):(c=t.graph.createObject(68,s),f=t.getModelObject(c),r.audioPlayerDescriptor!==undefined&&f.setAudioPlayerDescriptor(r.audioPlayerDescriptor),r.audioPlayerType!==undefined&&f.setAudioPlayerType(n.AudioPlayerType[r.audioPlayerType]),r.imageId!==undefined&&f.setImageId(r.imageId),r.imageUrl!==undefined&&f.setImageUrl(r.imageUrl),r.imageOriginalWidth!==undefined&&f.setImageOriginalWidth(r.imageOriginalWidth),r.imageOriginalHeight!==undefined&&f.setImageOriginalHeight(r.imageOriginalHeight),r.imageCrop!==undefined&&(f.imageCrop.setLeft(r.imageCrop.left),f.imageCrop.setTop(r.imageCrop.top),f.imageCrop.setWidth(r.imageCrop.width),f.imageCrop.setHeight(r.imageCrop.height)),r.position!==undefined&&(f.position.setLeft(r.position.left),f.position.setTop(r.position.top),f.position.setWidth(r.position.width),f.position.setHeight(r.position.height)),r.borderRadius!==undefined&&f.setBorderRadius(h.Deserialize(r.borderRadius)),r.dropShadowXOff!==undefined&&f.setDropShadowXOff(r.dropShadowXOff),r.dropShadowYOff!==undefined&&f.setDropShadowYOff(r.dropShadowYOff),r.dropShadowBlur!==undefined&&f.setDropShadowBlur(r.dropShadowBlur),r.dropShadowColor!==undefined&&f.setDropShadowColor(r.dropShadowColor),r.dropShadowSpread!==undefined&&f.setDropShadowSpread(r.dropShadowSpread),r.dropShadowInset!==undefined&&f.setDropShadowInset(r.dropShadowInset),r.backgroundPathShadowXOff!==undefined&&f.setBackgroundPathShadowXOff(r.backgroundPathShadowXOff),r.backgroundPathShadowYOff!==undefined&&f.setBackgroundPathShadowYOff(r.backgroundPathShadowYOff),r.backgroundPathShadowBlur!==undefined&&f.setBackgroundPathShadowBlur(r.backgroundPathShadowBlur),r.backgroundPathShadowColor!==undefined&&f.setBackgroundPathShadowColor(r.backgroundPathShadowColor),r.zOrder!==undefined&&f.setZOrder(r.zOrder),r.fillOpacityOverride!==undefined&&f.setFillOpacityOverride(r.fillOpacityOverride),r.fillColorOverride!==undefined&&f.setFillColorOverride(r.fillColorOverride),r.isOverlay!==undefined&&f.setIsOverlay(r.isOverlay),r.isClickThrough!==undefined&&f.setIsClickThrough(r.isClickThrough),r.fillColorName!==undefined&&f.setFillColorName(r.fillColorName),r.downscaleFactor!==undefined&&f.setDownscaleFactor(r.downscaleFactor),r.visibleCullingRegion!==undefined&&(f.visibleCullingRegion.setLeft(r.visibleCullingRegion.left),f.visibleCullingRegion.setTop(r.visibleCullingRegion.top),f.visibleCullingRegion.setWidth(r.visibleCullingRegion.width),f.visibleCullingRegion.setHeight(r.visibleCullingRegion.height)),r.unhashedId!==undefined&&f.setUnhashedId(r.unhashedId),r.keyFrameType!==undefined&&f.setKeyFrameType(r.keyFrameType),r.contentId!==undefined&&f.setContentId(r.contentId),r.opacity!==undefined&&f.setOpacity(r.opacity),r.hidden!==undefined&&f.setHidden(r.hidden),r.animated!==undefined&&f.setAnimated(r.animated),r.contentType!==undefined&&f.setContentType(n.ContentType[r.contentType]),r.flags!==undefined&&f.setFlags(new Flags(n.LayoutFlags,Flags.deserialize(n.LayoutFlags,r.flags))),r.cursor!==undefined&&f.setCursor(n.Cursor[r.cursor]),r.transformOrigin!==undefined&&f.setTransformOrigin(e.Deserialize(r.transformOrigin)),r.accessibilityInfo!==undefined&&f.setAccessibilityInfo(o.Deserialize(r.accessibilityInfo)),r.backgroundImage!==undefined&&f.setBackgroundImage(t.deserialize(r.backgroundImage,u)),r.backgroundPath!==undefined&&f.setBackgroundPath(t.deserialize(r.backgroundPath,u)),r.backgroundFilterPath!==undefined&&f.setBackgroundFilterPath(t.deserialize(r.backgroundFilterPath,u)),r.transforms!==undefined&&f.transforms.deserialize(r.transforms,u),r.layoutContext!==undefined&&f.setLayoutContext(t.deserialize(r.layoutContext,u)),f)},s}(t);n.AudioLayoutElement=yr;ru=function(t){function r(i){var r=this;t.call(this);r.graph=new n.RenderGraph(i);r._modelObjects={};r._creators={RenderModelRoot:w,LayoutTree:b,ContainerLayoutElement:k,MediaViewportLayoutElement:d,TextLayoutElement:g,TextRunElement:nt,TextBlockLayoutElement:tt,TextSection:it,TextParagraph:rt,TextList:ut,DecorationLayoutElement:ft,ImageLayoutElement:et,VideoLayoutElement:ot,MapLayoutElement:st,ProjectionLayoutElement:ht,ViewportLayoutElement:ct,EmbedLayoutElement:lt,ClientLayoutElement:at,AgaveLayoutElement:vt,StatusUpdateLayoutElement:yt,ContainerSceneGraphElement:pt,TextureSceneGraphElement:wt,AnimationSequence:bt,Animation:kt,AnimationTarget:dt,AnimationFunction:gt,AnimationTransition:ni,TransitionContainer:ti,TransitionEffect:ii,AnimationParameter:ri,StaticImage:ui,Path:fi,LayoutDebugInfo:ei,RuleResult:oi,InteractionModel:si,FsmNode:hi,FsmEdge:ci,KeyFrame:li,TriggerSet:ai,Trigger:vi,DefaultAction:yi,SelectMethod:pi,SwipeSelectMethod:wi,ClientSelectMethod:bi,EditModeClientSignal:ki,KeyboardSelectMethod:di,KeyClick:gi,MouseSelectMethod:nr,CameraSelect:tr,CameraSelectMethod:ir,TimingSelect:rr,TimingSelectMethod:ur,StatelessRule:fr,RotationTransform2D:er,TranslateTransform2D:or,ScaleTransform2D:sr,RotationTransform3D:hr,TranslateTransform3D:cr,ScaleTransform3D:lr,LayoutContext:ar,ContentProxy:vr,AudioLayoutElement:yr};r.renderModelRoot=r.getModelObject("RenderRoot");r.graph.registerObjectDisposalCallback(r.disposeModelObjects.bind(r))}return __extends(r,t),r.prototype.getModelObject=function(t){var i=this;return i.graph.containsObject(t)?(i._modelObjects[t]===undefined&&(i._modelObjects[t]=new i._creators[n.ObjectType[i.graph.getObjectType(t)]](t,i)),i._modelObjects[t]):null},r.prototype.getSchemaVersion=function(){var n=this;return n.graph.getProperty("ModelRoot",200)},r.prototype.disposeModelObjects=function(n){for(var i,r,u=this,t=0;t<n.length;t++)i=n[t],r=u._modelObjects[i],r&&r.dispose(),delete u._modelObjects[i]},r.prototype.deserialize=function(n,t){var r=this,u;if(t[n.id]||(t[n.id]=IdGenerator.generate().substr(0,i.MaxNodeIdLength)),u=t[n.id],n.ref)return r.getModelObject(u);if(n.objType===undefined)throw new Error("Missing object type encountered when deserializing object.");if(r._creators[n.objType]===undefined)throw new Error("Invalid object type encountered when deserializing object.");return r._creators[n.objType].Deserialize(r,n,t)},r.PropSerializer=n.RenderGraph.PropSerializer,r.RootId=n.RenderGraph.RootId,r.ModelType=4,r}(ObjectOM);n.RenderModel=ru;u=function(n){function t(t,i,r,u,f){var e=this;n.call(this);e._modelObject=t;e._leftProp=i;e._topProp=r;e._widthProp=u;e._heightProp=f}return __extends(t,n),t.prototype.getLeft=function(n){var t=this;return t._modelObject.getProperty(t._leftProp,n)},t.prototype.setLeft=function(n){var t=this;t._modelObject.setProperty(t._leftProp,n)},t.prototype.getTop=function(n){var t=this;return t._modelObject.getProperty(t._topProp,n)},t.prototype.setTop=function(n){var t=this;t._modelObject.setProperty(t._topProp,n)},t.prototype.getWidth=function(n){var t=this;return t._modelObject.getProperty(t._widthProp,n)},t.prototype.setWidth=function(n){var t=this;t._modelObject.setProperty(t._widthProp,n)},t.prototype.getHeight=function(n){var t=this;return t._modelObject.getProperty(t._heightProp,n)},t.prototype.setHeight=function(n){var t=this;t._modelObject.setProperty(t._heightProp,n)},t}(ObjectOM);n.Rectangle=u;v=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.setParent=function(n){var t=this;if(n!=null&&t._parent!=null)throw new Error("You must orphan this element before setting it to a new parent.");t._parent=n},t.prototype.setObjectProperty=function(n,t){var i=this;i._modelObject=n;i._prop=t},t.prototype.propertyUpdated=function(){var n=this;n._parent!=null?n._parent.propertyUpdated():n._modelObject!=undefined&&n._prop!=undefined&&n._modelObject.updateProperty(n._prop)},t.prototype.watchProperty=function(n){var t=this;n!=undefined&&(t._parent!=null?t._parent.watchProperty(n):t._modelObject!=undefined&&t._prop!=undefined&&t._modelObject.getProperty(t._prop,n))},t.prototype.copyFrom=function(n){var t=this;t._modelObject=n._modelObject;t._prop=n._prop},t}(ObjectOM);n.PropertyParent=v;f=function(n){function t(t,i,r){var u=this;n.call(this);u.modelObject=t;u.meaning=i;u.forward=r}return __extends(t,n),t.prototype.getCollection=function(n){var t=this;return t.forward?t.modelObject.getRelationshipsFrom(t.meaning,n):t.modelObject.getRelationshipsTo(t.meaning,n)},t}(ObjectOM);n.ObjectCollection=f;r=function(n){function t(t,i){var r=this;n.call(this,t,i,!0)}return __extends(t,n),t.prototype.add=function(n,t){var i=this;i.modelObject.addRelationship(n,i.meaning,t)},t.prototype.remove=function(n){var t=this;t.modelObject.removeRelationship(n,t.meaning)},t.prototype.removeAt=function(n){var t=this;t.remove(t.getCollection()[n])},t.prototype.set=function(n){var t=this;t.modelObject.setRelationships(n,t.meaning)},t.prototype.serialize=function(n){for(var u=this,i=[],r=u.getCollection(),f=r.length,t=0;t<f;t++)i.push(r[t].serialize(n));return i},t.prototype.deserialize=function(n,t){for(var u,f,r=this,i=0;i<n.length;i++)u=n[i],f=r.modelObject.renderModel.deserialize(u,t),r.add(f)},t}(f);n.ObjectCollectionWritable=r;l=function(n){function t(){var t=this;n.call(this);t._collection=[]}return __extends(t,n),t.prototype.getLength=function(n){var t=this;return t.watchProperty(n),t._collection.length},t.prototype.itemAtIndex=function(n,t){var i=this;return i.watchProperty(t),i._collection[n]},t.prototype.add=function(n,t){var i=this;i.propertyUpdated();t!=undefined?i._collection.splice(t,0,n):i._collection.push(n)},t.prototype.removeAt=function(n){var t=this;t.propertyUpdated();t._collection.splice(n,1)},t.prototype.getCollection=function(n){var t=this;return t.watchProperty(n),t._collection},t.prototype.setCollection=function(n){var t=this;t.propertyUpdated();t._collection=n},t.prototype.serialize=function(){var i=this,r=i.getLength(),t,n;if(r==0)return undefined;for(t=[],n=0;n<r;n++)t.push(i.itemAtIndex(n));return t},t.prototype.deserializePropertyCollection=function(n){var t=this;t._collection=n},t.prototype.copyFrom=function(t){var i=this;n.prototype.copyFrom.call(this,t);i._collection=t._collection.slice()},t.prototype.createCopy=function(){var i=this,n=new t;return n.copyFrom(i),n},t.prototype.equals=function(n){var t=this;return n?Utilities.sequenceEquals(t._collection,n._collection):!1},t}(v);n.PropertyCollection=l;c=function(n){function t(){n.call(this)}return __extends(t,n),t.prototype.add=function(t,i){var r=this;t.setParent(r);n.prototype.add.call(this,t,i)},t.prototype.removeAt=function(t){var i=this,r=i.itemAtIndex(t);r.setParent(null);n.prototype.removeAt.call(this,t)},t.prototype.setCollection=function(t){for(var u,r=this,f=r.getLength(),i=0;i<f;i++)r.itemAtIndex(i).setParent(null);for(n.prototype.setCollection.call(this,t),i=0,u=t.length;i<u;++i)t[i].setParent(r)},t.prototype.serialize=function(){for(var t=this,i=[],r=t.getLength(),n=0;n<r;n++)i.push(t.itemAtIndex(n).serialize());return i},t.prototype.deserializeStructCollection=function(n,t){for(var r=this,u,i;r.getLength()>0;)r.removeAt(0);for(u=n.length,i=0;i<u;i++)r.add(t(n[i]))},t.prototype.copyFrom=function(t){var f=this,r,i,e,u;for(n.prototype.copyFrom.call(this,t),r=f.getCollection(),i=0,e=r.length;i<e;++i)u=r[i].createCopy(),r[i]=u,u.setParent(f)},t.prototype.createCopy=function(){var i=this,n=new t;return n.copyFrom(i),n},t.prototype.equals=function(n){var f=this,i,r,t,u;if(!n||(i=f.getCollection(),r=n.getCollection(),i.length!==r.length))return!1;for(t=0,u=i.length;t<u;++t)if(!i[t].equals(r[t]))return!1;return!0},t}(l);n.StructCollection=c;s=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.createCopy=function(){throw new Error("abstract method");},t.prototype.equals=function(){throw new Error("abstract method");},t}(v);n.Struct=s;h=function(n){function t(){n.call(this);var t=this;t.structType=0;t._TopLeft=0;t._TopRight=0;t._BottomRight=0;t._BottomLeft=0}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._TopLeft=n.TopLeft!=undefined?n.TopLeft:0,i._TopRight=n.TopRight!=undefined?n.TopRight:0,i._BottomRight=n.BottomRight!=undefined?n.BottomRight:0,i._BottomLeft=n.BottomLeft!=undefined?n.BottomLeft:0,i},t.prototype.serialize=function(){var n=this,t={};return n._TopLeft!=0&&(t.TopLeft=n._TopLeft),n._TopRight!=0&&(t.TopRight=n._TopRight),n._BottomRight!=0&&(t.BottomRight=n._BottomRight),n._BottomLeft!=0&&(t.BottomLeft=n._BottomLeft),t},t.prototype.getTopLeft=function(n){var t=this;return t.watchProperty(n),t._TopLeft},t.prototype.setTopLeft=function(n){var t=this;t._TopLeft!=n&&(t.propertyUpdated(),t._TopLeft=n)},t.prototype.getTopRight=function(n){var t=this;return t.watchProperty(n),t._TopRight},t.prototype.setTopRight=function(n){var t=this;t._TopRight!=n&&(t.propertyUpdated(),t._TopRight=n)},t.prototype.getBottomRight=function(n){var t=this;return t.watchProperty(n),t._BottomRight},t.prototype.setBottomRight=function(n){var t=this;t._BottomRight!=n&&(t.propertyUpdated(),t._BottomRight=n)},t.prototype.getBottomLeft=function(n){var t=this;return t.watchProperty(n),t._BottomLeft},t.prototype.setBottomLeft=function(n){var t=this;t._BottomLeft!=n&&(t.propertyUpdated(),t._BottomLeft=n)},t.prototype.createCopy=function(){var i=this,n=new t;return n._TopLeft=i._TopLeft,n._TopRight=i._TopRight,n._BottomRight=i._BottomRight,n._BottomLeft=i._BottomLeft,n},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._TopLeft===n._TopLeft&&t._TopRight===n._TopRight&&t._BottomRight===n._BottomRight&&t._BottomLeft===n._BottomLeft},t}(s);n.BorderRadius=h;pr=function(n){function t(){n.call(this);var t=this;t.structType=1;t._Text="";t._ImageUrl="";t._ContentId="";t._Coordinate=null}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._Text=n.Text!=undefined?n.Text:"",i._ImageUrl=n.ImageUrl!=undefined?n.ImageUrl:"",i._ContentId=n.ContentId!=undefined?n.ContentId:"",i._Coordinate=n.Coordinate!=undefined?br.Deserialize(n.Coordinate):null,i._Coordinate!=null&&i._Coordinate.setParent(i),i},t.prototype.serialize=function(){var n=this,t={};return n._Text!=""&&(t.Text=n._Text),n._ImageUrl!=""&&(t.ImageUrl=n._ImageUrl),n._ContentId!=""&&(t.ContentId=n._ContentId),n._Coordinate!=null&&(t.Coordinate=n._Coordinate.serialize()),t},t.prototype.getText=function(n){var t=this;return t.watchProperty(n),t._Text},t.prototype.setText=function(n){var t=this;t._Text!=n&&(t.propertyUpdated(),t._Text=n)},t.prototype.getImageUrl=function(n){var t=this;return t.watchProperty(n),t._ImageUrl},t.prototype.setImageUrl=function(n){var t=this;t._ImageUrl!=n&&(t.propertyUpdated(),t._ImageUrl=n)},t.prototype.getContentId=function(n){var t=this;return t.watchProperty(n),t._ContentId},t.prototype.setContentId=function(n){var t=this;t._ContentId!=n&&(t.propertyUpdated(),t._ContentId=n)},t.prototype.getCoordinate=function(n){var t=this;return t.watchProperty(n),t._Coordinate},t.prototype.setCoordinate=function(n){var t=this;t._Coordinate!=n&&(t.propertyUpdated(),t._Coordinate=n)},t.prototype.createCopy=function(){var r=this,n=new t,i;return n._Text=r._Text,n._ImageUrl=r._ImageUrl,n._ContentId=r._ContentId,i=r._Coordinate,i&&(i=i.createCopy(),i.setParent(n)),n._Coordinate=i,n},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._Text===n._Text&&t._ImageUrl===n._ImageUrl&&t._ContentId===n._ContentId&&(t._Coordinate?t._Coordinate.equals(n._Coordinate):!n._Coordinate)},t}(s);n.MapPin=pr;wr=function(n){function t(){n.call(this);var t=this;t.structType=2;t._Id="";t._Value=""}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._Id=n.Id!=undefined?n.Id:"",i._Value=n.Value!=undefined?n.Value:"",i},t.prototype.serialize=function(){var n=this,t={};return n._Id!=""&&(t.Id=n._Id),n._Value!=""&&(t.Value=n._Value),t},t.prototype.getId=function(n){var t=this;return t.watchProperty(n),t._Id},t.prototype.setId=function(n){var t=this;t._Id!=n&&(t.propertyUpdated(),t._Id=n)},t.prototype.getValue=function(n){var t=this;return t.watchProperty(n),t._Value},t.prototype.setValue=function(n){var t=this;t._Value!=n&&(t.propertyUpdated(),t._Value=n)},t.prototype.createCopy=function(){var i=this,n=new t;return n._Id=i._Id,n._Value=i._Value,n},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._Id===n._Id&&t._Value===n._Value},t}(s);n.PaletteColorValue=wr;y=function(t){function i(){t.call(this);var n=this;n.structType=3;n._StartPoint=0;n._EndPoint=0;n._Id="";n._EndAdjustment=0;n._CanIgnoreEdgeAlignment=!1;n._SnapType=0}return __extends(i,t),i.Deserialize=function(t){var r=new i;return r._StartPoint=t.StartPoint!=undefined?t.StartPoint:0,r._EndPoint=t.EndPoint!=undefined?t.EndPoint:0,r._Id=t.Id!=undefined?t.Id:"",r._EndAdjustment=t.EndAdjustment!=undefined?t.EndAdjustment:0,r._CanIgnoreEdgeAlignment=t.CanIgnoreEdgeAlignment!=undefined?t.CanIgnoreEdgeAlignment:!1,r._SnapType=t.SnapType!=undefined?n.SnapPointType[t.SnapType]:0,r},i.prototype.serialize=function(){var t=this,i={};return t._StartPoint!=0&&(i.StartPoint=t._StartPoint),t._EndPoint!=0&&(i.EndPoint=t._EndPoint),t._Id!=""&&(i.Id=t._Id),t._EndAdjustment!=0&&(i.EndAdjustment=t._EndAdjustment),t._CanIgnoreEdgeAlignment!=!1&&(i.CanIgnoreEdgeAlignment=t._CanIgnoreEdgeAlignment),t._SnapType!=0&&(i.SnapType=n.SnapPointType[t._SnapType]),i},i.prototype.getStartPoint=function(n){var t=this;return t.watchProperty(n),t._StartPoint},i.prototype.setStartPoint=function(n){var t=this;t._StartPoint!=n&&(t.propertyUpdated(),t._StartPoint=n)},i.prototype.getEndPoint=function(n){var t=this;return t.watchProperty(n),t._EndPoint},i.prototype.setEndPoint=function(n){var t=this;t._EndPoint!=n&&(t.propertyUpdated(),t._EndPoint=n)},i.prototype.getId=function(n){var t=this;return t.watchProperty(n),t._Id},i.prototype.setId=function(n){var t=this;t._Id!=n&&(t.propertyUpdated(),t._Id=n)},i.prototype.getEndAdjustment=function(n){var t=this;return t.watchProperty(n),t._EndAdjustment},i.prototype.setEndAdjustment=function(n){var t=this;t._EndAdjustment!=n&&(t.propertyUpdated(),t._EndAdjustment=n)},i.prototype.getCanIgnoreEdgeAlignment=function(n){var t=this;return t.watchProperty(n),t._CanIgnoreEdgeAlignment},i.prototype.setCanIgnoreEdgeAlignment=function(n){var t=this;t._CanIgnoreEdgeAlignment!=n&&(t.propertyUpdated(),t._CanIgnoreEdgeAlignment=n)},i.prototype.getSnapType=function(n){var t=this;return t.watchProperty(n),t._SnapType},i.prototype.setSnapType=function(n){var t=this;t._SnapType!=n&&(t.propertyUpdated(),t._SnapType=n)},i.prototype.createCopy=function(){var t=this,n=new i;return n._StartPoint=t._StartPoint,n._EndPoint=t._EndPoint,n._Id=t._Id,n._EndAdjustment=t._EndAdjustment,n._CanIgnoreEdgeAlignment=t._CanIgnoreEdgeAlignment,n._SnapType=t._SnapType,n},i.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._StartPoint===n._StartPoint&&t._EndPoint===n._EndPoint&&t._Id===n._Id&&t._EndAdjustment===n._EndAdjustment&&t._CanIgnoreEdgeAlignment===n._CanIgnoreEdgeAlignment&&t._SnapType===n._SnapType},i}(s);n.SnapPoint=y;p=function(t){function i(){t.call(this);var n=this;n.structType=4;n._EditMode=0}return __extends(i,t),i.Deserialize=function(t){var r=new i;return r._EditMode=t.EditMode!=undefined?n.ClientStateValue[t.EditMode]:0,r},i.prototype.serialize=function(){var t=this,i={};return t._EditMode!=0&&(i.EditMode=n.ClientStateValue[t._EditMode]),i},i.prototype.getEditMode=function(n){var t=this;return t.watchProperty(n),t._EditMode},i.prototype.setEditMode=function(n){var t=this;t._EditMode!=n&&(t.propertyUpdated(),t._EditMode=n)},i.prototype.createCopy=function(){var t=this,n=new i;return n._EditMode=t._EditMode,n},i.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._EditMode===n._EditMode},i}(s);n.ClientState=p;a=function(t){function i(){t.call(this);var n=this;n.structType=5;n._Id="";n._Family="";n._Size=0;n._DefinedStyle=0;n._Style=0;n._DefinedWeight=0;n._Weight=0;n._Stretch=0;n._Tracking=0;n._LineHeight=0;n._TextAlignment=0;n._FileName="";n._SubstituteId="";n._SizeCalibration=0;n._UnicodeRange="";n.fallbackChain=new l;n.fallbackChain.setParent(n);n._GenericFamily=""}return __extends(i,t),i.Deserialize=function(t){var r=new i;return r._Id=t.Id!=undefined?t.Id:"",r._Family=t.Family!=undefined?t.Family:"",r._Size=t.Size!=undefined?t.Size:0,r._DefinedStyle=t.DefinedStyle!=undefined?n.FontStyle[t.DefinedStyle]:0,r._Style=t.Style!=undefined?n.FontStyle[t.Style]:0,r._DefinedWeight=t.DefinedWeight!=undefined?n.FontWeight[t.DefinedWeight]:0,r._Weight=t.Weight!=undefined?n.FontWeight[t.Weight]:0,r._Stretch=t.Stretch!=undefined?n.FontStretch[t.Stretch]:0,r._Tracking=t.Tracking!=undefined?t.Tracking:0,r._LineHeight=t.LineHeight!=undefined?t.LineHeight:0,r._TextAlignment=t.TextAlignment!=undefined?n.LayoutTextAlignment[t.TextAlignment]:0,r._FileName=t.FileName!=undefined?t.FileName:"",r._SubstituteId=t.SubstituteId!=undefined?t.SubstituteId:"",r._SizeCalibration=t.SizeCalibration!=undefined?t.SizeCalibration:0,r._UnicodeRange=t.UnicodeRange!=undefined?t.UnicodeRange:"",t.FallbackChain!=null&&r.fallbackChain.deserializePropertyCollection(t.FallbackChain),r._GenericFamily=t.GenericFamily!=undefined?t.GenericFamily:"",r},i.prototype.serialize=function(){var t=this,i={};return t._Id!=""&&(i.Id=t._Id),t._Family!=""&&(i.Family=t._Family),t._Size!=0&&(i.Size=t._Size),t._DefinedStyle!=0&&(i.DefinedStyle=n.FontStyle[t._DefinedStyle]),t._Style!=0&&(i.Style=n.FontStyle[t._Style]),t._DefinedWeight!=0&&(i.DefinedWeight=n.FontWeight[t._DefinedWeight]),t._Weight!=0&&(i.Weight=n.FontWeight[t._Weight]),t._Stretch!=0&&(i.Stretch=n.FontStretch[t._Stretch]),t._Tracking!=0&&(i.Tracking=t._Tracking),t._LineHeight!=0&&(i.LineHeight=t._LineHeight),t._TextAlignment!=0&&(i.TextAlignment=n.LayoutTextAlignment[t._TextAlignment]),t._FileName!=""&&(i.FileName=t._FileName),t._SubstituteId!=""&&(i.SubstituteId=t._SubstituteId),t._SizeCalibration!=0&&(i.SizeCalibration=t._SizeCalibration),t._UnicodeRange!=""&&(i.UnicodeRange=t._UnicodeRange),i.FallbackChain=t.fallbackChain.serialize(),t._GenericFamily!=""&&(i.GenericFamily=t._GenericFamily),i},i.prototype.getId=function(n){var t=this;return t.watchProperty(n),t._Id},i.prototype.setId=function(n){var t=this;t._Id!=n&&(t.propertyUpdated(),t._Id=n)},i.prototype.getFamily=function(n){var t=this;return t.watchProperty(n),t._Family},i.prototype.setFamily=function(n){var t=this;t._Family!=n&&(t.propertyUpdated(),t._Family=n)},i.prototype.getSize=function(n){var t=this;return t.watchProperty(n),t._Size},i.prototype.setSize=function(n){var t=this;t._Size!=n&&(t.propertyUpdated(),t._Size=n)},i.prototype.getDefinedStyle=function(n){var t=this;return t.watchProperty(n),t._DefinedStyle},i.prototype.setDefinedStyle=function(n){var t=this;t._DefinedStyle!=n&&(t.propertyUpdated(),t._DefinedStyle=n)},i.prototype.getStyle=function(n){var t=this;return t.watchProperty(n),t._Style},i.prototype.setStyle=function(n){var t=this;t._Style!=n&&(t.propertyUpdated(),t._Style=n)},i.prototype.getDefinedWeight=function(n){var t=this;return t.watchProperty(n),t._DefinedWeight},i.prototype.setDefinedWeight=function(n){var t=this;t._DefinedWeight!=n&&(t.propertyUpdated(),t._DefinedWeight=n)},i.prototype.getWeight=function(n){var t=this;return t.watchProperty(n),t._Weight},i.prototype.setWeight=function(n){var t=this;t._Weight!=n&&(t.propertyUpdated(),t._Weight=n)},i.prototype.getStretch=function(n){var t=this;return t.watchProperty(n),t._Stretch},i.prototype.setStretch=function(n){var t=this;t._Stretch!=n&&(t.propertyUpdated(),t._Stretch=n)},i.prototype.getTracking=function(n){var t=this;return t.watchProperty(n),t._Tracking},i.prototype.setTracking=function(n){var t=this;t._Tracking!=n&&(t.propertyUpdated(),t._Tracking=n)},i.prototype.getLineHeight=function(n){var t=this;return t.watchProperty(n),t._LineHeight},i.prototype.setLineHeight=function(n){var t=this;t._LineHeight!=n&&(t.propertyUpdated(),t._LineHeight=n)},i.prototype.getTextAlignment=function(n){var t=this;return t.watchProperty(n),t._TextAlignment},i.prototype.setTextAlignment=function(n){var t=this;t._TextAlignment!=n&&(t.propertyUpdated(),t._TextAlignment=n)},i.prototype.getFileName=function(n){var t=this;return t.watchProperty(n),t._FileName},i.prototype.setFileName=function(n){var t=this;t._FileName!=n&&(t.propertyUpdated(),t._FileName=n)},i.prototype.getSubstituteId=function(n){var t=this;return t.watchProperty(n),t._SubstituteId},i.prototype.setSubstituteId=function(n){var t=this;t._SubstituteId!=n&&(t.propertyUpdated(),t._SubstituteId=n)},i.prototype.getSizeCalibration=function(n){var t=this;return t.watchProperty(n),t._SizeCalibration},i.prototype.setSizeCalibration=function(n){var t=this;t._SizeCalibration!=n&&(t.propertyUpdated(),t._SizeCalibration=n)},i.prototype.getUnicodeRange=function(n){var t=this;return t.watchProperty(n),t._UnicodeRange},i.prototype.setUnicodeRange=function(n){var t=this;t._UnicodeRange!=n&&(t.propertyUpdated(),t._UnicodeRange=n)},i.prototype.getGenericFamily=function(n){var t=this;return t.watchProperty(n),t._GenericFamily},i.prototype.setGenericFamily=function(n){var t=this;t._GenericFamily!=n&&(t.propertyUpdated(),t._GenericFamily=n)},i.prototype.createCopy=function(){var t=this,n=new i,r;return n._Id=t._Id,n._Family=t._Family,n._Size=t._Size,n._DefinedStyle=t._DefinedStyle,n._Style=t._Style,n._DefinedWeight=t._DefinedWeight,n._Weight=t._Weight,n._Stretch=t._Stretch,n._Tracking=t._Tracking,n._LineHeight=t._LineHeight,n._TextAlignment=t._TextAlignment,n._FileName=t._FileName,n._SubstituteId=t._SubstituteId,n._SizeCalibration=t._SizeCalibration,n._UnicodeRange=t._UnicodeRange,r=t.fallbackChain,r&&(r=r.createCopy(),r.setParent(n)),n.fallbackChain=r,n._GenericFamily=t._GenericFamily,n},i.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._Id===n._Id&&t._Family===n._Family&&t._Size===n._Size&&t._DefinedStyle===n._DefinedStyle&&t._Style===n._Style&&t._DefinedWeight===n._DefinedWeight&&t._Weight===n._Weight&&t._Stretch===n._Stretch&&t._Tracking===n._Tracking&&t._LineHeight===n._LineHeight&&t._TextAlignment===n._TextAlignment&&t._FileName===n._FileName&&t._SubstituteId===n._SubstituteId&&t._SizeCalibration===n._SizeCalibration&&t._UnicodeRange===n._UnicodeRange&&(t.fallbackChain?t.fallbackChain.equals(n.fallbackChain):!n.fallbackChain)&&t._GenericFamily===n._GenericFamily},i}(s);n.TextStyle=a;br=function(n){function t(){n.call(this);var t=this;t.structType=6;t._Latitude=0;t._Longitude=0}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._Latitude=n.Latitude!=undefined?n.Latitude:0,i._Longitude=n.Longitude!=undefined?n.Longitude:0,i},t.prototype.serialize=function(){var n=this,t={};return n._Latitude!=0&&(t.Latitude=n._Latitude),n._Longitude!=0&&(t.Longitude=n._Longitude),t},t.prototype.getLatitude=function(n){var t=this;return t.watchProperty(n),t._Latitude},t.prototype.setLatitude=function(n){var t=this;t._Latitude!=n&&(t.propertyUpdated(),t._Latitude=n)},t.prototype.getLongitude=function(n){var t=this;return t.watchProperty(n),t._Longitude},t.prototype.setLongitude=function(n){var t=this;t._Longitude!=n&&(t.propertyUpdated(),t._Longitude=n)},t.prototype.createCopy=function(){var i=this,n=new t;return n._Latitude=i._Latitude,n._Longitude=i._Longitude,n},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._Latitude===n._Latitude&&t._Longitude===n._Longitude},t}(s);n.GeoCoordinate=br;kr=function(n){function t(){n.call(this);var t=this;t.structType=7;t._ElementId="";t.containerIds=new l;t.containerIds.setParent(t)}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._ElementId=n.ElementId!=undefined?n.ElementId:"",n.ContainerIds!=null&&i.containerIds.deserializePropertyCollection(n.ContainerIds),i},t.prototype.serialize=function(){var n=this,t={};return n._ElementId!=""&&(t.ElementId=n._ElementId),t.ContainerIds=n.containerIds.serialize(),t},t.prototype.getElementId=function(n){var t=this;return t.watchProperty(n),t._ElementId},t.prototype.setElementId=function(n){var t=this;t._ElementId!=n&&(t.propertyUpdated(),t._ElementId=n)},t.prototype.createCopy=function(){var r=this,i=new t,n;return i._ElementId=r._ElementId,n=r.containerIds,n&&(n=n.createCopy(),n.setParent(i)),i.containerIds=n,i},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._ElementId===n._ElementId&&(t.containerIds?t.containerIds.equals(n.containerIds):!n.containerIds)},t}(s);n.Transition=kr;dr=function(t){function i(){t.call(this);var n=this;n.structType=8;n._AnimatablePropertyName=0;n._Curve=0;n._Duration=0;n._Delay=0;n.effectIds=new l;n.effectIds.setParent(n)}return __extends(i,t),i.Deserialize=function(t){var r=new i;return r._AnimatablePropertyName=t.AnimatablePropertyName!=undefined?n.AnimatableProperty[t.AnimatablePropertyName]:0,r._Curve=t.Curve!=undefined?n.AnimationCurve[t.Curve]:0,r._Duration=t.Duration!=undefined?t.Duration:0,r._Delay=t.Delay!=undefined?t.Delay:0,t.EffectIds!=null&&r.effectIds.deserializePropertyCollection(t.EffectIds),r},i.prototype.serialize=function(){var t=this,i={};return t._AnimatablePropertyName!=0&&(i.AnimatablePropertyName=n.AnimatableProperty[t._AnimatablePropertyName]),t._Curve!=0&&(i.Curve=n.AnimationCurve[t._Curve]),t._Duration!=0&&(i.Duration=t._Duration),t._Delay!=0&&(i.Delay=t._Delay),i.EffectIds=t.effectIds.serialize(),i},i.prototype.getAnimatablePropertyName=function(n){var t=this;return t.watchProperty(n),t._AnimatablePropertyName},i.prototype.setAnimatablePropertyName=function(n){var t=this;t._AnimatablePropertyName!=n&&(t.propertyUpdated(),t._AnimatablePropertyName=n)},i.prototype.getCurve=function(n){var t=this;return t.watchProperty(n),t._Curve},i.prototype.setCurve=function(n){var t=this;t._Curve!=n&&(t.propertyUpdated(),t._Curve=n)},i.prototype.getDuration=function(n){var t=this;return t.watchProperty(n),t._Duration},i.prototype.setDuration=function(n){var t=this;t._Duration!=n&&(t.propertyUpdated(),t._Duration=n)},i.prototype.getDelay=function(n){var t=this;return t.watchProperty(n),t._Delay},i.prototype.setDelay=function(n){var t=this;t._Delay!=n&&(t.propertyUpdated(),t._Delay=n)},i.prototype.createCopy=function(){var r=this,n=new i,t;return n._AnimatablePropertyName=r._AnimatablePropertyName,n._Curve=r._Curve,n._Duration=r._Duration,n._Delay=r._Delay,t=r.effectIds,t&&(t=t.createCopy(),t.setParent(n)),n.effectIds=t,n},i.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._AnimatablePropertyName===n._AnimatablePropertyName&&t._Curve===n._Curve&&t._Duration===n._Duration&&t._Delay===n._Delay&&(t.effectIds?t.effectIds.equals(n.effectIds):!n.effectIds)},i}(s);n.AnimationContainer=dr;gr=function(t){function i(){t.call(this);var n=this;n.structType=9;n._TransformComponent=0;n._TransformIndex=0;n._StartValue=0;n._EndValue=0}return __extends(i,t),i.Deserialize=function(t){var r=new i;return r._TransformComponent=t.TransformComponent!=undefined?n.AnimatableTransformComponent[t.TransformComponent]:0,r._TransformIndex=t.TransformIndex!=undefined?t.TransformIndex:0,r._StartValue=t.StartValue!=undefined?t.StartValue:0,r._EndValue=t.EndValue!=undefined?t.EndValue:0,r},i.prototype.serialize=function(){var t=this,i={};return t._TransformComponent!=0&&(i.TransformComponent=n.AnimatableTransformComponent[t._TransformComponent]),t._TransformIndex!=0&&(i.TransformIndex=t._TransformIndex),t._StartValue!=0&&(i.StartValue=t._StartValue),t._EndValue!=0&&(i.EndValue=t._EndValue),i},i.prototype.getTransformComponent=function(n){var t=this;return t.watchProperty(n),t._TransformComponent},i.prototype.setTransformComponent=function(n){var t=this;t._TransformComponent!=n&&(t.propertyUpdated(),t._TransformComponent=n)},i.prototype.getTransformIndex=function(n){var t=this;return t.watchProperty(n),t._TransformIndex},i.prototype.setTransformIndex=function(n){var t=this;t._TransformIndex!=n&&(t.propertyUpdated(),t._TransformIndex=n)},i.prototype.getStartValue=function(n){var t=this;return t.watchProperty(n),t._StartValue},i.prototype.setStartValue=function(n){var t=this;t._StartValue!=n&&(t.propertyUpdated(),t._StartValue=n)},i.prototype.getEndValue=function(n){var t=this;return t.watchProperty(n),t._EndValue},i.prototype.setEndValue=function(n){var t=this;t._EndValue!=n&&(t.propertyUpdated(),t._EndValue=n)},i.prototype.createCopy=function(){var t=this,n=new i;return n._TransformComponent=t._TransformComponent,n._TransformIndex=t._TransformIndex,n._StartValue=t._StartValue,n._EndValue=t._EndValue,n},i.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._TransformComponent===n._TransformComponent&&t._TransformIndex===n._TransformIndex&&t._StartValue===n._StartValue&&t._EndValue===n._EndValue},i}(s);n.AnimationEffect=gr;e=function(n){function t(){n.call(this);var t=this;t.structType=10;t._X=0;t._Y=0;t._Z=0}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._X=n.X!=undefined?n.X:0,i._Y=n.Y!=undefined?n.Y:0,i._Z=n.Z!=undefined?n.Z:0,i},t.prototype.serialize=function(){var n=this,t={};return n._X!=0&&(t.X=n._X),n._Y!=0&&(t.Y=n._Y),n._Z!=0&&(t.Z=n._Z),t},t.prototype.getX=function(n){var t=this;return t.watchProperty(n),t._X},t.prototype.setX=function(n){var t=this;t._X!=n&&(t.propertyUpdated(),t._X=n)},t.prototype.getY=function(n){var t=this;return t.watchProperty(n),t._Y},t.prototype.setY=function(n){var t=this;t._Y!=n&&(t.propertyUpdated(),t._Y=n)},t.prototype.getZ=function(n){var t=this;return t.watchProperty(n),t._Z},t.prototype.setZ=function(n){var t=this;t._Z!=n&&(t.propertyUpdated(),t._Z=n)},t.prototype.createCopy=function(){var i=this,n=new t;return n._X=i._X,n._Y=i._Y,n._Z=i._Z,n},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._X===n._X&&t._Y===n._Y&&t._Z===n._Z},t}(s);n.TransformOrigin=e;nu=function(n){function t(){n.call(this);var t=this;t.structType=11;t._FsmNodeId=""}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._FsmNodeId=n.FsmNodeId!=undefined?n.FsmNodeId:"",i},t.prototype.serialize=function(){var n=this,t={};return n._FsmNodeId!=""&&(t.FsmNodeId=n._FsmNodeId),t},t.prototype.getFsmNodeId=function(n){var t=this;return t.watchProperty(n),t._FsmNodeId},t.prototype.setFsmNodeId=function(n){var t=this;t._FsmNodeId!=n&&(t.propertyUpdated(),t._FsmNodeId=n)},t.prototype.createCopy=function(){var i=this,n=new t;return n._FsmNodeId=i._FsmNodeId,n},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._FsmNodeId===n._FsmNodeId},t}(s);n.NavigationMarker=nu;tu=function(n){function t(){n.call(this);var t=this;t.structType=12;t._ContentId="";t.navigationMarkers=new c;t.navigationMarkers.setParent(t)}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._ContentId=n.ContentId!=undefined?n.ContentId:"",n.NavigationMarkers!=null&&i.navigationMarkers.deserializeStructCollection(n.NavigationMarkers,nu.Deserialize),i},t.prototype.serialize=function(){var n=this,t={};return n._ContentId!=""&&(t.ContentId=n._ContentId),t.NavigationMarkers=n.navigationMarkers.serialize(),t},t.prototype.getContentId=function(n){var t=this;return t.watchProperty(n),t._ContentId},t.prototype.setContentId=function(n){var t=this;t._ContentId!=n&&(t.propertyUpdated(),t._ContentId=n)},t.prototype.createCopy=function(){var r=this,i=new t,n;return i._ContentId=r._ContentId,n=r.navigationMarkers,n&&(n=n.createCopy(),n.setParent(i)),i.navigationMarkers=n,i},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._ContentId===n._ContentId&&(t.navigationMarkers?t.navigationMarkers.equals(n.navigationMarkers):!n.navigationMarkers)},t}(s);n.ContentNavigationMarkerCollection=tu;o=function(n){function t(){n.call(this);var t=this;t.structType=13;t.attributes=new c;t.attributes.setParent(t)}return __extends(t,n),t.Deserialize=function(n){var i=new t;return n.Attributes!=null&&i.attributes.deserializeStructCollection(n.Attributes,iu.Deserialize),i},t.prototype.serialize=function(){var t=this,n={};return n.Attributes=t.attributes.serialize(),n},t.prototype.createCopy=function(){var r=this,i=new t,n=r.attributes;return n&&(n=n.createCopy(),n.setParent(i)),i.attributes=n,i},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&(t.attributes?t.attributes.equals(n.attributes):!n.attributes)},t}(s);n.AccessibilityInfo=o;iu=function(n){function t(){n.call(this);var t=this;t.structType=14;t._Name="";t._Value=""}return __extends(t,n),t.Deserialize=function(n){var i=new t;return i._Name=n.Name!=undefined?n.Name:"",i._Value=n.Value!=undefined?n.Value:"",i},t.prototype.serialize=function(){var n=this,t={};return n._Name!=""&&(t.Name=n._Name),n._Value!=""&&(t.Value=n._Value),t},t.prototype.getName=function(n){var t=this;return t.watchProperty(n),t._Name},t.prototype.setName=function(n){var t=this;t._Name!=n&&(t.propertyUpdated(),t._Name=n)},t.prototype.getValue=function(n){var t=this;return t.watchProperty(n),t._Value},t.prototype.setValue=function(n){var t=this;t._Value!=n&&(t.propertyUpdated(),t._Value=n)},t.prototype.createCopy=function(){var i=this,n=new t;return n._Name=i._Name,n._Value=i._Value,n},t.prototype.equals=function(n){var t=this;return n&&this.structType===n.structType&&t._Name===n._Name&&t._Value===n._Value},t}(s);n.AriaAttribute=iu;n.RenderGraph.SetStructValues();n.RenderGraph.SetStructCollectionValues();n.RenderGraph.SetPropertyCollectionValues()})(r=t.RM||(t.RM={}))})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){n.RenderModel})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(){function n(n,t,i,r,u){var f=this;f.id=n;f.type=t;f.children=r||[];u!==undefined?f.externalDataId=u:f.props=i||{}}return n.prototype.createCopy=function(){var t=this,f=t.children,r=t.props,o=t.externalDataId,u,i;if(t.externalDataId)return new n(t.id,t.type,undefined,undefined,o);var s=f?f.slice(0):undefined,e=Object.create(Object.getPrototypeOf(r)),h=new n(t.id,t.type,e,s);for(u in r)r.hasOwnProperty(u)&&(i=r[u],e[u]=i&&typeof i=="object"?i.createCopy():i);return h},n}();n.PropBag=t})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(n){function t(t,i,r){var u,o,f,e;if(r===void 0&&(r=!1),n.call(this),this._propBags={},this._disposalCallbacks=[],this._bagChangeCallbacks=[],this._updateCallbacks=[],this._partialChangesCompletedCallbacks=[],this.applyingUpdate=!1,this.partialChangeCount=0,u=this,u.rootId=t,u._readOnly=r,i!==undefined)for(o=i.length,f=0;f<o;f++)e=i[f],u._propBags[e.id]=e}return __extends(t,n),t.prototype.addPropBag=function(n){var t=this;t._propBags[n.id]=n},t.prototype.getPropBag=function(n){var t=this;return t._propBags[n]},t.prototype.getPropBagIds=function(){var t=this,i=t._propBags,n=[];for(var r in i)n.push(r);return n},t.prototype.getPropBagsCopy=function(){var r=this,n=r._propBags,t={};for(var i in n)t[i]=n[i].createCopy();return t},t.prototype.markPropBagDirty=function(n,t){var i=this,r,u;if(!i.applyingUpdate&&i._readOnly)throw new Error("Attempting to modify a read-only model.");for(r=0,u=i._bagChangeCallbacks.length;r<u;++r)i._bagChangeCallbacks[r](n,t,i.applyingUpdate,i.partialChangeCount>0)},t.prototype.updatePropBags=function(n,t){var i=this,r,u;for(i.applyingUpdate=!0,r=0,u=i._updateCallbacks.length;r<u;++r)i._updateCallbacks[r](n);t&&i.removeUnrootedPropBags();i.applyingUpdate=!1},t.prototype.createPartialChange=function(n){var t=this;++t.partialChangeCount;try{n()}finally{--t.partialChangeCount}},t.prototype.partialChangesCompleted=function(){for(var t=this,n=0,i=t._partialChangesCompletedCallbacks.length;n<i;++n)t._partialChangesCompletedCallbacks[n]()},t.prototype.registerUpdateCallback=function(n){var t=this;t._updateCallbacks.push(n)},t.prototype.registerBagChangeCallback=function(n){var t=this;t._bagChangeCallbacks.push(n)},t.prototype.registerDisposalCallback=function(n){var t=this;t._disposalCallbacks.push(n)},t.prototype.registerPartialChangesCompletedCallback=function(n){var t=this;t._partialChangesCompletedCallbacks.push(n)},t.prototype.getRootedPropBagIds=function(){var t=this,n={},i=function(r){var f,o,u,e;for(n[r]=!0,f=t._propBags[r].children,o=f.length,u=0;u<o;u++)e=f[u],n[e]===undefined&&i(e)};return i(t.rootId),n},t.prototype.prunePropBagCollection=function(n){var i=this,r=i.getRootedPropBagIds();for(var t in n)r[t]!==!0&&delete n[t]},t.prototype.removeUnrootedPropBags=function(){var n=this,s=[],u=n._propBags,c=n.getRootedPropBagIds(),t=[],f,e,i,h,r,o;for(f in u)c[f]||t.push(f);if(e=t.length,e>0){for(i=0,h=n._disposalCallbacks.length;i<h;++i)n._disposalCallbacks[i](t);for(r=0;r<e;r++)o=t[r],s.push(u[o]),delete u[o]}return s},t}(ObjectOM);n.Store=t})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function t(t,i){var r=this,u,f,e,o;if(t!==undefined)if(t instanceof n.PropBag){if(u=t,r.id=u.id,r.type=u.type,u.props!==undefined&&(f=i.serializeProperties(r.type,u.props),f!==undefined)){r.props={};for(e in f)r.props[e]=f[e]}u.externalDataId!==undefined&&(r.externalDataId=u.externalDataId)}else o=t,r.id=o,r.ref=!0}return t.prototype.addChild=function(n){var t=this;t.children===undefined&&(t.children=[]);t.children.push(n)},t.getProps=function(n){var i,t,r;if(!(n.props instanceof Array))return n.props===undefined?{}:n.props;if(i={},n.props!==undefined)for(t=0;t<n.props.length;t++)r=n.props[t],i[r.Key]=r.Value;return i},t}();t.PropBagJS=i})(t=n.WP||(n.WP={}))})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t){var i=this;i.Key=n;i.Value=t}return n}();n.PropJS=t})(t=n.WP||(n.WP={}))})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function i(n,i){for(var c,h,u,v,y,l=this,o={},f={},s={},r,e=0;e<n.length;++e)r=n[e].id,o[r]=n[e],f[r]=new t.PropBagJS(n[e],i),s[r]=f[r];c={};for(r in o){var p=o[r],b=f[r],a=p.children,w=a.length;for(h=0;h<w;h++)u=a[h],o[u]!==undefined&&c[u]===undefined?(v=f[u],f[r].addChild(v),c[u]=!0,delete s[u]):f[r].addChild(new t.PropBagJS(u))}l.propBags=[];for(y in s)l.propBags.push(s[y])}return i.Flatten=function(i,r){for(var e=function(i){var s=t.PropBagJS.getProps(i),o=i.children,h=o?o.length:0,v=i.externalDataId,y=i.id,c=i.type,l=[],p=s?r.deserializeProperties(c,s):undefined,f,a;if(o)for(f=0;f<h;f++)l.push(o[f].id);if(u.push(new n.PropBag(y,c,p,l,v)),o)for(f=0;f<h;f++)a=o[f],a.ref||e(o[f],u)},u=[],f=0;f<i.propBags.length;f++)e(i.propBags[f],u);return u},i}();t.StoryDiff=i})(t=n.WP||(n.WP={}))})(t=n.Model||(n.Model={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){n.ServiceSwitches=null;var t=function(){function n(){var n=this;n._siteDisabled=TDB.watchableTag(8439683,n,!1);n.siteDisabled=n._siteDisabled;n._downtimeDeployment=TDB.watchableTag(8439684,n,!1);n.downtimeDeployment=n._downtimeDeployment;n._blockServiceSuggestedContentDecomp=TDB.watchableTag(8439685,n,!1);n.blockServiceSuggestedContentDecomp=n._blockServiceSuggestedContentDecomp;n._emphasisLessEnabled=TDB.watchableTag(8439686,n,!1);n.emphasisLessEnabled=n._emphasisLessEnabled;n._authoringDisabled=TDB.watchableTag(8439687,n,!1);n.authoringDisabled=n._authoringDisabled}return n.prototype.SetupSwitchesFromTransportFormat=function(n){var t=this;TDB.applyUpdate(function(){t._siteDisabled.setValue(n&&n.siteDisabled?!0:!1);t._downtimeDeployment.setValue(n&&n.downtimeDeployment?!0:!1);t._blockServiceSuggestedContentDecomp.setValue(n&&n.blockServiceSuggestedContentDecomp?!0:!1);t._emphasisLessEnabled.setValue(n&&n.emphasisLessEnabled?!0:!1);t._authoringDisabled.setValue(n&&n.authoringDisabled?!0:!1)})},n}();n.WatchableSwitches=t})(t=n.Settings||(n.Settings={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t,i,r,u,f){var e=this;e._imageId=n;e._variation=t;e._seedColors=i;e._dynamicStyleId=r;e._colorOptionId=u;e._colorPalette=f}return n.prototype.getImageId=function(){var n=this;return n._imageId},n.prototype.getVariation=function(){var n=this;return n._variation},n.prototype.getStyleId=function(){var n=this;return n._dynamicStyleId},n.prototype.getColorOptionId=function(){var n=this;return n._colorOptionId},n.prototype.getSeedColorDictionary=function(){var n=this;return n._seedColors},n.prototype.getSeedColors=function(){var t=this,n=[];for(var i in t._seedColors)n.push(i);return n},n.prototype.getSeedColorValue=function(n){var t=this;return new Color(t._seedColors[n])},n.prototype.getColorPalette=function(){return this._colorPalette},n.prototype.getLayoutColorKeys=function(){var n=[];for(var t in this._colorPalette)n.push(t);return n},n.prototype.getLayoutColorValue=function(n){return this._colorPalette[n]},n.prototype.equals=function(n){var t=this;return n&&n.getImageId()==t.getImageId()&&n.getVariation()==t.getVariation()},n.prototype.toString=function(){var n=this,t="Color Palette Data:",i,r;(n._imageId!=null||n._imageId=="")&&(t+=" Image Id: "+n._imageId);(n._dynamicStyleId!=null||n._imageId=="")&&(t+=" Style Id: "+n._dynamicStyleId);n._variation!=null&&(t+=" Variation: "+n._variation);t+=" Color palette: ";for(i in n._colorPalette)t+=i+":"+n._colorPalette[i]+", ";t+=" Seed Colors: ";for(r in n._seedColors)t+=r+":"+n._seedColors[r]+", ";return n._colorOptionId!=null&&(t+=" Color Option Id: "+n._colorOptionId),t},n}();n.ColorPaletteData=t})(t=n.Styles||(n.Styles={}))})(t=n.Server||(n.Server={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function s(n,t,r){TDB.applyUpdate(function(){i.setValue(!0)},1);$.ajax(o.UrlHelper.getInstance().listFontSetOptionsUrl(n,t,r),{type:"GET",success:h,error:c,cache:!1})}function h(n){var t=n.fontSetOptions;TDB.applyUpdate(function(){i.setValue(!1);r.setValue(t)})}function c(n,t,r){TDB.applyUpdate(function(){i.setValue(!1);e.setValue(!0)});StoryLog.StructuredTraceTag(7448216,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.warning,"Failed to get font set option list from the server.",{textStatus:t,errorThrown:r})}function l(n,t,i,e){return n!==u||t!==f?(s(n,t,i),u=n,f=t,r.getWatchedValue(e)):r.getWatchedValue(e)}function a(n){return i.getWatchedValue(n)}function v(n){return e.getWatchedValue(n)}var o=n.Common;t.FontSets={ChineseSimpliciedFontSet1:{headingFont:"MSYaHeiUIBold",bodyFont:"MSYaHeiUI"},ChineseSimplifiedFontSet1:{headingFont:"MSYaHeiUIBold",bodyFont:"MSYaHeiUI"},ChineseSimplifiedFontSet2:{headingFont:"MSYaHeiUIBold",bodyFont:"SimSun"},ChineseSimplifiedFontSet3:{headingFont:"DengXian",bodyFont:"MSYaHeiUI"},ChineseSimplifiedFontSet4:{headingFont:"SimSun",bodyFont:"DengXian"},ChineseSimplifiedFontSet5:{headingFont:"SimSun",bodyFont:"SimSun"},ChineseTraditionalFontSet1:{headingFont:"MingLiU",bodyFont:"MSJhengHei"},ChineseTraditionalFontSet2:{headingFont:"MSJhengHeiBold",bodyFont:"MSJhengHei"},ChineseTraditionalFontSet3:{headingFont:"MingLiU",bodyFont:"MingLiU"},FontSet1:{headingFont:"UniversCondensed",bodyFont:"Univers"},FontSet5:{headingFont:"FordsFolly",bodyFont:"Tahoma"},FontSet7:{headingFont:"ArialNova",bodyFont:"ArialNova"},FontSet12:{headingFont:"UniversCondensed",bodyFont:"Georgia"},HeritageFontSet2:{headingFont:"Bodoni",bodyFont:"TimesNewRoman"},HeritageFontSet3:{headingFont:"RennieMackintosh",bodyFont:"Univers"},JapaneseFontSet1:{headingFont:"YuMincho",bodyFont:"YuMincho"},JapaneseFontSet2:{headingFont:"YuGothic",bodyFont:"YuMincho"},JapaneseFontSet3:{headingFont:"YuGothic",bodyFont:"YuGothic"},JapaneseFontSet4:{headingFont:"Meiryo",bodyFont:"YuGothic"},JapaneseFontSet5:{headingFont:"YuMincho",bodyFont:"YuGothic"},JapaneseFontSet6:{headingFont:"HGPGothicE",bodyFont:"YuMincho"},KawaiiFontSet1:{headingFont:"Hombre",bodyFont:"CenturySchoolbook"},KawaiiFontSet2:{headingFont:"Cavolini",bodyFont:"ArialNova"},KawaiiFontSet3:{headingFont:"QuireSans",bodyFont:"UniversCondensed"},KoreanFontSet1:{headingFont:"MalgunBold",bodyFont:"Malgun"},KoreanFontSet2:{headingFont:"MalgunSemilight",bodyFont:"Malgun"},LightProFontSet2:{headingFont:"Daytona",bodyFont:"ArialNova"},LightProFontSet3:{headingFont:"CourierNew",bodyFont:"CenturySchoolbook"},SimplicityFontSet2:{headingFont:"Posterama",bodyFont:"ArialNova"},SimplicityFontSet3:{headingFont:"OctinVintage",bodyFont:"Georgia"},VanillaFontSet2:{headingFont:"RockwellNova",bodyFont:"Tahoma"},VanillaFontSet3:{headingFont:"ModernNo20",bodyFont:"TimesNewRoman"}};var r=TDB.watchableTag(7448213,t,[]),u="",f="",i=TDB.watchableTag(7448214,t,!1),e=TDB.watchableTag(7448215,t,!1);t.getFontSetOptions=l;t.waitingForFontSets=a;t.errorGettingFontSets=v})(i=t.Styles||(t.Styles={}))})(t=n.Server||(n.Server={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t){this.id=n;this.value=t}return n}();n.NamedColor=t})(t=n.Styles||(n.Styles={}))})(t=n.Server||(n.Server={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function i(n){var r={};for(var i in n)if(n[i].every(function(n){var t=["SeedColors","StyleVariationId","ColorOptionId"],i=0;for(var r in n)t.indexOf(r)!=-1&&i++;return i===t.length}))r[i]=n[i].map(function(n,r){return new t.ColorPaletteData(i,r,n.SeedColors,n.StyleVariationId,n.ColorOptionId,n.ColorPalette)});else return{};return r}function u(n,t,u,f,e,o,s,h,c){var l,a;for(t.length==0&&o&&o.call(f,s),l=r.UrlHelper.getInstance().suggestedColorSetsUrl(n,u.toString()),a=0;a<t.length;a++)l+="&imageIds="+t[a];return h&&(l+="&styleId="+h),c&&(l+="&fontSetId="+c),$.ajax(l,{name:"GetSuggestedColorSets",description:"Get Color Palette From Image",type:"GET",contentType:"application/json; charset=utf-8",success:function(n){var t=i(n),r=Obj.keys(t);r.length>0?e.call(f,t,s):o&&o.call(f,s)},error:function(){o&&o.call(f,s)}})}var r=n.Common;t.convertToColorPaletteData=i;t.getSuggestedColorPalettes=u})(i=t.Styles||(t.Styles={}))})(t=n.Server||(n.Server={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function t(n){this.styleId=n}return t.prototype.copyFrom=function(t){var r,i,u;if(this.styleId=t.styleId,this.setFontSetId(t.fontSetId),this.setBackgroundSetId(t.backgroundSetId),this.setStyleVariationId(t.styleVariationId),this.colorPalette=[],t.colorPalette)for(i=0;i<t.colorPalette.length;i++)r=t.colorPalette[i],this.colorPalette.push(new n.NamedColor(r.id,r.value));if(this.setColorOptionId(t.colorOptionId),this.seedColorOverrides=[],t.seedColorOverrides)for(i=0;i<t.seedColorOverrides.length;i++)u=t.seedColorOverrides[i],this.seedColorOverrides.push(new n.NamedColor(u.id,u.value));this.setAnimationLevel(t.animationLevel)},t.prototype.setColorPalette=function(t){var i,r;this.colorPalette=[];for(i in t)r=t[i],this.colorPalette.push(new n.NamedColor(i,r))},t.prototype.setColorOptionId=function(n){this.colorOptionId=n},t.prototype.setSeedColorOverrides=function(t){var i,r;this.seedColorOverrides=[];for(i in t)r=t[i],this.seedColorOverrides.push(new n.NamedColor(i,r))},t.prototype.setFontSetId=function(n){this.fontSetId=n},t.prototype.setBackgroundSetId=function(n){this.backgroundSetId=n},t.prototype.setAnimationLevel=function(n){this.animationLevel=n},t.prototype.setStyleVariationId=function(n){this.styleVariationId=n},t.prototype.toString=function(){for(var r,i,n=this,u="",t=0;n.colorPalette&&t<n.colorPalette.length;++t)i=n.colorPalette[t].id+","+n.colorPalette[t].value+" ",u+=i;for(r="",t=0;n.seedColorOverrides&&t<n.seedColorOverrides.length;++t)i=n.seedColorOverrides[t].id+","+n.seedColorOverrides[t].value+" ",r+=i;return Utilities.format("{0} {1}{2} {3}{4} {5} {6} {7}",n.styleId,u,n.colorOptionId,r,n.fontSetId,n.backgroundSetId,n.animationLevel,n.styleVariationId)},t}();n.StyleOption=t})(t=n.Styles||(n.Styles={}))})(t=n.Server||(n.Server={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function s(n){var u=n.styleOptions,f={},t;if(u){for(t=0;t<u.length;t++)f[u[t].Key]=u[t].Value;TDB.applyUpdate(function(){r.setValue(!1);e.setValue(f);i.setValue(!1)})}}function h(n,t,i,e){if(u>0){u--;StoryLog.StructuredTraceTag(8750087,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.info,"Attempt to retrieve gallery options failed. Retrying.",{textStatus:i,errorThrown:e});setTimeout(function(){$.ajax(f.UrlHelper.getInstance().getStyleGalleryUrl(n),{type:"GET",cache:!1}).then(s,h.bind(this,n))},1e3);return}TDB.applyUpdate(function(){r.setValue(!1);o.setValue(!0)});StoryLog.StructuredTraceTag(7651798,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.error,"Failed to get style gallery options from the server.",{textStatus:i,errorThrown:e})}function l(n,t){return i.getWatchedValue(t)&&(u=2,$.ajax(f.UrlHelper.getInstance().getStyleGalleryUrl(n),{type:"GET",cache:!1}).then(s,h.bind(this,n))),e.getWatchedValue(t)}function a(n){return r.getWatchedValue(n)}function v(n){return o.getWatchedValue(n)}function y(n){return i.getWatchedValue(n)}var f=n.Common,c=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(t.StyleOption);t.StyleOptionResponse=c;var e=TDB.watchableTag(7651794,t,{}),i=TDB.watchableTag(7651795,t,!0),r=TDB.watchableTag(7651796,t,!0),o=TDB.watchableTag(7651797,t,!1),u;t.getStyleGalleryOptions=l;t.getWaitingForGalleryOptions=a;t.getErrorGettingGalleryOptions=v;t.getGalleryOptionsNeeded=y})(i=t.Styles||(t.Styles={}))})(t=n.Server||(n.Server={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Common,u=function(){function n(){this.styleOptions=[];this.images={};this.notifier=TDB.notifierTag(8246097,this);this.requestSent=!1}return n}(),i=function(){function n(){var n,t;for(this.batches={},this.queue=[],this.pending=[],this.maximumConcurrentRequests=5,this.priorityLevels=4,n=this,t=0;t<n.priorityLevels;++t)n.queue.push([]),n.pending.push(0)}return n.prototype.batchStyles=function(n,t,i){var r=this,f,e,o,s;for(t<0&&(t=0),t>=r.priorityLevels&&(t=r.priorityLevels-1),f=new u,f.priority=t,e=0;e<n.length;++e)o=n[e],s=o.toString(),r.batches[s]===undefined&&(f.styleOptions.push(o),r.batches[s]=f);i||f.styleOptions.length<=0||(r.mayRequest(t)?r.requestImageData(f,t):r.queue[t].push(f))},n.prototype.getImageUri=function(n,t){var r=this,u=n.toString(),i,f;return r.batches[u]===undefined&&r.batchStyles([n],0,!1),i=r.batches[u],i.requestSent||(r.mayRequest(i.priority)?r.requestImageData(i,i.priority):r.queue[i.priority].unshift(i)),t.watch(i.notifier),f=i.images[u],f?"data:image/jpeg;base64,"+f:undefined},n.prototype.mayRequest=function(n){for(var r,i=this,t=0;t<n;++t)if(i.pending[t]>0||i.queue[t].length>0)return!1;for(r=0,t=n;t<i.priorityLevels;++t)r+=i.pending[t];return i.pending[n]<i.maximumConcurrentRequests},n.prototype.requestImageData=function(n,t){var i=this;n.requestSent||(n.requestSent=!0,++i.pending[t],$.ajax(r.UrlHelper.getInstance().getBase64StylePreviewImagesUrl(),{type:"POST",data:JSON.stringify({styleOptions:n.styleOptions}),contentType:"application/json; charset=utf-8",success:function(r){for(var f,u=0;u<n.styleOptions.length;++u)f=n.styleOptions[u].toString(),n.images[f]=r.images[u];TDB.applyUpdate(function(){n.notifier.notify()});i.onRequestComplete(t)},error:function(){i.onRequestComplete(t)}}))},n.prototype.onRequestComplete=function(n){var t=this,n,i;for(--t.pending[n],n=0;n<t.priorityLevels;++n)while(t.queue[n].length>0){if(!t.mayRequest(n))return;i=t.queue[n].shift();t.requestImageData(i,n)}},n}();t.StylePreviewManager=i;t.stylePreviewManager=new i})(i=t.Styles||(t.Styles={}))})(t=n.Server||(n.Server={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){function s(n,e){return e===void 0&&(e=!0),i==null&&(i=TDB.watchableTag(4751843,t,[]),TDB.applyUpdate(function(){r.setValue(!0)},1),u=2,$.ajax(f.UrlHelper.getInstance().knownWorldsUrl(),{type:"GET",cache:!1,async:e}).then(h,c)),i.getWatchedValue(n)}function h(n){TDB.applyUpdate(function(){i.setValue(n);r.setValue(!1);e.setValue(!1)})}function c(n,t,i){var e=this;if(u>0){u--;StoryLog.TraceTag(8750088,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.info,"Attempt to retrieve list of worlds failed. Retrying. textStatus="+t+" errorThrown="+i);setTimeout(function(){$.ajax(f.UrlHelper.getInstance().knownWorldsUrl(),{type:"GET",cache:!1,async:e.async}).then(h,c)},1e3);return}StoryLog.TraceTag(7462913,Diag.ULSCat.msoulscat_Story_Style,Diag.ULSTraceLevel.error,"List of worlds was unable to be retrieved from the server. textStatus="+t+" errorThrown="+i);TDB.applyUpdate(function(){r.setValue(!1);o.setValue(!0)})}function a(n,t){var i=s(t,!1),r;if(i==null||n==null)return null;for(r in i)if(i[r].id==n)return i[r];return null}function v(n){return r.getWatchedValue(n)}function y(n){return o.getWatchedValue(n)}function p(n){return e.getWatchedValue(n)}var f=n.Common,l=function(){function n(n){var t=this;t.id=n}return n}();t.World=l;var i,e=TDB.watchableTag(8947264,self,!0),r=TDB.watchableTag(7651799,self,!1),o=TDB.watchableTag(7651800,self,!1),u;t.GetWorlds=s;t.GetWorld=a;t.getWaitingForWorldsResponse=v;t.getErrorGettingWorlds=y;t.getWorldOptionsNeeded=p})(t=n.WorldList||(n.WorldList={}))}(StoryApp||(StoryApp={})),function(n){function o(n,f){var e=u(n),o,s;return r(e.originalBox?e.originalBox:e.box,e.children),o=new t.ContainerPartition(e,i(e.box,e.children,f)),s=0,{box:o.box,_internal:o,fetch:function(n){var t=[];return o.fetch(++s,n,t),t}}}function r(n,t){t.forEach(function(t){t.box.move(n.position());var i=t.box;t.originalBox&&(t.originalBox.move(n.position()),i=t.originalBox);r(i,t.children)})}function u(n){return n.children.forEach(u),n.queryid=0,n}function i(r,u,e){var o=u.length,s,a,c;if(o<=e&&(c=u.every(function(n){return n.children.length===0}),c))return new t.BruteForcePartition(r,u);var l=[r.split(0),r.split(1)],y=l[0].map(function(t){return u.filter(function(i){return n.aabbsIntersect(t,i.box)})}),p=l[1].map(function(t){return u.filter(function(i){return n.aabbsIntersect(t,i.box)})}),h=y.reduce(function(n,t){return n+t.length},0);if(h<o&&f("horizontal",h,o),s=p.reduce(function(n,t){return n+t.length},0),s<o&&f("verticalCount",s,o),a=Math.round(1.25*o),h>=a&&s>=a)return c=u.every(function(n){return n.children.length===0}),c?new t.BruteForcePartition(r,u):new t.BruteForceNodePartition(r,u.map(function(n){var r=n.children.length?i(n.box,n.children,e):null;return new t.ContainerPartition(n,r)}));var w=h<=s?y:p,v=h<=s?0:1,b=i(l[v][0],w[0],e),k=i(l[v][1],w[1],e);return new t.BinarySpacePartition(r,b,k,v)}function f(n,t,i){var r=e.Environment.getInstance().getWindowSize();StoryLog.StructuredTraceTag(8988498,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"invalid split: didn't encompass all children",{splitDirection:n,actualCount:t.toString(),expectedCount:i.toString(),width:r.w.toString(),height:r.h.toString(),clientDevice:CommonSettings.ClientDevice,worldId:StoryApp.View.ViewElements.ViewModel.getWorldId(),styleId:StoryApp.View.ViewElements.ViewModel.getLayoutStyleId()})}var e=StoryApp.Common,t;(function(t){var f=function(){function n(n,t,i,r){this.box=n;this.left=t;this.right=i;this.axis=r}return n.prototype.fetch=function(n,t,i){var r=this.box,u=this.axis;r.overlaps(t,u)&&(r.overlaps(this.left.box,u)&&this.left.fetch(n,t,i),r.overlaps(this.right.box,u)&&this.right.fetch(n,t,i))},n}(),i,r,u;t.BinarySpacePartition=f;i=function(){function t(n,t){this.item=n;this.children=t;this.box=n.box}return t.prototype.fetch=function(t,i,r){t!==this.item.queryid&&(this.item.queryid=t,n.aabbsIntersect(this.box,i))&&(r.push(this.item),this.children&&this.children.fetch(t,i,r))},t}();t.ContainerPartition=i;r=function(){function t(n,t){this.box=n;this.elements=t}return t.prototype.fetch=function(t,i,r){for(var u,e=this.elements,o=e.length,f=0;f<o;++f)u=e[f],u.queryid!==t&&n.aabbsIntersect(i,u.box)&&(u.queryid=t,r.push(u))},t}();t.BruteForcePartition=r;u=function(){function n(n,t){this.box=n;this.elements=t}return n.prototype.fetch=function(n,t,i){for(var u=this.elements,f=u.length,r=0;r<f;++r)this.elements[r].fetch(n,t,i)},n}();t.BruteForceNodePartition=u})(t||(t={}));n.makeBiTree=o}(MathUtils||(MathUtils={})),function(n){function a(i,r){return new t(n.Vec.clone(i),n.Vec.clone(r))}function h(t,i){var u=n.Vec3.distsquare(t.center,i.center),r=t.radius+i.radius;return u<=r*r}function v(n,t){var u=n.min.length,r;if(u<=1)throw new Error("one dimensional or less bounding box not supported, what does that even mean");var f=1,e=n.min,o=n.max,s=t.min,h=t.max;for(r=0;r<u;++r)f*=i(e[r],o[r],s[r],h[r]);return f}function y(n,t){var r=n.min,u=n.max,f=t.min,e=t.max;return i(r[0],u[0],f[0],e[0])*i(r[1],u[1],f[1],e[1])}function p(n,t){var r=n.min.length,i;if(r<=1)throw new Error("one dimensional or less bounding box not supported, what does that even mean");var u=n.min,f=n.max,e=t.min,o=t.max;for(i=0;i<r;++i)if(l(u[i],f[i],e[i],o[i]))return!1;return!0}function w(n,i){return new t([u(n.min[0],i.min[0]),u(n.min[1],i.min[1])],[r(n.max[0],i.max[0]),r(n.max[1],i.max[1])])}function c(n,t){for(var r=n.getAllAxis().concat(t.getAllAxis()),i=0;i<r.length;++i){var u=r[i],f=n.project(u),e=t.project(u);if(!f.intersects(e))return!1}return!0}function e(n,t,i,r){return!(t<i||r<n)}function l(n,t,i,r){return t<i||r<n}function i(n,t,i,f){return r(0,u(t,f)-r(n,i))}var o=function(){function n(n,t){if(this.center=n,this.radius=t,n.length!=3)throw Error("center should be a vec3");}return n}(),t,s;n.BoundingSphere=o;n.aabb=a;t=function(){function t(n,t){this.min=n;this.max=t}return t.prototype.space=function(){for(var t=1,i=this.min.length,n=0;n<i;++n)t*=this.max[n]-this.min[n];return t},t.prototype.position=function(){return this.min},t.prototype.width=function(){return this.max[0]-this.min[0]},t.prototype.height=function(){return this.max[1]-this.min[1]},t.prototype.move=function(n){if(this.min.length<n.length||this.max.length<n.length)throw new Error("invalid dimension");for(var t=0;t<n.length;++t)this.min[t]+=n[t],this.max[t]+=n[t]},t.prototype.split=function(i){var f=n.Vec.clone(this.min),r=n.Vec.clone(this.max),u,e;return r[i]=.5*(f[i]+r[i]),u=n.Vec.clone(this.min),e=n.Vec.clone(this.max),u[i]=r[i],[new t(f,r),new t(u,e)]},t.prototype.project=function(n){if(n>=this.min.length)throw new Error("tried projecting bounding box on a dimension that isn't defined on it");var t=new f;return t.add(this.min[n]),t.add(this.max[n]),t},t.prototype.overlaps=function(n,t){return e(this.min[t],this.max[t],n.min[t],n.max[t])},t.prototype.scaled=function(i,r){var u,f,o,e,s;if(this.min.length!==2||this.max.length!==2)throw new Error("unsupported vector dimensions");return u=n.Vec2.add(this.min,this.max),n.Vec2.div(u,2,u),f=n.Vec2.sub(this.min,u),n.Vec2.mulvec([i,r],f,f),o=n.Vec2.add(u,f),e=n.Vec2.sub(this.max,u),n.Vec2.mulvec([i,r],e,e),s=n.Vec2.add(u,e),new t(o,s)},t.prototype.clone=function(){return new t(n.Vec.clone(this.min),n.Vec.clone(this.max))},t}();n.AxisAlignedBoundingBox=t;s=function(){function i(n,t,i){var r;for(this.points=n,this.axis=t,this.segmentindices=i,r=0;r<n.length;++r)if(n[r].length!=3)throw Error("class only supports vector3's for now");for(r=0;r<t.length;++r)if(t[r].length!=3)throw Error("class only supports vector3's for now");this.boundingSphere=this.toBoundingSphere()}return i.prototype.getAllAxis=function(){return this.axis},i.prototype.getSegments=function(){for(var t,i=[],n=0;n<this.segmentindices.length;++n)t=this.segmentindices[n],i.push({start:this.points[t[0]],end:this.points[t[1]]});return i},i.prototype.intersects=function(n){return h(this.boundingSphere,n.boundingSphere)?c(this,n):!1},i.prototype.project=function(t){var i,u,r;if(t.length!=3)throw Error("class only supports vector3's for now");for(i=new f,u=this.getSegments(),r=0;r<u.length;++r){var e=u[r],o=n.Vec3.dot(e.start,t),s=n.Vec3.dot(e.end,t);i.add(o);i.add(s)}return i},i.prototype.toBoundingSphere=function(){for(var r,u,f,t=n.Vec3.zeros(),i=0;i<this.points.length;++i)n.Vec3.add(this.points[i],t,t);for(t=n.Vec3.div(t,this.points.length),r=n.Vec3.distsquare(this.points[0],t),i=1;i<this.points.length;++i)u=n.Vec3.distsquare(this.points[i],t),u>r&&(r=u);return f=Math.sqrt(r),new o(t,f)},i.prototype.toAxisAlignedBoundingBox=function(){var r,u,f,i,e,n;if(!this.points.length)throw new Error("can't build AABB of null volume");if(r=this.points[0].length,r!=2||r!=3)throw new Error("unsupported vector dimension");for(u=[],f=[],i=0;i<r;++i)u.push(Number.POSITIVE_INFINITY),f.push(Number.NEGATIVE_INFINITY);for(i=0;i<this.points.length;++i)for(e=this.points[i],n=0;n<r;++n)e[n]<u[n]&&(u[n]=e[n]),f[n]<e[n]&&(f[n]=e[n]);return new t(u,f)},i}();n.ConvexBoundingVolume=s;n.spheresIntersect=h;n.aabbIntersection=v;n.aabbIntersection2d=y;n.aabbsIntersect=p;n.aabbUnion=w;n.SATIntersects=c;var r=Math.max,u=Math.min,b=Math.abs,f=function(){function n(){this._min=Number.POSITIVE_INFINITY;this._max=Number.NEGATIVE_INFINITY}return n.prototype.max=function(){return this._max},n.prototype.min=function(){return this._min},n.prototype.intersects=function(n){return e(this._min,this._max,n._min,n._max)},n.prototype.intersection=function(n){return i(this._min,this._max,n._min,n._max)},n.prototype.add=function(n){n<this._min&&(this._min=n);n>this._max&&(this._max=n)},n}();n.ProjectionRange=f;n.rangesIntersect=e;n.rangesDisjoint=l;n.rangeIntersection=i}(MathUtils||(MathUtils={})),function(n){function o(n){return new Float32Array(n)}function s(n){return new Float32Array(n)}function h(n){return n.slice()}function c(n){for(var i=new Array(n),t=0;t<n;++t)i[t]=0;return i}function r(){t.clone=o;t.ofN=s}function u(){t.clone=h;t.ofN=c}var i=Math.sqrt,t,f,e;(function(n){n.clone;n.ofN})(t=n.Vec||(n.Vec={})),function(n){function r(n,i,r){return t.clone([n?n:0,i?i:0,r?r:0])}function u(){return t.clone([0,0,0])}function f(t,i,r){return r||(r=n.zeros()),r[0]=t[0]-i[0],r[1]=t[1]-i[1],r[2]=t[2]-i[2],r}function e(t,i,r){return r||(r=n.zeros()),r[0]=t[0]+i[0],r[1]=t[1]+i[1],r[2]=t[2]+i[2],r}function o(t,i,r){return r||(r=n.zeros()),r[0]=t*i[0],r[1]=t*i[1],r[2]=t*i[2],r}function s(t,i,r){return r||(r=n.zeros()),r[0]=t[0]/i,r[1]=t[1]/i,r[2]=t[2]/i,r}function h(t,i,r){r||(r=n.zeros());var u=t[1]*i[2]-t[2]*i[1],f=t[2]*i[0]-t[0]*i[2],e=t[0]*i[1]-t[1]*i[0];return r[0]=u,r[1]=f,r[2]=e,r}function c(t,i){i||(i=n.zeros());var r=n.len(t);return n.div(t,r,i)}function l(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function a(t){return n.dot(t,t)}function v(t){return i(n.lensquare(t))}function y(t,i){return n.len(n.sub(t,i))}function p(t,i){return n.lensquare(n.sub(t,i))}n.create=r;n.zeros=u;n.sub=f;n.add=e;n.mul=o;n.div=s;n.cross=h;n.normalized=c;n.dot=l;n.lensquare=a;n.len=v;n.dist=y;n.distsquare=p}(f=n.Vec3||(n.Vec3={})),function(n){function r(n,i){return t.clone([n?n:0,i?i:0])}function u(){return t.clone([0,0])}function f(t,i,r){return r||(r=n.zeros()),r[0]=t[0]-i[0],r[1]=t[1]-i[1],r}function e(t,i,r){return r||(r=n.zeros()),r[0]=t[0]+i[0],r[1]=t[1]+i[1],r}function o(t,i,r){return r||(r=n.zeros()),r[0]=t*i[0],r[1]=t*i[1],r}function s(t,i,r){return r||(r=n.zeros()),r[0]=t[0]*i[0],r[1]=t[1]*i[1],r}function h(t,i,r){return r||(r=n.zeros()),r[0]=t[0]/i,r[1]=t[1]/i,r}function c(t,i){i||(i=n.zeros());var r=n.len(t);return n.div(t,r,i)}function l(n,t){return n[0]*t[0]+n[1]*t[1]}function a(t){return n.dot(t,t)}function v(t){return i(n.lensquare(t))}function y(t,i){return n.len(n.sub(t,i))}function p(t,i){return n.lensquare(n.sub(t,i))}n.create=r;n.zeros=u;n.sub=f;n.add=e;n.mul=o;n.mulvec=s;n.div=h;n.normalized=c;n.dot=l;n.lensquare=a;n.len=v;n.dist=y;n.distsquare=p}(e=n.Vec2||(n.Vec2={}));n.useFloat32Arrays=r;n.useNativeArrays=u;typeof Float32Array!="undefined"?r():u()}(MathUtils||(MathUtils={})),function(n){function t(n,t,i){return n<t?t:n>i?i:n}function i(n){return n>=0}n.clamp=t;n.sign=i}(MathUtils||(MathUtils={})),function(n){var t;(function(t){function u(){r||(r=new t.OsfProxy);i&&i.getOsfProxy()==r||(i=new p(r))}function o(n){r=n}function s(n){f=n}function h(){return r}function c(n){return u(),i.insertControl(n)}function l(n){u();i.unregisterControl(n)}function a(n){u();i.raiseBindingDataChangedEvent(n)}function v(n){u();i.raiseSettingsChangedEvent(n)}function y(n){u();i.raiseActiveViewChangedEvent(n)}var e=n.Common,i=null,r=null,f=null;t.setOsfProxy=o;t.setSaveSettingsCallback=s;t.getOsfProxy=h;t.insertControl=c;t.unregisterControl=l;t.raiseBindingDataChangedEvent=a;t.raiseSettingsChangedEvent=v;t.raiseActiveViewChangedEvent=y;var p=function(){function n(n){var t,i,r;this._osfProxy=n;this._controlsById={};t="";switch(CommonSettings.ClientDevice){case"Desktop":t=this._osfProxy.LookupFormFactor(1);break;case"Tablet":t=this._osfProxy.LookupFormFactor(2);break;case"Mobile":t=this._osfProxy.LookupFormFactor(3);break;case"Default":t=this._osfProxy.LookupFormFactor(0);break;default:t=this._osfProxy.LookupFormFactor(0)}i=e.UrlHelper.getInstance().agaveHostResourcesUrl();r={allowExternalMarketplace:!1,appName:this._osfProxy.LookupAppName(0),appUILocale:CommonSettings.UserLocaleString,appVersion:"16",clientMode:StoryPageSettings.Mode==2?this._osfProxy.LookupClientMode(1):this._osfProxy.LookupClientMode(0),dataLocale:"en-US",docUrl:window.location.href,enableMyApps:!1,enableMyOrg:!1,formFactor:t,hostControl:this,lcid:"1033",localizedImagesUrl:i,localizedResourcesUrl:i,localizedScriptsUrl:CommonSettings.ContentBaseUrl,localizedStylesUrl:i,omexForceAnonymous:!0,osfOmexBaseUrl:null,pageBaseUrl:null,spBaseUrl:null};this._contextActivationManager=this._osfProxy.ConstructContextActivationManager(r)}return n.prototype.getOsfProxy=function(){return this._osfProxy},n.prototype.insertControl=function(n){var r=n.getManifestId(),u=n.getManifest(),e,f,t,i;if(!u)throw new Error("Unable to map agave id "+r+" to a manifest string.");u=Utilities.format(u,CommonSettings.ExtensionsBaseUrl);try{for(e=this._osfProxy.ConstructManifest(u,this._contextActivationManager.getAppUILocale()),f=e.getMarketplaceVersion(),this._osfProxy.OsfManifestManagerHasManifest(r,f)||this._osfProxy.OsfManifestManagerCacheManifest(r,f,e),t=this.generateGuid();this._controlsById[t];)t=this.generateGuid();var o={div:n.getDiv(),id:t,marketplaceID:r,marketplaceVersion:f,osfControlType:this._osfProxy.LookupOsfControlType(0),reason:this._osfProxy.LookupInitializationReason(0),settings:this.formatAgaveSettings(n.getAgaveSettingsData()),store:"en-US",storeType:this._osfProxy.LookupStoreType(0)},s=this._contextActivationManager.insertOsfControl(o),h={id:t,swayBinding:n,osfControl:s,osfEventHandlersByDispid:{}};return this._controlsById[t]=h,t}catch(c){return i=c,this.isKnownError(i)?StoryLog.StructuredTraceTag(7959325,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"AgaveManager.insertControl: Known error while inserting Agave",{name:i.name,message:i.message}):StoryLog.StructuredTraceTag(7959326,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"AgaveManager.insertControl: Unknown error while inserting Agave",{name:i.name,message:i.message}),n.setAgaveFailed(!0),null}},n.prototype.unregisterControl=function(n){this._controlsById[n]&&(this._contextActivationManager.deActivateOsfControl(n),delete this._controlsById[n])},n.prototype.raiseBindingDataChangedEvent=function(n){var i=this._osfProxy.LookupDDAEventDispId(1),r=this._controlsById[n],t,u;r&&(t=r.osfEventHandlersByDispid[i],t&&(u={controlId:n,ddaBinding:{BindingType:"text",Name:"Data"},dispId:i},t.handler(u)))},n.prototype.raiseSettingsChangedEvent=function(){},n.prototype.raiseActiveViewChangedEvent=function(){},n.prototype.invokeDdaMethod=function(n,t){var i=n.DdaMethod.DispatchId,r=this.getDefaultErrorPayload();i==this._osfProxy.LookupDDAMethodDispId(0)?r=this.handleAddBindingFromNamedItemMethod(n):i==this._osfProxy.LookupDDAMethodDispId(1)?r=this.handleGetActiveViewMethod(n):i==this._osfProxy.LookupDDAMethodDispId(2)?r=this.handleGetBindingDataMethod(n):i==this._osfProxy.LookupDDAMethodDispId(3)||i==this._osfProxy.LookupDDAMethodDispId(4)||(i==this._osfProxy.LookupDDAMethodDispId(5)?r=this.handleLoadSettingsMethod(n):i==this._osfProxy.LookupDDAMethodDispId(6)&&(r=this.handleSaveSettingsMethod(n)));t(r)},n.prototype.registerDdaEventAsync=function(n,t,i,r,u){var f={Error:this._osfProxy.LookupInvokeResultCode("errorHandlingRequest"),Version:1},e=this._controlsById[t];e&&(e.osfEventHandlersByDispid[n]={dispid:n,targetId:i,handler:r},f.Error=0);u(f)},n.prototype.unregisterDdaEventAsync=function(n,t,i,r,u){var e={Error:this._osfProxy.LookupInvokeResultCode("errorHandlingRequest"),Version:1},f=this._controlsById[t];f&&(f.osfEventHandlersByDispid[n]&&delete f.osfEventHandlersByDispid[n],e.Error=0);u(e)},n.prototype.handleAddBindingFromNamedItemMethod=function(){var n={};return n.Error=0,n.Bindings=[{BindingType:"text",Name:"Data"}],n.Version=1,n},n.prototype.handleGetBindingDataMethod=function(n){var r={},f=this._controlsById[n.DdaMethod.ControlId],e,i,u,t;if(f){for(e=f.swayBinding.getData(),i=JSON.parse(e),i||(i=[]),u=0;u<i.length;u++)t=i[u],t.type==="imageId"&&(t.type="image",t.source=this.GetUrlForImageElement(t.sourceId,t.sourceUrl,f.swayBinding,t.width,t.height),delete t.sourceId,delete t.sourceUrl,delete t.height,delete t.width);r.Error=0;r.Version=1;r.Data=JSON.stringify(i)}return r},n.prototype.handleGetActiveViewMethod=function(n){var t={},r=this._controlsById[n.DdaMethod.ControlId],u,i;return r?(u=r.swayBinding.getAgaveIsEdit(),i=null,i=u?this._osfProxy.LookupActiveViewState(0):this._osfProxy.LookupActiveViewState(1),t.Error=0,t.Version=1,t.data=i):t=this.getDefaultErrorPayload(),t},n.prototype.handleGetDocumentThemeMethod=function(){},n.prototype.handleGetOfficeThemeMethod=function(){},n.prototype.handleLoadSettingsMethod=function(){},n.prototype.handleSaveSettingsMethod=function(n){var t=this.getDefaultErrorPayload(),r=this._controlsById[n.DdaMethod.ControlId],i=n.DdaSettingsMethod,e=i.Properties,u=JSON.stringify(i.Properties);return f&&(f(r.swayBinding.getContentId(),u),t.Error=0,t.Version=1),t},n.prototype.formatAgaveSettings=function(n){var r=null,u={},i,t;if(n)for(r=JSON.parse(n),i=0;i<r.length;i++){if(t=r[i],t.length!=2||!t[0]||t[0].constructor!==String){StoryLog.TraceTag(7865177,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.error,"Malformed Agave settings data: element "+i+" was not a key-value pair in "+n);continue}u[t[0]]=t[1]}return u},n.prototype.GetUrlForImageElement=function(n,t,i,r,u){var s,f,o;if(!n)return t;for(r||(r=0),u||(u=0),s=Math.max(i.getDesiredImageWidth(),i.getDesiredImageHeight())*(window.devicePixelRatio||1),f=Math.max(r,u),f===0&&(f=3840),o=f;Math.round(o/2)>=s;)o/=2;return e.UrlHelper.getInstance().imageUrl(StoryPageSettings.LookupId,Math.round(o),n,!0,StoryPageSettings.UseCDN)},n.prototype.getDefaultErrorPayload=function(){return{Error:this._osfProxy.LookupInvokeResultCode("errorHandlingRequest")}},n.prototype.generateGuid=function(){for(var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t="",i=(new Date).getTime(),n=0;n<32&&i>0;n++)(n==8||n==12||n==16||n==20)&&(t+="-"),t+=r[i%16],i=Math.floor(i/16);for(;n<32;n++)(n==8||n==12||n==16||n==20)&&(t+="-"),t+=r[Math.floor(Math.random()*16)];return t},n.prototype.isKnownError=function(n){return n.name==="TypeError"&&n.message==="Unable to get property 'documentElement' of undefined or null reference"?!0:!1},n}(),w=function(){function n(){}return n}(),b=function(){function n(){}return n}()})(t=n.Agaves||(n.Agaves={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t,i,r,u,f,e,o,s,h;(function(n){n[n.Edit=0]="Edit";n[n.Read=1]="Read"})(n.ActiveViewStates||(n.ActiveViewStates={}));t=n.ActiveViewStates,function(n){n[n.Sway=0]="Sway"}(n.AppNames||(n.AppNames={}));i=n.AppNames,function(n){n[n.Default=0]="Default";n[n.Desktop=1]="Desktop";n[n.Tablet=2]="Tablet";n[n.Phone=3]="Phone"}(n.FormFactors||(n.FormFactors={}));r=n.FormFactors,function(n){n[n.ReadOnly=0]="ReadOnly";n[n.ReadWrite=1]="ReadWrite"}(n.ClientModes||(n.ClientModes={}));u=n.ClientModes,function(n){n[n.DocumentLevel=0]="DocumentLevel";n[n.ContainerLevel=1]="ContainerLevel"}(n.OsfControlTypes||(n.OsfControlTypes={}));f=n.OsfControlTypes,function(n){n[n.Exchange=0]="Exchange"}(n.StoreTypes||(n.StoreTypes={}));e=n.StoreTypes,function(n){n[n.dispidActiveViewChangedEvent=0]="dispidActiveViewChangedEvent";n[n.dispidBindingDataChangedEvent=1]="dispidBindingDataChangedEvent";n[n.dispidDocumentThemeChangedEvent=2]="dispidDocumentThemeChangedEvent";n[n.dispidOfficeThemeChangedEvent=3]="dispidOfficeThemeChangedEvent";n[n.dispidSettingsChangedEvent=4]="dispidSettingsChangedEvent"}(n.DDAEventDispIds||(n.DDAEventDispIds={}));o=n.DDAEventDispIds,function(n){n[n.dispidAddBindingFromNamedItemMethod=0]="dispidAddBindingFromNamedItemMethod";n[n.dispidGetActiveViewMethod=1]="dispidGetActiveViewMethod";n[n.dispidGetBindingDataMethod=2]="dispidGetBindingDataMethod";n[n.dispidGetDocumentThemeMethod=3]="dispidGetDocumentThemeMethod";n[n.dispidGetOfficeThemeMethod=4]="dispidGetOfficeThemeMethod";n[n.dispidLoadSettingsMethod=5]="dispidLoadSettingsMethod";n[n.dispidSaveSettingsMethod=6]="dispidSaveSettingsMethod"}(n.DDAMethodDispIds||(n.DDAMethodDispIds={}));s=n.DDAMethodDispIds,function(n){n[n.Inserted=0]="Inserted"}(n.InitializationReasons||(n.InitializationReasons={}));h=n.InitializationReasons})(t=n.Agaves||(n.Agaves={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(){function n(){}return n.prototype.LookupActiveViewState=function(n){switch(n){case 0:return Microsoft.Office.WebExtension.ActiveView.Edit;case 1:return Microsoft.Office.WebExtension.ActiveView.Read}throw Error("OsfProxy.LookupFormFactor: Invalid ActiveViewState "+n);},n.prototype.LookupFormFactor=function(n){switch(n){case 1:return OSF.FormFactor.Desktop;case 3:return OSF.FormFactor.Phone;case 2:return OSF.FormFactor.Tablet;case 0:return OSF.FormFactor.Default}throw Error("OsfProxy.LookupFormFactor: Invalid FormFactor "+n);},n.prototype.LookupAppName=function(n){switch(n){case 0:return OSF.AppName.Sway}throw Error("OsfProxy.LookupAppName: Invalid AppName "+n);},n.prototype.LookupClientMode=function(n){switch(n){case 0:return OSF.ClientMode.ReadOnly;case 1:return OSF.ClientMode.ReadWrite}throw Error("OsfProxy.LookupClientMode: Invalid ClientMode "+n);},n.prototype.LookupOsfControlType=function(n){switch(n){case 1:OSF.OsfControlType.ContainerLevel;case 0:return OSF.OsfControlType.DocumentLevel}throw Error("OsfProxy.LookupOsfControlType: Invalid ControlType "+n);},n.prototype.LookupStoreType=function(n){switch(n){case 0:return OSF.StoreType.Exchange}throw Error("OsfProxy.LookupStoreType: Invalid StoreType "+n);},n.prototype.LookupDDAEventDispId=function(n){switch(n){case 0:return OSF.DDA.EventDispId.dispidActiveViewChangedEvent;case 1:return OSF.DDA.EventDispId.dispidBindingDataChangedEvent;case 2:return OSF.DDA.EventDispId.dispidDocumentThemeChangedEvent;case 3:return OSF.DDA.EventDispId.dispidOfficeThemeChangedEvent;case 4:return OSF.DDA.EventDispId.dispidSettingsChangedEvent}throw Error("OsfProxy.LookupDDAEventDispId: Invalid DDAEventDispId "+n);},n.prototype.LookupDDAMethodDispId=function(n){switch(n){case 0:return OSF.DDA.MethodDispId.dispidAddBindingFromNamedItemMethod;case 1:return OSF.DDA.MethodDispId.dispidGetActiveViewMethod;case 2:return OSF.DDA.MethodDispId.dispidGetBindingDataMethod;case 3:return OSF.DDA.MethodDispId.dispidGetDocumentThemeMethod;case 4:return OSF.DDA.MethodDispId.dispidGetOfficeThemeMethod;case 5:return OSF.DDA.MethodDispId.dispidLoadSettingsMethod;case 6:return OSF.DDA.MethodDispId.dispidSaveSettingsMethod}throw Error("OsfProxy.LookupDDAMethodDispId: Invalid DDAMethodDispId "+n);},n.prototype.LookupInvokeResultCode=function(n){return Microsoft.Office.Common.InvokeResultCode[n]},n.prototype.LookupInitializationReason=function(n){switch(n){case 0:return Microsoft.Office.WebExtension.InitializationReason.Inserted}throw Error("OsfProxy.LookupInitializationReason: Invalid InitializationReason "+n);},n.prototype.ConstructContextActivationManager=function(n){return new OSF.ContextActivationManager(n)},n.prototype.ConstructManifest=function(n,t){return new OSF.Manifest.Manifest(n,t)},n.prototype.OsfManifestManagerHasManifest=function(n,t){return OSF.OsfManifestManager.hasManifest(n,t)},n.prototype.OsfManifestManagerCacheManifest=function(n,t,i){OSF.OsfManifestManager.cacheManifest(n,t,i)},n}();n.OsfProxy=t})(t=n.Agaves||(n.Agaves={}))}(StoryApp||(StoryApp={})),function(n){var t=function(){function n(){}return n.prototype.numToSafeStr=function(n){return n.toFixed(5)},n.prototype.setTransform=function(n,t){n.style.transform=t},n}(),i=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.setTransform=function(n,t){n.style["-webkit-transform"]=t},t}(t),r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.numToSafeStr=function(n){return Math.abs(n)<1e-5?"0":n.toString()},t}(t),u=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(t),f=function(){return $.browser.webkit?new i:$.browser.msie?new r:$.browser.mozilla?new u:new t};n.current=f()}(Platform||(Platform={})),function(n){var t;(function(n){var t=function(t){function i(i,r){if(t.call(this,i),this.view=i,this.contract=r,!n.Engine)throw new Error("Can't create animation view hierarchy without an animation engine");this.engine=n.Engine;this.init();this.watchers=new n.WatcherContainer(this,i,this.contract.staticTransforms?[this.updateStaticTransforms,this.updateTransforms,this.updateProperties]:[this.updateTransforms,this.updateProperties])}return __extends(i,t),i.prototype.update=function(){this.watchers.resolve()},i.prototype.init=function(){var t=this.contract.descriptor(),i;this.target=t.target;i=this.contract.containingViewport();this.engine.register(t.target,t.virtual&&!Modernizr.preserve3d,t.animatable,i?i.id:null);this.contract.staticTransforms&&(this.staticStack=new n.Properties.TransformStack([]))},i.prototype.updateStaticTransforms=function(n){this.staticStack&&this.staticStack.setstack(this.contract.staticTransforms(n))},i.prototype.updateTransforms=function(n){n.watch(this.engine.resetAnimatables);var t=this.contract.transforms(n);this.engine.assignTransform(this.target,t.parent,this.staticStack,t.transforms)},i.prototype.updateProperties=function(n){n.watch(this.engine.resetAnimatables);this.engine.requestUpdate(this.target,this.contract.properties(n))},i.prototype.dispose=function(){t.prototype.dispose.call(this);this.engine.unregister(this.target);this.contract.dispose&&this.contract.dispose()},i}(Disposable);n.AnimationBinding=t})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(n){function t(t,i){n.call(this,i);this.parent=t;this.dirty=!0}return __extends(t,n),t.prototype.receiveNotification=function(n){this.dirty||(this.dirty=!0,this.parent&&this.parent.receiveNotification(n))},t.prototype.children=function(){throw new Error("Animation views must implement children accessor");},t.prototype.onUpdate=function(){throw new Error("Animation views must implement onUpdate");},t.prototype.isDirty=function(){return this.dirty},t.prototype.update=function(n){var i,t;if(this.dirty){this.onUpdate(n);for(i=this.children(),t=0;t<i.length;++t)i[t].update(n);n===1&&(this.dirty=!1)}},t}(TDB.Subscriber);n.BaseView=t})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(t){function i(i,r,u){t.call(this,i,r);this.parent=i;this.contract=u;this.childContainer=new n.ChildCollection(this,TDB.watcherTag(6419478,this,this,this.contractChildren),this.makeView);this.binding=new n.AnimationBinding(this,u)}return __extends(i,t),i.prototype.children=function(){return this.childContainer.children()},i.prototype.onUpdate=function(n){n===1&&this.binding.update();this.childContainer.update(n)},i.prototype.contractChildren=function(n){return this.contract.children(n)},i.prototype.makeView=function(t){return this.contract instanceof n.ViewportBackgroundView?new i(this,null,new n.ViewportView(t)):new i(this,null,n.makeAnimationContract(t))},i}(n.BaseView);n.View=t})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(t){function i(i){if(t.call(this,i),this.view=i,!n.Engine)throw new Error("Can't create animation view hierarchy without an animation engine");this.engine=n.Engine;this.watchers=new n.WatcherContainer(this,i,[this.updateCamera])}return __extends(i,t),i.prototype.update=function(){this.watchers.resolve()},i.prototype.updateCamera=function(n){n.watch(this.engine.resetAnimatables);this.engine.resetCamera()},i}(Disposable);n.CameraBinding=t})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(n){function t(t,i,r){n.call(this,t);this.context=t;this.data=i;this.factory=r;this.olddata=[];this.views=[];t._subscribeTo(i)}return __extends(t,n),t.prototype.children=function(){return this.views},t.prototype.update=function(n){var f=this,r=this.data.getValue(),e,t,h,u,o,i,s;if(n===0)for(e=this.olddata.map(function(n){return f.findKey(r,n)}),t=e.length-1;t>=0;--t)e[t]===undefined&&(this.olddata.splice(t,1),h=this.views.splice(t,1),h[0].dispose());else{for(u=[],o=r.map(function(n){return f.findKey(f.olddata,n)}),i=0;i<o.length;++i)s=o[i],s===undefined?u.push(this.factory.call(this.context,r[i])):u.push(this.views[s]);this.views=u;this.olddata=r}},t.prototype.dispose=function(){n.prototype.dispose.call(this);this.views.forEach(function(n){return n.dispose()});this.context._unsubscribeFrom(this.data)},t.prototype.findKey=function(n,t){for(var i=0;i<n.length;++i)if(t===n[i])return i;return undefined},t}(TDB.Subscriber);n.ChildCollection=t})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){function r(n,t){var r=n.getChild(t);return r instanceof i.ProjectionLayoutElement?!0:r instanceof i.ContainerLayoutElement&&r.getScrollability(t)!==0?!0:!1}var i=n.Model.RM;t.isMainViewport=r})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){function r(n,r,u,f){var k=r.getFlags(n).has(1),y=f&&k&&t.LowFi.getWatchedValue(n),p,l;if(r instanceof i.TranslateTransform2D){var h=r,e=h.getTranslateX(n),o=h.getTranslateY(n);return y||!u&&e===0&&o===0?new t.Properties.Identity:f?new t.Properties.Scaled([1/100,1/100],new t.Properties.Translate3D(e,o,0)):new t.Properties.Scaled([1/100,1/100],new t.Properties.Translate2D(h.getTranslateX(n),h.getTranslateY(n)))}if(r instanceof i.RotationTransform2D)return(p=r,l=p.getValue(n),y||!u&&l%360==0)?new t.Properties.Identity:new t.Properties.Rotate2D(l);if(r instanceof i.ScaleTransform2D){var w=r,e=w.getScaleX(n),o=w.getScaleY(n);return!u&&e===1&&o===1?new t.Properties.Identity:new t.Properties.Scale2D(e,o)}if(r instanceof i.TranslateTransform3D){var a=r,e=a.getTranslateX(n),o=a.getTranslateY(n),s=a.getTranslateZ(n);return!u&&e===0&&o===0&&s===0?new t.Properties.Identity:new t.Properties.Scaled([1/100,1/100,1/100],new t.Properties.Translate3D(e,o,s))}if(r instanceof i.RotationTransform3D){var c=r,e=c.getProjectX(n),o=c.getProjectY(n),s=c.getProjectZ(n),b=c.getValue(n);return!u&&b%360==0?new t.Properties.Identity:new t.Properties.AxisAngle(e,o,s,b)}if(r instanceof i.ScaleTransform3D){var v=r,e=v.getScaleX(n),o=v.getScaleY(n),s=v.getScaleZ(n);return!u&&e===1&&o===1&&s===1?new t.Properties.Identity:new t.Properties.Scale3D(e,o,s)}throw Error("transform not supported "+r);}var i=n.Model.RM;t.convertModelTransform=r})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){function o(n){return n instanceof i.ContainerSceneGraphElement?new t.SceneGraphView(n):n instanceof i.TextureSceneGraphElement?new t.SceneGraphView(n):n instanceof i.ViewportLayoutElement?new t.ViewportView(n):n instanceof i.ProjectionLayoutElement?new t.ProjectionView(n):new u(n)}function r(n,t){return n instanceof i.ContainerSceneGraphElement?n.children.getCollection(t):n instanceof i.TextureSceneGraphElement?[n.getTexture(t)]:n instanceof i.ProjectionLayoutElement?[n.getScene3D(t)]:n instanceof i.ContainerLayoutElement||n instanceof i.MediaViewportLayoutElement?n.children.getCollection(t):[]}function f(n,t){return n.getAnimated(t)||n.getFlags(t).has(8)?[n]:r(n,t).mapmany(function(n){return f(n,t)})}function e(n,t){return r(n,t).mapmany(function(n){return f(n,t)})}var i=n.Model.RM,u=function(){function i(n){this.model=n}return i.prototype.descriptor=function(){var n=[1,2,3];return this.model.renderModel.getSchemaVersion()>=53&&(n.push(4),n.push(5)),{target:this.model.id,virtual:!1,animatable:n}},i.prototype.staticTransforms=function(n){var i=this.model.getDownscaleFactor(n);return i===1?[]:[new t.Properties.Scale3D(i,i,1)]},i.prototype.transforms=function(n){var i=this.model.getFlags(n),r=this.model.getAnimated(n),u=r&&(i.has(2)||i.has(16));return{parent:this.getTransformParent(n),transforms:this.model.transforms.getCollection(n).map(function(i){return t.convertModelTransform(n,i,r,u)})}},i.prototype.properties=function(n){var t=[{property:1,value:this.model.getOpacity(n)},{property:2,value:this.model.getHidden(n)?1:0},{property:3,value:this.model.getZOrder(n)}];return this.model.renderModel.getSchemaVersion()>=53&&(t.push({property:4,value:this.model.position.getWidth(n)}),t.push({property:5,value:this.model.position.getHeight(n)})),t},i.prototype.children=function(n){return e(this.model,n)},i.prototype.containingViewport=function(){for(var t,n=this.model;n;n=n.getParentContainer())if(t=n.getParentViewport(),t)return t;return null},i.prototype.getTransformParent=function(n){return this.isCamerasChild(n)?t.CameraID:undefined},i.prototype.isCamerasChild=function(i){var r=this.model.getParentViewport(i);return r?n.View.isMainViewport(r,i)?r.getBackgroundType(i)!==0?!1:t.LowFi.getWatchedValue(i)?!1:!0:!1:!1},i}();t.LayoutView=u;t.makeAnimationContract=o;t.modelChildren=r;t.animatedChildren=e})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var r=n.Model.RM,i=function(){function i(n){this.model=n;this.engine=t.Engine;this.engine.promoteTo3DWorld()}return i.prototype.descriptor=function(){return{target:this.model.id,virtual:!1,animatable:[1,2,3]}},i.prototype.staticTransforms=function(n){var i=this.model.getDownscaleFactor(n);return i===1?[]:[new t.Properties.Scale3D(i,i,1)]},i.prototype.transforms=function(n){var i=this.model.getFlags(n).has(2),r=this.model.getAnimated(n);return{parent:undefined,transforms:this.model.transforms.getCollection(n).map(function(u){return t.convertModelTransform(n,u,r,i)})}},i.prototype.properties=function(n){return[{property:1,value:this.model.getOpacity(n)},{property:2,value:this.model.getHidden(n)?1:0},{property:3,value:this.model.getZOrder(n)}]},i.prototype.children=function(n){return[this.model.getScene3D(n)]},i.prototype.containingViewport=function(){return null},i.prototype.dispose=function(){this.engine.demoteTo2DWorld()},i.prototype.getTransformParent=function(n){return this.isCamerasChild(n)?t.CameraID:undefined},i.prototype.isCamerasChild=function(i){var r=this.model.getParentViewport(i);return r?n.View.isMainViewport(r,i)?t.LowFi.getWatchedValue(i)?!1:!0:!1:!1},i}();t.ProjectionView=i})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var r=n.Model.RM,i=function(n){function i(i,r){n.call(this,null,i);this.viewportfactory=r;this.binding=new t.CameraBinding(this);this.viewports=new t.ChildCollection(this,TDB.watcherTag(6419479,this,this,this.getModelViewports),this.makeViewportWatchable);this.update(1);t.Updater.register(this)}return __extends(i,n),i.prototype.children=function(){return this.viewports.children().map(function(n){return n.getValue()})},i.prototype.onUpdate=function(n){var i,t;for(n===1&&this.binding.update(),this.viewports.update(n),i=this.viewports.children(),t=0;t<i.length;++t)i[t].resolve()},i.prototype.dispose=function(){n.prototype.dispose.call(this);t.Updater.unregister(this)},i.prototype.getModelViewports=function(n){return this.viewportfactory(n)},i.prototype.makeViewportWatchable=function(n){return TDB.watcherOwner(this,null,this.makeViewport.bind(this,n))},i.prototype.makeViewport=function(n,i){return n.getBackgroundType(i)===0?new t.View(this,null,new t.ViewportView(n)):new t.View(this,null,new t.ViewportBackgroundView(n))},i}(t.BaseView);t.RootView=i})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i=n.Model.RM,r=function(){function n(n){this.model=n}return n.prototype.descriptor=function(){return{target:this.model.id,virtual:this.model instanceof i.ContainerSceneGraphElement,animatable:[1,2]}},n.prototype.transforms=function(n){return{parent:this.getTransformParent(n),transforms:this.model.transforms.getCollection(n).map(function(i){return t.convertModelTransform(n,i,!0,!1)})}},n.prototype.properties=function(n){return[{property:1,value:this.model.getOpacity(n)},{property:2,value:this.model.getHidden(n)?1:0}]},n.prototype.children=function(n){return this.model instanceof i.TextureSceneGraphElement?[this.model.getTexture(n)]:this.model.children.getCollection(n)},n.prototype.containingViewport=function(){return null},n.prototype.getTransformParent=function(n){var i=this.model.getParentProjection(n);return i?t.CameraID:this.model.getParentContainer(n).id},n}();t.SceneGraphView=r})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var r=n.Model.RM,i=function(){function i(n){this.model=n}return i.prototype.descriptor=function(){return{target:"viewportbackground_"+this.model.id,virtual:!1,animatable:[]}},i.prototype.staticTransforms=function(i){var r,e,o;if(this.model.getContentStretch(i)!==2)return[];var u=this.model.position,s=u.getWidth(i),h=u.getHeight(i),f=n.View.ViewElements.ViewModel;return f?(r=f.previewVE._root.getWatchedValue(i),!r)?[]:(e=r.getWidth(i),o=r.getHeight(i),[new t.Properties.Scale2D(e/s,o/h)]):[]},i.prototype.transforms=function(n){return{parent:this.transformParent(n),transforms:[]}},i.prototype.properties=function(){return[]},i.prototype.children=function(){return[this.model]},i.prototype.containingViewport=function(){return null},i.prototype.transformParent=function(i){return n.View.isMainViewport(this.model,i)?t.LowFi.getWatchedValue(i)?undefined:t.CameraID:undefined},i}();t.ViewportBackgroundView=i})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var r=n.Model.RM,i=function(){function i(n){this.model=n}return i.prototype.descriptor=function(){return{target:this.model.id,virtual:!1,animatable:[2]}},i.prototype.staticTransforms=function(i){var f,e;if(this.model.getContentStretch(i)!==2)return[];var u=this.model.position,o=u.getWidth(i),s=u.getHeight(i),r=n.View.ViewElements.ViewModel;return r?(f=r.previewVE.getWidth(i),e=r.previewVE.getHeight(i),[new t.Properties.Scale2D(f/o,e/s)]):[]},i.prototype.transforms=function(n){var i=this.model.getAnimated(n);return{parent:undefined,transforms:this.model.transforms.getCollection(n).map(function(r){return t.convertModelTransform(n,r,i,!0)})}},i.prototype.properties=function(n){return[{property:2,value:this.model.getHidden(n)?1:0}]},i.prototype.children=function(){return[this.model.getChild()]},i.prototype.containingViewport=function(){return null},i}();t.ViewportView=i})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(){function n(n,t,i){var u,r,f;for(this.context=n,this.watchers=[],u=this.watchers=i.map(function(i){return TDB.watcherTag(6419480,n,t,i)}),r=0;r<u.length;++r)f=u[r],t._subscribeTo(f),f.resolve()}return n.prototype.resolve=function(){this.watchers.forEach(function(n){return n.resolve()})},n}();n.WatcherContainer=t})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){(function(n){n[n.DELETE=0]="DELETE";n[n.UPDATE=1]="UPDATE"})(n.UpdatePhase||(n.UpdatePhase={}));var i=n.UpdatePhase,t=function(){function n(){this.views=[]}return n.prototype.onUpdate=function(){for(var t=this.views,n=0;n<t.length;++n)t[n].update(0);for(n=0;n<t.length;++n)t[n].update(1)},n.prototype.needsUpdate=function(){for(var t=this.views,n=0,i=t.length;n<i;++n)if(t[n].isDirty())return!0;return!1},n.initialize=function(){if(n.s_instance)throw new Error("Tried to initialized the AnimationUpdater more than once");TDB.registerUpdater(n.s_instance=new n)},n.register=function(t){if(!n.s_instance)throw new Error("initialize hasn't been called: This updater needs to be initialized before the ViewElementUpdater");n.s_instance.views.push(t)},n.unregister=function(t){var i=n.s_instance,r;if(!i)throw new Error("No view elements registered");r=i.views.indexOf(t);r!==-1&&i.views.splice(r,1);i.views.length||(TDB.unregisterUpdater(i),n.s_instance=null)},n}();n.Updater=t})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var r=n.Model.RM,i=function(){function n(n){this.collection=[];this.collection=n?n:[]}return n.prototype.getCollection=function(){return this.collection},n}(),f,u,e;t.Collection=i;f=function(){function n(n,t){var r=this;if(this.animations=new i,!n)throw new Error("null sequence passed to constructor");this.id=n.id;this.name=n.getName();this.animationsCompleteFunction=n.getAnimationsCompleteFunction();this.clientRequirements=n.getClientRequirements();n.animations.getCollection().filter(function(n){return t(n.getClientState())}).forEach(function(n){return r.animations.collection.push(new u(n))})}return n.prototype.getName=function(){return this.name},n.prototype.getAnimationsCompleteFunction=function(){return this.animationsCompleteFunction},n.prototype.getClientRequirements=function(){return this.clientRequirements},n}();t.AnimationSequence=f;u=function(){function n(n){this.animationFunctions=new i;this.animationTransitions=new i;this.parameters=new i;this.transitionIds=new r.PropertyCollection;this.behaviors=new Flags(r.AnimationBehaviors,0);n&&(this.parameters=new i(n.parameters.getCollection()),this.animationFunctions=new i(n.animationFunctions.getCollection()),this.animationTransitions=new i(n.animationTransitions.getCollection()),this.transitionIds=n.getTransitionIds(),this.behaviors=n.getBehaviors())}return n.prototype.getTransitionIds=function(){return this.transitionIds},n.prototype.getBehaviors=function(){return this.behaviors},n}();t.Animation=u;e=function(){function n(n,t,i,u,f,e){this.id=n;this.functionId=t;this.expression=i;this.maintainStateOnStart=u;this.target=f;this.flags=e||new Flags(r.AnimationFlags,0)}return n.prototype.getFunctionId=function(){return this.functionId},n.prototype.getExpression=function(){return this.expression},n.prototype.getMaintainStateOnStart=function(){return this.maintainStateOnStart},n.prototype.getTarget=function(){return this.target},n.prototype.getFlags=function(){return this.flags},n}();t.AnimationFunction=e})(t=n.AnimationInterfaces||(n.AnimationInterfaces={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){function f(n,t,i){return n===0?(setTimeout(t,0),Utilities.noop):function(){n=n-1;n===0&&t(i)}}var l=n.Model.RM,i=n.AnimationInterfaces,o=Utilities.query.has("customscroll"),s=Utilities.query.has("lowfi"),r="snapToReveal",h=n.Common.UrlHelper.getInstance().isAccessiblityView(),c="1000000000",u,e;t.Engine=null;t.CameraID="camera";t.OnCompleteFunctionName="onComplete";t.forcedToLowFi=TDB.watchableTag(6150041,null,!1);t.LowFi=TDB.watcherTag(6316180,null,null,function(i){var u,f;if(o)return!1;if(s||h)return!0;var c=n.View.ViewElements.ViewModel.previewVE.currentStory.getRenderModel(i),e=c.layoutTrees.getCollection(i),r=e.length>0?e[0]:null;return r?(u=r.getDevice(i),u===1||u===0)?!1:t.forcedToLowFi.getWatchedValue(i)?!0:(f=r.getInteractionModel(i),!f)?!0:!f.getRequiresParallax(i):!1});u=function(u){function o(n,i,r,f,e){u.call(this,i);this.clientCapabilites=r;this.getTransitionData=f;this.elementMap={};this.domHandles=new Utilities.AsyncDependencySet;this.targetHandles=new Utilities.AsyncDependencySet;this.toActivate=[];this.dirtyTargets=[];this.isdirtyElementMap={};this.cssanimator=new t.CssAnimator(this);this.viewportScales={};this.executingsequences=0;this.animsequenceDisposables={};this.disableoutput=!1;this.promotedTo3D=0;this.camlisteners=[];this.resetAnimatables=TDB.watchableTag(4993217,this,0);this.cameraChanged=!1;this.cameralistener={changed:this.cameraTransformChanged.bind(this)};this.targetlistener={changed:this.targetChanged.bind(this)};this.ticklisteners=[];this.mainscale=1;this.functionalanimator=new t.FunctionalAnimator(this,n,this.onKernelPreTick.bind(this),this.onKernelTicked.bind(this));var o=new t.Target(t.CameraID,!0);this.elementMap[t.CameraID]=o;this.resetCamera();this.externalActions=e}return __extends(o,u),o.prototype.dispose=function(){var i,t,n,r;u.prototype.dispose.call(this);for(i in this.animsequenceDisposables)for(t=this.animsequenceDisposables[i],n=0,r=t.length;n<r;++n)t[n].dispose();this.getTransitionData=null},o.prototype.getElementById=function(n){var t=this.elementMap[n];return t?t.dom():undefined},o.prototype.showOutput=function(n,t){this.forceTick(t);this.disableoutput=!1;this.cssanimator.snapOutput=!1;this.updateContainerStyle(n)},o.prototype.hideOutput=function(n){this.disableoutput=!0;this.cssanimator.snapOutput=!0;this.updateContainerStyle(n,!0)},o.prototype.updateContainerStyle=function(n,t){t===void 0&&(t=!1);var i=this.getRootElement();n&&this.elementMap[n]&&(i=this.elementMap[n].dom());t?(i.classList.remove(r),i.style.opacity="0"):(i.classList.add(r),i.style.opacity="1")},o.prototype.getRootElement=function(){return document.getElementById("storyroot")},o.prototype.promoteTo3DWorld=function(){this.promotedTo3D++;this.promotedTo3D===1&&this.resetCamera()},o.prototype.demoteTo2DWorld=function(){this.promotedTo3D--;this.promotedTo3D===0&&this.resetCamera()},o.prototype.is3dWorld=function(){return this.promotedTo3D>0},o.prototype.resetCamera=function(){var i=this,n;this.camerapos&&this.camerapos.notifier.removeListener(this.cameralistener);this.promotedTo3D>0?(this.camerapos=new t.Properties.Translate3D(0,0,0),n=[new t.Properties.Perspective(7),new t.Properties.Inverse(new t.Properties.Rotate3D(0,0,0)),new t.Properties.Inverse(new t.Properties.Scaled([1/100,1/100,1/100],this.camerapos))]):(this.camerapos=new t.Properties.AcceleratedTranslate2D(0,0,function(){return i.mainscale},!0),n=[new t.Properties.Inverse(new t.Properties.Rotate2D(0)),new t.Properties.Inverse(new t.Properties.Scaled([1/100,1/100],this.camerapos))]);this.camerapos.notifier.addListener(this.cameralistener);this.elementMap[t.CameraID].assignTransforms([],n);this.cameraTransformChanged(this.camerapos)},o.prototype.checkDisposableAnimations=function(){var i=this.animsequenceDisposables,r,t,n,u;for(r in i)for(t=i[r],n=0,u=t.length;n<u;++n)t[n].checkAndProvokeFinished()},o.prototype.accelerateCamera=function(){this.camerapos instanceof t.Properties.AcceleratedTranslate2D&&this.camerapos.accelerate()},o.prototype.decelerateCamera=function(){this.camerapos instanceof t.Properties.AcceleratedTranslate2D&&this.camerapos.decelerate()},o.prototype.mainScaleChanged=function(n){this.camerapos instanceof t.Properties.AcceleratedTranslate2D&&(this.mainscale=n,this.camerapos.notifier.signal())},o.prototype.viewportScalesChanged=function(n){var i=this.viewportScales;for(var t in i)t in n||delete i[t];for(t in n)this.getViewportScaleProp(t).set(n[t])},o.prototype.cameraTransform=function(){return this.camerapos},o.prototype.addCameraListener=function(n){this.camlisteners.push(n)},o.prototype.removeCameraListener=function(n){var t=this.camlisteners.indexOf(n);if(t<0)throw new Error("tried removing a listener that wasn't in the collection");this.camlisteners.splice(t,1)},o.prototype.addTickListener=function(n,t){n.addResource(new e(t,this.ticklisteners))},o.prototype.exists=function(n){return!!this.elementMap[n]},o.prototype.hide=function(n){var t=this.elementMap[n];if(!t)throw new Error("unknown target id");this.toActivate.removefirst(n);t.cull()},o.prototype.show=function(n,t){var i=this.elementMap[n];if(!i)throw new Error("unknown target id");t||!$.browser.webkit?i.uncull():this.toActivate.push(i.id)},o.prototype.untrackedTargets=function(n){var t=Obj.keys(this.elementMap);return t.filter(function(t){return n.indexOf(t)===-1})},o.prototype.isCulled=function(n){var t=this.elementMap[n];if(!t)throw new Error("unknown target id");return!t.active()},o.prototype.showPending=function(){var t=this,n=this.toActivate;n.length&&(n.forEach(function(n){return t.show(n,!0)}),n.length=0)},o.prototype.targetChanged=function(n){this.isdirtyElementMap[n.id]||(this.isdirtyElementMap[n.id]=!0,this.dirtyTargets.push(n))},o.prototype.cameraTransformChanged=function(){this.cameraChanged||(this.cameraChanged=!0,this.functionalanimator.jumpstart())},o.prototype.getDomHandles=function(){return this.domHandles},o.prototype.getTargetHandles=function(){return this.targetHandles},o.prototype.register=function(n,i,r,u){var f,e;if(this.elementMap[n])throw new Error("tried registering a duplicate animation target");for(f=new t.Target(n,i),this.domHandles.addListener(n,f),f.notifier.addListener(this.targetlistener),e=0;e<r.length;++e)this.addProperty(f,r[e],u);this.elementMap[n]=f;this.targetChanged(f);this.functionalanimator.jumpstart();this.targetHandles.bind(n,f)},o.prototype.isNew=function(n){var t=this;return n?n.layoutElements.getCollection().some(function(n){var i=t.elementMap[n.id];return i?i.isNewTarget():!1}):!1},o.prototype.assignTransform=function(n,t,i,r){var f=this.elementMap[n],u,e;if(!f)throw new Error("tried setting transform on animation target that doesn't exist");if(u=this.elementMap[t],t&&!u)throw new Error("Parent of target not found when registering");u?u.addChild(f):Containers.Intrinsic.contained(f)&&Containers.Intrinsic.disconnect(f);e=[];u&&u.isVirtual()&&e.push(u.transform());i&&e.push(i);f.assignTransforms(e,r);this.functionalanimator.jumpstart()},o.prototype.jumpstart=function(){this.functionalanimator.jumpstart()},o.prototype.getViewportScaleProp=function(n){var i=this.viewportScales[n];return i||(i=this.viewportScales[n]=new t.Properties.NumberProperty("scale",1)),i},o.prototype.addProperty=function(n,i,r){switch(i){case 1:n.addProperty(i,new t.Properties.NumberProperty("opacity",1));break;case 2:n.addProperty(i,new t.Properties.HiddenProperty(n,!1));break;case 3:n.addProperty(i,new t.Properties.IntegerProperty("zIndex",0));break;case 4:n.addDisposableProperty(i,new t.Properties.ScaledIntegerProperty("width",0,this.getViewportScaleProp(r),"px"));break;case 5:n.addDisposableProperty(i,new t.Properties.ScaledIntegerProperty("height",0,this.getViewportScaleProp(r),"px"))}this.functionalanimator.jumpstart()},o.prototype.setProperty=function(n,t){n.setProperty({property:t.property,transformIdx:t.transformIndex,componentIdx:t.component},t.value);this.functionalanimator.jumpstart()},o.prototype.interrogations=function(){return this.functionalanimator.interrogations},o.prototype.handleTouch=function(n,t){this.functionalanimator.interrogations.set(6,n);this.functionalanimator.interrogations.set(7,t)},o.prototype.requestUpdate=function(n,t){var r=this.elementMap[n],i;if(!r)throw new Error("tried updating animation target that doesn't exist");for(i=0;i<t.length;++i)this.setProperty(r,t[i])},o.prototype.forceTick=function(n){(n===null||n==undefined)&&(n=16);this.functionalanimator.tickForwardBy(n)},o.prototype.onKernelPreTick=function(n){for(var i=this.ticklisteners,t=0;t<i.length;++t)i[t](n)},o.prototype.onKernelTicked=function(){(this.notifyCameraListeners(),this.disableoutput)||this.flushTargetState()},o.prototype.notifyCameraListeners=function(){var r=this,i,t,n;if(this.cameraChanged){for(i=[8,9,10],t=this.camerapos.value(),n=0;n<t.length;++n)this.functionalanimator.interrogations.set(i[n],t[n]*100);this.cameraChanged=!1;this.camlisteners.forEach(function(n){return n.changed(r.camerapos)})}},o.prototype.cleardirty=function(){var t,n,i;if(this.dirtyTargets.length!==0)for(t=this.dirtyTargets,n=t.length-1;n>=0;--n)i=t[n],i.dirty()||(delete this.isdirtyElementMap[i.id],this.dirtyTargets.splice(n,1))},o.prototype.flushTargetState=function(){for(var t=this.dirtyTargets.length,i=this.dirtyTargets,n=0;n<t;++n)i[n].updatedom();this.cleardirty()},o.prototype.canAnimationRunInstantly=function(n){return this.getTransitionData().schemaVersion<56?!1:n.getBehaviors().has(1)},o.prototype.executeAnimation=function(i,r,u,f){var o=this.getAnimationFunctions(r),h=r.getTransitionIds().getCollection(),l=this.cssanimator.snapOutput,s,e;return r.getBehaviors().has(2)&&n.Model.RenderModel.getValue().renderModel.getSchemaVersion()>=62&&(s=r.parameters.getCollection().firstOrDefault(function(n){return n.getParameterName()==="ExternalAction"}),s&&this.externalActions[s.getParameterValue()]()),u&&this.canAnimationRunInstantly(r)&&(o.forEach(function(n){var i=n.getExpression();n.getExpression=function(){return i.replace(new RegExp(t.FunctionalAnimator.defaultInitialClockFunction,"g"),c)}}),this.cssanimator.snapOutput=!0),e=[],o.length>0&&e.push(this.functionalanimator.run(i,this.elementMap,o,f)),h.length>0&&e.push(this.cssanimator.run(this.getTransitionData(),h,this.elementMap,f)),this.cssanimator.snapOutput=l,e},o.prototype.executeAnimationSequence=function(n,t,i){var c,e,o,l,s;if(!this.clientCapabilites.includes(n.getClientRequirements()))return!1;var r=n.animations.getCollection(),h=this.addOnCompleteFunction(r,n.getAnimationsCompleteFunction(),n.id,t),u=0;if(r.some(function(n){return n.getTransitionIds().getCollection().length>0})&&u++,h&&u++,u===0)return!1;for(Utilities.weblog("animation","starting sequence: "+n.id+" "+n.getName()),c=f(u,function(){Utilities.weblog("animation","done sequence: "+n.id+" "+n.getName());i()}),e=[],o=0;o<r.length;++o)l=this.executeAnimation(h,r[o],t,c),e.push.apply(e,l);return s=this.animsequenceDisposables[n.id],s&&s.forEach(function(n){return n.dispose()}),this.animsequenceDisposables[n.id]=e,!0},o.prototype.cacheAnimationSequence=function(n){var i,t,r,u;if(n&&this.clientCapabilites.includes(n.getClientRequirements()))for(i=n.animations.getCollection(),t=0;t<i.length;++t)r=i[t],u=r.getTransitionIds().getCollection(),this.cssanimator.cache(this.getTransitionData(),u,this.elementMap)},o.prototype.clearAnimationCache=function(){this.cssanimator.clearAnimationCache()},o.prototype.getAnimationFunctions=function(n){var u=n.animationFunctions.getCollection(),r=u.map(function(n){return new i.AnimationFunction(n.id,n.getFunctionId(),n.getExpression(),n.getMaintainStateOnStart(),n.getTarget(),n.getFlags())});return t.LowFi.getWatchedValue()?r.filter(function(n){var t=n.getFlags();return!t.has(2)&&!t.has(1)}):r},o.prototype.addOnCompleteFunction=function(n,r,u,f){var e=this,h=n.mapmany(function(n){return e.getAnimationFunctions(n)}).length;if(!h)return null;r||(r="-1");f&&n.some(function(n){return e.canAnimationRunInstantly(n)})&&(r="1");var o=new i.Animation(null),s=t.OnCompleteFunctionName+u,c=new i.AnimationFunction(s,t.OnCompleteFunctionName,r,!1,null,null);return o.animationFunctions.getCollection().push(c),n.push(o),s},o.prototype.killAnimationSequence=function(n){var t,i;if(Utilities.weblog("animation","killing sequence: "+n.id),t=this.animsequenceDisposables[n.id],!t)throw new Error("tried disposing animation sequence that was never started");for(i=0;i<t.length;++i)t[i].dispose();delete this.animsequenceDisposables[n.id]},o.prototype.unregister=function(n){var t=this.elementMap[n],i;if(!t)throw new Error("tried unregistering animation target that doesn't exist");if(t.hasChildren())throw new Error("children not removed before trying to remove parent");t.resetTransforms();this.targetHandles.unbind(n,t);Containers.Intrinsic.contained(t)&&Containers.Intrinsic.disconnect(t);t.notifier.removeListener(this.targetlistener);this.domHandles.removeListener(n,t);this.functionalanimator.removeTargetBindings(t);delete this.elementMap[n];delete this.isdirtyElementMap[n];i=this.dirtyTargets.indexOf(t);i!==-1&&this.dirtyTargets.splice(i,1);t.dispose()},o}(Disposable);t.AnimationEngine=u;t.after=f;e=function(){function n(n,t){this.method=n;this.array=t;this.array.push(n)}return n.prototype.dispose=function(){if(!this.array.removefirst(this.method))throw new Error("possible duplicate disposal of element: can't find element to dispose");},n}()})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var r=function(){function n(){}return n}();n.InterrogationValue=r;var u=function(){function n(n){this.kernel=n;this.tickNum=0;this.variables={};this.constants={};this.paramExpressions={};this.constants.e=2.7182818284590451;this.constants.pi=3.1415926535897931;this.constants.pihalf=1.5707963267948966;this.constants.pidiv4=.78539816339744828;this.constants.twopi=6.2831853071795862;this.constants.deg2rad=.017453292519943295;this.constants.rad2deg=57.295779513082323;this.constants.root2=1.4142135623730952;this.constants.root3=1.7320508075688772;this.constants.log2=.69314718055994529;this.constants.log10=2.3025850929940459}return n.prototype.newTick=function(){++this.tickNum;this.random=Math.random()*1e7},n.prototype.getTick=function(){return this.tickNum},n.prototype.interrogation=function(n){var t=this.interrogations[n];return t!==undefined?t.value:0},n.prototype.exprRef=function(n){return this.kernel.tickExpression(n),this.kernel.getOutput(n)},n.prototype.varRef=function(n){var t=this.variables[n];return t!==undefined?t:0},n.prototype.negate=function(n){return-n},n.prototype.frac=function(n){return n<0?n-Math.ceil(n):n-Math.floor(n)},n.prototype.log10=function(n){return Math.log(n)/2.3025850929940459},n.prototype.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)},n.prototype.wavesaw=function(n){return n-Math.floor(n)},n.prototype.wavetri=function(n){return 1-Math.abs(1-Math.abs(n%2))},n.prototype.wavesquare=function(n){return Math.floor(Math.abs(n%2))},n.prototype.wavesin=function(n){return.5*(1+Math.sin((n-.5)*3.1415926535897931))},n.prototype.not=function(n){return n!==0?0:1},n.prototype.rand=function(n){return Math.round(this.random%n)},n.prototype.and=function(n,t){return n!==0&&t!==0?1:0},n.prototype.or=function(n,t){return n!==0||t!==0?1:0},n.prototype.xor=function(n,t){return n!==0!=(t!==0)?1:0},n.prototype.equ=function(n,t){return n===t?1:0},n.prototype.neq=function(n,t){return n!==t?1:0},n.prototype.gtr=function(n,t){return n>t?1:0},n.prototype.geq=function(n,t){return n>=t?1:0},n.prototype.lss=function(n,t){return n<t?1:0},n.prototype.leq=function(n,t){return n<=t?1:0},n.prototype.clamp=function(n,t,i){return n<t?t:n>i?i:n},n.prototype.if_=function(n,t,i){return n!==0?t:i},n.prototype.inrange=function(n,t,i){return t<=n&&n<=i?1:0},n.prototype.lerp=function(n,t,i){return t+n*(i-t)},n.prototype.normalize=function(n,t,i){return(n-t)/(i-t)},n.prototype.ease=function(n,t,i){return this.gain(i,this.bias(t,n))},n.prototype.bias=function(n,t){if(t<=0)return 0;if(t>=1)return 1;return Math.pow(t,Math.log(n)/-.69314718055994529)},n.prototype.gain=function(n,t){return t<0?0:t>1?1:t<.5?n>=1?0:this.bias(1-n,2*t)/2:n>=1?1:1-this.bias(1-n,2-2*t)/2},n.prototype.sum=function(){for(var t=0,n=0;n<arguments.length;++n)t+=arguments[n];return t},n.prototype.product=function(){for(var t=1,n=0;n<arguments.length;++n)t*=arguments[n];return t},n.prototype.minall=function(){var t,n;if(arguments.length<1)return 0;for(t=arguments[0],n=1;n<arguments.length;++n)arguments[n]<t&&(t=arguments[n]);return t},n.prototype.maxall=function(){var t,n;if(arguments.length<1)return 0;for(t=arguments[0],n=1;n<arguments.length;++n)arguments[n]>t&&(t=arguments[n]);return t},n.prototype.andall=function(){if(arguments.length<1)return 0;for(var n=0;n<arguments.length;++n)if(arguments[n]===0)return 0;return 1},n.prototype.orall=function(){if(arguments.length<1)return 0;for(var n=0;n<arguments.length;++n)if(arguments[n]!==0)return 1;return 0},n.prototype.select=function(n){return arguments.length<=1?0:n<0?arguments[1]:n>=arguments.length-1?arguments[arguments.length-1]:arguments[Math.floor(n)+1]},n.prototype.latch=function(n,t,i,r){var u=r+0,f=r+1;if(i[0]===1&&(i[u]=0),i[u]===0)t!==0&&(i[u]=1,i[f]=n);else{if(t!==0)return i[f];i[u]=0}return n},n.prototype.edgecount=function(n,t,i,r){var u=r+0,f=r+1,e=i[0]===1,o=t!==0;return o||e?i[u]=0:n>0&&i[f]<=0?++i[u]:n<0&&i[f]>=0&&--i[u],i[f]=n,i[u]},n.prototype.derivative=function(n,t,i,r){var u=r+0,f=r+1,o=r+2,e=0,s=i[0]===1;return e=s?0:t===i[f]&&n==i[u]?i[o]:(n-i[u])/(t-i[f]),i[u]=n,i[f]=t,i[o]=e,e},n.prototype.trand=function(n,t,i,r,u){var f=u,o=u+1,e=!1;return r[f]||(r[f]=i,e=!0),i-r[f]>t&&(r[f]=i,e=!0),e&&(r[o]=Math.round(this.random%n)+1),r[o]},n.prototype.accum=function(n,t,i,r){var u=r+0,f=i[0]===1,e=t!==0;return f||e?i[u]=0:i[u]+=n,i[u]},n.prototype.clampedaccum=function(n,t,i,r,u,f){var e=f+0,o=u[0]===1,s=r!==0;return u[e]=o||s?0:this.clamp(u[e]+n,t,i),u[e]},n.prototype.integral=function(n,t,i,r,u){var e=u+0,o=u+1,s=u+2,f=r[s],h=r[0]===1,c=i!==0;if(h||c)f=0;else{var l=.5*(r[e]+n),a=t-r[o],v=l*a;f+=v}return r[e]=n,r[o]=t,r[s]=f,f},n.prototype.querystate=function(n,t){return this.kernel.query().state(n,t)},n}(),t=function(){function n(n,t,i,r,u){this.localStoreStack=[];this.localStoreStack.push(MathUtils.Vec.ofN(i.localStoreSize));this.localStore=this.localStoreStack[0];this.exprFunction=i.fn;this.id=n;this.numParams=i.numParams;this.exprSource=t;this.script=i.script;this.report=r;this.run=u;this.exprReferences=i.exprReferences;this.reset()}return n.prototype.pushLocalStore=function(n,t){while(this.localStoreStack.length<=n)this.localStoreStack[n]=MathUtils.Vec.ofN(t);this.localStore=this.localStoreStack[n];this.localStore[0]=this.localStoreStack[0][0]},n.prototype.resetLocalStore=function(){this.localStore=this.localStoreStack[0]},n.prototype.reset=function(){this.value=0;this.tickNum=-1;this.localStoreStack.forEach(function(n){n[0]=0});this.localStore=this.localStoreStack[0]},n.prototype.addExpressionRef=function(n){this.exprReferences.push(n)},n.prototype.tick=function(n){var i,t;this.run===!1||this.numParams>0||(++this.localStore[0],i=n.getTick(),this.tickNum!=i)&&(this.tickNum=i,t=this.exprFunction(n),this.value=t===t?t:0)},n.prototype.sleep=function(){this.run=!1},n.prototype.wake=function(n){n&&this.reset();this.run=!0},n}(),f=function(){function n(n,t,i){if(this.script=n,t.error){this.fn=new Function("context","return 0");this.localStoreSize=0;this.exprReferences=[];this.numParams=0;this.error=t.error;return}var r="context, level";t.paramList!=null&&(r="context, level, "+t.params);this.fn=i?new Function(r,"this.pushLocalStore(level, "+t.localStoreSize+");\nvar result = "+n+";\nthis.resetLocalStore();\nreturn result;"):new Function(r,"return "+n);this.localStoreSize=t.localStoreSize;this.exprReferences=t.exprReferences;this.numParams=t.numParams}return n}(),i=function(){function n(n,t){this.description=n;this.position=t}return n}();n.CompilationError=i;var e=function(){function n(n,t,i){if(this.debugOutput=!1,this.reservedLocalStore=1,this.rxNonWhitespace=/\S+/,this.rxCommaSplit=/\s*,\s*/,this.rxParamName=/^[_a-zA-Z]\w*$/,this.expression=n,this.execContext=t,this.remainder=n,this.localStoreSize=this.reservedLocalStore,this.exprReferences=[],this.error=null,this.level=0,i==null)this.params=null,this.paramList=undefined,this.numParams=0;else{this.paramList=i.split(this.rxCommaSplit);this.numParams=this.paramList.length;this.params="";for(var r=0;r<this.numParams;++r)if(!this.rxParamName.test(this.paramList[r])){this.compilationError("Invalid Parameter Name: "+this.paramList[r]);break}this.error||(this.params=this.paramList.join(","))}}return n.prototype.nextToken=function(n,t){if(this.error)return null;var i=this.remainder.match(n);return i===null?null:(this.remainder=this.remainder.substring(i[0].length),i[t])},n.prototype.emptyRemainder=function(){return!this.rxNonWhitespace.test(this.remainder)},n.prototype.compilationError=function(n){return this.error=new i(n,this.expression.length-this.remainder.length),"0"},n.prototype.paramKnown=function(n){for(var t=0;t<this.paramList.length;++t)if(n===this.paramList[t])return!0;return!1},n}(),o=function(){function n(){this.rxNumber=/^\s*(-?(?:0(?:\.\d*)?|(?:[1-9]\d*\.?\d*)|(?:\.\d+))(?:[Ee][+-]?\d+)?)/;this.rxString=/^\s*((?:\"[^"]*\")|(?:\'[^']*\'))/;this.rxFnCall=/^\s*([a-zA-Z_]\w*)\s*\(/;this.rxVariableRef=/^\s*#([a-zA-Z_]\w*)/;this.rxInterrogationRef=/^\s*!([a-zA-Z_]\w*)/;this.rxExpressionRef=/^\s*\@([0-9a-zA-Z_-]+)/;this.rxParamRef=/^\s*\$([a-zA-Z_]\w*)/;this.rxOpenParen=/^\s*\(/;this.rxCloseParen=/^\s*\)/;this.rxComma=/^\s*,/;this.fnHandlers={add:this.fnHandlerBinaryOp,sub:this.fnHandlerBinaryOp,mul:this.fnHandlerBinaryOp,div:this.fnHandlerBinaryOp,mod:this.fnHandlerBinaryOp,abs:this.fnHandlerMathUnary,acos:this.fnHandlerMathUnary,asin:this.fnHandlerMathUnary,atan:this.fnHandlerMathUnary,ceil:this.fnHandlerMathUnary,cos:this.fnHandlerMathUnary,exp:this.fnHandlerMathUnary,floor:this.fnHandlerMathUnary,log:this.fnHandlerMathUnary,max:this.fnHandlerMathBinary,min:this.fnHandlerMathBinary,pow:this.fnHandlerMathBinary,round:this.fnHandlerMathUnary,sin:this.fnHandlerMathUnary,sqrt:this.fnHandlerMathUnary,tan:this.fnHandlerMathUnary,accum:this.fnHandlerAccum,clampedaccum:this.fnHandlerClampedAccum,querystate:this.fnHandlerBuiltinBinary,and:this.fnHandlerBuiltinBinary,andall:this.fnHandlerBuiltinNary,clamp:this.fnHandlerBuiltinTrinary,derivative:this.fnHandlerDerivative,ease:this.fnHandlerBuiltinTrinary,edgecount:this.fnHandlerEdgeCount,equ:this.fnHandlerBuiltinBinary,frac:this.fnHandlerBuiltinUnary,geq:this.fnHandlerBuiltinBinary,gtr:this.fnHandlerBuiltinBinary,inrange:this.fnHandlerBuiltinTrinary,integral:this.fnHandlerIntegral,latch:this.fnHandlerLatch,leq:this.fnHandlerBuiltinBinary,lerp:this.fnHandlerBuiltinTrinary,log10:this.fnHandlerBuiltinUnary,lss:this.fnHandlerBuiltinBinary,maxall:this.fnHandlerBuiltinNary,minall:this.fnHandlerBuiltinNary,negate:this.fnHandlerBuiltinUnary,neq:this.fnHandlerBuiltinBinary,normalize:this.fnHandlerBuiltinTrinary,not:this.fnHandlerBuiltinUnary,or:this.fnHandlerBuiltinBinary,orall:this.fnHandlerBuiltinNary,product:this.fnHandlerBuiltinNary,rand:this.fnHandlerBuiltinUnary,select:this.fnHandlerBuiltinNary,sum:this.fnHandlerBuiltinNary,trand:this.fnHanderTRand,trunc:this.fnHandlerBuiltinUnary,wavesaw:this.fnHandlerBuiltinUnary,wavesin:this.fnHandlerBuiltinUnary,wavesquare:this.fnHandlerBuiltinUnary,wavetri:this.fnHandlerBuiltinUnary,xor:this.fnHandlerBuiltinBinary};this.fnHandlers["if"]=this.fnHandlerBuiltinTrinary}return n.prototype.parse=function(n,t,i,r){var u=new e(n,i,r),o=this.parseExpression(u);return u.emptyRemainder()||(o=u.compilationError("Unexpected trailing characters in expression")),new f(o,u,t)},n.prototype.parseExpression=function(n){var t;return(t=n.nextToken(this.rxFnCall,1),t!==null)?this.parseFnCall(n,t):(t=n.nextToken(this.rxNumber,1),t!==null)?t:(t=n.nextToken(this.rxString,1),t!==null)?t:(t=n.nextToken(this.rxVariableRef,1),t!==null)?this.parseVariableRef(n,t):(t=n.nextToken(this.rxInterrogationRef,1),t!==null)?this.parseInterrogationRef(n,t):(t=n.nextToken(this.rxExpressionRef,1),t!==null)?this.parseExpressionRef(n,t):(t=n.nextToken(this.rxParamRef,1),t!==null)?this.parseParamRef(n,t):n.compilationError("Unrecognized token in expression")},n.prototype.parseVariableRef=function(n,t){var i=n.execContext.constants[t];return i!==undefined?Number(i).toString():"context.varRef('"+t+"')"},n.prototype.parseInterrogationRef=function(n,t){return'context.interrogation("'+t+'")'},n.prototype.parseExpressionRef=function(n,t){return n.exprReferences.push(t),'context.exprRef("'+t+'")'},n.prototype.parseParamRef=function(n,t){return n.numParams<=0?n.compilationError("Parameter reference used in unparameterized expression"):n.paramKnown(t)?t:n.compilationError("Unrecognized parameter name for this function")},n.prototype.parseFnCall=function(n,t){var i,f,r,u,e;return(t=t.toLowerCase(),this.fnHandlers[t]!==undefined)?(i=this.parseParams(n),n.error)?n.compilationError("Malformed parameter list"):this.fnHandlers[t](n,t,i):(f=n.execContext,r=f.paramExpressions[t],r!=null)?(i=this.parseParams(n),n.error)?n.compilationError("Malformed parameter list"):(u="",i.length>0&&(u=", "+i.join(", ")),r.numParams!==i.length)?n.compilationError("Custom function "+t+" called with incorrect number of arguments"):(e="context, "+ ++n.level+u+")","context.paramExpressions['"+t+"'].exprFunction.call(this, "+e):n.compilationError("Unrecognized function (not built in or custom)")},n.prototype.parseParams=function(n){var i=[],t;if(t=n.nextToken(this.rxCloseParen,0),t===null){do i.push(this.parseExpression(n)),t=n.nextToken(this.rxComma,0);while(t!==null);t=n.nextToken(this.rxCloseParen,0);t===null&&n.compilationError("Expected a closing parenthesis here")}return i},n.prototype.fnHandlerMathUnary=function(n,t,i){return i.length!==1?n.compilationError("Expected a single argument for function "+t):"Math."+t+"("+i[0]+")"},n.prototype.fnHandlerMathBinary=function(n,t,i){return i.length!==2?n.compilationError("Expected two arguments for function "+t):"Math."+t+"("+i.join(",")+")"},n.prototype.fnHandlerBuiltinUnary=function(n,t,i){return i.length!==1?n.compilationError("Expected a single argument for function "+t):"context."+t+"("+i[0]+")"},n.prototype.fnHandlerBuiltinBinary=function(n,t,i){return i.length!==2?n.compilationError("Expected two arguments for function "+t):"context."+t+"("+i.join(",")+")"},n.prototype.fnHandlerBuiltinTrinary=function(n,t,i){return i.length!==3?n.compilationError("Expected three arguments for function "+t):(t=="if"&&(t="if_"),"context."+t+"("+i.join(",")+")")},n.prototype.fnHandlerBuiltinNary=function(n,t,i){return"context."+t+"("+i.join(",")+")"},n.prototype.fnHandlerBinaryOp=function(n,t,i){if(i.length!==2)return n.compilationError("Expected two arguments for funcion "+t);var r;switch(t){case"add":r=" + ";break;case"sub":r=" - ";break;case"mul":r=" * ";break;case"div":r=" / ";break;case"mod":r=" % ";break;default:return n.compilationError("Internal error: Binary op handler called for unrecognized function "+t)}return"("+i[0]+r+i[1]+")"},n.prototype.fnHandlerAccum=function(n,t,i){if(i.length===1)i[1]="0";else if(i.length!==2)return n.compilationError("Expected one or two arguments for function "+t);var r=n.localStoreSize;return n.localStoreSize+=1,"context.accum("+i[0]+","+i[1]+",this.localStore,"+r+")"},n.prototype.fnHanderTRand=function(n,t,i){if(i.length===2)i[2]="0";else if(i.length!==3)return n.compilationError("Expected two arguments for function "+t);var r=n.localStoreSize;return n.localStoreSize+=2,"context.trand("+i[0]+","+i[1]+',context.interrogation("clock"), this.localStore,'+r+")"},n.prototype.fnHandlerClampedAccum=function(n,t,i){if(i.length===3)i[3]="0";else if(i.length!==4)return n.compilationError("Expected three or four arguments for function "+t);var r=n.localStoreSize;return n.localStoreSize+=1,"context.clampedaccum("+i[0]+","+i[1]+","+i[2]+","+i[3]+",this.localStore,"+r+")"},n.prototype.fnHandlerLatch=function(n,t,i){if(i.length!==2)return n.compilationError("Expected two arguments for function "+t);var r=n.localStoreSize;return n.localStoreSize+=2,"context.latch("+i[0]+","+i[1]+",this.localStore,"+r+")"},n.prototype.fnHandlerEdgeCount=function(n,t,i){var r,u;if(i.length===1)r="0";else if(i.length===2)r=i[1];else return n.compilationError("Expected one or two arguments for function "+t);return u=n.localStoreSize,n.localStoreSize+=2,"context.edgecount("+i[0]+","+r+",this.localStore,"+u+")"},n.prototype.fnHandlerDerivative=function(n,t,i){var r,u;if(i.length===1)r='context.interrogation("clock")';else if(i.length===2)r=i[1];else return n.compilationError("Expected one or two arguments for function "+t);return u=n.localStoreSize,n.localStoreSize+=3,"context.derivative("+i[0]+","+r+",this.localStore,"+u+")"},n.prototype.fnHandlerIntegral=function(n,t,i){if(i.length!==3)return n.compilationError("Expected three argumements for function "+t);var r=n.localStoreSize;return n.localStoreSize+=3,"context.integral("+i.join(",")+",this.localStore,"+r+")"},n}(),s=function(){function n(n){this.queryHandler=null;this.rxId=/^[_a-zA-Z]\w*$/;this.expressions={};this.paramExpressions={};this.outputValues={};this.refCounts={};this.compileErrors={};n!==null&&this.loadAnimations(n)}return n.prototype.setQueryHandler=function(n){this.queryHandler=n},n.prototype.query=function(){return this.queryHandler},n.prototype.setVariable=function(n,t){this.execContext.variables[n]=t},n.prototype.addExpression=function(n,i,r,u){if(this.expressions[n]===undefined){r==null&&(r=!0);u==null&&(u=!0);var f=this.compileExpression(i,!1);return this.expressions[n]=new t(n,i,f,r,u),this.updateRefCounts(n,f),f.error}},n.prototype.addParamExpression=function(n,i,r){if(this.rxId.test(n)&&(n=n.toLowerCase(),this.paramExpressions[n]==null)){var u=this.compileExpression(r,!0,i);this.execContext.paramExpressions[n]=new t(n,r,u,!1,!1);this.updateRefCounts(n,u)}},n.prototype.reportExpression=function(n,t){var i=this.expressions[n];i!==undefined&&(i.report=t,t===!1&&delete this.outputValues[n])},n.prototype.suspendExpression=function(n){var t=this.expressions[n];t!==undefined&&(t.run=!1)},n.prototype.wakeExpression=function(n,t){var i=this.expressions[n];i!==undefined&&(t&&i.reset(),i.run=!0)},n.prototype.releaseExpression=function(n){var r=this.expressions[n],t,i;if(r!==undefined&&(t=this.refCounts[n],t!==undefined))if(--t,t>0)this.refCounts[n]=t;else{for(i=0;i<r.exprReferences.length;++i)this.releaseExpression(r.exprReferences[i]);delete this.refCounts[n];delete this.expressions[n];delete this.outputValues[n]}},n.prototype.tick=function(n){this.execContext.interrogations=n;this.execContext.newTick();for(var t in this.expressions)this.tickExpression(t)},n.prototype.tickExpression=function(n){var t=this.expressions[n];t!==undefined&&(t.tick(this.execContext),t.report&&(this.outputValues[n]=t.value))},n.prototype.getOutput=function(n){var t=this.outputValues[n];return t!==undefined?t:0},n.prototype.getScript=function(n){var t=this.expressions[n];return t!==undefined?t.script:"<undefined>"},n.prototype.loadAnimations=function(n){var f,e,o,r,s,t;for(this.execContext=new u(this),f=n.variables,t=0;t<f.length;++t)e=f[t],this.setVariable(e.id,e.value);for(o=n.functions!=null?n.functions:[],t=0;t<o.length;++t)r=o[t],this.addParamExpression(r.id,r.params,r.exprString);for(s=n.expressions,t=0;t<s.length;++t){var i=s[t],c=i.report!==!1,l=i.run!==!1,h=this.addExpression(i.id,i.exprString,c,l);h&&(this.compileErrors[i.id]=h.description)}},n.prototype.updateRefCounts=function(n,t){for(var r,u,i=0;i<t.exprReferences.length;++i)r=t.exprReferences[i],this.refCounts[r]===undefined?this.refCounts[r]=1:++this.refCounts[r];u=this.refCounts[n];this.refCounts[n]=u===undefined?1:u+1},n.prototype.compileExpression=function(n,t,i){var r=new o;return r.parse(n,t,this.execContext,i)},n}();n.Kernel=s}(AnimationKernel||(AnimationKernel={})),function(n){var t;(function(t){var u=n.Model.RM,r,i;(function(n){n[n.ACTIVE=0]="ACTIVE";n[n.CULLED=1]="CULLED";n[n.HIDDEN=2]="HIDDEN"})(t.TargetState||(t.TargetState={}));r=t.TargetState;i=function(){function n(n,i){this.id=n;this.isvirtual=i;this.notifier=new t.Properties.Notifier(this);this.prev=null;this.next=null;this.boundproperties={};this.dirtyproperties=[];this.disposableproperties=[];this.transforms=new t.Properties.TransformStack([]);this.transformbaseidx=0;this.newtarget=!0;this.children=new Containers.Intrinsic.Stack;this.state=0;this.element=null;this.domlisteners=new TDB.DomListenerManager;this.domlistener=Obj.implement(this,{domAttached:this.onDomAttached,domDetached:this.onDomDetached});this.isVirtual()||this.transforms.notifier.addListener(this)}return n.prototype.dom=function(){return this.element?this.element.domElement:null},n.prototype.active=function(){return this.state===0},n.prototype.bound=function(n){this.element=n;n.addDomListener(this.domlistener);this.state!==0?n.cull():n.uncull();for(var t in this.boundproperties)this.boundproperties[t].property.notifier.signal();this.updatedom()},n.prototype.unbound=function(){this.element.removeDomListener(this.domlistener);this.element=null},n.prototype.cull=function(){this.deactivate(1)},n.prototype.hide=function(){this.deactivate(2)},n.prototype.deactivate=function(n){this.state&n||(this.state|=n,this.element&&this.element.cull())},n.prototype.uncull=function(){this.activate(1)},n.prototype.show=function(){this.activate(2)},n.prototype.activate=function(n){this.state&n&&(this.state&=~n,this.state===0)&&this.element&&(this.dirtyproperties.length&&this.updatedom(),this.element.uncull())},n.prototype.onDomAttached=function(n){this.domlisteners.notifyAttached(n)},n.prototype.onDomDetached=function(n){this.domlisteners.notifyDetached(n)},n.prototype.addDomListener=function(n){this.domlisteners.add(n)},n.prototype.removeDomListener=function(n){this.domlisteners.remove(n)},n.prototype.isVirtual=function(){return this.isvirtual},n.prototype.isNewTarget=function(){return this.newtarget},n.prototype.resetTransforms=function(){this.transforms.reset();for(var n in this.boundproperties)this.changed(this.boundproperties[n].property);this.updatedom()},n.prototype.assignTransforms=function(n,i){this.transforms.setstack(n.concat(i));this.transformbaseidx=n.length;this.boundproperties[0]=new t.Properties.TransformBinding(this.transforms,this.transformbaseidx);this.transforms.notifier.signal()},n.prototype.addProperty=function(n,i){if(this.boundproperties[n])throw new Error("Target already has property of type: "+n);i.notifier.addListener(this);this.boundproperties[n]=new t.Properties.PropertyBinding(i);i.notifier.signal()},n.prototype.addDisposableProperty=function(n,t){this.addProperty(n,t);this.disposableproperties.push(t)},n.prototype.getProperty=function(n){var t=this.boundproperties[n];if(!t)throw new Error("tried getting a property that doesn't exist on the animation target");return t.property},n.prototype.setProperty=function(n,t){var i=this.boundproperties[n.property];if(!i)throw new Error("tried setting a property that doesn't exist on the animation target");i.set(n,t)},n.prototype.getModelProperty=function(n){return this.boundproperties[n]},n.prototype.transform=function(){return this.transforms},n.prototype.addChild=function(n){this.children.push(n)},n.prototype.hasChildren=function(){return!this.children.empty()},n.prototype.removeChild=function(n){Containers.Intrinsic.disconnect(n)},n.prototype.nonvirtuals=function(){var n,t,i;if(!this.isVirtual())return[this];for(n=[],t=this.children.itr();t.valid();t.advance())i=t.current().nonvirtuals(),n.push.apply(n,i);return n},n.prototype.dirty=function(){return this.dirtyproperties.length>0},n.prototype.cleardirty=function(){this.dirtyproperties.length=0},n.prototype.updatedom=function(n){var r,t,i;if(n===void 0&&(n=!1),this.element){for(r=this.element.domElement,this.newtarget&&(this.newtarget=!1),t=0;t<this.dirtyproperties.length;++t)i=this.dirtyproperties[t],r.style[i.cssproperty()]=n?i.compactvalue():i.cssvalue();this.cleardirty()}},n.prototype.compactdom=function(){for(var t=this.nonvirtuals(),n=0,i=t.length;n<i;++n)t[n].updatedom(!0)},n.prototype.dispose=function(){var t,n,i;for(this.transforms.dispose(),this.domlisteners.dispose(),t=this.disposableproperties,n=0,i=t.length;n<i;++n)t[n].dispose()},n.prototype.changed=function(n){this.dirtyproperties.indexOf(n)===-1&&(this.dirtyproperties.push(n),this.notifier.signal())},n}();t.Target=i})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){function u(n){r=n}function f(){for(var n,i=document.styleSheets.length,t=0;t<i;++t)if(document.styleSheets[t].title==="dynamic")return document.styleSheets[t];return n=document.createElement("style"),n.title="dynamic",n.type="text/css",document.head.appendChild(n),u(!0),n.sheet}function c(n,t,i){var f=Modernizr.prefixed("animation"),u=n.style[f],r;u=u.trim();r=u?u.split(", "):[];r.forEach(function(n){if(n.split(" ").contains(t))throw new Error("css animation already present on this element");});r.push(t+" "+i);Utilities.weblog("animation","applied animation: "+r.last());n.style[f]=r.join(", ")}function l(n,t){var u=Modernizr.prefixed("animation"),f=n.style[u],i=f.split(", "),e=i.length,r;if(i=i.filter(function(n){return!n.split(" ").contains(t)}),e-i.length!=1){r="didn't remove the animation properly: "+t;Utilities.weblog("animation",r);StoryLog.TraceTag(8699999,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,r);return}Utilities.weblog("animation","removed animation: "+t);n.style[u]=i.join(", ")}var r=!1,e,o,s,h;n.setDynamicStyleSheetRecreated=u;e=function(){function n(n,t,i,r,u){this.storybinding=n;this.duration=t;this.delay=i;this.curve=r;this.tag=u;this.endtime=0;this.disposed=!1}return n.prototype.shouldBeDone=function(){return platform.now()>this.endtime},n.prototype.isStarted=function(){return this.storybinding.isStarted()},n.prototype.terminate=function(){this.done(this)},n.prototype.start=function(){var n=this;this.endtime=platform.now()+this.duration;this.storybinding.start(this.duration,this.delay,this.curve,"ms",function(){n.done(n)})},n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.storybinding.dispose(),this.storybinding=null)},n}();n.Task=e;o=function(){function n(n){this.value=n}return n.prototype.iscurrent=function(){return this.value===n.current_value},n.current=function(){return new n(n.current_value)},n.current_value="{current}",n}();n.Constant=o;s=function(){function n(n,t){this.property=n;this.values=t;this.css=[];for(var i=0;i<t.length;++i)this.css.push(n+": "+t[i].value+";")}return n}();n.Track=s;n.AnimationIdSeparator="___";h=function(){function n(n,t){var i,u,o,r,s,e,h;if(this.name=n,this.tracks=t,!t.every(function(n){return n.values.length===t[0].values.length}))throw"different sized tracks not supported";for(i="@",i+=$.browser.webkit?"-webkit-keyframes ":"keyframes ",i+=this.name+" { ",u=t[0].values.length,o=1/u,r=0;r<u-1;++r)(s=Math.round(100*r*o),e=t.map(function(n){if(!n.values[r].iscurrent())return n.css[r];if(r!==0)throw new Error("trying to use an elements current value in the middle of an animation");return""}),e.empty())||(i+=s+"% { "+e.join(" ")+" } ");h=t.map(function(n){return n.css[u-1]});i+="100% { "+h.join(" ")+" }";i+="}";this.cssanimation=i;Utilities.weblog("animation","created animation: "+this.cssanimation);f().insertRule(this.cssanimation,0)}return n.prototype.destroy=function(){for(var t=f(),i=t.cssRules,n=0;n<i.length;++n)if(i[n].name===this.name){t.deleteRule(n);return}if(!r)throw"storyboard already destroyed";},n.prototype.finalstate=function(){var n=this.tracks[0].values.length;return this.tracks.map(function(t){return{property:t.property,value:t.values[n-1].value}})},n}();n.Storyboard=h;n.applyCssAnimation=c;n.removeCssAnimation=l;var t="animationstart msAnimationStart webkitAnimationStart",i="animationend msAnimationEnd webkitAnimationEnd",a=function(){function n(n,t){this.target=n;this.storyboard=t;this.disposed=!1}return n.prototype.onstarted=function(n){if(!this.disposed){var i=n.originalEvent;i.animationName===this.storyboard.name&&($(this.target).off(t,this.pendingstart),this.pendingstart=null)}},n.prototype.onended=function(n){if(!this.disposed){var t=n.originalEvent;t.animationName===this.storyboard.name&&($(this.target).off(i,this.pendingend),this.pendingend=null,this.dispose())}},n.prototype.isStarted=function(){return!!this.pendingend},n.prototype.start=function(n,r,u,f,e){var s=this,o;this.callback=e;o=u+" "+n.toString()+f+(r?" "+r.toString()+f:"")+" forwards";c(this.target,this.storyboard.name,o);this.pendingstart=this.onstarted.bind(this);$(this.target).on(t,this.pendingstart);this.pendingend=this.onended.bind(this);$(this.target).on(i,this.pendingend);n!==0&&this.inDom()||Utilities.scheduler.schedule(0,function(){return s.dispose()})},n.prototype.finalize=function(){this.disposed||(l(this.target,this.storyboard.name),this.pendingstart&&($(this.target).off(t,this.pendingstart),this.pendingstart=null),this.pendingend&&($(this.target).off(i,this.pendingend),this.pendingend=null),this.applyFinalState())},n.prototype.applyFinalState=function(){var t,n;if(!this.disposed)for(t=this.storyboard.finalstate(),n=0;n<t.length;++n)this.target.style[t[n].property]=t[n].value},n.prototype.inDom=function(){return document.documentElement.contains(this.target)},n.prototype.dispose=function(){this.disposed||(this.finalize(),this.disposed=!0,this.target=null,this.storyboard=null,this.callback())},n}();n.Storybinding=a}(CssAnimation||(CssAnimation={})),function(n){var t;(function(n){function r(n){function t(i){h.call(t,n,i)}u(t)}function h(t,i){if(t.idle()){t.onUnregistered();return}i=i||(new Date).getTime();n.ticktime!==i&&(n.ticktime=i,t.tick(i));u(this)}var s=AnimationKernel,t,i,f,e,o,u;(function(n){n[n.scroll_y=0]="scroll_y";n[n.scrollextent_y=1]="scrollextent_y";n[n.visiblescroll_y=2]="visiblescroll_y";n[n.scroll_x=3]="scroll_x";n[n.scrollextent_x=4]="scrollextent_x";n[n.visiblescroll_x=5]="visiblescroll_x";n[n.touchx=6]="touchx";n[n.touchy=7]="touchy";n[n.camx=8]="camx";n[n.camy=9]="camy";n[n.camz=10]="camz"})(n.Interrogation||(n.Interrogation={}));t=n.Interrogation;i=function(){function n(){this.interrogables={};for(var n in t)typeof t[n]=="number"&&(this.interrogables[n]={value:0});this.interrogables.clock={value:0};this.interrogables.tick={value:0}}return n.prototype.set=function(n,i){var r=this.interrogables[t[n]];if(!r)throw new Error("tried setting unknown interrogation");r.value=i},n.prototype.get=function(n){return this.interrogables[t[n]].value},n.prototype.fetch=function(){return this.interrogables},n}();n.Interrogations=i;f=function(t){function u(n,r,u,f){t.call(this,n);this.preticked=u;this.tickedcallback=f;this.interrogations=new i;this.functionbindings={};this.onCompleteCallbacks={};this.tickcount=0;this.activefunctions=0;this.registered=!1;this.currentTime=0;this.mustTick=!1;this.kernel=new s.Kernel({variables:[],functions:[{id:"cf",params:"a,b",exprString:"clamp(normalize($a, 0, $b), 0, 1)"},{id:"ic",params:null,exprString:"sub(!clock,latch(!clock, 1))"}],expressions:[{id:"seconds",exprString:"mul(!clock, 0.001)"},{id:"dt",exprString:"mul(derivative(!clock, !tick), 0.001)"},{id:"scroll_y",exprString:"!scroll_y"},{id:"scroll_x",exprString:"!scroll_x"},]});this.kernel.setQueryHandler(r)}return __extends(u,t),u.prototype.run=function(t,i,u,f){var h=this,l,a,c,s,v,y;if(!u.length)throw new Error("tried running no animations");for(this.registered||(this.registered=!0,r(this)),this.activefunctions++,l=[],a=0;a<u.length;++a)c=u[a],s=c.id,l.push(s),s===t&&(this.onCompleteCallbacks[s]=f),this.kernel.addExpression(s,c.getExpression()),this.kernel.wakeExpression(s,!c.getMaintainStateOnStart()),this.kernel.reportExpression(s,!0),v=c.getTarget(),v&&(y=i[v.getElementId()],y&&(this.functionbindings[s]=new e(y,new n.Properties.ModelTarget(c.getTarget()))));return new o(function(){for(var n,r,i=0;i<l.length;++i)n=l[i],h.kernel.suspendExpression(n),h.kernel.reportExpression(n,!1),n===t?(delete h.onCompleteCallbacks[n],h.kernel.releaseExpression(n)):(r=h.functionbindings[n],r&&r.compact()),delete h.functionbindings[n];h.activefunctions--;f()})},u.prototype.jumpstart=function(){this.mustTick=!0;this.registered||(this.registered=!0,r(this))},u.prototype.idle=function(){return!this.mustTick&&this.activefunctions===0},u.prototype.onUnregistered=function(){this.registered=!1;this.tickedcallback()},u.prototype.tickForwardBy=function(n){this.diffFromSystemTime!==undefined&&(this.diffFromSystemTime+=n);this.tickInternal(this.currentTime+n)},u.prototype.tick=function(n){this.mustTick=!1;this.diffFromSystemTime===undefined&&(this.diffFromSystemTime=this.currentTime+16-n);this.tickInternal(n+this.diffFromSystemTime)},u.prototype.tickInternal=function(n){var t,i,r;this.currentTime=n;this.preticked(n);this.tickcount++;t=this.interrogations.fetch();t.clock.value=n;t.tick.value=this.tickcount;this.kernel.tick(t);i=this.kernel.outputValues;r=this.fetchScheduledCompletes(i);this.applyOutputBindings(i);r.forEach(function(n){return n()});this.tickedcallback()},u.prototype.applyOutputBindings=function(n){var t,i,r;for(t in n)i=this.functionbindings[t],i&&(r=n[t],i.apply(r))},u.prototype.fetchScheduledCompletes=function(n){var r=[],u=this.onCompleteCallbacks,t,i;for(t in u){if(i=n[t],i===undefined)throw new Error("Key missing from animation kernel: '"+t+"'. Possibly a stale onCompleteCallbacks function");i>=0&&r.push(u[t])}return r},u.prototype.removeTargetBindings=function(n){var t,i;for(t in this.functionbindings)i=this.functionbindings[t],i.target===n&&(this.kernel.releaseExpression(t),delete this.functionbindings[t])},u.prototype.dispose=function(){t.prototype.dispose.call(this);this.kernel.setQueryHandler(null)},u.defaultInitialClockFunction="ic\\(\\)",u}(Disposable);n.FunctionalAnimator=f;e=function(){function n(n,t){this.target=n;this.modeltarget=t;this.boundprop=n.getModelProperty(t.property)}return n.prototype.apply=function(n){this.boundprop.set(this.modeltarget,n)},n.prototype.compact=function(){this.target.compactdom()},n}();o=function(){function n(n){this.callback=n;this.disposed=!1}return n.prototype.checkAndProvokeFinished=function(){},n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.callback&&this.callback())},n.prototype.finalize=function(){},n}();n.ScheduleTickable=r;n.ticktime=0;u=window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,33)}})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){function u(n){return new i.Track(n.property,[n.from,n.to])}var r=n.Model.RM,i=CssAnimation,f=function(){function n(n){this.engine=n;this.animationCache={};this.snapOutput=!1}return n.prototype.run=function(n,i,r,u){var e=this,f=i.mapmany(function(t){var u=n.transitions[t],i=r[u.getElementId()],f="animation_"+t+"_on_"+i.id,o=u.containerIds.getCollection().mapSome(function(t){var r=n.containers[t],u=r.effectIds.getCollection().map(function(t){return n.effects[t]});return e.makeAndApplyPropertyTransition(i,r,u,!1)});return e.createAnimationTasks(i,f,o)}),o=new s(f,u),h=t.after(f.length,function(){for(var e,u,h,f,c,t=0,s=i.length;t<s;++t)if(e=n.transitions[i[t]],u=r[e.getElementId()],u)for(h=e.containerIds.getCollection(),f=0,c=h.length;f<c;++f){var v=n.containers[f],l=u.getProperty(v.getAnimatablePropertyName()),a=u.dom();a&&(a.style[l.cssproperty()]=l.compactvalue())}o.dispose()});return f.forEach(function(n){n.task.done=h;n.task.start()}),o},n.prototype.cache=function(n,t,i){var r=this;t.forEach(function(t){var f=n.transitions[t],u=i[f.getElementId()],e="animation_"+t+"_on_"+u.id,o=f.containerIds.getCollection().mapSome(function(t){var i=n.containers[t],f=i.effectIds.getCollection().map(function(t){return n.effects[t]});return r.makeAndApplyPropertyTransition(u,i,f,!0)});r.fetchAnimationStoryboards(u,e,o)})},n.prototype.clearAnimationCache=function(){for(var n in this.animationCache)this.animationCache[n].destroy();this.animationCache={};i.setDynamicStyleSheetRecreated(!1)},n.prototype.makeAndApplyPropertyTransition=function(n,t,u,f){var o=n.getProperty(t.getAnimatablePropertyName()),c=o.cssproperty(),s,h;return this.snapOutput||t.getAnimatablePropertyName()===2||t.getDuration()===0&&t.getDelay()===0?(f||this.applyTransition(n,t,u,!0),undefined):(this.applyTransition(n,t,u,!1),s=o.cssvalue(),this.applyTransition(n,t,u,!0),h=o.cssvalue(),f&&this.applyTransition(n,t,u,!1),new e(c,new i.Constant(s),new i.Constant(h),r.AnimationCurve[t.getCurve()],t.getDelay(),t.getDuration()))},n.prototype.applyTransition=function(n,t,i,r){var u=t.getAnimatablePropertyName();i.forEach(function(t){n.setProperty({property:u,transformIdx:t.getTransformIndex(),componentIdx:t.getTransformComponent()},r?t.getEndValue():t.getStartValue())})},n.prototype.createAnimationTasks=function(n,t,r){var e=n.dom(),s,h,u,f,c;if(!e||!r.length)return[];for(e.style[Modernizr.prefixed("animation")]="",s=[],h=this.fetchAnimationStoryboards(n,t,r),u=0;u<h.length;++u)f=r[u],c=new i.Storybinding(e,h[u]),s.push(new o(new i.Task(c,f.duration,f.delay,f.curve,"transition animation"),n));return s},n.prototype.fetchAnimationStoryboards=function(n,t,r){var e,h,o,s,f;if(!r.length)throw new Error("trying to create a task with no transitions");if(e=[],r.homogeneous("curve","delay","duration")){if(f=this.animationCache[t],f)return[f];f=this.animationCache[t]=new i.Storyboard(t,r.map(u));e.push(f)}else for(h=r.map(function(n){return t+"_"+n.property}),o=0;o<h.length;++o){if(s=h[o],f=this.animationCache[s],f){e.push(f);continue}f=this.animationCache[s]=new i.Storyboard(s,[u(r[o])]);e.push(f)}return e},n.prototype.removeTargetBindings=function(){},n}();t.CssAnimator=f;var e=function(){function n(n,t,i,u,f,e){this.property=n;this.from=t;this.to=i;this.curve=u;this.delay=f;this.duration=e;switch(u){case r.AnimationCurve[10]:this.curve="ease";break;case r.AnimationCurve[6]:this.curve="ease-in";break;case r.AnimationCurve[9]:this.curve="ease-out";break;case r.AnimationCurve[8]:this.curve="ease-in-out";break;default:this.curve="linear"}}return n}(),o=function(){function n(n,t){this.task=n;this.target=t;this.listening=!0;t.addDomListener(this)}return n.prototype.domAttached=function(){},n.prototype.domDetached=function(){this.task.dispose()},n.prototype.dispose=function(){this.listening&&(this.target.removeDomListener(this),this.listening=!1);this.task.dispose()},n}(),s=function(){function n(n,t){this.tasks=n;this.callback=t;this.disposed=!1;this.starttime=platform.now();this.timeout=Utilities.scheduler.schedule(200,this.ontimeout.bind(this))}return n.prototype.checkAndProvokeFinished=function(){for(var t,n=0,i=this.tasks.length;n<i;++n)t=this.tasks[n].task,t.shouldBeDone()&&t.terminate()},n.prototype.ontimeout=function(){this.timeout=undefined;this.tasks.filter(function(n){return!n.task.isStarted()}).forEach(function(n){return n.dispose()})},n.prototype.dispose=function(){this.disposed||(this.timeout&&(this.timeout.dispose(),this.timeout=undefined),this.disposed=!0,this.tasks.forEach(function(n){n.dispose()}),this.callback())},n.prototype.finalize=function(){},n}()})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){this.owner=n;this.listeners=[]}return n.prototype.addListener=function(n){this.listeners.push(n)},n.prototype.removeListener=function(n){var t=this.listeners.indexOf(n);if(t<0)throw new Error("tried removing a listener that wasn't in the collection");this.listeners.splice(t,1)},n.prototype.signal=function(){for(var n=0;n<this.listeners.length;++n)this.listeners[n].changed(this.owner)},n}();n.Notifier=t})(t=n.Properties||(n.Properties={}))})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=3,r=$.browser.webkit?"-webkit-transform":"transform",i=function(){function t(t){this._values=t;this.notifier=new n.Notifier(this)}return t.prototype.reset=function(){for(var n=0;n<this._values.length;n++)this._values[n]=0},t.prototype.resetDefault=function(n){for(var t=0;t<this._values.length;t++)this._values[t]=n},t.prototype.get=function(n){if(n<0||n>this._values.length)throw new Error("component index out of bounds: "+n);return this._values[n]},t.prototype.set=function(n,t){if(n<0||n>this._values.length)throw new Error("component index out of bounds: "+n);var i=this._values[n]!==t;this._values[n]=t;i&&this.notifier.signal()},t.prototype.value=function(){return this._values.slice(0)},t.prototype.assign=function(n){this._values=n;this.notifier.signal()},t.prototype.add=function(n){for(var i=this._values.length,t=0;t<i;++t)this._values[t]+=n[t];this.notifier.signal()},t.prototype.sub=function(n){for(var i=this._values.length,t=0;t<i;++t)this._values[t]-=n[t];this.notifier.signal()},t.prototype.cssproperty=function(){return r},t}(),u,f,e,o,s,h,c,l,a,v,y,p,w,b,k;n.ComponentTransform=i;u=function(){function t(t,i){this.transform=t;this.cachedCss=i;this.notifier=new n.Notifier(this);i||(this.cachedCss=t.cssvalue());t.notifier.addListener(this)}return t.prototype.reset=function(){this.transform.reset()},t.prototype.get=function(n){return this.transform.get(n)},t.prototype.set=function(n,t){return this.transform.set(n,t)},t.prototype.changed=function(n){this.cachedCss=n.cssvalue();this.notifier.signal()},t.prototype.cssproperty=function(){return this.transform.cssproperty()},t.prototype.cssvalue=function(){return this.cachedCss},t.prototype.compactvalue=function(){return this.transform.compactvalue()},t.prototype.clone=function(){return new t(this.transform,this.cachedCss)},t}();n.CachedTransform=u;f=function(n){function i(t,i,r){n.call(this,[t,i,r])}return __extends(i,n),i.prototype.cssvalue=function(){var n=this.value();return"rotateX("+n[0].toFixed(t)+"deg) rotateY("+n[1].toFixed(t)+"deg) rotateZ("+n[2].toFixed(t)+"deg)"},i.prototype.cssinverse=function(){var n=this.value();return"rotateZ("+(-n[2]).toFixed(t)+"deg) rotateY("+(-n[1]).toFixed(t)+"deg) rotateX("+(-n[0]).toFixed(t)+"deg)"},i.prototype.clone=function(){var n=this.value();return new i(n[0],n[1],n[2])},i.prototype.compactvalue=function(){var n=this.value();return n[0]===0&&n[1]===0&&n[2]===0?"":this.cssvalue()},i}(i);n.Rotate3D=f;e=function(n){function i(t,i,r,u){n.call(this,[t,i,r,u])}return __extends(i,n),i.prototype.cssvalue=function(){var n=this.value();return"rotate3d("+n[0].toFixed(t)+", "+n[1].toFixed(t)+", "+n[2].toFixed(t)+", "+n[3].toFixed(t)+"deg)"},i.prototype.compactvalue=function(){var n=this.value();return n[3]%360==0?"":this.cssvalue()},i.prototype.cssinverse=function(){var n=this.value();return"rotate3d("+n[0].toFixed(t)+", "+n[1].toFixed(t)+", "+n[2].toFixed(t)+", "+(-n[3]).toFixed(t)+"deg)"},i.prototype.clone=function(){var n=this.value();return new i(n[0],n[1],n[2],n[3])},i}(i);n.AxisAngle=e;o=function(n){function i(t){n.call(this,[t])}return __extends(i,n),i.prototype.cssvalue=function(){return"rotate("+this.get(0).toFixed(t)+"deg)"},i.prototype.compactvalue=function(){var n=this.value();return n[0]%360==0?"":this.cssvalue()},i.prototype.cssinverse=function(){return"rotate("+(-this.get(0)).toFixed(t)+"deg)"},i.prototype.clone=function(){return new i(this.get(0))},i}(i);n.Rotate2D=o;s=function(n){function i(t,i,r){n.call(this,[t,i,r]);this.defaultScaleValue=1}return __extends(i,n),i.prototype.reset=function(){n.prototype.resetDefault.call(this,this.defaultScaleValue)},i.prototype.cssvalue=function(){return"scale3d("+this.value().map(function(n){return n.toFixed(t)}).join(",")+")"},i.prototype.compactvalue=function(){var n=this.value();return n[0]===1&&n[1]===1&&n[2]===1?"":this.cssvalue()},i.prototype.clone=function(){var n=this.value();return new i(n[0],n[1],n[2])},i}(i);n.Scale3D=s;h=function(n){function i(t,i){n.call(this,[t,i]);this.defaultScaleValue=1}return __extends(i,n),i.prototype.reset=function(){n.prototype.resetDefault.call(this,this.defaultScaleValue)},i.prototype.cssvalue=function(){return"scale("+this.value().map(function(n){return n.toFixed(t)}).join(",")+")"},i.prototype.compactvalue=function(){var n=this.value();return n[0]===1&&n[1]===1?"":this.cssvalue()},i.prototype.clone=function(){var n=this.value();return new i(n[0],n[1])},i}(i);n.Scale2D=h;c=function(n){function i(t,i,r){n.call(this,[t,i,r])}return __extends(i,n),i.prototype.cssvalue=function(){return"translate3d("+this.value().map(function(n){return n.toFixed(t)}).join("em,")+"em)"},i.prototype.compactvalue=function(){var n=this.value();return n[0]===0&&n[1]===0&&n[2]===0?"":this.cssvalue()},i.prototype.cssinverse=function(){return"translate3d("+this.value().map(function(n){return(-n).toFixed(t)}).join("em,")+"em)"},i.prototype.clone=function(){var n=this.value();return new i(n[0],n[1],n[2])},i}(i);n.Translate3D=c;l=function(n){function i(t,i){n.call(this,[t,i])}return __extends(i,n),i.prototype.cssvalue=function(){return"translate("+this.value().map(function(n){return n.toFixed(t)}).join("em,")+"em)"},i.prototype.compactvalue=function(){var n=this.value();return n[0]===0&&n[1]===0?"":this.cssvalue()},i.prototype.cssinverse=function(){return"translate("+this.value().map(function(n){return(-n).toFixed(t)}).join("em,")+"em)"},i.prototype.clone=function(){var n=this.value();return new i(n[0],n[1])},i}(i);n.Translate2D=l;a=function(n){function i(t,i,r,u){u===void 0&&(u=!1);n.call(this,[t,i]);this.scale=r;this.accelerated=u}return __extends(i,n),i.prototype.accelerate=function(){this.accelerated||(this.accelerated=!0,this.notifier.signal())},i.prototype.decelerate=function(){this.accelerated&&(this.accelerated=!1,this.notifier.signal())},i.prototype.cssvalue=function(){var n=this.value();return this.accelerated?"translate3d("+n[0].toFixed(t)+"em,"+n[1].toFixed(t)+"em, 0em)":"translate("+this.toRoundedPixels(n[0])+"px,"+this.toRoundedPixels(n[1])+"px)"},i.prototype.compactvalue=function(){return this.cssvalue()},i.prototype.cssinverse=function(){var n=this.value();return this.accelerated?"translate3d("+(-n[0]).toFixed(t)+"em,"+(-n[1]).toFixed(t)+"em, 0em)":"translate("+this.toRoundedPixels(-n[0])+"px,"+this.toRoundedPixels(-n[1])+"px)"},i.prototype.clone=function(){var n=this.value();return new i(n[0],n[1],this.scale,this.accelerated)},i.prototype.toRoundedPixels=function(n){return v(n*100*this.scale())},i}(i);n.AcceleratedTranslate2D=a;v=Math.round;y=function(i){function u(t){i.call(this,[t]);this._depth=t;this.notifier=new n.Notifier(this)}return __extends(u,i),u.prototype.getdepth=function(){return this.get(0)},u.prototype.setdepth=function(n){this.set(0,n)},u.prototype.cssproperty=function(){return r},u.prototype.cssvalue=function(){return"perspective("+this.getdepth().toFixed(t)+"em)"},u.prototype.compactvalue=function(){return this.cssvalue()},u.prototype.clone=function(){return new u(this.getdepth())},u}(i);n.Perspective=y;p=function(){function t(t){this.transform=t;this.notifier=new n.Notifier(this);t.notifier.addListener(this)}return t.prototype.reset=function(){this.transform.reset()},t.prototype.changed=function(){this.notifier.signal()},t.prototype.get=function(n){return this.transform.get(n)},t.prototype.set=function(n,t){this.transform.set(n,t)},t.prototype.cssproperty=function(){return this.transform.cssproperty()},t.prototype.cssvalue=function(){return this.transform.cssinverse()},t.prototype.compactvalue=function(){return this.cssvalue()},t.prototype.clone=function(){return new t(this.transform.clone())},t}();n.Inverse=p;w=function(){function t(t,i){this.scale=t;this.transform=i;this.notifier=new n.Notifier(this);for(var r=0;r<t.length;++r)i.set(r,t[r]*i.get(r));i.notifier.addListener(this)}return t.prototype.reset=function(){this.transform.reset()},t.prototype.changed=function(){this.notifier.signal()},t.prototype.get=function(n){return this.transform.get(n)},t.prototype.set=function(n,t){if(n>=this.scale.length)throw new Error("invalid component index provided to Scaled transform");this.transform.set(n,this.scale[n]*t)},t.prototype.scaled=function(){return this.transform},t.prototype.cssproperty=function(){return this.transform.cssproperty()},t.prototype.cssvalue=function(){return this.transform.cssvalue()},t.prototype.compactvalue=function(){return this.transform.compactvalue()},t.prototype.cssinverse=function(){return this.transform.cssinverse()},t.prototype.clone=function(){return new t(this.scale,this.transform.clone())},t}();n.Scaled=w;b=function(){function t(){this.notifier=new n.Notifier(this)}return t.prototype.reset=function(){},t.prototype.get=function(){return 0},t.prototype.set=function(){},t.prototype.cssproperty=function(){return r},t.prototype.cssvalue=function(){return""},t.prototype.compactvalue=function(){return""},t.prototype.cssinverse=function(){return""},t.prototype.clone=function(){return new t},t}();n.Identity=b;k=function(){function t(t){this.transforms=t;this.notifier=new n.Notifier(this);for(var i=0;i<t.length;++i)t[i].notifier.addListener(this)}return t.prototype.dispose=function(){for(var n=0;n<this.transforms.length;++n)this.transforms[n].notifier.removeListener(this)},t.prototype.reset=function(){this.transforms.forEach(function(n){return n.reset()})},t.prototype.setstack=function(n){for(var t=0;t<this.transforms.length;++t)this.transforms[t].notifier.removeListener(this);for(this.transforms=n,t=0;t<this.transforms.length;++t)this.transforms[t].notifier.addListener(this);this.notifier.signal()},t.prototype.get=function(){throw new Error("can't get number from transform stack");},t.prototype.set=function(){throw new Error("can't set number to transform stack");},t.prototype.pushFront=function(n){n.notifier.addListener(this);this.transforms.unshift(n);this.notifier.signal()},t.prototype.pushBack=function(n){n.notifier.addListener(this);this.transforms.push(n);this.notifier.signal()},t.prototype.pop=function(){var n=this.last();return n.notifier.removeListener(this),this.transforms.length--,n},t.prototype.transform=function(n){return this.transforms[n]},t.prototype.last=function(){if(this.transforms.length===0)throw new Error("can't fetch last transform of empty stack");return this.transforms[this.transforms.length-1]},t.prototype.empty=function(){return this.transforms.length===0},t.prototype.cssproperty=function(){return r},t.prototype.cssvalue=function(){for(var t="",i=this.transforms,n=0,r=i.length;n<r;++n)t+=i[n].cssvalue()+" ";return t},t.prototype.compactvalue=function(){for(var n,t="",r=this.transforms,i=0,u=r.length;i<u;++i)(n=r[i].compactvalue(),n.length)&&(t+=t.length?" "+n:n);return t},t.prototype.clone=function(){return new t(this.transforms.map(function(n){return n.clone()}))},t.prototype.changed=function(){this.notifier.signal()},t}();n.TransformStack=k})(t=n.Properties||(n.Properties={}))})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var o=function(){function t(t,i){this.cssprop=t;this.value=i;this.notifier=new n.Notifier(this)}return t.prototype.get=function(){return this.value},t.prototype.set=function(n){var t=this.value!==n;this.value=n;t&&this.notifier.signal()},t.prototype.cssproperty=function(){return this.cssprop},t.prototype.cssvalue=function(){return this.value.toString()},t.prototype.compactvalue=function(){return this.cssvalue()},t}(),t,i,r,u,f,e;n.NumberProperty=o;t=Math.round;i=function(){function i(i,r,u){u===void 0&&(u="");this.cssprop=i;this.units=u;this.notifier=new n.Notifier(this);this.value=t(r)}return i.prototype.get=function(){return this.value},i.prototype.set=function(n){var i=this.value;this.value=t(n);this.value!==i&&this.notifier.signal()},i.prototype.cssproperty=function(){return this.cssprop},i.prototype.cssvalue=function(){return this.value.toString()+this.units},i.prototype.compactvalue=function(){return this.cssvalue()},i}();n.IntegerProperty=i;r=function(n){function t(t,i,r,u){u===void 0&&(u="");n.call(this,t,i*r.get(),u);this.scale=r;r.notifier.addListener(this)}return __extends(t,n),t.prototype.set=function(t){this.inputVal=t;n.prototype.set.call(this,t*this.scale.get())},t.prototype.changed=function(){this.set(this.inputVal)},t.prototype.dispose=function(){this.scale.notifier.removeListener(this)},t}(i);n.ScaledIntegerProperty=r;u=function(){function i(t,i,r){this.cssprop=t;this.value=i;this.enums=r;this.notifier=new n.Notifier(this);this.set(i)}return i.prototype.get=function(){return this.value},i.prototype.set=function(n){var i=this.value;this.value=MathUtils.clamp(t(n),0,this.enums.length-1);this.value!==i&&this.notifier.signal()},i.prototype.cssproperty=function(){return this.cssprop},i.prototype.cssvalue=function(){return this.enums[this.value]},i.prototype.compactvalue=function(){return this.cssvalue()},i}();n.EnumerableProperty=u;f=function(){function t(t,i,r,u){this.cssprop=t;this.falsestr=r;this.truestr=u;this.notifier=new n.Notifier(this);this.value=i?1:0}return t.prototype.get=function(){return this.value},t.prototype.set=function(n){var t=this.asbool();this.value=n;this.asbool()!==t&&this.notifier.signal()},t.prototype.asbool=function(){return this.value>0?!0:!1},t.prototype.cssproperty=function(){return this.cssprop},t.prototype.cssvalue=function(){return this.asbool()?this.truestr:this.falsestr},t.prototype.compactvalue=function(){return this.cssvalue()},t}();n.BooleanProperty=f;e=function(){function t(t,i){this.target=t;this.notifier=new n.Notifier(this);var r=i?1:0;this.value=1-r;this.set(r)}return t.prototype.get=function(){return this.value},t.prototype.set=function(n){var t=this.asbool();this.value=n;this.asbool()!==t&&(t?this.target.show():this.target.hide(),this.notifier.signal())},t.prototype.asbool=function(){return this.value>0?!0:!1},t.prototype.cssproperty=function(){return"visibility"},t.prototype.cssvalue=function(){return""},t.prototype.compactvalue=function(){return this.cssvalue()},t}();n.HiddenProperty=e})(t=n.Properties||(n.Properties={}))})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var r=function(){function n(n){this.property=n.getAnimatablePropertyName();this.transformIdx=n.getTransformIndex();this.componentIdx=n.getTransformComponent()}return n}(),t,i;n.ModelTarget=r;t=function(){function n(n,t){this.property=n;this.transformoffset=t}return n.prototype.set=function(n,t){this.property.transform(this.transformoffset+n.transformIdx).set(n.componentIdx,t)},n.prototype.get=function(n){return this.property.transform(this.transformoffset+n.transformIdx).get(n.componentIdx)},n}();n.TransformBinding=t;i=function(){function n(n){this.property=n}return n.prototype.set=function(n,t){this.property.set(t)},n.prototype.get=function(){return this.property.get()},n}();n.PropertyBinding=i})(t=n.Properties||(n.Properties={}))})(t=n.AnimationManager||(n.AnimationManager={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function t(n,t,i,r){this.el=n;this.directVe=r}return t.prototype.init=function(t){if(this.target=t,this.engine=n.AnimationManager.Engine,!this.engine)throw new Error("We should always have an animation engine when building up the view hierarchy");this.engine.getDomHandles().bind(this.target,this.directVe);this.engine.getTargetHandles().addListener(t,this)},t.prototype.bound=function(n){n.active()||this.directVe.cull()},t.prototype.unbound=function(){},t.prototype.dispose=function(){this.engine.getTargetHandles().removeListener(this.target,this);this.engine.getDomHandles().unbind(this.target,this.directVe)},t}();t.BindingBase=i})(i=t.Animatable||(t.Animatable={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._element=n;t._mapReady=!1}return n.prototype.dispose=function(){},n.prototype.updateCreate=function(n,t){var i=this;i._map||i.createMap(t.mapParams,t.mapCallbackContext,t.mapCallback,t.pinClickedCallback)},n.prototype.createMap=function(n,t,i,r){var f=this,e,u=f.setDefaultMapOptions(n),o,h,s;if(u.pins.getLength()>0){for(o=0;o<u.pins.getLength();o++)if(e=u.pins.itemAtIndex(0).getCoordinate(),e)break;e!=null&&(h=new Microsoft.Maps.Location(e.getLatitude(),e.getLongitude()),u.center=h)}s=document.createElement("div");f._element.appendChild(s);f._map=new Microsoft.Maps.Map(s,u);f.addPins(u.pins,t,r);i.call(t,f._map)},n.prototype.setDefaultMapOptions=function(n){var t=n;return t.credentials=StoryPageSettings.BingMapAppKey,t.showScalebar=!1,t.enableClickableLogo=!1,t.enableSearchLogo=!1,t.showCopyright=!1,t.showMapTypeSelector=!1,t.disableKeyboardInput=!0,t.showDashboard=!1,t.tileBuffer=2,t},n.prototype.addPins=function(n,t,i){for(var e=this,f,r,o,u=0;u<n.getLength();u++)r=n.itemAtIndex(u).getCoordinate(),r!=null&&(o=new Microsoft.Maps.Location(r.getLatitude(),r.getLongitude()),f=new Microsoft.Maps.Pushpin(o,{text:n.itemAtIndex(u).getContentId()}),Microsoft.Maps.Events.addHandler(f,"mousedown",e.createPinCallback(t,i)),e._map.entities.push(f))},n.prototype.createPinCallback=function(n,t){return function(){var i=Array.prototype.slice.call(arguments);t.call(n,i[0].target.getText())}},n}();n.BindingBase=t})(t=n.BingMap||(n.BingMap={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){this.el=n}return n.prototype.updateBoxShadow=function(n,t){if(!t||!DropShadow.isDropShadowVisible(t)){this.el.style.boxShadow="";this.el.dropShadow=null;return}this.el.style.boxShadow=DropShadow.cssFromDropShadow(t);this.el.dropShadow=t},n}();n.BindingBase=t})(t=n.BoxShadow||(n.BoxShadow={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(){function i(n,t,i){var r=this;r._element=n;r._viewElement=i}return i.prototype.getDiv=function(){return this._element},i.prototype.getManifestId=function(){return this._manifestId},i.prototype.getManifest=function(){return this._manifest},i.prototype.getData=function(){return this._agaveData},i.prototype.getDesiredImageHeight=function(){return this._agaveHeight},i.prototype.getDesiredImageWidth=function(){return this._agaveWidth},i.prototype.getAgaveIsEdit=function(){return this._agaveIsEdit},i.prototype.getAgaveSettingsData=function(){return this._agaveSettings},i.prototype.getContentId=function(){return this._viewElement instanceof n.View.ViewElements.AgaveLayoutVEBase?this._viewElement.getContentId():null},i.prototype.setAgaveFailed=function(t){this._viewElement instanceof n.View.ViewElements.AgaveLayoutVEBase&&this._viewElement.setAgaveFailed(t)},i.prototype.dispose=function(){this._osfControlId&&n.Agaves.unregisterControl(this._osfControlId)},i.prototype.updateCreate=function(n,t){var i=this;t.agaveId&&StoryPageSettings.SiteAgaveEnabled&&(this._manifestId!==t.agaveId||this._agaveTraversalId!==t.agaveTraversalId)&&(i.dispose(),i.setAgaveFailed(!1),this._manifest=t.agaveManifest,this._manifestId=t.agaveId,this._agaveData=t.agaveData,this._agaveHeight=t.agaveHeight,this._agaveWidth=t.agaveWidth,this._agaveSettings=t.agaveSettings,this._agaveIsEdit=t.agaveIsEdit,this._agaveTraversalId=t.agaveTraversalId,StoryPageSettings.SiteChartRenderingEnabled||!this.isChartManifestId(this._manifestId))&&this.createAgave()},i.prototype.updateDataChanged=function(t,i){this._agaveData!==i.agaveData&&StoryPageSettings.SiteAgaveEnabled&&(this._agaveData=i.agaveData,this._osfControlId&&n.Agaves.raiseBindingDataChangedEvent(this._osfControlId))},i.prototype.updateSizeChanged=function(t,i){(this._agaveHeight!==i.agaveHeight||this._agaveWidth!==i.agaveWidth)&&StoryPageSettings.SiteAgaveEnabled&&(this._agaveHeight=i.agaveHeight,this._agaveWidth=i.agaveWidth,this._osfControlId&&n.Agaves.raiseBindingDataChangedEvent(this._osfControlId))},i.prototype.updateSettingsChanged=function(t,i){this._agaveSettings!==i.agaveSettings&&StoryPageSettings.SiteAgaveEnabled&&(this._agaveSettings=i.agaveSettings,this._osfControlId&&n.Agaves.raiseSettingsChangedEvent(this._osfControlId))},i.prototype.updateIsEditChanged=function(t,i){this._agaveIsEdit!==i.agaveIsEdit&&StoryPageSettings.SiteAgaveEnabled&&(this._agaveIsEdit=i.agaveIsEdit,this._osfControlId&&n.Agaves.raiseActiveViewChangedEvent(this._osfControlId))},i.prototype.createAgave=function(){this._osfControlId=n.Agaves.insertControl(this)},i.prototype.isChartManifestId=function(n){return n&&t.BindingBase.chartManifestId.toLowerCase()===n.toLowerCase()},i.chartManifestId="0aa5a139-28c0-46ce-ad76-368af51a1b6f",i}();t.BindingBase=i})(i=t.ContentAgave||(t.ContentAgave={}))})(i=t.Bindings||(t.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._el=n}return n.prototype.updateEmbedVideo=function(n,t){var i=this;$(i._el).html(t)},n}();n.BindingBase=t})(t=n.EmbedVideo||(n.EmbedVideo={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(t){var i;(function(t){var u=function(){function t(n,t){if(this._hidingDisabled=!1,this._hidden=!0,this._lastset=0,this._enabled=!1,this._scrollbar=n,this._parent=t,UX.GetScrollbarSize()===0){this._scrollbar.style.display="none";this._scrollbar=null;return}this._scrollextents=document.createElement("div");this._scrollextents.className="fakecontent";this._scrollbar.appendChild(this._scrollextents);$(this._scrollbar).addClass("scrollbar-hidden")}return t.prototype.init=function(t){var u=this;this._scrollListener=t.listener;this._direction=t.direction;this._scrollListener.updateDomScroll[this._direction]=this.updateScrollOffset.bind(this);this._scrollListener.getDomScroll[this._direction]=this.getScrollOffset.bind(this);this._parentMouseWheelHandler=function(n){if(!n.ctrlKey&&u._scrollListener.canScroll(t.direction)&&(t.direction!==1||n.srcElement!==u._scrollbar&&n.target!==u._scrollbar)){n.preventDefault();var i=n.originalEvent,r=(t.direction===1?i.wheelDeltaY:i.wheelDeltaX)||i.wheelDelta||-30*i.detail;u._scrollListener.offsetByClientValue(t.direction,-.75*r);u.updateScrollbarVisibility()}};$(this._parent).on("mousewheel DOMMouseScroll",this._parentMouseWheelHandler);if(this._scrollbar!==null){this._strategy=t.direction==1?new i(this._scrollbar,this._scrollextents):new r(this._scrollbar,this._scrollextents);this._scrollbarMouseEnterHandler=function(){u._hidingDisabled=!0};this._scrollbarMouseLeaveHandler=function(){u._hidingDisabled=!1};$(this._scrollbar).on("mouseenter",this._scrollbarMouseEnterHandler);$(this._scrollbar).on("mouseleave",this._scrollbarMouseLeaveHandler);this._scrollbarScrollHandler=function(){var n=u._strategy.getElementScroll();if(u._lastset!==n){u._lastset=n;u._scrollListener.onScroll(t.direction,n);u.updateScrollbarVisibility()}};$(this._scrollbar).on("scroll",this._scrollbarScrollHandler);this._scrollbarMouseDownHandler=function(t){return n.ViewElements.ViewModel.viewinputlogger.scrollbarClicked(),t.which===2?(t.preventDefault(),!0):void 0};$(this._scrollbar).on("mousedown",this._scrollbarMouseDownHandler);this._parentMouseMoveHandler=function(){u.updateScrollbarVisibility()};$(this._parent).on("mousemove",this._parentMouseMoveHandler)}},t.prototype.updateScrollbarVisibility=function(){var n=this;if(!n._enabled){n._hidden||n.hideScrollbar();return}n._scrollListener.canScroll(n._direction)&&(n._hidden&&n.showScrollbar(),clearTimeout(n._hidetimeout),n._hidetimeout=setTimeout(function(){n._hidingDisabled||n.hideScrollbar()},2e3))},t.prototype.hideScrollbar=function(){clearTimeout(this._hidetimeout);$(this._scrollbar).addClass("scrollbar-hidden");this._hidden=!0},t.prototype.showScrollbar=function(){$(this._scrollbar).removeClass("scrollbar-hidden");this._hidden=!1},t.prototype.updateScrollSize=function(n,t){this._strategy&&this._strategy.setContentSize(t)},t.prototype.updateScrollOffset=function(n){var t=Math.round(n);t!==this._lastset&&(this._lastset=t,this._scrollbar)&&(this.updateScrollbarVisibility(),this._strategy.setElementScroll(t),this._lastset=this._strategy.getElementScroll())},t.prototype.getScrollOffset=function(){return this._lastset},t.prototype.updateEnabled=function(n,t){(this._enabled=t,this._scrollbar)&&(t?this.updateScrollbarVisibility():this.hideScrollbar())},t.prototype.dispose=function(){var t=$(this._parent),n;this._parentMouseWheelHandler&&t.off("mousewheel DOMMouseScroll",this._parentMouseWheelHandler);this._parentMouseMoveHandler&&t.off("mousemove",this._parentMouseMoveHandler);n=$(this._scrollbar);this._scrollbarMouseDownHandler&&n.off("mousedown",this._scrollbarMouseDownHandler);this._scrollbarMouseEnterHandler&&n.off("mouseenter",this._scrollbarMouseEnterHandler);this._scrollbarMouseLeaveHandler&&n.off("mouseleave",this._scrollbarMouseLeaveHandler);this._scrollbarScrollHandler&&n.off("scroll",this._scrollbarScrollHandler);this._scrollListener.updateDomScroll[this._direction]=null;this._scrollListener.getDomScroll[this._direction]=null;this._scrollListener=null;this._scrollextents=null;delete this._strategy},t}(),i,r;t.BindingBase=u;i=function(){function n(n,t){this.scrollbar=n;this.extents=t}return n.prototype.setElementScroll=function(n){this.scrollbar.scrollTop=n},n.prototype.offsetElementScroll=function(n){this.scrollbar.scrollTop+=n},n.prototype.setContentSize=function(n){this.extents.style.height=Math.round(n)+"px"},n.prototype.getElementScroll=function(){return this.scrollbar.scrollTop},n}();r=function(){function n(n,t){this.scrollbar=n;this.extents=t}return n.prototype.setElementScroll=function(n){this.scrollbar.scrollLeft=n},n.prototype.offsetElementScroll=function(n){this.scrollbar.scrollLeft+=n},n.prototype.setContentSize=function(n){this.extents.style.width=Math.round(n)+"px"},n.prototype.getElementScroll=function(){return this.scrollbar.scrollLeft},n}()})(i=t.Scroll||(t.Scroll={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){(function(n){n[n.HORIZONTAL=0]="HORIZONTAL";n[n.VERTICAL=1]="VERTICAL"})(n.ScrollDirection||(n.ScrollDirection={}));var t=n.ScrollDirection})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n,t,i){this.el=n;this.ve=i}return n.prototype.dispose=function(){removeEventListener("message",this.messageHandler,!1)},n.prototype.init=function(n){var t=this,i=this.messageHandler=function(i){i.source===t.el.contentWindow&&n.call(t.ve,i.data)};addEventListener("message",i,!1)},n}();n.BindingBase=t})(t=n.Message||(n.Message={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var r=function(){function n(n){var t=this;this.el=n;this.last=0;this.callback=function(){var n=t._strategy.scroll();if(t.last!==n){t.last=n;t._scrollListener.onScroll(t._direction,n)}};n.addEventListener("touchstart",function(){})}return n.prototype.init=function(n){this._scrollListener=n},n.prototype.updateDirection=function(n,r){var u=this;if(this._direction!==undefined&&$(this.el).off("scroll",this.callback),this._direction=r,this._scrollListener.updateDomScroll=[function(){},function(){}],this._scrollListener.getDomScroll=[function(){return 0},function(){return 0}],this._direction!==undefined){this._scrollListener.updateDomScroll[this._direction]=function(n){u.last!==n&&(u.last=u._strategy.scroll(n))};this._scrollListener.getDomScroll[this._direction]=function(){return u.last};this._strategy=r==1?new t(this.el):new i(this.el);$(this.el).on("scroll",this.callback)}},n.prototype.dispose=function(){$(this.el).off("scroll",this.callback)},n}(),t,i;n.BindingBase=r;t=function(){function n(n){this.scrollbar=n}return n.prototype.scroll=function(n){return n!==undefined&&(this.scrollbar.scrollTop=n),this.scrollbar.scrollTop},n}();i=function(){function n(n){this.scrollbar=n}return n.prototype.scroll=function(n){return n!==undefined&&(this.scrollbar.scrollLeft=n),this.scrollbar.scrollLeft},n}()})(t=n.NativeScroll||(n.NativeScroll={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r,u);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){var n=this},t}(n.BindingBase);n.Binding=t})(t=n.Animatable||(n.Animatable={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){var e,o;n.call(this,t,i,r);e=this;e._ve=r;e._createArgs=f;o=e._createWatcher=TDB.watcherTag(4800663,e,u,e._resolveCreate);u._subscribeToWatchable(o,2);e._createWatcher.resolve()}return __extends(t,n),t.prototype.update=function(n){var t=this;n==2&&t._createWatcher.resolve()},t.prototype._resolveCreate=function(n){var t=this,i=t._createArgs.call(t._ve,n);t.updateCreate(n,i)},t}(n.BindingBase);n.Binding=t})(t=n.BingMap||(n.BingMap={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f,e,o,s,h){var c,l;n.call(this,t,i,r);c=this;c._ve=r;c._createArgs=f;l=c._createWatcher=TDB.watcherTag(4800663,c,u,c._resolveCreate);u._subscribeToWatchable(l,2);c._dataChangedArgs=e;l=c._dataChangedWatcher=TDB.watcherTag(4800663,c,u,c._resolveDataChanged);u._subscribeToWatchable(l,2);c._sizeChangedArgs=o;l=c._sizeChangedWatcher=TDB.watcherTag(4800663,c,u,c._resolveSizeChanged);u._subscribeToWatchable(l,2);c._isEditChangedArgs=s;l=c._isEditChangedWatcher=TDB.watcherTag(4800663,c,u,c._resolveIsEditChanged);u._subscribeToWatchable(l,2);c._settingsChangedArgs=h;l=c._settingsChangedWatcher=TDB.watcherTag(4800663,c,u,c._resolveSettingsChanged);u._subscribeToWatchable(l,2);c._createWatcher.resolve();c._dataChangedWatcher.resolve();c._sizeChangedWatcher.resolve();c._isEditChangedWatcher.resolve();c._settingsChangedWatcher.resolve()}return __extends(t,n),t.prototype.update=function(n){var t=this;n==2&&(t._createWatcher.resolve(),t._dataChangedWatcher.resolve(),t._sizeChangedWatcher.resolve(),t._isEditChangedWatcher.resolve(),t._settingsChangedWatcher.resolve())},t.prototype._resolveCreate=function(n){var t=this,i=t._createArgs.call(t._ve,n);t.updateCreate(n,i)},t.prototype._resolveDataChanged=function(n){var t=this,i=t._dataChangedArgs.call(t._ve,n);t.updateDataChanged(n,i)},t.prototype._resolveSizeChanged=function(n){var t=this,i=t._sizeChangedArgs.call(t._ve,n);t.updateSizeChanged(n,i)},t.prototype._resolveIsEditChanged=function(n){var t=this,i=t._isEditChangedArgs.call(t._ve,n);t.updateIsEditChanged(n,i)},t.prototype._resolveSettingsChanged=function(n){var t=this,i=t._settingsChangedArgs.call(t._ve,n);t.updateSettingsChanged(n,i)},t}(n.BindingBase);n.Binding=t})(t=n.ContentAgave||(n.ContentAgave={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){var e,o;n.call(this,t,i,r);e=this;e._ve=r;e._embedVideoArgs=f;o=e._embedVideoWatcher=TDB.watcherTag(4800663,e,u,e._resolveEmbedVideo);u._subscribeToWatchable(o,2);e._embedVideoWatcher.resolve()}return __extends(t,n),t.prototype.update=function(n){var t=this;n==2&&t._embedVideoWatcher.resolve()},t.prototype._resolveEmbedVideo=function(n){var t=this,i=t._embedVideoArgs.call(t._ve,n);t.updateEmbedVideo(n,i)},t}(n.BindingBase);n.Binding=t})(t=n.EmbedVideo||(n.EmbedVideo={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){var e,o;n.call(this,t,i,r);e=this;e._ve=r;e._boxShadowArgs=f;o=e._boxShadowWatcher=TDB.watcherTag(4800663,e,u,e._resolveBoxShadow);u._subscribeToWatchable(o,2);e._boxShadowWatcher.resolve()}return __extends(t,n),t.prototype.update=function(n){var t=this;n==2&&t._boxShadowWatcher.resolve()},t.prototype._resolveBoxShadow=function(n){var t=this,i=t._boxShadowArgs.call(t._ve,n);t.updateBoxShadow(n,i)},t}(n.BindingBase);n.Binding=t})(t=n.BoxShadow||(n.BoxShadow={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f,e,o){var s,h;n.call(this,t,i,r);s=this;s._ve=r;s.init(f);s._scrollSizeArgs=e;h=s._scrollSizeWatcher=TDB.watcherTag(4800663,s,u,s._resolveScrollSize);u._subscribeToWatchable(h,4);s._enabledArgs=o;h=s._enabledWatcher=TDB.watcherTag(4800663,s,u,s._resolveEnabled);u._subscribeToWatchable(h,4)}return __extends(t,n),t.prototype.update=function(n){var t=this;n==4&&(t._scrollSizeWatcher.resolve(),t._enabledWatcher.resolve())},t.prototype._resolveScrollSize=function(n){var t=this,i=t._scrollSizeArgs.call(t._ve,n);t.updateScrollSize(n,i)},t.prototype._resolveEnabled=function(n){var t=this,i=t._enabledArgs.call(t._ve,n);t.updateEnabled(n,i)},t}(n.BindingBase);n.Binding=t})(t=n.Scroll||(n.Scroll={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f,e){var o,s;n.call(this,t,i,r);o=this;o._ve=r;o.init(f);o._directionArgs=e;s=o._directionWatcher=TDB.watcherTag(4800663,o,u,o._resolveDirection);u._subscribeToWatchable(s,2);o._directionWatcher.resolve()}return __extends(t,n),t.prototype.update=function(n){var t=this;n==2&&t._directionWatcher.resolve()},t.prototype._resolveDirection=function(n){var t=this,i=t._directionArgs.call(t._ve,n);t.updateDirection(n,i)},t}(n.BindingBase);n.Binding=t})(t=n.NativeScroll||(n.NativeScroll={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r);var e=this;e._ve=r;e.init(f)}return __extends(t,n),t.prototype.update=function(){},t}(n.BindingBase);n.Binding=t})(t=n.Message||(n.Message={}))})(t=n.Bindings||(n.Bindings={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){function i(n){if(!n)return undefined;for(var t=n.getParentContainer(),i=0,r=0,u=t&&t.position?t.position.getWidth():undefined,f=t&&t.position?t.position.getHeight():undefined;t;)i+=t.position.getLeft(),r+=t.position.getTop(),t=t.getParentContainer();return!!u&&!!f?new Rect(i,r,u,f):new Rect(i,r)}function r(t){return t?t.getParentContainer().getKeyFrameType()==n.View.ViewElements.NavigationHelper.getDetailViewKeyFrameType():!1}t.getAbsolutePosition=i;t.isDetailView=r})(i=t.LayoutUtilities||(t.LayoutUtilities={}))})(i=t.Common||(t.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){function f(){return i.ViewModel&&i.ViewModel.isEditMode&&!i.ViewModel.isEditMode.getValue()}var e=ClientAction.StatisticalMeasure,r=ClientAction.AggregationCounter,l=n.View.ViewElements.CastEditOwnerDialog,a=n.View.ViewElements.EditTokenRetrievalDialog,v=n.View.ViewElements.EditStoryNoUserDialog,y=n.View.ViewElements.EditStoryWrongUserDialog,u=n.Common,c,o,s,h;i.renderButtonClass="renderButton";i.verticalScrollClass="vScroll";i.horizontalScrollClass="hScroll";i.horizontalVerticalScrollClass="hvScroll";i.ViewModel=null;c=function(r){function f(n,t){r.call(this,n);this.clientSignalListeners=[];this.viewinputlogger=new h;this.interactionlogger=new s;this.scrollPositionlogger=new o;var f=this;f.args=t;f.showUpdateStatus=TDB.watchableTag(4476958,f,!1);this.parent.registerEventHandler(this.viewinputlogger);this.showDefaultShareButtonGroup=TDB.watcherTag(7935627,f,f,f.updateShowDefaultShareButtonGroup);this.titleWatcher=TDB.watcherTag(7976224,f,f,f.getModelTitle);Utilities.onResize(function(){var n,t,r;if(i.ViewModel){var f=u.Environment.getInstance().getWindowSize(),e=$(window).width(),o=$(window).height();e==f.w&&o==f.h||(r=i.ViewModel.previewVE,r.setRestoreState(),n=r._root.getValue().scroller.getValue(),n&&(t=n.fetchScrollValues()))}TDB.applyUpdate(function(){u.Environment.getInstance().updateWindowSize()},3);n&&t&&t.some(function(n){return n!==0})&&n.setScrollValues(t,!0)});addEventListener("load",Utilities.deferredEventHandler(function(){TDB.applyUpdate(function(){u.Environment.getInstance().updateWindowSize()})}),!1)}return __extends(f,r),f.prototype.getLastEditedContentId=function(){return null},f.prototype.showAccessibleModeLinkArgs=function(){return!n.Common.UrlHelper.getInstance().isAccessiblityView()},f.prototype.accessibleModeLinkAttrArgs=function(){return{href:u.UrlHelper.getInstance().accessibilityViewUrl(StoryPageSettings.LookupId),title:Resources.AccessibilityViewTooltip}},f.prototype.accessibleModeLinkTextArgs=function(){return Resources.AccessibilityView},f.prototype.notificationBarArgs=function(n){return t.Common.NotificationBarManager.getInstance().getCurrentNotificationBar(n)},f.prototype.setup=function(r,f,e,o){var s=this,h,c,p,w;s.setTelemetryContext({WorldId:s.getWorldId(),StyleId:s.getLayoutStyleId()});s.storyViewMode=TDB.watchableTag(6317384,s,r);h=r.toString();StoryLog.TraceTag(3671521,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"User Action : Opening in "+h,null);c=r===2;s.waitingForUpdate=f;s.blockingUpdate=e;s.hidePreview=o;s.isPreviewMode=TDB.watcher(this,this,this.computeIsPreviewMode);s.isEditMode=TDB.watcher(this,this,this.computeIsEditMode);s.isEmbeddedMode=TDB.watcher(this,this,this.computeIsEmbeddedMode);s.inEmbedHostMode=TDB.watcher(this,this,this.computeInEmbedHostMode);s.canAppFullscreen=TDB.watcher(this,this,this.computeCanAppFullscreen);s.authoringPaneOpen=TDB.watchable(this,!1);s.fullScreenManager=new i.FullScreenManager(s.canAppFullscreen);s.previewVE=new n.View.ViewElements.PreviewVE(s,s.args.currentStory);(r===4||c&&n.Settings.ServiceSwitches.authoringDisabled.getValue())&&(p=t.Common.NotificationBarManager.getInstance(),p.createAndShowNotificationBar({text:Resources.AuthoringDisabledNotificationMessage},!0),StoryLog.TraceTag(6391390,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Author attempted to browse to a Sway while authoring is disabled."));StoryPageSettings.EditTokenRetrievalId&&a.createAndShow(StoryPageSettings.LookupId,StoryPageSettings.EditTokenRetrievalId,s.getModelTitle());StoryPageSettings.CastEditEnabled&&!s.isEditMode.getValue()&&Utilities.query.fetch("done")&&(CommonSettings.IsAuthenticated?l.createAndShow(StoryPageSettings.LookupId,s.getModelTitle(),StoryPageSettings.CastUrl):Identity.SignInHelper(!1,null));w=u.Environment.getInstance().areInternalFeaturesEnabled()&&r===1&&Utilities.query.fetch("edit")==="true";w&&(StoryLog.TraceTag(8979854,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Edit Query Param : URL contained a query param to show the edit expierence"),CommonSettings.IsAuthenticated?(StoryLog.TraceTag(8979856,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Edit Query Param : User signed-in doesn't have edit permissions."),y.createAndShow(CommonSettings.EmailAddress,StoryPageSettings.Owner)):(StoryLog.TraceTag(8979855,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Edit Query Param : No user is currently signed-in."),v.createAndShow(StoryPageSettings.Owner)));$(document).bind("contextmenu",function(n){var t=TDB.ViewElement.dataFor(n.target);return t!=null&&t.handleMouseEvent(n,5),!0});$(document).bind("paste",function(n){var t=TDB.FocusableViewElement.getFocusedElement();return t?t.handlePasteEvent(n):!0});$(window).blur(function(){StoryLog.TraceTag(3510811,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"Window Losing Focus",null)});$(window).focus(function(){StoryLog.TraceTag(3510812,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"Window Gaining Focus",null)});document.body.addEventListener("pointerdown",function(n){n.pointerType!=="mouse"&&StoryLog.TraceTag(4476962,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"User Action: "+n.pointerType+", (X, Y)=("+n.pageX+", "+n.pageY+")",null)},!1);document.body.addEventListener("MSPointerDown",function(n){n.pointerType===n.MSPOINTER_TYPE_PEN?StoryLog.TraceTag(4476963,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"User Action: Pen , (X, Y)=("+n.pageX+", "+n.pageY+")",null):n.pointerType===n.MSPOINTER_TYPE_TOUCH&&StoryLog.TraceTag(4476992,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.verbose,"User Action: Touch , (X, Y)=("+n.pageX+", "+n.pageY+")",null)},!1);window.onpopstate=function(n){s.previewVE.onPopState(n)}},f.prototype.createAppBar=function(){var n=this,t;n.appBar||StoryPageSettings.IsNativeClient||(t={isEmbedMode:n.isEmbeddedMode,inEmbedHostMode:StoryPageSettings.EmbedHostMode==2,userState:n.args.userState,currentStory:n.args.currentStory},n.appBar=new i.StoryAppBarVE(n,t),n.createAppBarGroups(),n.createOverflowMenu(),n.addResource(n.appBar))},f.prototype.createBlockingProgressVE=function(){var n=this;n._blockingProgress=new i.BlockingProgressVE(n);t.Common.BlockingProgressManager.setContext(n._blockingProgress)},f.prototype.createAppBarGroups=function(){var n=this;n.createInternalFeaturesGroup();StoryPageSettings.EmbedHostMode||n.createShareGroup();StoryPageSettings.EmbedHostMode!=2&&n.canAppFullscreen.getWatchedValue()&&n.createFullscreenGroup();n.isEmbeddedMode.getValue()||n.createOverflowGroup()},f.prototype.createInternalFeaturesGroup=function(){var n=this,t;u.Environment.getInstance().shouldDisplayInternalFeaturesButton()&&(t=n.appBar.createAndAddButtonGroup(),t.addTextButton(20,n,n.internalFeaturesClicked,Resources.InternalFeatures,43,["internalConsumptionButton"]))},f.prototype.internalFeaturesClicked=function(){return u.AppBarAction.getInstance().ToggleInternalFlight(),!1},f.prototype.createShareGroup=function(){var n=this,t=n.appBar.createAndAddButtonGroup();t.addGlyphButton(19,[i.renderButtonClass],{context:n.appBar,click:function(){return SharingManager.setupShareThis(StoryPageSettings.IsTenantLimitedStory,n),n.appBar.setSocialFlyoutVisibleState(!0),!1},glyphClass:Glyphs.PreviewShareThisIconGlyph,clipClass:Glyphs.PreviewShareThisIconClip,description:Resources.SocialDescription,buttonId:258,onFocusUpdated:n.appBar.onAppBarElementFocusUpdated})},f.prototype.onAppBarElementFocusUpdated=function(n){var t=this;t.appBar.onAppBarElementFocusUpdated(n)},f.prototype.shareToFacebook=function(){return i.StoryShareAction.shareToFacebook(u.UrlHelper.getInstance().shareLinkUrl(StoryPageSettings.LookupId),226),!1},f.prototype.shareToTwitter=function(){var n=this;return i.StoryShareAction.shareToTwitter(u.UrlHelper.getInstance().shareLinkUrl(StoryPageSettings.LookupId),StoryPageSettings.Mode==2,231,n.getModelTitle()),!1},f.prototype.getRestoreUrl=function(){return i.ViewModel&&i.ViewModel.previewVE?i.RestoreState.generateRestoreUrlFromRestorePoint(i.ViewModel.previewVE._root.getValue()):null},f.prototype.shareViewLink=function(){return i.StoryShareAction.shareViewLink(u.UrlHelper.getInstance().shareLinkUrl(StoryPageSettings.LookupId),228,this.getRestoreUrl()),!1},f.prototype.embed=function(){return i.StoryShareAction.embed(StoryPageSettings.LookupId),!1},f.prototype.createOverflowGroup=function(){var n=this,r=n.appBar.createAndAddButtonGroup({hideBorderWatchable:SharingManager.IsShareThisReady}),t;r.addGlyphButton(9,[i.renderButtonClass],{context:n.appBar,click:n.appBar.toggleOverflowMenu,glyphClass:Glyphs.PreviewOverflowIconGlyph,clipClass:Glyphs.PreviewOverflowIconClip,description:Resources.OverFlowButtonDescription,buttonId:45,hasPopup:!0,onFocusUpdated:n.appBar.onAppBarElementFocusUpdated});t=r.buttonsArgs()[0];n.appBar.getOverflowMenu().setControllingElement(t);t.isActive=n.appBar.getOverflowVisibleWatcher()},f.prototype.createFullscreenGroup=function(){var n=this,r=n.appBar.createAndAddButtonGroup(),t;r.addGlyphButton(17,[i.renderButtonClass],{context:n.appBar,click:$.proxy(n.toggleFullscreen,n),glyphClass:Glyphs.PreviewEnterFullscreenIconGlyph,clipClass:Glyphs.PreviewEnterFullscreenIconClip,description:Resources.FullscreenButtonDescription,buttonId:40,onFocusUpdated:n.appBar.onAppBarElementFocusUpdated,nativeKeyboardHandling:!0});t=r.buttonsArgs()[0];t.clipClass=TDB.watcherTag(6636962,n,n,n.getFullscreenButtonClipClass);t.glyphClass=TDB.watcherTag(6636963,n,n,n.getFullscreenButtonGlyphClass);t.visible=n.canAppFullscreen},f.prototype.getFullscreenButtonClipClass=function(n){var t=this;return t.fullScreenManager.isFullscreen(n)?Glyphs.PreviewExitFullscreenIconClip:Glyphs.PreviewEnterFullscreenIconClip},f.prototype.getFullscreenButtonGlyphClass=function(n){var t=this;return t.fullScreenManager.isFullscreen(n)?Glyphs.PreviewExitFullscreenIconGlyph:Glyphs.PreviewEnterFullscreenIconGlyph},f.prototype.toggleFullscreen=function(){var n=this;return ActionLogger.RecordClientAction(new ClientAction.ButtonClickAction(296,Diag.ULSCat.msoulscat_Story_Site)),n.fullScreenManager.canToggleFullscreen()?n.fullScreenManager.toggleFullscreen():window.open(u.UrlHelper.getInstance().viewUrl(StoryPageSettings.LookupId),"_blank"),!1},f.prototype.createOverflowMenu=function(){var t=this,n=t.appBar.getOverflowMenu();n.addInternalFeaturesButton();CommonSettings.IsAuthenticated||n.addSignInButton();CommonSettings.IsEnabled&&(CommonSettings.IsAuthenticated&&(n.addMyStoriesButton(),u.Environment.getInstance().shouldShowAuthoringEntrypoints()&&(n.addCreateNewButton(),CommonSettings.BlockDuplication||n.addDuplicateStoryButton(t,t.getModelTitle))),CommonSettings.EnableStoryDownload&&n.addDownloadButton());n.addFeedbackButton();CommonSettings.IsAuthenticated&&(n.addUserButton(),n.addSignOutButton());n.addAccessibilityViewButton(StoryPageSettings.Mode===2);i.StoryPageVE.FilterOverFlowMenuButtons(n)},f.FilterOverFlowMenuButtons=function(){},f.prototype.getClientSignalListeners=function(){return this.clientSignalListeners.slice(0)},f.prototype.addClientSignalListener=function(n){this.clientSignalListeners.push(n)},f.prototype.removeClientSignalListener=function(n){var t=this.clientSignalListeners.indexOf(n);if(t<0)throw new Error("tried removing a non existent listener");this.clientSignalListeners.splice(t,1)},f.prototype.computeIsPreviewMode=function(t){var i=!t.watchValue(n.Settings.ServiceSwitches.authoringDisabled);return this.storyViewMode.getWatchedValue(t)===1||!i},f.prototype.computeIsEditMode=function(t){var i=!t.watchValue(n.Settings.ServiceSwitches.authoringDisabled);return i&&this.storyViewMode.getWatchedValue(t)===2},f.prototype.computeIsEmbeddedMode=function(n){return this.storyViewMode.getWatchedValue(n)===3},f.prototype.computeInEmbedHostMode=function(){return StoryPageSettings.EmbedHostMode==2},f.prototype.computeCanAppFullscreen=function(n){return this.isEmbeddedMode.getWatchedValue(n)},f.prototype.getModelTitle=function(n){var t=this;return t.args.currentStory.getRenderModel(n).getTitle()},f.prototype.getLayoutStyleId=function(n){var t=this;return t.args.currentStory.getRenderModel(n).getLayoutStyleId()},f.prototype.getWorldId=function(n){var t=this;return t.args.currentStory.getRenderModel(n).getWorldId()},f.prototype.getPreviewWidth=function(n){var t=u.Environment.getInstance().getWindowSize(n).w,i=this.isEditMode.getWatchedValue(n)?UX.cardDeckPeekWidth:0;return Math.max(t-i,UX.minChromelessTopBarWidth)},f.prototype.getPreviewHeight=function(n){var t=u.Environment.getInstance().getWindowSize(n).h;return Math.max(t,UX.minPreviewHeight)},f.prototype.registerEventHandler=function(n){var t=this;t.parent.registerEventHandler(n)},f.prototype.unregisterEventHandler=function(n){var t=this;t.parent.unregisterEventHandler(n)},f.getTopValue=function(n){return n?f._lowTopPx:f._highTopPx},f.prototype.appBarWrapperStyleArgs=function(n){var i=!!t.Common.NotificationBarManager.getInstance().getCurrentNotificationBar(n),r=i?f._lowTopPx:f._highTopPx;return{top:r}},f.prototype.notificationBarWrapperStyleArgs=function(n){var t=this,i=f.getTopValue(n.watchValue(t.isEditMode));return{top:i}},f.prototype.pageRootStyleArgs=function(){return{"min-width":UX.minChromelessTopBarWidth+"px"}},f.prototype.paneHolderStyleArgs=function(n){var t=this,i=f.getTopValue(n.watchValue(t.isEditMode));return{top:i}},f.prototype.previewPanePropsArgs=function(n){return{className:this.previewVE.getStyleId(n)}},f.prototype.previewPaneStyleArgs=function(n){var t=this;return{left:n.watchValue(t.isEditMode)?UX.cardDeckPeekWidth.toString()+"px":undefined}},f.prototype.previewArgs=function(){return this.previewVE},f.prototype.authoringPageArgs=function(){return undefined},f.prototype.surfaceAuthoringArgs=function(){return undefined},f.prototype.offlineVellumArgs=function(){return undefined},f.prototype.triggerPreviewCallout=function(){return!1},f.prototype.UpdateStatusStyleArgs=function(n){var t=this,i=n.watchValue(t.waitingForUpdate)&&n.watchValue(t.blockingUpdate),r=i?"100%":undefined;return{height:r}},f.prototype.TransientUpdateStatusClassNameArgs=function(n){return i.ViewModel.isEditMode.getWatchedValue(n)?"transientUpdateStatus transientUpdateStatusNew":"transientUpdateStatus"},f.prototype.TransientUpdateStatusSlideVisibleInitArgs=function(){return!1},f.prototype.TransientUpdateStatusSlideVisibleArgs=function(n){var t=this,i=n.watchValue(t.waitingForUpdate)&&!n.watchValue(t.blockingUpdate);return{visible:i}},f.prototype.TransientUpdatingGifAttrArgs=function(){return{src:CommonSettings.ContentBaseUrl+"traveling_dots1color_shorter_white.gif"}},f.prototype.BlockingUpdateStatusVisibleArgs=function(n){var t=this;return n.watchValue(t.waitingForUpdate)&&n.watchValue(t.blockingUpdate)},f.prototype.BlockingUpdatingGifAttrArgs=function(){return{src:CommonSettings.ContentBaseUrl+"whitespinner.32x32.gif"}},f.prototype.blockingProgressArgs=function(){var n=this;return n._blockingProgress||n.createBlockingProgressVE(),n._blockingProgress},f.prototype.appBarArgs=function(){var n=this;return n.createAppBar(),n.appBar},f.prototype.dispose=function(){this.parent.unregisterEventHandler(this.viewinputlogger);r.prototype.dispose.apply(this,arguments)},f.prototype.handleMouseClick=function(){return!0},f.prototype.deselectElements=function(){},f.prototype.setTelemetryContext=function(n){this.interactionlogger.setTelemetryContext(n);this.scrollPositionlogger.setTelemetryContext(n);this.viewinputlogger.setTelemetryContext(n)},f.prototype.getViewElement=function(){return this},f.prototype.updateShowDefaultShareButtonGroup=function(n){return!SharingManager.IsShareThisReady.getWatchedValue(n)},f._lowTopPx=UX.topBarHeight+"px",f._highTopPx="0px",f}(TDB.FocusableViewElement);i.StoryPageVEBase=c;o=function(){function n(){ActionLogger.CreateClientMeasure(e[1],{x:null,y:null})}return n.prototype.recordConsumptionChange=function(n,t){if(f()){var i=t?2:3;ActionLogger.ObserveClientMeasure(e[i],{percentConsumed:n})}},n.prototype.recordMaxScrollChange=function(n,t){f()&&ActionLogger.ObserveClientMeasure(e[1],{x:n,y:t})},n.prototype.setTelemetryContext=function(n){ActionLogger.SetContext(e[1],n)},n}();i.ScrollPositionTelemetry=o;s=function(){function n(){this.context={}}return n.prototype.edgeFollowed=function(n){var e;if(f()){var t=n.getParentNode().getKeyFrame(),i=n.getTarget().getKeyFrame(),r=t.getType(),u=i.getType();StoryLog.StructuredTraceTag(6156632,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.verbose,"User interaction invoked",{SrcKeyframeId:t.id,SrcKeyframeType:r,DestKeyframeId:i.id,DestKeyframeType:u});e="Src:"+r+";Dest:"+u;ActionLogger.IncrementClientCounter(e,this.context)}},n.prototype.setTelemetryContext=function(n){this.context=n},n}();i.InteractionTelemetry=s;h=function(){function n(){ActionLogger.CreateClientCounter(r[2]);ActionLogger.CreateClientCounter(r[5]);ActionLogger.CreateClientCounter(r[4]);ActionLogger.CreateClientCounter(r[3]);ActionLogger.CreateClientCounter(r[6]);ActionLogger.CreateClientCounter(r[1])}return n.prototype.scrollbarClicked=function(){f()&&ActionLogger.IncrementClientCounter(r[2])},n.prototype.handleGlobalMouseEvent=function(n,t,i){if(f())switch(i){case 6:ActionLogger.IncrementClientCounter(r[5]);break;case 1:ActionLogger.IncrementClientCounter(r[4]);break;case 3:ActionLogger.IncrementClientCounter(r[1])}},n.prototype.handleGlobalKeyEvent=function(){f()&&ActionLogger.IncrementClientCounter(r[3])},n.prototype.touchStart=function(){return f()&&ActionLogger.IncrementClientCounter(r[6]),!0},n.prototype.setTelemetryContext=function(n){ActionLogger.SetContext(r[2],n);ActionLogger.SetContext(r[3],n);ActionLogger.SetContext(r[4],n);ActionLogger.SetContext(r[5],n);ActionLogger.SetContext(r[6],n);ActionLogger.SetContext(r[1],n)},n.prototype.touchMove=function(){return!0},n.prototype.touchStop=function(){return!0},n}();i.ViewDataTelemetry=h})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r=function(){function t(){if(t.s_instance)throw new Error("Error: Do not use constructor. Use LayoutElementLogger.createInstance() instead.");this.reset()}return t.createInstance=function(){return t.s_instance||(t.s_instance=new t,TDB.setLayoutElementLogger(t.s_instance)),t.s_instance},t.getInstance=function(){return t.s_instance},t.prototype.start=function(){this._startTime>0&&this.log(!1);StoryPageSettings.SiteIframeLoaderEnabled&&n.View.Common.IframeLoadingManager.unregisterAllElements();this._startTime=platform.now()},t.prototype.trackElements=function(n){var t=this;n&&n.forEach(function(n){return t.trackElement(n)})},t.prototype.trackElement=function(n){if(n){var t=n.id;if(this._waitingElements[t])throw new Error("Error: Tried to track a LayoutElement more than one once.");this._waitingElements[t]=!0;this._waitingElementsCount++;n instanceof i.ContainerLayoutElement?this._containerCount++:this._nonContainerCount++}},t.prototype.loadedElement=function(n){this._waitingElements[n]&&(delete this._waitingElements[n],this._waitingElementsCount--,this._waitingElementsCount==0&&this.log(!0))},t.prototype.log=function(t){var i=platform.now();ActionLogger.RecordClientAction(new ClientAction.RenderModelLoadData(i-this._startTime,this._containerCount,this._nonContainerCount,StoryPageSettings.Mode==3,StoryPageSettings.IsNativeClient,t));StoryPageSettings.SiteIframeLoaderEnabled&&(n.View.Common.IframeLoadingManager.isLayoutDone=!0,n.View.Common.IframeLoadingManager.startEmbedLoading());this.reset()},t.prototype.reset=function(){this._startTime=0;this._waitingElements={};this._waitingElementsCount=0;this._containerCount=0;this._nonContainerCount=0},t}();t.LayoutElementLogger=r})(i=t.Common||(t.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var i=function(n){function i(t,i,r,u){if(n.call(this,t),this.factory=i,this.selectItems=r,this.lazyLoadDisabled=u,this.itemsLoaded=0,this.loadNext=TDB.notifierTag(7914145,this),this.lazyItems=[],!i)throw new Error("LazyArray does not have a valid source factory.");}return __extends(i,n),i.prototype.getCollection=function(n){var i,u,e,f,o,r;if(n&&n.watch(this.loadNext),i=this.factory(n),!i||i.length==0)return this.itemsLoaded=0,this.lazyItems=[],[];if(u=!1,this.needsReset(i)&&(this.itemsLoaded=0,this.lazyItems=i.map(function(n){return{loaded:!1,item:n}}),u=!0),this.lazyLoadDisabled||this.itemsLoaded>=this.lazyItems.length)return this.toItems();if(t.isInQueue(this.loadNext))if(u)t.removeNotifier(this.loadNext);else return this.toItems(!0);if(e=!1,f=this.lazyItems.filter(function(n){return n.loaded==!1}),this.selectItems&&(o=this.selectItems(f.map(function(n){return n.item}),u),o&&o.forEach(function(n){var t=f.firstOrDefault(function(t){return t.item==n&&t.loaded==!1});t&&(t.loaded=!0,e=!0)})),e||(f[0].loaded=!0),r=this.toItems(!0),r.length<=this.itemsLoaded)throw new Error("LazyArray: unexpected change to loaded items count");return this.itemsLoaded=r.length,r.length<this.lazyItems.length&&t.addNotifier(this.loadNext),r},i.prototype.needsReset=function(n){var t=this.toItems();return t.length==0?!0:!Utilities.sequenceEquals(n,t)},i.prototype.toItems=function(n){return n==undefined?this.lazyItems.map(function(n){return n.item}):this.lazyItems.filter(function(t){return t.loaded==n}).map(function(n){return n.item})},i.prototype.dispose=function(){t.removeNotifier(this.loadNext);n.prototype.dispose.call(this)},i}(Disposable),t;n.LazyArray=i,function(n){function r(n){n&&(t.length==0&&platform.setImmediate(i),t.push(n))}function u(n){n&&t.removefirst(n)}function f(n){return n?t.indexOf(n)>=0:!1}function i(){var n=t.shift();t.length>0&&platform.setImmediate(i);n&&TDB.applyUpdate(function(){return n.notify()})}var t=[];n.addNotifier=r;n.removeNotifier=u;n.isInQueue=f}(t||(t={}))})(t=n.Common||(n.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function r(t,i){var r=t.getEndPoint();return n.AnimationManager.LowFi.getValue()||(r+=t.getEndAdjustment()*i),r}var f=n.Model.RM,i={},u;i[0]=0;i[1]=40;u=function(){function t(){}return t.getNext=function(n,u,f,e){return t.findNextScrollOffset(n,u,f,function(n){return n.getStartPoint()},function(n){return r(n,u)},!1,i[e])},t.getPrevious=function(u,f,e,o){var s=!n.AnimationManager.LowFi.getValue();return-t.findNextScrollOffset(-u-f,f,e,function(n){return-r(n,f)},function(n){return-n.getStartPoint()},!0,i[o])-f},t.findClosestValue=function(n,i){var e=n.length,u,r,f;if(e){if(u=t.findIndexInSorted(n,i),r=n[u],r===i)return r;if(r<i){if(u===e-1)return r;f=n[u+1]}else{if(!u)return r;f=n[u-1]}return Math.abs(i-r)<Math.abs(i-f)?r:f}},t.findIndexInSorted=function(n,t){for(var i=0,u=n.length-1,r,f;i<u;){if(r=Math.floor((i+u)/2),f=n[r],f===t)return r;f<t?i=Math.min(r+1,u):u=Math.max(r-1,i)}return i},t.findNextScrollOffset=function(n,t,i,r,u,f,e){var d=1,g=n+t+d,w=i.length,tt,y,p,k,l,h,c,s,a;if(w==0)return n+t;var nt=Infinity,v=[],o=Infinity,b;for(h=0;h<w;++h){var c=i[h],s=r(c),a=u(c);a>g&&(tt=a-s,y=s<n+t-d,y&&c.getSnapType()===0&&(b=!0),tt>t?(nt=Math.min(nt,a),v.push(a),s>(f?n+t*.9:n+1)&&(c.getCanIgnoreEdgeAlignment()&&y||(o=Math.min(o,s)))):c.getCanIgnoreEdgeAlignment()&&y||(o=Math.min(o,s)))}if(p=o+t,b&&(p=Math.min(p,g-e+t)),v=v.filter(function(n){return n<=p}),v.length)return Math.max.apply(Math,v)-t;if(k=n+t-e,b&&o>k)return k;if(isFinite(o)){if(!f)return o;for(l=-Infinity,h=0;h<w;++h)c=i[h],s=r(c),s>=o&&(a=u(c),a-o<=t?l=Math.max(l,a):s===o&&(l=Math.max(l,s+t)));return isFinite(l)||(l=o+t),l-t}return Infinity},t}();t.SnapPoints=u})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i){var r=this;n.call(this,t);r._args=i}return __extends(t,n),t.prototype.ifProfileImageArgs=function(n){var t=this;return!!n.watchValue(t._args.profileImageUrl)},t.prototype.profileImageAttrArgs=function(n){var t=this;return t.imageAttrArgs(n,t._args.profileImageUrl)},t.prototype.authorTextArgs=function(n){var t=this;return n.watchValue(t._args.author)},t.prototype.userNameTextArgs=function(n){var t=this;return n.watchValue(t._args.username)},t.prototype.ifAttributionArgs=function(n){var t=this;return!!n.watchValue(t._args.attributionIconUrl)},t.prototype.attributionAttrArgs=function(n){var t=this;return t.imageAttrArgs(n,t._args.attributionIconUrl)},t.prototype.bodyTextArgs=function(n){var t=this;return n.watchValue(t._args.body)},t.prototype.imageAttrArgs=function(n,t){var r=this,i=n.watchValue(t);return i?{src:i}:{}},t.prototype.mouseClicked=function(n){var t=this;return n.which!=1?!0:t._args.onClick.call(t._args.context,n)},t}(TDB.ViewElement);n.StatusUpdateContentVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){function a(n){var t=o.findGoodEnough(n.getId(),n.getAnimated(),n.getQuality());t?t.push(n):(i.push(n),l())}function v(n){i.removefirst(n)}function y(n){s=n}function p(n){return c.findBest(n.getId(),n.getAnimated(),n.getQuality())}function w(){return new Image}function b(n,i,u){function a(t){++r;var h=o.remove(n,u,i);t?(c.add(n,u,i,f),StoryLog.TraceTag(6944705,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Successfully loaded image. Elapsed time: {0}ms. Image URL: {1}.",[(new Date).getTime()-s,f]),TDB.applyUpdate(function(){return h.forEach(function(t){return t.setImageUrl(f,n,i,u)})},3)):(StoryLog.TraceTag(6821136,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Failed to load image from service. Elapsed time: {0}ms. Image URL: {1}.",[(new Date).getTime()-s,f]),TDB.applyUpdate(function(){return h.forEach(function(t){return t.setFailed(n,i,u)})}));e.onload=null;e.onerror=null;l()}var f,e,s;if(r<=0)throw new Error("No connections available! You can't call makeImageRequest until one opens");return--r,f=h.UrlHelper.getInstance().imageUrl(StoryPageSettings.LookupId,i,n,u,StoryPageSettings.UseCDN),e=t.makeImage(),e.onload=Utilities.deferredEventHandler(function(){return a(!0)}),e.onerror=Utilities.deferredEventHandler(function(){return a(!1)}),s=(new Date).getTime(),e.src=f,f}function l(){f||(f=!0,platform.setImmediate(tt))}function k(){for(var u,t=new Utilities.BiDictionary,r=0,h=i.length;r<h;++r){var n=i[r],f=n.getId(),e=n.getAnimated(),o=t.find(e.toString(),f);o?o.push(n):t.put(e.toString(),f,[n])}return(u=t.enumerateValues(),StoryPageSettings.ShouldPrioritizeImageLoading)?u.sort(d(s?s.getValue():undefined)):u}function d(n){var t={},i=n?n.fetchScrollValues():undefined;return function(n,r){var u=n[0].getId(),f=r[0].getId();return t[u]||(t[u]=n[0].getPriority(i)),t[f]||(t[f]=r[0].getPriority(i)),t[u]-t[f]}}function g(){var n=e,t=h.Environment.getInstance().getAvailableBandwidth();return t>0&&t<=250?n=Math.min(1,n):t>250&&t<=500?n=Math.min(2,n):t>500&&t<=1e3&&(n=Math.min(3,n)),n}function nt(){if(r==0)return!1;var n=e-r,t=g();return n<t}function tt(){var n=k();i=[];f=!1;TDB.applyUpdate(function(){for(var t,u,r=0,f=n.length;r<f;++r)if(t=n[r],nt()){var e=t[0].getId(),s=t[0].getAnimated(),h=Math.max.apply(Math,t.map(function(n){return n.getQuality()}));o.add(e,s,h,t);u=b(e,h,s);StoryLog.TraceTag(6944706,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Computed Image URL: {0}.",[u]);t.forEach(function(n){return n.setLoadingUrl(u)})}else i.push.apply(i,t)})}var h=n.Common,u=function(){function n(){this.dict=new Utilities.BiDictionary}return n.prototype.add=function(n,t,i,r){var u=this.dict.find(t.toString(),n);u||(u=[],this.dict.put(t.toString(),n,u));u.push({quality:i,value:r})},n.prototype.remove=function(n,t,i){var r=this.dict.find(t.toString(),n),u,e,f;if(r)for(u=0,e=r.length;u<e;++u)if(f=r[u],f.quality===i)return r.splice(u,1),r.length===0&&this.dict.remove(t.toString(),n),f.value},n.prototype.findBest=function(n,t,i){var r={quality:-1,value:null},e=this.dict.find(t.toString(),n),u,o,f;if(e)for(u=0,o=e.length;u<o;++u)f=e[u],(f.quality>r.quality?r.quality<i:f.quality>=i)&&(r=f);return r},n.prototype.findGoodEnough=function(n,t,i){var r=this.findBest(n,t,i);return r.quality>=i?r.value:null},n}(),s;t.ImageSet=u;var f=!1,e=(window.maxConnectionsPerServer||6)-1,r=e,i=[],o=new u,c=new u;t.addRequest=a;t.removeRequest=v;t.setScroller=y;t.findBestLoaded=p;t.makeImage=w})(i=t.ImageRequestManager||(t.ImageRequestManager={}))})(i=t.Common||(t.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){function f(n,t){return new u(n,t)}var r=n.Common,u;i.IRM=i.ImageRequestManager;i.makeImageLoader=f;u=function(){function n(n,t){this.url="";this.notifier=TDB.notifierTag(6895748,this);this._id=null;this._power=-1;this._originalResolution=0;this._animated=!1;this._failed=TDB.watchableTag(6378845,this,!1);this._failureCount=0;var i=n&&n.findRootVE?n.findRootVE(null):undefined;i&&(this._is3DWorld=i.is3DWorldWatcher.getValue());this._model=t}return n.prototype.setFallbackUrl=function(n){var i=this,t;this.url||(this.url=n,n&&(t=new Image,t.onerror=Utilities.deferredEventHandler(function(){t.onerror=null;t.onload=null;StoryLog.TraceTag(6944673,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Failed to load fallback image. Image URL: {0}",[i.url]);TDB.applyUpdate(function(){return i._failed.setValue(!0)})}),t.onload=Utilities.deferredEventHandler(function(){t.onerror=null;t.onload=null;StoryLog.TraceTag(6944674,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Successfully loaded fallback image. Image URL: {0}.",[i.url])}),t.src=n))},n.prototype.getId=function(){return this._id},n.prototype.getQuality=function(){return this._power===-1?-1:Math.round(this._originalResolution/Math.pow(2,this._power+this._failureCount))},n.prototype.getAnimated=function(){return this._animated&&this._failureCount===0},n.prototype.cancelRequest=function(){this._id=null;i.IRM.removeRequest(this)},n.prototype.getBandwidthLimitedResolution=function(){var n=r.Environment.getInstance().getAvailableBandwidth()*128;return Math.sqrt(10*n)},n.prototype.getImageUrl=function(n,t,u,f,e,o){var h,c,v,s,y,l,a;return(o&&o.watch(this.notifier),h=t,c=r.Environment.getInstance().getAvailableBandwidth(),!StoryPageSettings.BlockBandwidthLimitedImageResolution&&c>0&&c<5e3&&!f&&(v=this.getBandwidthLimitedResolution(),t=Math.min(v,t)),e=f||e,s=Math.max(Math.log(u/t)/Math.LN2,0),y=512,s=CommonSettings.ClientDevice==="Desktop"||t<y?Math.floor(s):Math.ceil(s),this.url&&n===this._id&&s===this._power&&e===this._animated||this.getFailed(o))?this.url:(n!==this._id&&(this._failureCount=0),i.IRM.removeRequest(this),this._id=n,this._originalResolution=u,this._power=s,this._animated=e,l=i.IRM.findBestLoaded(this),a=l.value,l.quality>=this.getQuality())?a:(this.url=a||this.url||"",i.IRM.addRequest(this),t<h&&StoryLog.StructuredTraceTag(7209049,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Available bandwidth is limited, reducing requested image resolution.",{"Image ID":n,"Reduced image resolution":t.toString(),"Requested image resolution":h.toString()}),StoryLog.TraceTag(6944675,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Image ID: {0}, Original image resolution requested: {1}, Minimum image resolution: {2}, Original image resolution: {3}",[n,f,t,u]),this.url)},n.prototype.getFailed=function(n){return this._failed.getWatchedValue(n)},n.prototype.getFailureCount=function(){return this._failureCount},n.prototype.setFailed=function(n,t,r){var s=this,e,o,u,f;n===this._id&&t>=this.getQuality()&&r===this.getAnimated()&&(this._failureCount<StoryPageSettings.MaxImageRetries?(e=this.getQuality(),o=this.getAnimated(),TDB.applyUpdate(function(){return s.setImageUrl("",n,t,r)}),++this._failureCount,u=this.getQuality(),u<1?(StoryLog.TraceTag(6944704,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Aborted attempt to load image of zero size (quality={0}) on retry attempt #{1}. Image ID: {2}",[u,this._failureCount,n]),this._failed.setValue(!0)):(StoryLog.TraceTag(6825421,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"Retrying image at lower quality. Image ID: {0}, old quality: {1}, old animated: {2}, new quality: {3}, new animated: {4}",[n,e,o,u,this.getAnimated()]),f=i.IRM.findBestLoaded(this),f.quality>=u?(this.url=f.value,this.notifier.notify()):i.IRM.addRequest(this))):(StoryLog.TraceTag(6825422,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Irrecoverable image failure (already retried loading {0} times). Image ID: {1}.",[this._failureCount,n]),this._failed.setValue(!0)))},n.prototype.setImageUrl=function(n,t,i,r){t===this._id&&i>=this.getQuality()&&r===this.getAnimated()&&(this._failed.setValue(!1),this.url=n,this.notifier.notify())},n.prototype.setLoadingUrl=function(n){this.url||(this.url=n,this.notifier.notify())},n.prototype.getPriority=function(n,i){var r,e;if(t.Common.LayoutUtilities.isDetailView(this._model))return-1;if(this._is3DWorld)return 1;if(!n||(r=t.Common.LayoutUtilities.getAbsolutePosition(this._model),!r))return Number.MAX_VALUE;var u=new Point(n[0],n[1]),o=r.bottom()<u.top,s=r.right()<u.left,f=i==1,h=r.left>u.left,c=new Point(f?r.right():r.left,r.top);if(f)throw"ImageLoader should have RTL support but it needs to be properly verified once the product has RTL support.";return e=c.getDistanceToPoint(u),(o||s||f&&h)&&(e*=4),e},n}()})(i=t.Common||(t.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){function e(n,t){var i=r.getWatchedValue(t)[n];return i?i.useSystemFallback.getWatchedValue(t):!1}function o(n,t){var i=r.getWatchedValue(t)[n];return i?i.visible.getWatchedValue(t):!0}function c(u){var f,e,o,s;if(u.watch(i.fontFaceNotifier),f=r.getValue(),f)for(e in f)f[e].timeout!==-1&&clearTimeout(f[e].timeout);return o={},s=n.Model.RenderModel.getWatchedValue(u).layoutTrees.getCollection(u),s.length>0&&s[0].getTextStyles(u).getCollection(u).forEach(function(n){var i=l(n.getId(u),t.ViewElements.modelStyleToFontStyle(n.getStyle(u)),n.getFileName(u));i&&(o[i.textStyleId]=i)}),o}function l(n,t,i){if(i.length>=2&&i[i.length-2]==="s"&&(i[i.length-1]==="2"||i[i.length-1]==="3"))return null;var r=new h(n),f=new u(n,t),e=0,o=function(){e++;f.isLoaded()?(f.dispose(),TDB.applyUpdate(function(){r.useSystemFallback.setValue(!1);r.visible.setValue(!0)},1),r.timeout=-1):(e>30&&(StoryLog.TraceTag(8943439,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,'Font data loading taking a long time for "'+n+'" (base font file: "'+i+'")'),TDB.applyUpdate(function(){r.useSystemFallback.setValue(!0);r.visible.setValue(!0)},1)),r.timeout=setTimeout(o,100))};return o(),r}function f(n,t){var i=document.createElement("span");return i.textContent="i",i.style.fontFamily=n,i.style.fontStyle=s[t],i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.visibility="hidden",i.style.fontSize="250px",i.style.fontVariant="normal",i.style.fontWeight="normal",i.style.letterSpacing="0px",i}function a(n,t){return{one:f(n+",Arial,Helvetica,sans-serif",t),two:f(n+",'Courier New',Courier,monospace",t)}}var u;i.fontFaceNotifier=TDB.notifierTag(8978438,null);i.shouldUseSystemFallback=e;i.isTextVisible=o,function(n){n[n.normal=0]="normal";n[n.italic=1]="italic";n[n.oblique=2]="oblique"}(i.FontStyle||(i.FontStyle={}));var s=i.FontStyle,h=function(){function n(n){this.timeout=-1;this.textStyleId=n;this.useSystemFallback=TDB.watchableTag(8943436,this,!1);this.visible=TDB.watchableTag(8943437,this,!1)}return n}(),r=TDB.watcherTag(8943438,null,null,c);u=function(){function n(n,t){this.ruler=a(n,t);this.textStyleId=n;document.body.appendChild(this.ruler.one);document.body.appendChild(this.ruler.two)}return n.prototype.isLoaded=function(){return this.ruler.one.clientWidth===this.ruler.two.clientWidth},n.prototype.dispose=function(){document.body.removeChild(this.ruler.one);document.body.removeChild(this.ruler.two)},n}()})(i=t.Common||(t.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.View.ViewElements,r=function(){function n(){n.isLoadingEmbeds=!1;this.embeddedElements=[]}return n.getInstance=function(){return n.iframeLoadingManager||(n.iframeLoadingManager=new n),n.iframeLoadingManager},n.registerEmbedLayoutElement=function(t){n.getInstance().embeddedElements.addunique(t);n.startEmbedLoading()},n.unregisterEmbedLayoutElement=function(t){n.getInstance().embeddedElements.removefirst(t);n.isLoadingEmbeds&&(n.isLoadingEmbeds=!!n.getNextEmbedToLoad())},n.startEmbedLoading=function(){n.isLayoutDone&&!n.isLoadingEmbeds&&(n.numberOfLoadedEmbedsWithPlaceholders=0,n.isLoadingEmbeds=!0,n.loadNextEmbed())},n.getNextEmbedToLoad=function(){return n.getInstance().embeddedElements.firstOrDefault(function(n){return!n.isIframeLoaded&&!n.isShowingPlaceholder.getValue()})},n.loadNextEmbed=function(){var t=n.getNextEmbedToLoad();t?n.canLoadMoreIframes(t.getHostName())?(StoryPageSettings.SiteDomainsForEmbedPlaceholders&&StoryPageSettings.SiteDomainsForEmbedPlaceholders.contains(t.getHostName())&&n.numberOfLoadedEmbedsWithPlaceholders++,setTimeout(function(){n.loadEmbedLayoutIframe(t)},n.loadTimeoutMilliseconds)):(t.setPlaceholder(),n.loadNextEmbed()):n.isLoadingEmbeds=!1},n.canLoadMoreIframes=function(t){var r=!0,i;return StoryPageSettings.SiteEmbedPlaceholdersEnabled&&StoryPageSettings.SiteDomainsForEmbedPlaceholders&&StoryPageSettings.SiteDomainsForEmbedPlaceholders.contains(t)&&(i=StoryPageSettings.SitePlaceholderLimit[CommonSettings.ClientDevice],i!=undefined&&i!=null&&(r=i==-1||i>n.numberOfLoadedEmbedsWithPlaceholders)),r},n.onIframeLoad=function(t,i){var f="unknown",e=-1,u,r;return t&&(u=TDB.ViewElement.dataFor($(t.target)[0]),r=u?u.parent:null,r&&(f=r.getHostName(),e=platform.now()-r.getEmbedLoadStartTime())),StoryLog.StructuredTraceTag(8999774,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"IframeLoadingManager loaded an embed.",{elapsedTime:e.toString(),host:f}),i||n.loadNextEmbed(),!1},n.onIframeError=function(t,i,r){var e="unknown",o=-1,h=i?i:e,s=e,f,u;return t&&(f=TDB.ViewElement.dataFor($(t.target)[0]),u=f?f.parent:null,u&&(s=u.getHostName(),o=platform.now()-u.getEmbedLoadStartTime())),StoryLog.StructuredTraceTag(8999775,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"IframeLoadingManager failed to load an embed.",{elapsedTime:o.toString(),reason:h,host:s}),r||n.loadNextEmbed(),!1},n.loadEmbedLayoutIframe=function(t){var i={embedModel:t._embedModel,height:t._model.position.getHeight(),width:t._model.position.getWidth(),onload:n.onIframeLoad,onerror:n.onIframeError,context:t};t.setIframe(n.createIframe(t,i))},n.unregisterAllElements=function(){n.isLayoutDone=!1;n.getInstance().embeddedElements=[]},n.getIsLoadingEmbeds=function(){return n.isLoadingEmbeds},n.createIframe=function(n,t){return UnitTestMode?new i.MockIframeVE(n,t):new i.IframeVE(n,t)},n.numberOfLoadedEmbedsWithPlaceholders=0,n.loadTimeoutMilliseconds=50,n}();t.IframeLoadingManager=r})(i=t.Common||(t.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u){u===void 0&&(u=!1);n.call(this,t);this._direction=i;this._isVisible=r;u&&(this._timer=new Utilities.ScheduledTimeout(this,3e3))}return __extends(t,n),t.prototype.initScrollPositions=function(n){this._lastScrollTop=n[1];this._lastScrollLeft=n[0]},t.prototype.onCameraMove=function(n){var t=this;if(t._direction.height!=0)t.onVertScroll(n[1]);if(t._direction.width!=0)t.onHorzScroll(n[0])},t.prototype.onVertScroll=function(n){var t=n;if(!(Math.abs(t-this._lastScrollTop)<32)){t>this._lastScrollTop?this.ensureVisibility(this._direction.height<0,!0):t<this._lastScrollTop&&this.ensureVisibility(this._direction.height>0,!0);this._lastScrollTop=t;return}},t.prototype.onHorzScroll=function(n){var t=n;if(!(Math.abs(t-this._lastScrollLeft)<32)){t>this._lastScrollLeft?this.ensureVisibility(this._direction.width<0,!0):t<this._lastScrollLeft&&this.ensureVisibility(this._direction.width>0,!0);this._lastScrollLeft=t;return}},t.prototype.ensureVisibility=function(n,t){var i=this,r;(i.clearAutoFadeTimer(),n&&t&&i.startAutoFadeTimer(),r=this._isVisible.getValue(),r!==n)&&TDB.applyUpdate(function(){i._isVisible.setValue(n)},1)},t.prototype.clearAutoFadeTimer=function(){var n=this;n._timer&&n._timer.clear()},t.prototype.startAutoFadeTimer=function(){var n=this;n._timer&&n._timer.set(function(){n.ensureVisibility(!1,!1)})},t.prototype.ensureVisible=function(n){n===void 0&&(n=!0);var t=this;t.ensureVisibility(n,!1)},t}(Disposable);n.ScrollVisibleManager=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){(function(n){n[n.Unknown=0]="Unknown";n[n.Sway=1]="Sway";n[n.OneDrive=2]="OneDrive";n[n.OneDriveWord=3]="OneDriveWord";n[n.OneDriveExcel=4]="OneDriveExcel";n[n.OneDrivePowerpoint=5]="OneDrivePowerpoint"})(n.EmbedType||(n.EmbedType={}));var t=n.EmbedType})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(n){function t(t,i){n.call(this,t);var r=this;r._model=i;r._model.onerror&&(r._timeoutId=setTimeout(function(){r._doNotLoadNext=!0;r._model.onerror.call(r._model.context,null,"Timed out")},StoryPageSettings.SiteIframeLoadingTimeoutMiliseconds))}return __extends(t,n),t.getAdditionalIframeAttrs=function(){return{}},t.prototype.iframeAttr1Args=function(){return t.getAdditionalIframeAttrs()},t.prototype.iframeAttr2Args=function(n){var r=this,f=r._model.embedModel.id,u=this._model.embedModel.getEmbedSourceUrl(n),e=Utilities.extractHostnameFromUrl(u),i={id:"iframe_"+f,src:"",visibility:"hidden",scrolling:"",allowfullscreen:""};return e&&!StoryPageSettings.BlockService_EmbedDecomp&&(i.src=u,i.visibility="visible",i.scrolling=t.getScrollingToString(r._model.embedModel.getScrolling(n)),i.allowfullscreen=r._model.embedModel.getAllowFullScreen(n)?"allowfullscreen":null),i},t.prototype.iframeEventsInitArgs=function(){var n=this,t={};return n._model.onload&&(t.load=function(t){return clearTimeout(n._timeoutId),n._model.onload.call(n._model.context,t,n._doNotLoadNext)}),n._model.onerror&&(t.error=function(t){return clearTimeout(n._timeoutId),n._model.onerror.call(n._model.context,t,"Loading error",n._doNotLoadNext)}),t},t.prototype.iframeStyleArgs=function(n){var c=this,h=c.parent,u=h.getScale(n),f,r={x:u,y:u},e=new Size(this._model.embedModel.position.getWidth(n),this._model.embedModel.position.getHeight(n)),o=new Size(parseFloat(this._model.embedModel.getWidth(n)),parseFloat(this._model.embedModel.getHeight(n))),s={x:u*e.width/o.width,y:u*e.height/o.height},i;return this._model.embedModel.renderModel.getSchemaVersion()>=56&&this._model.embedModel.getShouldScale(n)&&Math.abs(s.y-s.x)<t.c_uniformScaleThreshold?(r=s,f=o):f=e,i=h.PositionDivStyleArgs(n),i.width=Utilities.toPxStr(f.width),i.height=Utilities.toPxStr(f.height),(Math.abs(r.x-1)>=t.c_scaleThreshold||Math.abs(r.y-1)>=t.c_scaleThreshold)&&(i[Modernizr.prefixed("transform")]="scale("+r.x.toFixed(4)+","+r.y.toFixed(4)+")",i[Modernizr.prefixed("transformOrigin")]="0 0"),i},t.prototype.dispose=function(){var t=this;t._model=null;t._timeoutId&&(clearTimeout(t._timeoutId),t._timeoutId=null);n.prototype.dispose.call(this)},t.getScrollingToString=function(n){switch(n){case 0:return"auto";case 1:return"yes";case 2:return"no"}},t.c_scaleThreshold=.001,t.c_uniformScaleThreshold=.01,t}(TDB.FocusableViewElement);t.IframeVEBase=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(n){function i(i,r){n.call(this,i);this.parent=i;this.model=r;this.background=new t.BackgroundVE(this,this.model);this.scale=i.scale}return __extends(i,n),i.prototype.rootPropsArgs=function(n){var t={id:"viewportbackground_"+this.parent.model().id},i=this.background.classes(n);return t.className=["viewport-background"].concat(i).join(" "),t},i.prototype.rootStyleArgs=function(n){return Obj.extend(this.background.style(n),this.parent.backgroundType(n)===2?this.verticalFillStyle(n):this.horizontalFillStyle(n))},i.prototype.horizontalFillStyle=function(n){var t=this.parent.viewportSize(n),f=this.parent.parent.getWidth(n),e=this.parent.parent.getHeight(n),i=this.parent.absolutePositioning(n),o=Math.max(t.width,f),s=Math.max(Utilities.cvtServerToPx(this.getScale(n),this.model.getChild(n).position.getHeight(n)),e,t.height),h=Math.min(0,-i.top),r=Math.min(0,-i.left),u=Math.max(0,-r);return{padding:"0px "+u+"px 0px "+u+"px",top:h+"px",left:r+"px",width:o+"px",height:s+"px"}},i.prototype.verticalFillStyle=function(n){var t=this.parent.viewportSize(n),f=this.parent.parent.getWidth(n),e=this.parent.parent.getHeight(n),i=this.parent.absolutePositioning(n),o=Math.max(Utilities.cvtServerToPx(this.getScale(n),this.model.getChild(n).position.getWidth(n)),f,t.width),s=Math.max(t.height,e),r=Math.min(0,-i.top),h=Math.min(0,-i.left),u=Math.max(0,-r);return{padding:u+"px 0px "+u+"px 0px",top:r+"px",left:h+"px",width:o+"px",height:s+"px"}},i.prototype.contentArgs=function(n){return t.createLayoutVE(this,this.model.getChild(n))},i.prototype.backgroundArgs=function(){return this.background},i.prototype.getScale=function(n){return this.parent.getScale(n)},i.prototype.rootAnimatableInitArgs=function(){return"viewportbackground_"+this.model.id},i}(TDB.FocusableViewElement);t.ViewportBackgroundVEBase=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(n,i){t.call(this,n);var r=this;r._buttons=[];r._buttonLabels={};r._context=i.context;r._mouseEnter=i.mouseEnter;r._mouseLeave=i.mouseLeave;r._showButtonGroupWatchable=i.showButtonGroupWatchable}return __extends(i,t),i.prototype.addButton=function(n,t){var i=this;i._buttons.push(t);i._buttonLabels[n]=t},i.prototype.onMouseEnter=function(n){var t=this;return t._mouseEnter&&t._context&&t._mouseEnter.call(t._context,n),!1},i.prototype.onMouseLeave=function(n){var t=this;return t._mouseLeave&&t._context&&t._mouseLeave.call(t._context,n),!1},i.prototype.setButtonGroupWatcher=function(n){var t=this;t._showButtonGroupWatchable=n},i.prototype.addGlyphButton=function(t,i,r){var f=this,u="consumptionButton",e,o;i&&i.length>0&&(u=u+" "+i.join(" "));e=$.extend({cssClass:u,cssClassActive:"consumptionButtonActive",cssClassFocused:"consumptionButtonFocused",cssClassPressed:"consumptionButtonPressed",cssClassHover:"consumptionButtonHover"},r);o=new n.GlyphButtonVE(f,e);f.addButton(t,o)},i.prototype.addTextButton=function(t,i,r,u,f,e){var o=this,s="consumptionButton",h;e&&e.forEach(function(n){return s+=" "+n});h={buttonId:f,context:i,text:u,cssClass:s,click:r};o.addButton(t,new n.TextButtonVE(o,h))},i.prototype.buttonsArgs=function(){var n=this;return n._buttons},i.prototype.hasButton=function(n){var t=this;return!!t._buttonLabels[n]},i.prototype.clickButton=function(n){var t=this;t._buttonLabels[n].mouseClicked(undefined)},i.prototype.showButtonGroupEventsInitArgs=function(){var n=this,t={};return n._context&&(n._mouseLeave&&(t.mouseleave=n.onMouseLeave),n._mouseEnter&&(t.mouseenter=n.onMouseEnter)),t},i.prototype.showButtonGroupVisibleArgs=function(n){var t=this;return t._showButtonGroupWatchable?t._showButtonGroupWatchable.getWatchedValue(n):!0},i}(TDB.FocusableViewElement);n.StoryAppBarButtonGroupVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.View.Common.FRE,i=function(n){function i(i,r){var u,f;n.call(this,i);u=this;u._args=r;u._buttonGroups=[];u.createOverflowMenu(r.userState,r.currentStory);u.createSocialFlyout();u._visible=TDB.watchable(u,!0);f=!1;u._scrollVisibleManager=new t.ScrollVisibleManager(u,new Size(1,1),u._visible,f);u._scrollVisibleManager.initScrollPositions([0,0])}return __extends(i,n),i.prototype.createOverflowMenu=function(n,i){var r=this,u;r._overflowVisible=TDB.watchableTag(6373831,r,!1);u={visible:r._overflowVisible,cssClass:"overflowConsumptionWrapper",shouldExternalEventBeHandled:r.parent.isEditMode.getValue(),userState:n,currentStory:i};r._overflowMenu=new t.OverflowMenuVE(r,u)},i.prototype.createSocialFlyout=function(){var n=this,i;n._socialFlyoutVisible=TDB.watchable(n,!1);i={flyoutVisibleWatchable:n._socialFlyoutVisible,onFocusUpdated:n.onAppBarElementFocusUpdated,onFocusContext:n,shouldBubbleMouseClick:!0,titleWatcher:n.parent.titleWatcher,lookupId:n._args.currentStory.getLookupId(),storyViewMode:StoryPageSettings.Mode,showFacebook:StoryPageSettings.ShowFacebookShare,showTwitter:StoryPageSettings.ShowTwitterShare,shouldExternalEventBeHandled:n.parent.isEditMode.getValue()};n._socialFlyoutVE=new t.SocialFlyoutVE(n,i)},i.prototype.getVisibleWatcher=function(){var n=this;return n._visible},i.prototype.getOverflowVisibleWatcher=function(){var n=this;return n._overflowVisible},i.prototype.getSocialFlyoutVisibleWatcher=function(){var n=this;return n._socialFlyoutVisible},i.prototype.buttonGroupsArgs=function(){var n=this;return n._buttonGroups.reverse()},i.prototype.createAndAddButtonGroup=function(n){var i=this,r=n||{},u;return r.context||(r.context=i,r.mouseEnter=i.mouseEnter,r.mouseLeave=i.mouseLeave),u=new t.StoryAppBarButtonGroupVE(i,r),i._buttonGroups.push(u),u},i.prototype.toggleOverflowMenu=function(){var n=this;return n._overflowMenu.toggle(),!1},i.prototype.isSocialFlyoutActive=function(n){var t=this,i=t._socialFlyoutVisible.getWatchedValue(n),r=t._socialFlyoutVE.canAutoDismiss(n);return i&&!r},i.prototype.toggleSocialFlyout=function(){var n=this,t=!n.isSocialFlyoutActive();return n._socialFlyoutVE.mouseClicked(null),n.setSocialFlyoutVisibleState(t,!0),!1},i.prototype.setSocialFlyoutVisibleState=function(n,t){var i=this,r;(n||t||i._socialFlyoutVE.canAutoDismiss())&&(r=i._socialFlyoutVisible.getValue(),r!=n&&(n?i._socialFlyoutVE.show():t?i._socialFlyoutVE.hide():i._socialFlyoutVE.setDismissTimer()))},i.prototype.setOverflowVisible=function(n){var t=this;n?t._overflowMenu.show():t._overflowMenu.hide()},i.prototype.resetVisibleMenus=function(){var n=this;n._socialFlyoutVE.hide();n._overflowMenu.hide()},i.prototype.overflowMenuArgs=function(){var n=this;return n.getOverflowMenu()},i.prototype.getOverflowMenu=function(){var n=this;return n._overflowMenu},i.prototype.socialFlyoutArgs=function(){var n=this;return n._socialFlyoutVE},i.prototype.onCameraMove=function(n){var t=this;t._scrollVisibleManager.onCameraMove(n);t.resetVisibleMenus()},i.prototype.areMenusVisible=function(n){var t=this;return t._overflowVisible.getWatchedValue(n)||t._socialFlyoutVisible.getWatchedValue(n)},i.prototype.mouseEnter=function(){var n=this;return n.ensureVisible(),!1},i.prototype.mouseLeave=function(){var n=this;return n.setFadeTimer(),!1},i.prototype.appbarPlaceholderStyleArgs=function(){return{height:UX.showAppBarHoverRegionHeight+"px"}},i.prototype.appbarPlaceholderEventsInitArgs=function(){var n=this;return{mouseenter:n.mouseEnter,mouseleave:n.mouseLeave}},i.prototype.wrapperStyleArgs=function(){return{height:UX.showAppBarHoverRegionHeight+"px"}},i.prototype.wrapperFadeVisibleInitArgs=function(){return{visibleInit:!0,transitionOut:"opacity 0.7s ease"}},i.prototype.wrapperFadeVisibleArgs=function(n){var t=this,i=n.watchValue(t._visible);return i||t.yieldFocus(),{visible:i}},i.prototype.ensureVisible=function(n){n===void 0&&(n=!0);var t=this;t._scrollVisibleManager.ensureVisible(n)},i.prototype.getVisible=function(){var n=this;return n._visible.getValue()},i.prototype.getScrollVisibleManager=function(){var n=this;return n._scrollVisibleManager},i.prototype.hasButton=function(n){for(var i=this,t=0;t<i._buttonGroups.length;t++)if(i._buttonGroups[t].hasButton(n))return!0;return!1},i.prototype.clickButton=function(n){for(var i=this,t=0;t<i._buttonGroups.length;t++)if(i._buttonGroups[t].hasButton(n)){i._buttonGroups[t].clickButton(n);break}},i.prototype.onAppBarElementFocusUpdated=function(n){var t=this;n?t.ensureVisible():t.setFadeTimer()},i.prototype.setFadeTimer=function(n){var t=this,i=t.areMenusVisible(n);!i&&t._visible.getValue()&&t._scrollVisibleManager.startAutoFadeTimer()},i.prototype.yieldFocus=function(){for(var t=this,n=TDB.FocusableViewElement.getFocusedElement();n&&n!==t;)n=n.parent;n&&t.clearFocus(!0)},i.prototype.returnToEditCalloutArgs=function(){var n=this,i={className:"ReturnToAuthoring-callout",headerText:Resources.FirstRunReturnToAuthoringHeader,beakPosition:2,calloutID:4,delay:2};return new t.CalloutVE(n,i)},i}(TDB.FocusableViewElement);t.StoryAppBarVEBase=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function f(n,r){if(r instanceof i.ContainerSceneGraphElement)return new t.ContainerSceneGraphVE(n,r);if(r instanceof i.TextureSceneGraphElement)return new t.TextureSceneGraphVE(n,r);throw new Error("Unrecognized type for layout element: "+r);}var i=n.Model.RM,r=n.AnimationManager,u=function(n){function t(t,i){n.call(this,t);this.parent=t;this.model=i}return __extends(t,n),t.prototype.getModelObjectId=function(){return this.model.id},t.prototype.getAnimatableTransforms=function(n){var t=this.model.transforms.getCollection(n);return t.map(function(t){return r.convertModelTransform(n,t,!0,!1)})},t}(TDB.FocusableViewElement);t.SceneGraphVE=u;t.createSceneGraphVE=f})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){function c(n,t,i){return t===""?null:{namespaceUri:i,qualifiedName:n,value:t}}function t(n){var i,t;for(i in n)t=n[i],(t===null||t===undefined||t==="")&&delete n[i];return n}var l=function(t){function i(i,r){t.call(this,i);this.parent=i;this.params=r;this.internals=new n.SvgInternalsVE(this,this.params)}return __extends(i,t),i.prototype.svgRootStyleArgs=function(n){return this.params.getPositionning(n)},i.prototype.svgRootAttrArgs=function(n){return{"class":(this.params.classes||[]).join(" "),viewBox:[0,0,this.params.getWidth(n),this.params.getHeight(n)].join(" ")}},i.prototype.internalsArgs=function(){return this.internals},i}(TDB.ViewElement),i,r,u,f,e,o,s,h;n.SvgVEBase=l;i=function(n){function t(t,i){n.call(this,t);this.parent=t;this.params=i;this.definitions=TDB.mappedWatcherOwnerTag(5858780,this,this,this.params.definitions.bind(this.params,this),function(n){return n});this.rectangles=TDB.mappedWatcherOwnerTag(5858781,this,this,this.params.rectangles.bind(this.params,this),function(n){return n})}return __extends(t,n),t.prototype.groupAttrArgs=function(n){var t=this.params.rectclippathid(n);return t?{"clip-path":"url(#"+t+")"}:{}},t.prototype.hasDefsArgs=function(n){return!this.definitions.getWatchedValue(n).empty()},t.prototype.hasRectsArgs=function(n){return!this.rectangles.getWatchedValue(n).empty()},t.prototype.definitionsArgs=function(){return this.definitions},t.prototype.pathsArgs=function(n){return this.params.paths.call(this.params,this,n)},t.prototype.rectanglesArgs=function(){return this.rectangles},t}(TDB.ViewElement);n.SvgInternalsVEBase=i;r=function(n){function t(t,i){n.call(this,t);this.parent=t;this.params=i}return __extends(t,n),t.prototype.domid=function(){return this.params.identifier},t.prototype.clippathAttrArgs=function(){return{id:this.domid()}},t.prototype.pathAttrArgs=function(){return{d:this.params.path}},t}(TDB.ViewElement);n.SvgClipPathVEBase=r;u=function(n){function t(t,i){n.call(this,t);this.parent=t;this.params=i}return __extends(t,n),t.prototype.domid=function(){return this.params.identifier},t.prototype.colorFilterAttrArgs=function(){return{id:this.domid()}},t.prototype.redAttrArgs=function(){var n=this.params.color.a;return{slope:this.params.color.r/255*n+1-n}},t.prototype.greenAttrArgs=function(){var n=this.params.color.a;return{slope:this.params.color.g/255*n+1-n}},t.prototype.blueAttrArgs=function(){var n=this.params.color.a;return{slope:this.params.color.b/255*n+1-n}},t}(TDB.ViewElement);n.SvgColorFilterVEBase=u;f=function(n){function t(t,i){n.call(this,t);this.parent=t;this.params=i}return __extends(t,n),t.prototype.domid=function(){return this.params.identifier},t.prototype.dropShadowFilterAttrArgs=function(){return{id:this.domid()}},t.prototype.offsetAttrArgs=function(){return{dx:this.params.xOffset,dy:this.params.yOffset}},t.prototype.blurAttrArgs=function(){var n=this.params.blur;return{stdDeviation:n>=0?n:0}},t}(TDB.ViewElement);n.SvgDropShadowFilterVEBase=f;e=function(n){function t(t,i){n.call(this,t);this.parent=t;this.params=i}return __extends(t,n),t.prototype.domid=function(){return this.params.identifier},t.prototype.patternAttrArgs=function(){var n=this.params.position;return{id:this.domid(),x:n.x,y:n.y,width:n.w,height:n.h}},t.prototype.imageAttrArgs=function(){var n=this.params.position;return{id:"image_"+this.domid(),width:n.w,height:n.h}},t.prototype.imageNamespaceAttrArgs=function(){return[c("xlink:href",this.params.imageUrl,"http://www.w3.org/1999/xlink")].notNullOrUndefined()},t}(TDB.ViewElement);n.SvgPatternVEBase=e;o=function(n){function i(t,i){n.call(this,t);this.parent=t;this.params=i}return __extends(i,n),i.prototype.domid=function(){return this.params.identifier},i.prototype.imageAttrArgs=function(){var n=this.params.position,i=this.params.filterid?"url(#"+this.params.filterid+")":"",r=this.params.clipid?"url(#"+this.params.clipid+")":"";return t({id:this.domid(),x:n.left,y:n.top,width:n.width,height:n.height,filter:i,"clip-path":r})},i.prototype.imageNamespaceAttrArgs=function(){return[c("xlink:href",this.params.imageUrl,"http://www.w3.org/1999/xlink")].notNullOrUndefined()},i}(TDB.ViewElement);n.SvgImageVEBase=o;s=function(n){function i(t,i){n.call(this,t);this.parent=t;this.params=i}return __extends(i,n),i.prototype.pathStyleArgs=function(){return{fill:this.params.fill||"",stroke:this.params.stroke||""}},i.prototype.pathAttrArgs=function(){var n=this.params.path||"",i=this.params.filterid?"url(#"+this.params.filterid+")":"";return t({"class":(this.params.classes||[]).join(" "),"stroke-width":this.params.strokeWidth===undefined?"":this.params.strokeWidth.toString(),filter:i,d:n})},i}(TDB.ViewElement);n.SvgPathVEBase=s;h=function(n){function i(t,i){n.call(this,t);this.parent=t;this.params=i}return __extends(i,n),i.prototype.rectAttrArgs=function(){var n=this.params.position,i=this.params.filterid,r=this.params.clipid,u=this.params.fillid;return t({x:n.x,y:n.y,width:n.w,height:n.h,filter:i?"url(#"+i+")":"","clip-path":r?"url(#"+r+")":"",fill:u?"url(#"+u+")":""})},i}(TDB.ViewElement);n.SvgRectVEBase=h})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var u=n.Model.RM,f=n.Common,e,r,i;(function(n){n[n.None=0]="None";n[n.Color=1]="Color";n[n.Shape=2]="Shape";n[n.Image=3]="Image"})(t.BackgroundType||(t.BackgroundType={}));e=t.BackgroundType;r=function(r){function e(n,t){r.call(this,n);this.parent=n;this.model=t}return __extends(e,r),e.prototype.hasShadow=function(n){var t=this.model;return t.getBackgroundPathShadowXOff(n)!==0||t.getBackgroundPathShadowYOff(n)!==0||t.getBackgroundPathShadowBlur(n)>0},e.prototype.getImageUrl=function(n){var t=this.model.getBackgroundImage(n).getFilename(n);return t.length>=5&&t.substr(0,5)==="TSRI_"?f.UrlHelper.getInstance().remoteStaticImageUrl(t):CommonSettings.ContentBaseUrl+t},e.prototype.getImagePosition=function(n){return this.getImagePositionVersion42(n,this.parent.scale.getWatchedValue(n))},e.prototype.getImageRepeat=function(n){var t=this.model.getBackgroundImage(n).getTiling(n);switch(t){case 3:return"repeat";case 2:return"repeat-y";case 1:return"repeat-x";default:return"no-repeat"}},e.prototype.getOriginalBackgroundSize=function(n){var t=this,r=t.getImageUrl(n);return n.watchValue(i.getImageSize(r))},e.prototype.backgroundShapeArgs=function(){var n=this,i="shadowfilter_"+this.model.id;return new t.SvgVE(this,{classes:["container_background"],definitions:function(r,u){return n.hasShadow(u)?[new t.SvgDropShadowFilterVE(r,{identifier:i,xOffset:n.model.getBackgroundPathShadowXOff(u),yOffset:n.model.getBackgroundPathShadowYOff(u),blur:n.model.getBackgroundPathShadowBlur(u)})]:[]},rectclippathid:function(){return null},paths:function(r,u){var e=n.getPathColor(u),f=n.getSvgShape(u),s=f.strokeWidth?"transparent":e,h=e,o=[new t.SvgPathVE(r,{path:f.path,fill:s,stroke:h,strokeWidth:f.strokeWidth,classes:["path_shape",n.getFillColorClass(u)]})];return n.hasShadow(u)&&o.unshift(new t.SvgPathVE(r,{fill:t.LayoutCssClasses.getARGB(n.model.getBackgroundPathShadowColor(u)),path:f.path,filter:i,classes:["path_shadow"]})),o},rectangles:function(){return[]},getHeight:function(t){return n.model.position.getHeight(t)},getWidth:function(t){return n.model.position.getWidth(t)},getPositionning:function(){return{width:"100%",height:"100%"}}})},e.prototype.getSvgShape=function(n){var i=this.model,r=i.getBackgroundPath(n);return t.LayoutModelHelper.svgPathFromIPath(r,i.position,n)},e.prototype.getPathColor=function(n){return t.LayoutCssClasses.getARGB(this.model.getFillColorOverride(n))},e.prototype.classes=function(t){var i=[];return this.hasBackgroundFillClass(t)&&i.push(this.getFillColorClass(t)),i.push(this.getCursorClass(t)),this.model.getFlags().has(64)&&(i.push(n.View.ViewElements.renderButtonClass),i.push("backgroundRenderButton")),this.model.getFlags().has(384)?i.push(n.View.ViewElements.horizontalVerticalScrollClass):this.model.getFlags().has(256)?i.push(n.View.ViewElements.verticalScrollClass):this.model.getFlags().has(128)&&i.push(n.View.ViewElements.horizontalScrollClass),i},e.prototype.style=function(n){var t={backgroundImage:"",backgroundPosition:"",backgroundSize:"",backgroundRepeat:"",backgroundColor:""},e=Modernizr.prefixed("transformOrigin"),i,r,u,f;t[e]="";switch(this.backgroundTypeArgs(n)){case 3:i=this.getImagePosition(n,this.parent.scale.getWatchedValue(n));t.backgroundImage='url("'+this.getImageUrl(n)+'")';t.backgroundPosition=Utilities.toPxStr(i.left)+" "+Utilities.toPxStr(i.top);t.backgroundSize=Utilities.toPxStr(i.width)+" "+Utilities.toPxStr(i.height);t.backgroundRepeat=this.getImageRepeat(n);t.backgroundColor=this.getBackgroundColor(n);break;case 1:t.backgroundColor=this.getBackgroundColor(n)}return r=this.model.getTransformOrigin(n),r&&(u=Math.round(r.getX(n)*100),f=Math.round(r.getY(n)*100),(u!==50||f!==50)&&(t[e]=u+"% "+f+"%")),t},e.prototype.backgroundTypeArgs=function(n){return this.model.getBackgroundImage(n)?3:this.getSvgShape(n).enable?2:this.model.getFillColorName(n)||this.model.getFillColorOverride(n)?1:0},e.prototype.getBackgroundColor=function(n){var r=this.model.getFillColorOverride(n),i;return r!==""?new Color(r).toRGBAString():(i=t.ViewModel.previewVE.getPaletteColor(this.model.getFillColorName(),n),!i)?undefined:(i=i.clone(),this.model.getFillOpacityOverride(n)!==-1&&(i.a=this.model.getFillOpacityOverride(n)),i.toRGBAString())},e.prototype.hasBackgroundFillClass=function(n){return this.backgroundTypeArgs(n)===1&&this.model.getFillOpacityOverride(n)===-1},e.prototype.getCursorClass=function(n){var t=this.model.getCursor(n);return t!==0?"cursor"+u.Cursor[t]:""},e.prototype.getFillColorClass=function(n){var i=this.model.getFillColorName(n);return i&&i.length?t.LayoutCssClasses.getColorBg(i):""},e.prototype.getImagePositionVersion42=function(n,t){var b=this,s=this.model,l=s.position,i=l.getWidth(n),r=l.getHeight(n),a=b.getOriginalBackgroundSize(n),e=a.w,o=a.h,h,c;if(e<=0||o<=0)throw new Error("imageWidth and imageHeight both should > 0");if(i<0||r<0)throw new Error("containerWidth and containerHeight both should be >= 0");if(i==0||r==0)return new BaseRect(0,0,0,0);var v=e/o,y=i/r,p=0,w=0,u,f,k=s.getBackgroundImage(n).getFillStyle(n),d=s.getBackgroundImage(n).getHorizontalAlignment(n),g=s.getBackgroundImage(n).getVerticalAlignment(n);switch(k){case 0:u=e;f=o;break;case 1:u=i;f=o*i/e;break;case 2:f=r;u=e*r/o;break;case 3:v<y?(u=i,f=o*i/e):(f=r,u=e*r/o);break;case 4:v>y?(u=i,f=o*i/e):(f=r,u=e*r/o);break;case 5:u=i;f=r;break;default:throw new Error("Unsupported value of imageFillStyle");}switch(d){case 0:h=0;break;case 1:h=(i-u)/2;break;case 2:h=i-u;break;default:throw new Error("Unsupported value for horizontalAlignment");}p+=h;switch(g){case 0:c=0;break;case 1:c=(r-f)/2;break;case 2:c=r-f;break;default:throw new Error("Unsupported value for horizontalAlignment");}return w+=c,new BaseRect(Utilities.cvtServerToPx(t,p),Utilities.cvtServerToPx(t,w),Utilities.cvtServerToPx(t,u),Utilities.cvtServerToPx(t,f))},e}(TDB.ViewElement);t.BackgroundVEBase=r,function(n){function i(n){var u=t[n],r,i;if(!u||u.getValue().failed){r=TDB.watchableTag(6046625,this,{w:1,h:1,failed:!1});u=t[n]=r;i=$("<img/>");i.one("load",Utilities.deferredEventHandler(function(){TDB.applyUpdate(function(){var t=i[0].naturalWidth,u=i[0].naturalHeight,f=i[0].width,e=i[0].height;t>0&&u>0?r.setValue({w:t,h:u,failed:!1}):f>0&&e>0?r.setValue({w:f,h:e,failed:!1}):(r.setValue({w:1,h:1,failed:!0}),StoryLog.TraceTag(8795870,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Failed to get image dimensions. Image URL: {0}, naturalWidth: {1}, naturalHeight: {2}, width: {3}, height: {4}, complete: {5}",[n,t,u,f,e,i[0].complete],null))});i.unbind("error");i.unbind("load");i=null}));i[0].src=n;i.each(function(){i[0].complete&&i.trigger("load")});i.on("error",Utilities.deferredEventHandler(function(){TDB.applyUpdate(function(){r.setValue({w:1,h:1,failed:!0});StoryLog.TraceTag(8795871,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Failed to load image. Image URL: {0}",[n],null)});i&&(i.unbind("error"),i.unbind("load"),i=null)}))}return u}var t={};n.getImageSize=i}(i||(i={}))})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(n){function i(t,r){var u=this;n.call(this,t);this._rootModelObject=r;i._layoutMapping[r.id]=u}return __extends(i,n),i.prototype.getModelId=function(){return this._rootModelObject.id},i.prototype.dispose=function(t){var r=this;i._layoutMapping[r._rootModelObject.id]=null;delete i._layoutMapping[r._rootModelObject.id];n.prototype.dispose.call(this,t)},i.prototype.mouseClicked=function(i){n.prototype.mouseClicked.call(this,i);var r=this;return t.ViewModel.handleMouseClick(i,r)},i.getLayoutMapping=function(){return i._layoutMapping},i.prototype.getLayoutContext=function(){return null},i.prototype.getContentType=function(){return 0},i._layoutMapping={},i}(TDB.FocusableViewElement);t.SelectableElement=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){function h(n,t,u){if(t instanceof r.MapLayoutElement)return new i.MapLayoutVE(n,t);if(t instanceof r.ContainerLayoutElement)return new i.ContainerLayoutVE(n,t);if(t instanceof r.MediaViewportLayoutElement)return new i.MediaViewportLayoutVE(n,t);if(t instanceof r.TextBlockLayoutElement)return new i.TextBlockLayoutVE(n,t);if(t instanceof r.DecorationLayoutElement)return new i.DecorationLayoutVE(n,t);if(t instanceof r.ImageLayoutElement)return new i.ImageSelectorVE(n,t);if(t instanceof r.VideoLayoutElement)return new i.VideoLayoutVE(n,t);if(t instanceof r.ProjectionLayoutElement)return new i.ProjectionVE(n,t);if(t instanceof r.EmbedLayoutElement)return u?new i.EmbedLayoutVE(n,t):new i.ModeSelectorVE(n,t);if(t instanceof r.StatusUpdateLayoutElement)return u?new i.StatusUpdateLayoutVE(n,t):new i.ModeSelectorVE(n,t);if(t instanceof r.AgaveLayoutElement)return u?new i.AgaveLayoutVE(n,t):new i.ModeSelectorVE(n,t);if(t instanceof r.ClientLayoutElement)return e(n,t);if(t instanceof r.AudioLayoutElement)return new i.AudioLayoutVE(n,t);throw new Error("Unrecognized type for layout element: "+t);}function e(n,t){var r=t.getClientRecipe();switch(r){case 1:return new i.EndOfStoryLayoutVE(n,t);case 2:return new i.MadeWithSwayLayoutVE(n,t);default:throw new Error("Unrecognized client-side recipe for client layout element: "+r);}}function o(n,t,i){if(n.getAnimated(i))return undefined;var r=t.map(function(n){return c(n,i)}).join(" "),u=n.getDownscaleFactor(i);return u!==1&&(r=f("scale3d","",[u,u,1],1)+r),r}function f(n,t,i,r){return i.every(function(n){return n===r})?"":n+"("+i.map(function(n){return n.toFixed(u)}).join(t+",")+t+")"}function c(n,t){var s,c,h,e,i,o;if(n instanceof r.TranslateTransform2D)return s=n,f("translate","em",[s.getTranslateX(t)/100,s.getTranslateY(t)/100],0);if(n instanceof r.RotationTransform2D)return c=n,f("rotate","deg",[c.getValue(t)],0);if(n instanceof r.ScaleTransform2D)return h=n,f("scale","",[h.getScaleX(t),h.getScaleY(t)],1);if(n instanceof r.TranslateTransform3D)return e=n,f("translate3d","em",[e.getTranslateX(t),e.getTranslateY(t),e.getTranslateZ(t)],0);if(n instanceof r.RotationTransform3D)return i=n,"rotate3d("+i.getProjectX(t).toFixed(u)+","+i.getProjectY(t).toFixed(u)+","+i.getProjectZ(t).toFixed(u)+","+i.getValue(t).toFixed(u)+"deg)";if(n instanceof r.ScaleTransform3D)return o=n,f("scale3d","",[o.getScaleX(t),o.getScaleY(t),o.getScaleZ(t)],1);throw Error("transform not supported "+n);}var r=n.Model.RM,s=function(n){function u(t,r){this._model=r;n.call(this,t,r);this.background=new i.BackgroundVE(this,r);this.scale=this.findScaleWatchable()}return __extends(u,n),u.prototype.getLayoutContext=function(){return this._model.getLayoutContext()},u.prototype.getContentType=function(){return this._model.getContentType()},u.prototype.getModelObjectId=function(){return this._model.id},u.prototype.getAbsolutePosition=function(){var i=t.Common.LayoutUtilities.getAbsolutePosition(this._model),n=this.getPosition();return new BaseRect(n.getLeft()+i.left,n.getTop()+i.top,n.getWidth(),n.getHeight())},u.prototype.getDropShadow=function(n){var t=this._model,i=t.getDropShadowXOff(n)||0,r=t.getDropShadowYOff(n)||0,u=t.getDropShadowBlur(n)||0,f=new Color(t.getDropShadowColor(n)),s=t.getDropShadowSpread(n)||0,h=t.getDropShadowInset(n),e={xOffset:i,yOffset:r,blur:u,color:f,spread:s,inset:h,scale:this.getScale(n)},o;return DropShadow.isDropShadowVisible(e)||(i=t.getBackgroundPathShadowXOff(n)||0,r=t.getBackgroundPathShadowYOff(n)||0,u=t.getBackgroundPathShadowBlur(n)||0,f=new Color(t.getBackgroundPathShadowColor(n)),o={xOffset:i,yOffset:r,blur:u,color:f,spread:0,inset:!1,scale:this.getScale(n)},DropShadow.isDropShadowVisible(o)&&t.getBackgroundPath(n)&&!t.getBackgroundImage(n)&&(e=o)),e},u.prototype.getImageClipPath=function(n){var t=this._model,r=t.getBackgroundPath(n);return i.LayoutModelHelper.svgPathFromIPath(r,t.position,n)},u.prototype.getImageFilterPath=function(n){var t=this._model,r=t.getBackgroundFilterPath(n);return i.LayoutModelHelper.svgPathFromIPath(r,t.position,n)},u.prototype.forceSVG=function(){return!1},u.prototype.getScale=function(n){return this.scale.getWatchedValue(n)/this.getDownscaleFactor(n)},u.prototype.findRootVE=function(){for(var n=this;n&&!(n instanceof i.RootVE);)n=n.parent;if(!n)throw new Error("can't find the layout tree which contains this layout element");return n},u.prototype.findScaleWatchable=function(){for(var n=this.parent;n&&!n.scale;)n=n.parent;return n.scale},u.prototype.getPosition=function(){return this._model.position},u.prototype.getClasses=function(n){var t=["container"].concat(this.background.classes(n)),i,e,f;return this.getDownscaleFactor(n)!=1&&t.push("downscaled"),i=this._model.getAccessibilityInfo(),i&&i.attributes&&(e=i.attributes.getCollection(),f=e.firstOrDefault(function(n){return n.getName()===Aria.Attributes.TabIndex}),f&&f.getValue().charAt(0)!=="-"&&t.push(u.FocusableClass)),CommonSettings.ClientDevice==="Desktop"&&this._model.transforms.getCollection(n).some(function(t){return t instanceof r.RotationTransform2D&&Math.abs(t.getValue(n))>.0001})&&t.push("anti-aliased"),t},u.prototype.getDownscaleFactor=function(n){return this._model.getDownscaleFactor(n)},u.prototype.PositionDivPropsArgs=function(n){var t={id:"container_"+this._model.id},i=this.getClasses(n);return i.length&&(t.className=i.join(" ")),t},u.prototype.PositionDivAnimatableInitArgs=function(){return this._model.id},u.prototype.PositionDivBoxShadowArgs=function(n){return this.getDropShadow(n)},u.prototype.borderstyle=function(n){var t=this._model.getBorderRadius(n),i,r;return t?(i=this.getScale(n),r=[i*t.getTopLeft(n),i*t.getTopRight(n),i*t.getBottomRight(n),i*t.getBottomLeft(n)],r.every(function(n){return n===0}))?{borderRadius:""}:{borderRadius:r.join("px ")+"px"}:{borderRadius:""}},u.prototype.transformStyle=function(n){var t=o(this._model,this._model.transforms.getCollection(n),n),i={};return t!==undefined&&(i[Modernizr.prefixed("transform")]=t),i},u.prototype.PositionDivStyleArgs=function(n){var t=this.getPosition(),i=this.getScale(n),r=this._model.getOpacity(n),u=this._model.getZOrder(n);return Obj.extendAll(this.borderstyle(n),this.background.style(n),this.transformStyle(n),{zIndex:u===0?"":u.toString(),left:Utilities.cvtServerToPxStr(i,t.getLeft(n)),width:Utilities.cvtServerToPxStr(i,t.getWidth(n)),top:Utilities.cvtServerToPxStr(i,t.getTop(n)),height:Utilities.cvtServerToPxStr(i,t.getHeight(n)),opacity:r===1?"":r.toString(),visibility:this._model.getHidden(n)?"hidden":"",pointerEvents:this._model.getIsOverlay(n)?"none":""})},u.prototype.PositionDivAttrArgs=function(n){return i.createAttributes(n,this._model)},u.prototype.backgroundArgs=function(){return this.background},u.prototype.getLayoutHierarchy=function(){for(var t,r=[this._model.id],n=this.parent;n;n=n.parent){if(n instanceof u)t=n._model.id;else if(n instanceof i.SceneGraphVE)t=n.model.id;else if(n instanceof i.ViewportVE)t=n.model().id;else continue;r.push(t)}return r},u.FocusableClass="focusable",u}(i.SelectableElement),u;i.LayoutVE=s;i.createLayoutVE=h;i.createClientLayoutVE=e;i.transformStyle=o;u=3})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n,i){t.call(this,n,i);this._watchableFailed=TDB.watchableTag(7959327,this,!1);this._agaveModel=i;this._failed=!1}return __extends(i,t),i.prototype.getContentId=function(){return this._model.getContentId()},i.prototype.setAgaveFailed=function(n){if(this._failed=n,this._watchableFailed.getValue()!=n){var t=this;TDB.applyUpdate(function(){return t._watchableFailed.setValue(t._failed)},1)}},i.prototype.AgaveFrameContentAgaveCreateArgs=function(t){return{agaveId:this._agaveModel.getAgaveId(t),agaveData:this._agaveModel.getAgaveData(),agaveManifest:this._agaveModel.getManifest(),agaveHeight:this.getScale()*this._agaveModel.position.getHeight(),agaveWidth:this.getScale()*this._agaveModel.position.getWidth(),agaveIsEdit:n.View.ViewElements.ViewModel.isEditMode.getValue(),agaveSettings:this._agaveModel.getAgaveSettings(),agaveTraversalId:this.getLayoutContext()?this.getLayoutContext().getContentProxy(t).id:null}},i.prototype.AgaveFrameContentAgaveDataChangedArgs=function(n){return{agaveData:this._agaveModel.getAgaveData(n)}},i.prototype.AgaveFrameContentAgaveSizeChangedArgs=function(n){return{agaveHeight:this.getScale(n)*this._agaveModel.position.getHeight(n),agaveWidth:this.getScale(n)*this._agaveModel.position.getWidth(n)}},i.prototype.AgaveFrameContentAgaveIsEditChangedArgs=function(t){return{agaveIsEdit:n.View.ViewElements.ViewModel.isEditMode.getWatchedValue(t)}},i.prototype.AgaveFrameContentAgaveSettingsChangedArgs=function(n){return{agaveSettings:this._agaveModel.getAgaveSettings(n)}},i.prototype.AgaveFrameStyleArgs=function(n){var i=this.getScale(n),r=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getTop(n)),u=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getLeft(n)),f=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getHeight(n)),e=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getWidth(n)),t=this.PositionDivStyleArgs(n);return t.position="absolute",t.top=r,t.left=u,t.height=f,t.width=e,t.display=n.watchValue(this._watchableFailed)?"none":"block",t},i.prototype.AgaveFrameAttrArgs=function(){return{id:"agave_"+this._agaveModel.id}},i.prototype.AgaveFailedPlaceholderStyleArgs=function(n){var i=this.getScale(n),r=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getTop(n)),u=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getLeft(n)),f=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getHeight(n)),e=Utilities.cvtServerToPxStr(i,this._agaveModel.position.getWidth(n)),t={};return t.position="absolute",t.top=r,t.left=u,t.height=f,t.width=e,t.display=n.watchValue(this._watchableFailed)?"block":"none",t},i.prototype.ErrorMessageTextArgs=function(){return Resources.RendererAgaveLoadingErrorMessage},i.prototype.AgaveFailedImageAttrArgs=function(){return{src:n.View.ViewElements.getFailedImageBase64()}},i}(t.LayoutVE);t.AgaveLayoutVEBase=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){var r=n.View.Common.FRE,u=function(u){function f(i,r){var f,e;u.call(this,i,r);this.parent=i;this.lazyLayoutChildren=new t.Common.LazyArray(this,this.getLayoutChildren.bind(this),this.selectLazyItem.bind(this),n.OM.inAutomation);f=this;f._layoutChildren=TDB.mappedWatcherOwnerTag(4469513,f,f,f.getLayoutChildrenLazy,f.getChildVE);e=t.Common.LayoutElementLogger.getInstance();e&&e.trackElements(r.children.getCollection());f.keyframeType=r.getKeyFrameType()}return __extends(f,u),f.prototype.selectLazyItem=function(n,t){var f,i,r;if(!n||n.length==0)return this.lazyChildrenResults=null,null;if(n.length==1)return this.lazyChildrenResults=null,n;if((f=this.findRootVE(null),!f)||(i=f.getViewportRectangle2D(),!i))return this.lazyChildrenResults=null,null;if(r=this.getAbsolutePosition(),this.lazyChildrenResults&&!t&&this.lazyChildrenResults.visibleRect.equals(i)&&this.lazyChildrenResults.absoluteRect.equals(r)&&this.lazyChildrenResults.results.length==n.length)return[this.lazyChildrenResults.results.pop()];var u=i.getCenter(),e=n.slice(),o=n.sort(function(n,t){var o=new BaseRect(r.left+n.position.getLeft(),r.top+n.position.getTop(),n.position.getWidth(),n.position.getHeight()),s=new BaseRect(r.left+t.position.getLeft(),r.top+t.position.getTop(),t.position.getWidth(),t.position.getHeight()),f=i.overlapsRect(o),h=i.overlapsRect(s);if(f||h){if(f!=h)return f?1:-1}else{var c=o.getCenter(),l=s.getCenter(),a=Math.pow(c.left-u.left,2)+Math.pow(c.top-u.top,2),v=Math.pow(l.left-u.left,2)+Math.pow(l.top-u.top,2);if(a!=v)return v-a}return e.indexOf(t)-e.indexOf(n)});return this.lazyChildrenResults={visibleRect:i,absoluteRect:r,results:o},[this.lazyChildrenResults.results.pop()]},f.prototype.getLayoutChildrenLazy=function(n){return this.lazyLayoutChildren.getCollection(n)},f.prototype.getLayoutChildren=function(n){return this._model.children.getCollection(n)},f.prototype.getChildVE=function(n){return i.createLayoutVE(this,n)},f.prototype.PositionDivStyleArgs=function(n){var t=u.prototype.PositionDivStyleArgs.call(this,n);return t.overflow=this._model.getOverflow(n)?"":"hidden",t},f.prototype.layoutChildrenArgs=function(){return this._layoutChildren},f.prototype.debugArgs=function(){return null},f.prototype.mouseClicked=function(n){u.prototype.mouseClicked.call(this,n);var t=this;switch(t.keyframeType){case"Clip":case"FixedClip":case"StaticClip":i.ViewModel.isEditMode.getValue()||r.FirstRunTriggers.detailViewEntered();break;case"DetailViewPage":r.FirstRunTriggers.detailViewExited();break;case"PhotoStack":r.FirstRunTriggers.stackClicked()}return i.ViewModel.handleMouseClick(n,t)},f.prototype.calloutArgs=function(){var n=this,t;return n.keyframeType==="PhotoStack"?(t={className:"PhotoStack-callout",headerText:Resources.FirstRunPhotoStackHeader,beakPosition:4,calloutID:9},new i.CalloutVE(n,t)):n.keyframeType==="DetailViewPage"?(t={className:"DetailView-callout",headerText:Resources.FirstRunDetailViewHeader,bodyText:Resources.FirstRunDetailViewBody,beakPosition:5,calloutID:10},new i.CalloutVE(n,t)):undefined},f}(i.LayoutVE);i.ContainerLayoutVEBase=u})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Common,r=function(r){function u(n,t){r.call(this,n,t);var i=this;i.showMadeWithSwayArgs()&&i.createMadeWithSwayButtons()}return __extends(u,r),u.prototype.createMadeWithSwayButtons=function(){var n=this,r="",u,f;n.isEmbedded()?(n._madeWithSwayUrl=i.UrlHelper.getInstance().viewUrl(StoryPageSettings.LookupId),n._madeWithSwayUrlTarget="_blank",r=Resources.EmbedMadeWithSwayButtonDescription):(n._madeWithSwayUrl=CommonSettings.IsRegisteredAuthor?i.UrlHelper.getInstance().mySwaysUrl():i.UrlHelper.getInstance().exploreUrl(),n._madeWithSwayUrlTarget="_self",r=CommonSettings.IsRegisteredAuthor?Resources.RegistedAuthorMadeWithSwayButtonDescription:Resources.AnonymousMadeWithSwayButtonDescription);u={buttonId:256,ulsCategory:Diag.ULSCat.msoulscat_Story_Site,description:r,text:Resources.MadeWithSway,textPlacementRight:!0,glyphClass:Glyphs.SwayWatermarkGrayGlyph,hoverGlyphClass:Glyphs.SwayWatermarkGlyph,activeGlyphClass:Glyphs.SwayWatermarkGlyph,focusedGlyphClass:Glyphs.SwayWatermarkGlyph,clipClass:Glyphs.SwayWatermarkClip,cssClass:"madeWithSwayButton",cssClassActive:"madeWithSwayButtonActive",cssClassHover:"madeWithSwayButtonHover",cssClassPressed:"madeWithSwayButtonPressed",cssClassFocused:"madeWithSwayButtonFocused",cssClassDisabled:"madeWithSwayButtonDisabled",textClass:"madeWithSwayText",context:n,click:n.onMadeWithSwayButtonClick};n._madeWithSwayButton=new t.GlyphButtonVE(n,u);f={buttonId:256,ulsCategory:Diag.ULSCat.msoulscat_Story_Site,description:r,glyphClass:Glyphs.SwayWatermarkGrayGlyph,clipClass:Glyphs.SwayWatermarkClip,cssClass:"madeWithSwaySmallButton",context:n};n._madeWithSwaySmallButton=new t.GlyphButtonVE(n,f)},u.prototype.madeWithSwayButtonArgs=function(){var n=this;return n._madeWithSwayButton},u.prototype.madeWithSwaySmallButtonArgs=function(){var n=this;return n._madeWithSwaySmallButton},u.prototype.onMadeWithSwayButtonClick=function(){var n=this;try{if(!window.open(n._madeWithSwayUrl,n._madeWithSwayUrlTarget))throw new Error("Cannot open a new window");}catch(t){TDB.applyUpdate(function(){n._madeWithSwayButton.setEnabled(!1)});StoryLog.StructuredTraceTag(9052931,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"window.open failed on click on Made with Sway button.",{error:t.message,embedded:n.isEmbedded(),userAgent:navigator.userAgent})}return!0},u.prototype.PositionDivStyleArgs=function(n){var t=r.prototype.PositionDivStyleArgs.call(this,n);return t.width="initial",t},u.prototype.smallButtonWrapperFadeVisibleInitArgs=function(){return{visibleInit:!0,transitionIn:"opacity 0.3s ease",transitionOut:"opacity 1s ease"}},u.prototype.smallButtonWrapperFadeVisibleArgs=function(n){return{visible:!n.watchValue(t.ViewModel.appBar.getVisibleWatcher())}},u.prototype.onHover=function(){return t.ViewModel.appBar.ensureVisible(),!0},u.prototype.smallButtonWrapperEventsInitArgs=function(){var n=this;return{mouseover:n.onHover,mousemove:n.onHover}},u.prototype.buttonWrapperEventsInitArgs=function(){var n=this;return{mouseover:n.onHover,mousemove:n.onHover}},u.prototype.buttonWrapperFadeVisibleInitArgs=function(){return{visibleInit:!0,transitionOut:"opacity 0.7s ease"}},u.prototype.buttonWrapperFadeVisibleArgs=function(n){return{visible:n.watchValue(t.ViewModel.appBar.getVisibleWatcher())}},u.prototype.showMadeWithSwayArgs=function(){return StoryPageSettings.EmbedHostMode!=2},u.prototype.isEmbedded=function(){return n.View.ViewElements.ViewModel.isEmbeddedMode.getValue()},u}(t.LayoutVE);t.MadeWithSwayLayoutVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(i,r){var u,f,e;t.call(this,i,r);u=this;u._mapModel=r;u.index=TDB.watchableTag(5645648,u,0);f={buttonId:169,text:"Previous",context:u,click:u.onLeftButtonClicked,cssClass:"leftButton",textClass:"segoeUI"};u.leftButton=new n.TextButtonVE(u,f);e={buttonId:168,text:"Next",context:u,click:u.onRightButtonClicked,cssClass:"rightButton",textClass:"segoeUI"};u.rightButton=new n.TextButtonVE(u,e)}return __extends(i,t),i.prototype.MapBingMapCreateArgs=function(n){var t=this,i,r;return t._mapPins=t._mapModel.getPins(n),i=t.getPinsFromModel(n),r={pins:i,zoom:4,height:Math.floor(t._mapModel.position.getHeight()*t.getScale()),width:Math.floor(t._mapModel.position.getWidth()/2*t.getScale())},{mapParams:r,mapCallbackContext:t,mapCallback:t.mapCallback,pinClickedCallback:t.pinClickedCallback}},i.prototype.getPinsFromModel=function(n){var t=this;return t._mapModel.getPins(n)},i.prototype.mapCallback=function(n){var t=this;t._map=n},i.prototype.pinClickedCallback=function(n){for(var i=this,t=0;t<i._mapPins.getLength();t++)if(n==i._mapPins.getCollection()[t].getContentId()){TDB.applyUpdate(function(){i.index.setValue(t)});break}},i.prototype.onLeftButtonClicked=function(){var n=this,t=n._mapPins.getLength(),i=(n.index.getValue()+t-1)%t;return TDB.applyUpdate(function(){n.index.setValue(i)}),!1},i.prototype.onRightButtonClicked=function(){var n=this,t=n._mapPins.getLength(),i=(n.index.getValue()+1)%t;return TDB.applyUpdate(function(){n.index.setValue(i)}),!1},i.prototype.currentChildArgs=function(n){var t=this,f=n.watchValue(t.layoutChildrenArgs()),u=n.watchValue(t.index),i=t._mapPins.itemAtIndex(u).getCoordinate(),r;return i!=null&&t._map.setView({center:new Microsoft.Maps.Location(i.getLatitude(),i.getLongitude())}),r=t.getScale(n),t._map.setOptions({height:Math.floor(t._mapModel.position.getHeight()*r),width:Math.floor(t._mapModel.position.getWidth()/2*r)}),f[u]},i.prototype.leftButtonArgs=function(){var n=this;return n.leftButton},i.prototype.rightButtonArgs=function(){var n=this;return n.rightButton},i}(n.ContainerLayoutVEBase);n.MapLayoutVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.AnimationManager,r=function(n){function r(t,i){n.call(this,t,i);this.parent=t;this.model=i}return __extends(r,n),r.prototype.rootDivStyleArgs=function(n){if(Modernizr.preserve3d)return{};var t=this.getAnimatableTransforms(n).filter(function(n){return n instanceof i.Properties.Scaled}),r=t.length?t[0].get(2):0;return r===0?{}:{zIndex:r.toFixed()}},r.prototype.childrenArgs=function(n){for(var r=this.model.children.getCollection(n),u=[],i=r.length-1;i>=0;--i)u.push(t.createSceneGraphVE(this,r[i]));return u},r.prototype.rootDivAnimatableInitArgs=function(){return this.model.id},r}(t.SceneGraphVE);t.ContainerSceneGraphVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(n,i){t.call(this,n,i);this.model=i;this.affectUIVisibility=!1;this.uiVisible=!1;var r=this.model.getKeyFrameType();r=="Navigate Forward"?(this.affectUIVisibility=!0,this.uiVisible=!1):(r=="Navigate Back"||r=="Navigate Home")&&(this.affectUIVisibility=!0,this.uiVisible=!0)}return __extends(i,t),i.prototype.getClasses=function(n){var r=this.model.getIsOverlay(n),i=t.prototype.getClasses.call(this,n);return r?(i.push("decoration-overlay-div"),i):i},i.prototype.isOverlayArgs=function(n){return this.model.getIsOverlay(n)},i.prototype.forceSVG=function(n){return this.isOverlayArgs(n)},i.prototype.mouseClicked=function(){var t=this;return t.affectUIVisibility&&n.ViewModel.isPreviewMode.getValue()&&n.ViewModel.appBar.ensureVisible(t.uiVisible),!0},i}(n.LayoutVE);n.DecorationLayoutVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var u=n.Model.RM,i=n.View.Common,r=function(n){function r(i,r){n.call(this,i,r);this.domListener=Obj.implement(this,{domAttached:this.onDomAttached,domDetached:this.onDomDetached});this._embedModel=r;this.iframe=TDB.watchableTag(8951317,this,null);this.isShowingPlaceholder=TDB.watchableTag(8964033,this,!1);this.isIframeLoaded=!1;var u=this.getHostName();StoryPageSettings.SiteEmbedPlaceholdersEnabled&&StoryPageSettings.SiteDomainsForEmbedPlaceholders&&StoryPageSettings.SiteDomainsForEmbedPlaceholders.contains(u)&&(t.ViewModel.isEditMode.getValue()||StoryPageSettings.SiteDevicesForEmbedPlaceholdersInConsumption&&StoryPageSettings.SiteDevicesForEmbedPlaceholdersInConsumption.contains(CommonSettings.ClientDevice))?this.setPlaceholder():this.placeholder=null;this.addDomListener(this.domListener)}return __extends(r,n),r.prototype.isIframeLoadingManagerEnabledArgs=function(){return StoryPageSettings.SiteIframeLoaderEnabled},r.prototype.placeholderArgs=function(n){var t=this;if(t.isShowingPlaceholder.getWatchedValue(n))return t.placeholder},r.prototype.placeholderOldArgs=function(n){var t=this;if(t.isShowingPlaceholder.getWatchedValue(n))return t.placeholder},r.getScrollingToString=function(n){switch(n){case 0:return"auto";case 1:return"yes";case 2:return"no"}},r.prototype.ifLoadingArgs=function(n){var t=this;return!t.isShowingPlaceholder.getWatchedValue(n)&&t.iframe.getWatchedValue(n)==null},r.prototype.loadingSpinnerStyleArgs=function(){var n=this;return{"background-image":"url("+CommonSettings.ContentBaseUrl+"loadingblackspinner.gif)"}},r.prototype.loadingTextTextArgs=function(){var n=this;return Resources.LoadingMessage},r.prototype.placeholderImageStyleArgs=function(){var n=this._model.position;return{height:Utilities.toPxStr(n.getHeight()),width:Utilities.toPxStr(n.getWidth())}},r.prototype.placeholderImageAttrArgs=function(){var n=this,t=n._embedModel.id;return{id:"embed_"+t}},r.prototype.embedIframeArgs=function(n){var t=this;return t.isShowingPlaceholder.getWatchedValue(n)?null:t.iframe.getWatchedValue(n)},r.prototype.embedIframeOldArgs=function(n){var i=this,r;return i.isShowingPlaceholder.getWatchedValue(n)?null:(r={embedModel:i._embedModel,height:i._model.position.getHeight(),width:i._model.position.getWidth(),onload:i.onIframeLoad,onerror:i.onIframeError,context:i},new t.IframeVE(i,r))},r.prototype.setPlaceholder=function(){var n=this,i={embedModel:n._embedModel,click:n.EmbedPlaceholderViewClick,context:n};n.placeholder=new t.EmbedPlaceholderVE(n,i);TDB.applyUpdate(function(){n.isShowingPlaceholder.setValue(!0)},3)},r.prototype.setIframe=function(n){var t=this;if(t.disposed){n.dispose();return}this.embedLoadStartTime=platform.now();TDB.applyUpdate(function(){t.iframe.setValue(n)});t.isIframeLoaded=!0},r.prototype.getEmbedLoadStartTime=function(){return this.embedLoadStartTime},r.prototype.dispose=function(){var t=this,r;t.disposed||(StoryPageSettings.SiteIframeLoaderEnabled&&i.IframeLoadingManager.unregisterEmbedLayoutElement(t),r=t.iframe.getValue(),r&&(r.dispose(),TDB.applyUpdate(function(){return t.iframe.setValue(null)},7)),this.removeDomListener(this.domListener),n.prototype.dispose.call(this))},r.prototype.EmbedPlaceholderViewClick=function(){var n=this,r;return TDB.applyUpdate(function(){n.isShowingPlaceholder.setValue(!1)},3),StoryPageSettings.SiteIframeLoaderEnabled?i.IframeLoadingManager.loadEmbedLayoutIframe(n):(r={embedModel:n._embedModel,height:n._model.position.getHeight(),width:n._model.position.getWidth(),onload:n.onIframeLoad,onerror:n.onIframeError,context:n},n.setIframe(new t.IframeVE(n,r))),!1},r.prototype.onIframeLoad=function(){var n="unknown",t=-1;return n=this.getHostName(),t=platform.now()-this.getEmbedLoadStartTime(),StoryLog.StructuredTraceTag(9253712,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"An embed has loaded.",{elapsedTime:t.toString(),host:n}),!1},r.prototype.onIframeError=function(){var n=-1,t="unknown";return t=this.getHostName(),n=platform.now()-this.getEmbedLoadStartTime(),StoryLog.StructuredTraceTag(9253713,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Embed failed to load.",{elapsedTime:n.toString(),host:t}),!1},r.prototype.onDomAttached=function(){StoryPageSettings.SiteIframeLoaderEnabled&&i.IframeLoadingManager.registerEmbedLayoutElement(this)},r.prototype.onDomDetached=function(){StoryPageSettings.SiteIframeLoaderEnabled&&i.IframeLoadingManager.unregisterEmbedLayoutElement(this)},r.prototype.getHostName=function(){var n=this;return Utilities.extractHostnameFromUrl(n._embedModel.getEmbedSourceUrl())},r}(t.LayoutVE);t.EmbedLayoutVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Common,r=function(n){function r(t,i){n.call(this,t,i);var r=this;r.parent=t;r.getStartedButton=r.createTextButton(r,r.getStarted,Resources.EndOfStoryGetStartedButtonText,"segoeUISemilight endOfStoryGetStarted",132);StoryPageSettings.EmbedHostMode!=1&&(r.shareToFacebookButton=r.createGlyphButton(r,r.shareToFacebook,Glyphs.PreviewFacebookIconGlyph,Glyphs.PreviewFacebookHoverIconGlyph,Glyphs.PreviewFacebookIconClip,"endOfStoryShareButton renderButton",Resources.ShareToFacebookButtonDescription,135),r.shareThisFacebookButton=r.createGlyphButton(r,r.shareToFacebook,Glyphs.PreviewFacebookIconGlyph,Glyphs.PreviewFacebookHoverIconGlyph,Glyphs.PreviewFacebookIconClip,"endOfStoryShareButton renderButton",Resources.ShareToFacebookButtonDescription,135,"st_facebook_custom",136),r.shareToTwitterButton=r.createGlyphButton(r,r.shareToTwitter,Glyphs.PreviewTwitterIconGlyph,Glyphs.PreviewTwitterHoverIconGlyph,Glyphs.PreviewTwitterIconClip,"endOfStoryShareButton renderButton",Resources.ShareToTwitterButtonDescription,138),r.shareThisTwitterButton=r.createGlyphButton(r,r.shareToTwitter,Glyphs.PreviewTwitterIconGlyph,Glyphs.PreviewTwitterHoverIconGlyph,Glyphs.PreviewTwitterIconClip,"endOfStoryShareButton renderButton",Resources.ShareToTwitterButtonDescription,138,"st_twitter_custom",139),r.shareLinkButton=r.createGlyphButton(r,r.shareLink,Glyphs.PreviewLinkIconGlyph,Glyphs.PreviewLinkHoverIconGlyph,Glyphs.PreviewFacebookIconClip,"endOfStoryShareButton renderButton",Resources.ShareByLinkButtonDescription,137))}return __extends(r,n),r.prototype.createTextButton=function(n,i,r,u,f){var e=this,o={buttonId:f,context:n,click:i,text:r,cssClass:u};return new t.TextButtonVE(e,o)},r.prototype.createGlyphButton=function(n,i,r,u,f,e,o,s,h,c){var l=this,a={buttonId:s,context:n,click:i,glyphClass:r,hoverGlyphClass:u,clipClass:f,cssClass:e,description:o,shareThisWidgetClass:h};return h?new t.ShareThisWidgetVE(l,{buttonId:c,widgetClassName:h,buttonGlyphVEArgs:a,titleWatcher:t.ViewModel.titleWatcher,storyViewMode:StoryPageSettings.Mode}):new t.GlyphButtonVE(l,a)},r.prototype.getStarted=function(){var n=CommonSettings.IsAuthenticated?133:134;return ActionLogger.RecordClientAction(new ClientAction.ButtonClickAction(n,Diag.ULSCat.msoulscat_Story_Site)),i.UserStories.getInstance().createStoryOrSignIn("EndOfSway"),!1},r.prototype.shareToFacebook=function(){return t.StoryShareAction.shareToFacebook(i.UrlHelper.getInstance().shareLinkUrl(StoryPageSettings.LookupId),135),!1},r.prototype.shareToTwitter=function(){var n=this;return t.StoryShareAction.shareToTwitter(i.UrlHelper.getInstance().shareLinkUrl(StoryPageSettings.LookupId),StoryPageSettings.Mode==2,138,n._model.renderModel.renderModelRoot.getTitle()),!1},r.prototype.shareLink=function(){return t.StoryShareAction.shareViewLink(i.UrlHelper.getInstance().shareLinkUrl(StoryPageSettings.LookupId),137),!1},r.prototype.getStartedButtonArgs=function(){var n=this;return n.getStartedButton},r.prototype.facebookButtonArgs=function(n){var t=this;return StoryPageSettings.ShowFacebookShare?SharingManager.IsShareThisReady.getWatchedValue(n)?t.shareThisFacebookButton:t.shareToFacebookButton:null},r.prototype.twitterButtonArgs=function(n){var t=this;return StoryPageSettings.ShowTwitterShare?SharingManager.IsShareThisReady.getWatchedValue(n)?t.shareThisTwitterButton:t.shareToTwitterButton:null},r.prototype.linkButtonArgs=function(){var n=this;return StoryPageSettings.ShowTwitterShare||StoryPageSettings.ShowFacebookShare?n.shareLinkButton:null},r.prototype.headingTextArgs=function(){return Resources.EndOfStoryHeading},r.prototype.messageTextArgs=function(){return Resources.EndOfStoryMessage},r.prototype.initializeShareThis=function(n){var t=this;!t.shareThisInitialized&&SharingManager.IsShareThisReady.getWatchedValue(n)&&(window.stButtons.locateElements(),t.shareThisInitialized=!0)},r}(t.LayoutVE);t.EndOfStoryLayoutVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){var e=n.Model.RM,f=n.Common,r,u;(function(n){n[n.begin=0]="begin";n[n.fading=1]="fading";n[n.finishing=2]="finishing"})(r||(r={}));u=function(n){function r(r,u){n.call(this,r,u);this._isHidden=TDB.watchableTag(6612550,this,!0);this._prevUrl=null;this._imageUrl=TDB.watcherTag(6385802,this,this,this.computeImageUrl);this._fadingState=0;this._timeout=null;this._timeoutNotifier=TDB.notifierTag(6385803,this);this._allowPrefetchingImages=TDB.watcherTag(8987783,this,this,this.allowPrefetchingImages);this.mediaDomListener=Obj.implement(this,{domAttached:this.onDomAttached,domDetached:this.onDomDetached});this._imageLoader=t.Common.makeImageLoader(this,u);this.engine=i.ViewModel.previewVE._root.getValue()._interactionEngine.getAnimationEngine();this.addDomListener(this.mediaDomListener)}return __extends(r,n),r.prototype.getClasses=function(n){var t=["medialayoutve"];return this.getDownscaleFactor(n)!=1&&t.push("downscaled"),t},r.prototype.onHiddenChangedUpdate=function(){},r.prototype.updateHidden=function(n){var t=this;TDB.applyUpdate(function(){t.onHiddenChangedUpdate(n);t._isHidden.setValue(n)},1)},r.prototype.isHidden=function(n){return n.watchValue(this._isHidden)},r.prototype.onDomAttached=function(){this.updateHidden(!1)},r.prototype.onDomDetached=function(){this.updateHidden(!0)},r.prototype.tryGetProperty=function(n,t){var i=n.getModelProperty(t);return i?i.property:undefined},r.prototype.dispose=function(t){this.mediaDomListener&&(this.removeDomListener(this.mediaDomListener),this.mediaDomListener=null);n.prototype.dispose.call(this,t);this.clearTimeout();this._imageLoader.cancelRequest()},r.prototype.canFadeInHigherResolutions=function(n){return!(this._model.getAnimated(n)&&this._model.transforms.getCollection(n).length>0)},r.prototype.advanceState=function(){var t=this,n;if(this._timeout===null){if(!this.canFadeInHigherResolutions()){this._prevUrl=null;return}n=-1;switch(this._fadingState){case 0:this._fadingState=1;n=500;break;case 1:this._fadingState=2;n=0;break;case 2:this._fadingState=0;this._prevUrl=null;break;default:throw new Error("unknown fading state");}n>=0&&(this._timeout=setTimeout(function(){t._timeout=null;TDB.applyUpdate(function(){return t._timeoutNotifier.notify()})},n))}},r.prototype.clearTimeout=function(){var n=this._timeout;n!==null&&(clearTimeout(n),this._timeout=null)},r.prototype.getImageUrl=function(n){var t=n.watchValue(this._imageUrl);return(this._imageLoader.getFailureCount()>0&&(this._prevUrl=null),this._prevUrl&&this._prevUrl!==t)?(this.advanceState(),n.watch(this._timeoutNotifier),this._fadingState===1?this._prevUrl:t):(this._prevUrl=t,t)},r.prototype.computeImageUrl=function(n){var o,c,i,r;if(n.watchValue(this._isHidden)&&!n.watchValue(this._allowPrefetchingImages))return this._imageLoader.cancelRequest(),this._fadingState=0,this._prevUrl=null,this.clearTimeout(),"";var t=this._model,l=CommonSettings,s=t.getImageId(n);if(s&&l){var h=t.imageCrop,u=h.getWidth(n),e=h.getHeight(n);return u===0&&e===0&&(o=t.position,u=o.getWidth(n),e=o.getHeight(n)),c=Math.max(u,e)*this.getScale(n)*(window.devicePixelRatio||1),i=Math.max(t.getImageOriginalWidth(n),t.getImageOriginalHeight(n)),i===0&&(i=3840),this._imageLoader.getImageUrl(s,c,i,this.getPreserveOriginalImage(n),this.getAnimatedImagesEnabled(n),n)}return r=f.UrlHelper.getInstance().getUrlForUnprocessedImage(t.getImageUrl(n)),StoryLog.TraceTag(6944707,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"No copy of image in our storage, showing fallback image from original, external path. Image URL: {0}",[r]),this._imageLoader.setFallbackUrl(r),r},r.prototype.allowPrefetchingImages=function(n){var r,u;return StoryPageSettings.AllowPrefetchingImages?(r=this._model,!r)?!1:(u=r.model.getWorldId(n),u!=="ExpoWorld")?!1:n.watchValue(i.ViewModel.isEditMode)?!1:t.Common.LayoutUtilities.isDetailView(r):!1},r.prototype.getPreserveOriginalImage=function(){return!1},r.prototype.getAnimatedImagesEnabled=function(n){var t=i.ViewModel.previewVE.getLayoutTree(n);return t.getDevice(n)!==2&&!Utilities.ios7},r.prototype.getImagePosition=function(n,t){var f=this._model,i=f.imageCrop,e=f.position,o=i.getLeft(n),s=i.getTop(n),r=i.getWidth(n),u=i.getHeight(n),h=e.getWidth(n),c=e.getHeight(n);return new BaseRect(Utilities.cvtServerToPx(t,r?o:0),Utilities.cvtServerToPx(t,u?s:0),Utilities.cvtServerToPx(t,r?r:h),Utilities.cvtServerToPx(t,u?u:c))},r.prototype.failedImageArgs=function(n){var t=this._model;return this._imageLoader.getFailed(n)?(t.getImageId(n)==null?StoryLog.TraceTag(7125194,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Failed to load fallback image, showing error message to user in renderer. Image URL: {0}",[this.getImageUrl(n)]):StoryLog.TraceTag(6944708,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"Failed to load image, showing error message to user in renderer. Image URL: {0}",[this.getImageUrl(n)]),new i.FailedImageVE(this)):null},r.prototype.getImageRepeat=function(){return"no-repeat"},r.prototype.upgradingArgs=function(n){return this.canFadeInHigherResolutions(n)?(this.getImageUrl(n),n.watch(this._timeoutNotifier),this._fadingState!==0):!1},r.prototype.newImageFadeVisibleInitArgs=function(){return{}},r.prototype.newImageFadeVisibleArgs=function(){return{visible:!0}},r}(i.LayoutVE);i.MediaLayoutVE=u})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function e(){if(--i,i<0)throw new Error("The number of active audio players has become negative.  Value = "+i);else i===0&&r.resolve()}var u=n.Model.RM,f=n.Common,i=0,r=$.Deferred().resolve(),o=function(n){function i(t,i){n.call(this,t,i);this._playing=!1;var r=this;r._audioShowing=TDB.watchableTag(8954403,r,!1)}return __extends(i,n),i.prototype.dispose=function(t){var r=this;i._playingAudio&&i._playingAudio===this&&(i._playingAudio=null);r.setAudioNotPlaying;n.prototype.dispose.call(this,t)},i.prototype.getClasses=function(t){return["AudioLayoutPlayer"].concat(n.prototype.getClasses.call(this,t))},i.prototype.AudioArgs=function(n){return n.watchValue(this._audioShowing)?this.initAudioPlayer():null},i.prototype.onHiddenChangedUpdate=function(n){n&&this._audioShowing.setValue(!1)},i.prototype.getPlayerDescriptor=function(n){var t=this,i=t.isHidden(n);return i?(t.setAudioNotPlaying,null):t._model.getAudioPlayerDescriptor(n)},i.prototype.playButtonClicked=function(){var n=this;return t.ViewModel.deselectElements(),TDB.applyUpdate(function(){n._audioShowing.setValue(!0);i._playingAudio&&i._playingAudio!==n&&i._playingAudio.hideAudio();i._playingAudio=n}),!1},i.prototype.hideAudio=function(){var n=this;n._audioShowing.setValue(!1)},i.prototype.ThumbnailImgAttrArgs=function(n){var t=this,i=t.PositionDivAttrArgs(n);return i.src=t.getImageUrl(n),i},i.prototype.getOfflinePlayButtonArgs=function(){var n=this;return{buttonId:58,clipClass:Glyphs.PlayButtonClip,glyphClass:Glyphs.PlayButtonGlyph,focusedGlyphClass:Glyphs.PlayButtonGlyph,hoverGlyphClass:Glyphs.PlayButtonGlyph,cssClass:"AudioLayoutPlayButton",context:n,click:function(){return!1},description:Resources.OfflinePlayButtonDescription}},i.prototype.getOnlinePlayButtonArgs=function(){var n=this;return{buttonId:58,clipClass:Glyphs.PlayButtonClip,glyphClass:Glyphs.PlayButtonGlyph,focusedGlyphClass:Glyphs.PlayButtonSelected,hoverGlyphClass:Glyphs.PlayButtonHover,cssClass:"AudioLayoutPlayButton",context:n,click:n.playButtonClicked,description:Resources.PlayButtonDescription}},i.prototype.PlayButtonArgs=function(n){var i=this,u=i._audioShowing.getWatchedValue(n),r;return u?null:(r=f.Environment.getInstance().isClientOnline(n)?i.getOnlinePlayButtonArgs():i.getOfflinePlayButtonArgs(),new t.GlyphButtonVE(i,r))},i.prototype.initAudioPlayer=function(){var n=this,t=n._model.getAudioPlayerType();switch(t){case 0:return n.initBrowserAudioPlayer();default:throw new Error("Unknown player type: "+u.AudioPlayerType[t]);}},i.prototype.isCropped=function(){var n=this,t=n._model.getParentContainer();return n._model.getContentId()==t.getContentId()},i.prototype.getStyle=function(n){var r=this,u=r.getScale(n),t,i;return t=r.isCropped()?r._model.getParentContainer().position.getWidth(n)*u:r._model.position.getWidth(n)*u,i=t,t<189&&(t>162?i=162:t>129?i=129:t>88&&(i=88)),"width: "+i+"px; padding: 0 "+(t-i)/2+"px;"},i.prototype.initBrowserAudioPlayer=function(){var n=this,i={getStyle:n.getStyle,getUrl:n.getPlayerDescriptor,context:n};return new t.BrowserAudioPlayerVE(n,i)},i.whenNoAudiosPlaying=function(){return r},i.prototype.setAudioNotPlaying=function(){this._playing&&(this._playing=!1,platform.setImmediate(e))},i}(t.MediaLayoutVE);t.AudioLayoutVEBase=o})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i){n.call(this,t);var r=this;r._model=i}return __extends(t,n),t.prototype.htmlBrowserPlayerAttrArgs=function(n){var t=this,i=t._model.context,r=t._model.getUrl.call(i,n),u=t._model.getStyle.call(i,n);return{style:u,src:r}},t}(TDB.ViewElement);n.BrowserAudioPlayerVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var i,t;n.transparentWhite=new Color(255,255,255,0);i=function(i){function r(t,r){i.call(this,t,r);this.parent=t;this.imgClipPath=TDB.watcherTag(5858779,this,this,this.createImageClipPath);this.svgInternals=new n.SvgInternalsVE(this,this.svgDefinition())}return __extends(r,i),r.prototype.PositionDivAttrArgs=function(n){var t=i.prototype.PositionDivAttrArgs.call(this,n);return t.viewBox=[0,0,this.getPosition().getWidth(n),this.getPosition().getHeight(n)].join(" "),t},r.prototype.internalsArgs=function(){return this.svgInternals},r.prototype.newInternalsArgs=function(){return new n.SvgInternalsVE(this,new t(this,this._imageUrl,this._model.id+"^"))},r.prototype.getImageClipPath=function(n){return this.imgClipPath.getWatchedValue(n)},r.prototype.getImageFilterPath=function(t){var i=this._model,r=i.getFilterPath(t);return n.LayoutModelHelper.svgPathFromIPath(r,i.position,t)},r.prototype.getImageFilterColor=function(t){var i=n.ViewModel.previewVE.getPaletteColor(this._model.getFilterColorName(),t);return i?i:n.transparentWhite},r.prototype.getImageFilterActive=function(n){return!!this.getImageFilterColor(n).a},r.prototype.PositionDivBoxShadowArgs=function(n){return this.getImageClipPath(n).enable?null:i.prototype.PositionDivBoxShadowArgs.call(this,n)},r.prototype.createImageClipPath=function(t){var i=this._model,r=i.getPath(t);return n.LayoutModelHelper.svgPathFromIPath(r,i.position,t)},r.prototype.svgDefinition=function(){return new t(this)},r}(n.MediaLayoutVE);n.ComplexImageVEBase=i;t=function(){function t(n,t,i){i===void 0&&(i=n._model.id);this.img=n;this.url=t;this.id=i;this.imageclippathid="clippath_"+this.id;this.filterclippathid="filterclip_"+this.id;this.multiplyfilterid="multiplyfilter_"+this.id;this.dropshadowfilterid="dropshadowfilter_"+this.id}return t.prototype.hasSvgShadow=function(n){var t=this.img.getDropShadow(n);return t.xOffset!==0||t.yOffset!==0||t.blur>0},t.prototype.definitions=function(t,i){var r=[],e=this.img.getImageClipPath(i),f,u;return e.enable&&r.push(new n.SvgClipPathVE(t,{identifier:this.imageclippathid,path:e.path})),this.img.getImageFilterActive(i)&&(f=this.img.getImageFilterPath(i),f.enable&&r.push(new n.SvgClipPathVE(t,{identifier:this.filterclippathid,path:f.path})),r.push(new n.SvgColorFilterVE(t,{identifier:this.multiplyfilterid,color:this.img.getImageFilterColor(i)}))),this.hasSvgShadow(i)&&(u=this.img.getDropShadow(i),r.push(new n.SvgDropShadowFilterVE(t,{identifier:this.dropshadowfilterid,xOffset:u.xOffset,yOffset:u.yOffset,blur:u.blur}))),r},t.prototype.rectclippathid=function(n){return this.img.getImageClipPath(n).enable?this.imageclippathid:null},t.prototype.paths=function(t,i){if(!this.hasSvgShadow(i))return[];var r=this.img.getImageClipPath(i),u=this.img.getDropShadow(i);return[new n.SvgPathVE(t,{classes:["path_shadow"],fill:u.color.toRGBAString(),path:r.path,filterid:this.dropshadowfilterid})]},t.prototype.rectangles=function(t,i){var r=[],u=this.img.getImagePosition(i,1),f=this.url?i.watchValue(this.url):this.img.getImageUrl(i),e=this.img.getImageFilterPath(i);return e.enable?(r.push(new n.SvgImageVE(t,{identifier:"image_"+this.id,position:u,imageUrl:f})),r.push(new n.SvgImageVE(t,{identifier:"filteredimage_"+this.id,position:u,imageUrl:f,clipid:this.filterclippathid,filterid:this.multiplyfilterid}))):r.push(new n.SvgImageVE(t,{identifier:"image_"+this.id,position:u,imageUrl:f,filterid:this.img.getImageFilterActive(i)?this.multiplyfilterid:undefined})),r},t}()})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){t.call(this,n)}return __extends(i,t),i.prototype.errorMessageTextArgs=function(){return Resources.RendererImageLoadingErrorMessage},i.prototype.errorMessageImageURLTextArgs=function(n){return this.parent._imageUrl.getWatchedValue(n)},i.prototype.failedImageIconAttrArgs=function(){return{src:n.View.ViewElements.getFailedImageBase64()}},i}(TDB.FocusableViewElement);t.FailedImageVEBase=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(n){function t(t,i){n.call(this,t,i);this.parent=t}return __extends(t,n),t.prototype.getClasses=function(t){return["imageve"].concat(n.prototype.getClasses.call(this,t))},t.prototype.PositionDivPropsArgs=function(t){var i=this.getImageUrl(t);return Obj.extend(n.prototype.PositionDivPropsArgs.call(this,t),{id:"image_"+this._model.id,src:i})},t.prototype.newImageStyleArgs=function(n){return this.PositionDivStyleArgs(n)},t.prototype.newImagePropsArgs=function(t){return Obj.extend(n.prototype.PositionDivPropsArgs.call(this,t),{src:this._imageUrl.getWatchedValue(t)})},t.prototype.getPreserveOriginalImage=function(n){return this._model.getFlags(n).has(32)},t}(t.MediaLayoutVE);t.ImageVEBase=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){function i(n,t){return!!t.getPath(n)||!!t.getFilterColorName(n)||!!t.getFilterPath(n)||!!t.getBackgroundFilterPath(n)||!!t.getBackgroundPath(n)}var t=function(t){function r(n,i){t.call(this,n);this.model=i;this.selectedImage=TDB.watcherTag(5858778,this,this,this.selectImage)}return __extends(r,t),r.prototype.imageArgs=function(){return this.selectedImage},r.prototype.selectImage=function(t){return i(t,this.model)?new n.ComplexImageVE(this,this.model):new n.ImageVE(this,this.model)},r}(TDB.FocusableViewElement);n.ImageSelectorVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i){n.call(this,t);this._urlRegex=/^https:\/\/onedrive(\.live|\.live\-int|)\.com\/.+/i;var r=this;r._model=i}return __extends(t,n),t.prototype.playerIframeAttrArgs=function(n){var i=this,r=i._model.context,t=i._model.getUrl.call(r,n),u,f;if(!i._urlRegex.test(t))throw new Error("OneDrive embed URL is not in the correct form: "+t);return t+=t.indexOf("?")<0?"?":"&",t+="autoplay=1",u=i._model.getWidth.call(r,n),f=i._model.getHeight.call(r,n),{width:u,height:f,src:t}},t}(TDB.ViewElement);n.OneDriveVideoPlayerVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function u(){--i;i===0&&r.resolve()}var f=n.Model.RM,e=n.Common,i=0,r=$.Deferred().resolve(),o=function(n){function o(t,i){n.call(this,t,i);this._playing=!1;var r=this;r._videoShowing=TDB.watchableTag(4469517,r,!1)}return __extends(o,n),o.prototype.dispose=function(t){o._playingVideo&&o._playingVideo===this&&(o._playingVideo=null);this._playing&&(this._playing=!1,platform.setImmediate(u));n.prototype.dispose.call(this,t)},o.prototype.getClasses=function(t){return["VideoLayoutPlayer"].concat(n.prototype.getClasses.call(this,t))},o.prototype.VideoArgs=function(n){return n.watchValue(this._videoShowing)?this.initVideoPlayer():null},o.prototype.onHiddenChangedUpdate=function(n){n&&this._videoShowing.setValue(!1)},o.prototype.getWidth=function(n){var t=this,i=t.getScale(n);return t.isCropped()?t._model.getParentContainer().position.getWidth(n)*i:t._model.position.getWidth(n)*i},o.prototype.getHeight=function(n){var t=this,i=t.getScale(n);return t.isCropped()?t._model.getParentContainer().position.getHeight(n)*i:t._model.position.getHeight(n)*i},o.prototype.isCropped=function(){var n=this,t=n._model.getParentContainer();return n._model.getContentId()==t.getContentId()},o.prototype.getPlayerDescriptor=function(n){var t=this,i=t.isHidden(n);return i?(t._playing&&(this._playing=!1,platform.setImmediate(u)),null):t._model.getVideoPlayerDescriptor(n)},o.prototype.playButtonClicked=function(){var n=this;return t.ViewModel.deselectElements(),TDB.applyUpdate(function(){n._videoShowing.setValue(!0);o._playingVideo&&o._playingVideo!==n&&o._playingVideo.hideVideo();o._playingVideo=n}),!1},o.prototype.hideVideo=function(){var n=this;n._videoShowing.setValue(!1)},o.prototype.ThumbnailImgAttrArgs=function(n){var t=this,i=t.PositionDivAttrArgs(n);return i.src=t.getImageUrl(n),i},o.prototype.getOfflinePlayButtonArgs=function(){var n=this;return{buttonId:306,clipClass:Glyphs.PlayButtonClip,glyphClass:Glyphs.PlayButtonGlyph,focusedGlyphClass:Glyphs.PlayButtonGlyph,hoverGlyphClass:Glyphs.PlayButtonGlyph,cssClass:"VideoLayoutPlayButton",context:n,click:function(){return!1},description:Resources.OfflinePlayButtonDescription}},o.prototype.getOnlinePlayButtonArgs=function(n){var t=this,r=null,i;return t.isCropped()&&(i=this.getScale(n),r={left:Utilities.cvtServerToPxStr(i,t._model.getParentContainer().position.getWidth()/2),top:Utilities.cvtServerToPxStr(i,t._model.getParentContainer().position.getHeight()/2)}),{buttonId:306,clipClass:Glyphs.PlayButtonClip,glyphClass:Glyphs.PlayButtonGlyph,focusedGlyphClass:Glyphs.PlayButtonSelected,hoverGlyphClass:Glyphs.PlayButtonHover,cssClass:"VideoLayoutPlayButton",context:t,click:t.playButtonClicked,description:Resources.PlayButtonDescription,style:r}},o.prototype.PlayButtonArgs=function(n){var i=this,u=i._videoShowing.getWatchedValue(n),r;return u?null:(r=e.Environment.getInstance().isClientOnline(n)?i.getOnlinePlayButtonArgs(n):i.getOfflinePlayButtonArgs(),new t.GlyphButtonVE(i,r))},o.prototype.initVideoPlayer=function(){var n=this,t=n._model.getVideoPlayerType();switch(t){case 0:return n.initYouTubePlayer();case 1:return n.initOneDriveVideoPlayer();default:throw new Error("Unknown player type: "+f.VideoPlayerType[t]);}},o.prototype.initYouTubePlayer=function(){var n=this;return new t.YouTubePlayerVE(n,{playerParams:{modestbranding:1,rel:0,enablejsapi:1,autoplay:1,wmode:"opaque"},playerEvents:{onStateChange:n.onStateChanged},getHeight:n.getHeight,getWidth:n.getWidth,getVideoId:n.getPlayerDescriptor,context:n})},o.prototype.initOneDriveVideoPlayer=function(){var n=this,i={getHeight:n.getHeight,getWidth:n.getWidth,getUrl:n.getPlayerDescriptor,context:n};return new t.OneDriveVideoPlayerVE(n,i)},o.prototype.onStateChanged=function(n){var e=this,o=this,t,f;if(ActionLogger.RecordClientAction(new ClientAction.YouTubeVideoStateChange("unknown",n.data)),n.data===0){if(t=document.webkitFullscreenElement,t&&TDB.ViewElement.dataFor(t).parent===this){document.webkitExitFullscreen();f=function(){removeEventListener("webkitfullscreenchange",f);e.onStateChanged(n)};addEventListener("webkitfullscreenchange",f);return}TDB.applyUpdate(function(){o._videoShowing.setValue(!1)})}n.data===1||n.data===3?this._playing||(this._playing=!0,++i,i===1&&(r=$.Deferred())):this._playing&&(this._playing=!1,u())},o.whenNoVideosPlaying=function(){return r},o.prototype.PlayerPositionDivStyleArgs=function(n){var t=this.PositionDivStyleArgs(n),i,r;return this.isCropped()?(i=this.getPosition(),r=this.getScale(n),t.left=Utilities.cvtServerToPxStr(r,-i.getLeft(n)),t.top=Utilities.cvtServerToPxStr(r,-i.getTop(n))):(t.left="0px",t.top="0px"),t},o}(t.MediaLayoutVE);t.VideoLayoutVEBase=o})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){function t(n){return n?"color_"+n:""}function i(n){return n?"color_"+n+"Bg":""}function r(n){return n?"color_"+n+"Bd":""}function u(n){return n?"font_"+n:""}function f(n){if(!n)return"";var t=parseInt(n.substr(1,2),16),i=parseInt(n.substr(3,2),16),r=parseInt(n.substr(5,2),16),u=parseInt(n.substr(7,2),16);return"rgba("+i+", "+r+", "+u+", "+t/255+")"}n.getColor=t;n.getColorBg=i;n.getColorBd=r;n.getFont=u;n.getARGB=f})(t=n.LayoutCssClasses||(n.LayoutCssClasses={}))})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r;(function(n){function t(){return{enable:!1,viewbox:"0 0 100 100",path:"m 0 0",strokeWidth:0,info:"none"}}function r(t,i,r){return t?n.getSvgPath(t.getPathType(r),t.getValues(r),t.getStrokeWidth(r),i.getWidth(r),i.getHeight(r)):n.singletonDefaultShape}function u(r,u,f,e,o){var h,c,l,v,k,g,p,nt,s,y,tt,it,b;if(r===undefined||r!==1&&!u||!e||!o)return n.singletonDefaultShape;h=t();h.enable=!0;h.info=i.PathType[r];h.strokeWidth=f;c=e/100;l=o/100;h.viewbox="0 0 "+e+" "+o;switch(r){case 0:v=u.match(/[^\s,]+/g);v&&v.length%2!=1?(k=v.map(function(n,t){return Math.min(Math.max(parseFloat(n),0),100)*(t&1?l:c)}),g=!1,k.forEach(function(n){isNaN(n)&&(g=!0)}),h.path=g?"m 0 0":"M "+k.slice(0,2).join(" ")+" L "+k.slice(2).join(" ")+" z"):h.path="m 0 0";break;case 1:p=e/2;nt=o/2;h.path=["M",p,0,"A",p,nt,0,0,0,p,o,p,nt,0,0,0,p,0,"z"].join(" ");break;case 2:s=parseFloat(u);s=Math.min(s,e/2,o/2);h.path=!s||s<=0?"m 0 0":["M",0,s,"A",s,s,0,0,1,s,0,"L",e-s,0,"A",s,s,0,0,1,e,s,"L",e,o-s,"A",s,s,0,0,1,e-s,o,"L",s,o,"A",s,s,0,0,1,0,o-s,"z"].join(" ");break;case 3:var v=u.match(/[\-0-9\.e]+|[mzlhvcsqta]/gi),w=[],rt=v.length,a=[],d="z";for(y=0;y<rt;++y){if(tt=v[y],isNaN(parseFloat(tt)))d=tt,w.push(d);else if(/[mlhvcsqta]/i.test(d))--y;else{w.push("m");w.push("0");w.push("0");break}switch(d.toLowerCase()){case"h":a=[c];break;case"v":a=[l];break;case"m":case"l":case"t":a=[c,l];break;case"q":case"s":a=[c,l,c,l];break;case"c":a=[c,l,c,l,c,l];break;case"a":a=[c,l,1,1,1,c,l];break;default:a=[]}for(it=a.length,b=0;b<it;++b)w.push(parseFloat(v[y+1+b])*a[b]);y+=it}h.path=w.join(" ")}return h}n.getDefaultShape=t;n.singletonDefaultShape=t();n.svgPathFromIPath=r;n.getSvgPath=u})(r=t.LayoutModelHelper||(t.LayoutModelHelper={}))})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;t._isFullScreen=TDB.watchableTag(6112583,t,!1);t._canAppFullscreen=n;t.setupFullScreenEvents()}return n.prototype.setupFullScreenEvents=function(){var n=this;$(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(t){var r=document,u=!!(r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement),i,f;n._isExternalFullScreen=u?t.srcElement instanceof Document?t.srcElement.activeElement instanceof HTMLIFrameElement:t.currentTarget instanceof Document?t.currentTarget.activeElement instanceof HTMLIFrameElement:t.srcElement instanceof HTMLIFrameElement:!1;TDB.applyUpdate(function(){n._isFullScreen.setValue(u)});$.browser.webkit&&(i=$("#storyroot")[0],i&&(f=i.style.position,i.style.position="static",i.clientTop,i.style.position=f))})},n.prototype.isExternalFullScreen=function(){return this._isExternalFullScreen},n.prototype.isFullscreen=function(n){return this._isFullScreen.getWatchedValue(n)},n.prototype.isFullscreenEnabled=function(){var n=document.documentElement;return n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen},n.prototype.requestFullScreen=function(){var n=document.documentElement;n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},n.prototype.exitFullScreen=function(){var n=document;n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen()},n.prototype.toggleFullscreen=function(){var n=this,t=n._isFullScreen,i=!t.getValue();i?n.requestFullScreen():n.exitFullScreen();TDB.applyUpdate(function(){t.setValue(i)})},n.prototype.canToggleFullscreen=function(n){n===void 0&&(n=null);var t=this;return t.isFullscreenEnabled()&&t._canAppFullscreen.getWatchedValue(n)},n}();n.FullScreenManager=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,u=n.View.Common.FRE,r=function(r){function u(n,t){r.call(this,n);this._root=TDB.watcherTag(6324880,this,this,this.createRootVE);this.colorStyle=new Utilities.DynamicStyle(this);this.fontFaces=new Utilities.DynamicStyle(this);this.textStyles=new Utilities.EditableDynamicStyle(this);var i=this;this.currentStory=t;this.paletteColors=TDB.watcherTag(6112482,this,this,this.computePaletteColors);this.gotoHashTargetEnabled=!0}return __extends(u,r),u.prototype.getStyleId=function(n){return this.currentStory.getRenderModel(n).getLayoutStyleId(n)},u.prototype.onHashChanged=function(n){this._root.getValue().onHashChanged(n)},u.prototype.onPopState=function(n){this._root.getValue().onPopState(n)},u.prototype.getWidth=function(n){return this.parent.getPreviewWidth(n)},u.prototype.getHeight=function(n){return this.parent.getPreviewHeight(n)},u.prototype.getLayoutTree=function(n){var i=this.currentStory.getRenderModel(n),t=i.layoutTrees.getCollection(n);return t.length>0?t[0]:null},u.prototype.mouseClicked=function(n){return r.prototype.mouseClicked.call(this,n),!1},u.prototype.getPaletteColor=function(n,t){var i=this.paletteColors.getWatchedValue(t);return i[n]},u.prototype.computePaletteColors=function(n){var t=this.currentStory.getRenderModel(n),i;return t?(i=t.getPaletteColors(n).getCollection(n),i.todict(function(t,i){var r=t.getId(n),u=new Color(t.getValue(n));i[r]=u})):{}},u.prototype.updatePaletteColors=function(n){this.colorStyle.define(this.paletteColorFactory.bind(this,n))},u.prototype.paletteColorFactory=function(n,t){var u=this.paletteColors.getWatchedValue(n),i,r;for(i in u)r=u[i].toRGBAString(),t.rule("#storyroot .color_{0}Bg { background-color: {1}; fill: {1}; stroke: {1}; }",i,r),t.rule("#storyroot .color_{0}Bd { border-color: {1}; fill: {1}; stroke: {1}; }",i,r),t.rule("#storyroot .color_{0} { color: {1}; }",i,r)},u.prototype.updateFontFaces=function(t){this.fontFaces.define(this.fontFaceFactory.bind(this,t));TDB.applyUpdate(function(){return n.View.Common.fontFaceNotifier.notify()},6)},u.prototype.fontFaceFactory=function(n,r){var u={};this.forEachTextStyle(function(f){var e=f.getId(n),h=i.FontStyle[f.getDefinedStyle(n)].toLowerCase(),c=t.toCSSFontWeight(f.getDefinedWeight(n)).toString(),l=CommonSettings.ContentBaseUrl+f.getFileName(n),o,s;u[e]||(u[e]=!0,o="",s='@font-face { font-family: "{0}"; src: {1}url({2}.woff) format("woff"); font-weight: {3}; font-style: {4} }',r.rule(s,e,o,l,c,h))},n)},u.prototype.updateTextStyles=function(n){this.textStyles.define(this.textStyleFactory.bind(this,n))},u.prototype.textStyleFactory=function(r,u){this.forEachTextStyle(function(f){var e=f.getId(r),o=i.FontStyle[f.getStyle(r)].toLowerCase(),s=t.toCSSFontWeight(f.getWeight(r)).toString();if(e.substr(0,8)!=="Fallback"){var h=Utilities.toPxStr(UX.getAdjustedFontSize(f.getSize(r))),c=Utilities.toPxStr(UX.getAdjustedLineHeight(f.getLineHeight(r))),l=t.toCSSTextAlignment(f.getTextAlignment(r)),a=Utilities.toPxStr(f.getTracking(r)),v=n.View.ViewElements.buildFamilyFallbackChain(f,e,r);u.rule(".{0} { font-family: {1}; font-size: {2}; line-height: {3}; font-weight: {4}; font-style: {5}; text-align: {6}; letter-spacing: {7}; }",e,v,h,c,s,o,l,a)}},r)},u.prototype.forEachTextStyle=function(n,t){var i,r;this._root&&(i=this._root.getWatchedValue(t),i)&&(r=i.currentLayoutTree(t),r)&&r.getTextStyles(t).getCollection(t).forEach(function(t){n(t)})},u.prototype.rootArgs=function(){return this._root},u.prototype.createRootVE=function(n){this.currentStory.getRenderModel(n);var i=new t.RootVE(this,this.currentStory);return i.gotoHashTargetEnabled=this.gotoHashTargetEnabled,this.gotoHashTargetEnabled=!1,this.currentStory.renderModelOverriden(n)||i.setRestoreState(this.restoreState),this.restoreState=null,i},u.prototype.debugArgs=function(){return null},u.prototype.setRestoreState=function(){this.restoreState||(this.restoreState=t.RestoreState.createRestoreState(this._root.getValue()))},u.prototype.navigationCalloutArgs=function(i){var o=n.Model.RenderModel.getWatchedValue(i).getWorldId(i),r=this,u,f,e;switch(o){case"VerticalWorld":return u={className:"VerticalNavigation-callout",headerText:Resources.FirstRunVerticalNavigationHeader,bodyText:Resources.FirstRunVerticalNavigationBody,beakPosition:6,calloutID:6,delay:2.5},new t.CalloutVE(r,u);case"PanoramaWorld":return f={className:"PanoramaNavigation-callout",headerText:Resources.FirstRunPanoramaNavigationHeader,bodyText:Resources.FirstRunPanoramaNavigationBody,beakPosition:4,calloutID:7,delay:2.5},new t.CalloutVE(r,f);case"ExpoWorld":return e={className:"ExpoNavigation-callout",headerText:Resources.FirstRunExpoNavigationHeader,bodyText:Resources.FirstRunExpoNavigationBody,beakPosition:4,calloutID:8,delay:2.5},new t.CalloutVE(r,e);default:return undefined}},u}(TDB.FocusableViewElement);t.PreviewVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(n,i){t.call(this,n,i);this.parent=n;this._model=i}return __extends(i,t),i.prototype.PositionDivStyleArgs=function(n){var t=this.getScale(n),i=this._model.getZOrder(n),r=Utilities.cvtServerToPxStr(t,.5*this._model.position.getWidth(n)),u=Utilities.cvtServerToPxStr(t,.5*this._model.position.getHeight(n));return{padding:u+" "+r,zIndex:i===0?"":i.toString()}},i.prototype.scenegraphArgs=function(t){var i=this._model.getScene3D(t);return n.createSceneGraphVE(this,i)},i}(n.LayoutVE);n.ProjectionVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){function e(n){var t=n.layoutTrees.getCollection().firstOrDefault();return t?t.getDevice():undefined}function s(n){var t=[];return n.cullable&&t.push(n),t.concat(n.children.mapmany(s))}function h(n,t){var i=[];if(t.cullable){if(n.isCulled(t.id))return i;i.push(t)}return i.concat(t.children.mapmany(function(t){return h(n,t)}))}var f=n.Model.RM,u=n.AnimationManager,r=n.View.Common.FRE,o;i.rootKeyframeTypes=["Story","Home"];i.targetDevice=e;o=function(o){function c(n,t){o.call(this,n);this.parent=n;this.visibleCullableElements=[];this._currentStory=t;this.lastWorldId=t.getRenderModel().getWorldId();this.currentViewMode=StoryPageSettings.Mode;this.animationExternalActions={TriggerPhotoStackCallout:r.FirstRunTriggers.stackSeen,DismissExpoNavigationCallout:this.currentViewMode==4?r.FirstRunTriggers.navigatedFromPlay:r.StoryFirstRunHelper.OnExpoWorldNavigatedFromEditMode};this._layout=TDB.watcherTag(4748041,this,this,this.updateLayout);this.viewports=TDB.mappedWatcherOwnerTag(6094880,this,this,this.getModelViewports,this.makeViewportWatchable);this.scroller=TDB.watcherTag(6150044,this,this,this.findScrollable);this.mainviewport=TDB.watcherTag(6350030,this,this,this.computeMainViewport);this._interactionEngine=new i.InteractionEngine(null,this,this.scroller,this.parent.parent.isEditMode.getValue(),this.parent.parent.inEmbedHostMode.getValue(),this.animationExternalActions);this._interactionEngine.getAnimationEngine().addCameraListener(this);this.parent.parent.addClientSignalListener(this);this.restoreState=null;this.textStyles=TDB.watcherTag(6693602,this,this,this.createTextStyleMap);this.animations=new u.RootView(this,this.getModelViewports.bind(this));this.is3DWorldWatcher=TDB.watcherTag(6951308,this,this,this.calculateIs3DWorld);this.cullingRootWatcher=TDB.watcherTag(6951309,this,this,this.calculateCullingRoot);this.isDefaultInputTarget=!0;this.blockUpdateBindings=!1}return __extends(c,o),c.prototype.getTraveler=function(){return this.traveler},c.prototype.getRestoreState=function(){return this.restoreState},c.prototype.setRestoreState=function(n){this.restoreState=n},c.prototype.initializeTraveler=function(n){this._currentStory.getRenderModel().renderModel.getSchemaVersion()<24||(!n&&this.traveler&&(n=this.traveler.getKeyframeData()),this.traveler=new i.KeyframeTraveler(this.getKeyframes(),n,i.ViewModel.scrollPositionlogger.recordConsumptionChange.bind(i.ViewModel.scrollPositionlogger)))},c.prototype.createTextStyleMap=function(n){return this.currentLayoutTree(n).getTextStyles(n).getCollection(n).todict(function(t,i){i[t.getId(n)]=t})},c.prototype.fetchTextStyle=function(n,t){var i=this.textStyles.getWatchedValue(t)[n];if(!i)throw new Error("unknown text style id: "+n);return i},c.prototype.getScrollOffset=function(n){var t=this.scroller.getValue();return t?t.fetchClientScrollValues()[n]:0},c.prototype.currentLayoutTree=function(n){return this._layout.getWatchedValue(n)},c.prototype.getWidth=function(n){return this.parent.getWidth(n)},c.prototype.getHeight=function(n){return this.parent.getHeight(n)},c.prototype.getLayout=function(n){return this._layout.getWatchedValue(n)},c.prototype.validateLayoutTree=function(t){var r;if(n.View.Common.DialogManager.initialized()&&(r=this.getLayout(t),!r||r.getLayoutFailed(t))){var f=r?r.getErrorMessage(t):Resources.LayoutTreeMissing,e={width:500,title:Resources.LayoutFailedTitle,messages:[Resources.LayoutFailedMessage],dialogLogMessage:"Layout Error",dialogType:4,allowCancel:!1,buttonsArgs:[{caption:Resources.ButtonClose,isDefault:!0,id:"idshButtonClose"}]},u=n.View.Common.DialogManager.createDialog(e),o=new i.DialogHtmlContainerVE(u,{iframe:{html:"<pre>"+$("<div>").text(f).html()+"<\/pre>",width:500,height:250}});TDB.applyUpdate(function(){u.updateContent(o);n.View.Common.DialogManager.showDialog(u)},1)}},c.prototype.viewModeChanged=function(n){var t=this;(this.currentViewMode=n,this._interactionEngine.actor())&&(this._interactionEngine.viewModeChanged(n),n===1&&TDB.applyUpdate(function(){t._interactionEngine.setActor(null)}))},c.prototype.getRootLayoutContainerElement=function(n){var r=this,i=r.getLayout(n),t;return i?(t=i.getRootContainer(n),!t)?null:t:null},c.prototype.getInteractionModel=function(n){var t=this.getLayout(n);return t?t.getInteractionModel(n):null},c.prototype.getStartFSMNode=function(n){var t=this.getInteractionModel(n);return t?t.getStartNode(n):null},c.prototype.getKeyframes=function(n){var t=this.getInteractionModel(n);return t?t.keyFrames.getCollection(n):[]},c.prototype.splitAndTrimToLower=function(n,t){return n?n.split(t).map(function(n){return n.toLowerCase().trim()}):[]},c.prototype.findScrollable=function(n){var t=this.viewports.getWatchedValue(n).map(function(t){return t.getWatchedValue(n)}).firstOrDefault(function(n){return!(n instanceof i.ViewportVE)}),r;if(!t)return null;if(r=t instanceof i.AnimatedScrollerVE||t instanceof i.NativeScrollerVE,!r)throw new Error("Elements in viewports collection must either be viewports or IScrollingVE implementations");return t},c.prototype.fetchFSMNode=function(n,t){var i=this.getInteractionModel(t);return i?i.nodes.getCollection(t).firstOrDefault(function(t){return t.id==n}):null},c.prototype.resetActors=function(n,t){var r=this,u=this.getStartFSMNode(),f,e,o;u&&(f=this._interactionEngine.actor(),f&&this._interactionEngine.setActor(null),this.historian&&(this.removeResource(this.historian),this.historian.dispose()),this.historian=i.makeHistorian(this,function(n){return r.fetchFSMNode(n)},function(n,t){var i=r.fetchFSMNode(n);return i?r._interactionEngine.navigateTo(t,!0,null,!0):!1}),this.visibility&&(this.removeResource(this.visibility),this.visibility.dispose(),this.visibility=null),this._interactionEngine.clientCapabilities().has(1)&&(this.visibility=new i.VisibilityChecker,this.addResource(this.visibility)),e={enter:function(n,t,i){return r.fsmNodeEntered(n,t,i)},leave:function(n,t){return r.fsmNodeExited(n,t)},edgeFollowed:function(n){return r.fsmEdgeFollowed(n)}},this.initializeTraveler(),o=i.FSMActor.CreateRootActor(u,n,e,this._interactionEngine,this.traveler),this._interactionEngine.setActor(o),TDB.applyUpdate(function(){return r.setNavigationState(t)},1))},c.prototype.setNavigationState=function(n){var t,r,u;if(this.restoreState&&(this._interactionEngine.getClientState().runAnimationsInstantly=!0),this._interactionEngine.actor().enter(null),this.resetScrollPositionIfNeeded(),t=this.getInteractionModel().keyFrames.getCollection().firstOrDefault(function(n){return i.rootKeyframeTypes.contains(n.getType())}),!t){StoryLog.TraceTag(87e5,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Unable to get root keyframe from interaction model");return}r=this.currentViewMode===1?null:this.parent.parent.getLastEditedContentId();r&&(t.getScrollability()===0?n=i.NavigationHelper.getFsmNodeIdFromContentId(this.getInteractionModel(),r):(i.NavigationHelper.scrollToContentId(this,r,t,!0),n=null));n&&this._interactionEngine.navigateTo(n,!0,"RootVE:resetActors");t.getScrollability()!==0&&(u=this._interactionEngine.getAnimationEngine(),u.forceTick(i.NavigationHelper.animationClockAdvanceAmount),this.changed(u.cameraTransform(),!0))},c.prototype.resetScrollPositionIfNeeded=function(){var t=this._currentStory.getRenderModel().getWorldId(),i,n;this.lastWorldId!==t&&(this.lastWorldId=t,i=this.scroller.getValue(),i&&this.scroller.getValue().setScrollValues([0,0]),n=this._interactionEngine.getAnimationEngine().cameraTransform(),n.set(0,0),n.set(1,0),this.changed(n))},c.prototype.fsmNodeEntered=function(n,t,i){this.visibility&&this.visibility.enter(n,t);var r=this.scroller.getValue();r&&r.getScrollChecker().enter();this.handleNodeFocus(t,i)},c.prototype.fsmNodeExited=function(n,t){this.visibility&&this.visibility.leave(n,t);var i=this.scroller.getValue();i&&i.getScrollChecker().leave()},c.prototype.handleNodeFocus=function(n,t){var f=n.getKeyFrame(),e,r,o,u,s;if(f&&t&&(e=t.getTriggerSet(),e)&&(r=t.getTriggerSet().triggers.getCollection(),r)&&(o=r.mapmany(function(n){return n.selectMethods?n.selectMethods.getCollection():[]}).firstOrDefault(function(n){return n.getMethod()===2}),o)){var h=this._interactionEngine.getAnimationEngine(),c=f.layoutElements.getCollection().first(),i=h.getElementById(c.id);i&&i.tabIndex>=0&&(u=i.getAttribute(Aria.Attributes.Role),s=$(i).is(Aria.Roles.Button)||u===Aria.Roles.Button||u===Aria.Roles.Region,s&&i.focus())}},c.prototype.cullingEnabled=function(){return this.bitree!==null},c.prototype.fsmEdgeFollowed=function(n){this.historian&&this.historian.traverse(n);i.ViewModel.interactionlogger.edgeFollowed(n)},c.prototype.onPopState=function(n){this.historian&&this.historian.handlePopState(n)},c.prototype.initializeOrUpdateStateMachine=function(r){var e=this.getInteractionModel(r),o,c,l,u,f,s,h;e&&((this._currentStory.watchForSync(r),o=e.nodes.getCollection(r),c=n.AnimationManager.LowFi.getWatchedValue(r),i.DomEventRegister.getInstance().setTouchForAuthoringState(0,!c),t.Common.ImageRequestManager.setScroller(this.scroller),l=e.getStartNode(r),this.blockUpdateBindings)||(u=null,f=this._interactionEngine.actor(),f&&(u=new i.FSMComparer(o,l,n.AnimationManager.Engine.isNew.bind(n.AnimationManager.Engine)).checkCurrentStateFromRoot(f.traversalState),u||(s=f.getMostRecentActor(!0),s&&(h=s.getCurrentNode(),h&&(u=h.id)))),this.resetActors(o,u)))},c.prototype.gotoHashTarget=function(){var n=this;this.gotoHashTargetEnabled&&!this.blockUpdateBindings&&(this.gotoHashTargetEnabled=!1,platform.setImmediate(function(){i.NavigationHelper.navigateToContentId(n.parent._root.getValue(),Utilities.hash().fetch("content"),!!Utilities.hash().fetch("dv"),!0,"RootVE:gotoHashTarget")}))},c.prototype.applyRestoreState=function(n){var t=this;this._currentStory.watchForSync(n);this.setBlockUpdateBindings(!1);this.restoreState&&platform.setImmediate(function(){i.RestoreState.restore(t.parent._root.getValue());t.restoreState=null})},c.prototype.convertModelToCullableContainers=function(n,t,i){var a=this,c=[],l=n.getFlags(i),e,h,r,u,o,s;return t=t||l.has(2),n instanceof f.ContainerLayoutElement&&(c=n.children.getCollection(i).map(function(n){return a.convertModelToCullableContainers(n,t,i)})),e=null,h=null,n.visibleCullingRegion.getWidth(i)>0&&n.visibleCullingRegion.getHeight(i)>0&&(r=n.visibleCullingRegion.getLeft(i),u=n.visibleCullingRegion.getTop(i),o=n.visibleCullingRegion.getWidth(i),s=n.visibleCullingRegion.getHeight(i),e=MathUtils.aabb([r,u],[r+o,u+s])),r=n.position.getLeft(i),u=n.position.getTop(i),o=n.position.getWidth(i),s=n.position.getHeight(i),e?h=MathUtils.aabb([r,u],[r+o,u+s]):e=MathUtils.aabb([r,u],[r+o,u+s]),{id:n.id,box:e,children:c,cullable:t?!1:l.has(8),originalBox:h}},c.prototype.calculateCullingRoot=function(n){var r=this.getModelViewports(n),i=r.firstOrDefault(function(i){return t.isMainViewport(i,n)});return i?i.getChild(n):null},c.prototype.clearAnimationCache=function(n){(this._currentStory.watchForSync(n),this.getLayout(n),this.blockUpdateBindings)||this._interactionEngine.getAnimationEngine().clearAnimationCache()},c.prototype.updateSpacePartitioning=function(t){var l,i,f,a,o,r,c;if((this.bitree=null,this.visibleCullableElements=[],l=/iphone|ipad/i.test(navigator.userAgent)&&Modernizr.dynamicscrollevents,i=Utilities.query.has("cull"),i||l||!n.AnimationManager.LowFi.getWatchedValue(t))&&!Utilities.query.has("noculling")&&(i||!n.Common.UrlHelper.getInstance().isAccessiblityView())&&(f=this._currentStory.getRenderModel(t),a=f.layoutTrees.getCollection(t).firstOrDefault(),a)&&(i||e(f)!==1)&&!this.is3DWorldWatcher.getWatchedValue(t)&&(o=this.cullingRootWatcher.getWatchedValue(t),o)&&(r=this.convertModelToCullableContainers(o,!1,t),!this.blockUpdateBindings)){this.bitree=MathUtils.makeBiTree(r,10);var u=this._interactionEngine.getAnimationEngine(),v=s(r).map(function(n){return n.id}),y=u.untrackedTargets(v);y.forEach(function(n){return u.show(n,!0)});this.visibleCullableElements=h(u,r).map(function(n){return n.id});c=this.viewportRectangle(u.cameraTransform());c&&this.updateCulling(c)}},c.prototype.calculateIs3DWorld=function(n){var i=this.getModelViewports(n).firstOrDefault(function(i){return t.isMainViewport(i,n)}),r;return i?(r=i.getChild(n),r instanceof f.ProjectionLayoutElement):!1},c.prototype.getModelViewports=function(n){var t=this.getRootLayoutContainerElement(n);if(!t)return[];if(t.getContainerType(n)!==6)throw new Error("unsupported root container type: "+t.getContainerType());return t.children.getCollection(n)},c.prototype.makeViewportWatchable=function(n){return TDB.watcher(this,null,this.makeViewport.bind(this,n))},c.prototype.makeViewport=function(r,u){return!t.isMainViewport(r,u)||this.getModelViewports(u).first(function(n){return t.isMainViewport(n,u)})!==r?new i.ViewportVE(this,r):n.AnimationManager.LowFi.getWatchedValue(u)?new i.NativeScrollerVE(this,r):new i.AnimatedScrollerVE(this,r)},c.prototype.computeMainViewport=function(n){var t=this.viewports.getWatchedValue(n).map(function(t){return t.getWatchedValue(n)}).filter(function(n){return n instanceof i.NativeScrollerVE||n instanceof i.AnimatedScrollerVE});return t.length===0?null:t.first()},c.prototype.rootDivStyleArgs=function(n){var r="hidden",t;return StoryPageSettings.Mode==3&&Utilities.isSafari()&&(t=this.scroller.getWatchedValue(n),t&&t instanceof i.AnimatedScrollerVE&&(r="scroll")),{width:this.getWidth(n)+"px",height:this.getHeight(n)+"px",display:n.watchValue(this.parent.parent.hidePreview)?"none":"",overflow:r}},c.prototype.rootDivAttrArgs=function(t){var r={lang:n.Model.RenderModel.getWatchedValue(t).getCulture(t)},u=this.getRootLayoutContainerElement(t);return u&&i.createAttributes(t,u,r),r},c.prototype.onRootDivScroll=function(n){var r=this,i=r.scroller.getValue();if(i){var t=n.target,u=t.scrollTop,f=t.scrollLeft;return i.offsetByClientValue(1,u),i.offsetByClientValue(0,f),t.scrollTop=0,t.scrollLeft=0,!0}},c.prototype.rootDivEventsInitArgs=function(){var n=this;return{scroll:n.onRootDivScroll}},c.prototype.viewportsArgs=function(n){return this.viewports.getWatchedValue(n).map(function(t){return t.getWatchedValue(n)})},c.prototype.onHashChanged=function(){i.NavigationHelper.navigateToContentId(this.parent._root.getValue(),Utilities.hash().fetch("content"),!!Utilities.hash().fetch("dv"),!1,"RootVE:onHashChanged")},c.enableAnimationViewportScaling=function(){return!1},c.prototype.scaleUpdater=function(n){var t=this._interactionEngine.getAnimationEngine(),i=this.mainviewport.getWatchedValue(n),r,u,f;(i&&(r=i.viewportScale(n).getWatchedValue(n),this.blockUpdateBindings||t.mainScaleChanged(r)),c.enableAnimationViewportScaling())&&((u=this.viewports.getWatchedValue(n).map(function(t){return t.getWatchedValue(n)}),f=u.todict(function(t,i){i[t.getModelObjectId()]=t.viewportScale(n).getWatchedValue(n)}),this.blockUpdateBindings)||(t.viewportScalesChanged(f),t.flushTargetState()))},c.prototype.getViewportRectangle2D=function(){var n,t;return this.is3DWorldWatcher.getValue()?null:(n=this.viewportRectangle(this._interactionEngine.getAnimationEngine().cameraTransform()),!n)?null:(t=this.cullingRootWatcher.getValue(),!t)?null:(n.top<=0&&n.left<=0&&this.restoreState&&this.restoreState.scrollApproximation>0&&(t.getScrollability()===1?n.left=t.position.getWidth()*this.restoreState.scrollApproximation:t.getScrollability()===2&&(n.top=t.position.getHeight()*this.restoreState.scrollApproximation)),n.left=Math.min(n.left,t.position.getWidth()-n.width),n.top=Math.min(n.top,t.position.getHeight()-n.height),n)},c.prototype.changed=function(n,t){var u,s;if(t===void 0&&(t=!1),u=this.viewportRectangle(n),u){if(this.updateCulling(u),t&&(u.width=u.right(),u.height=u.bottom(),u.left=0,u.top=0),this.visibility&&this.visibility.updateView(u),s=this.scroller.getValue().fetchClientScrollValues(),this.parent.parent.appBar)this.parent.parent.appBar.onCameraMove(s);var f=this._interactionEngine.getAnimationEngine().interrogations(),h=f.get(5),c=f.get(2),l=f.get(4),a=f.get(1),e=f.get(3),o=f.get(0),y=l===0?0:(e+h)/l,p=a===0?0:(o+c)/a,v=r.getCalloutManager().getCurrentCalloutID(),w=v===6||v===7;w&&(e>0||o>0)&&(this.currentViewMode==1?r.FirstRunTriggers.navigatedFromPlay():this.currentViewMode==2&&r.FirstRunTriggers.navigatedFromPreview());this.traveler&&this.traveler.setScrollState({scrollX:e,scrollY:o,visibleScrollX:h,visibleScrollY:c});i.ViewModel.scrollPositionlogger.recordMaxScrollChange(y,p)}},c.prototype.viewportRectangle=function(n){var e=n instanceof u.Properties.Translate2D||n instanceof u.Properties.Translate3D||n instanceof u.Properties.AcceleratedTranslate2D,t;if(!e)throw new Error("this method requires the camera transform to be passed in");var i=n,r=[100*i.get(0),100*i.get(1)],f=this.scroller.getValue();return f?(t=f.visibleViewportSize(),t.left+=r[0],t.top+=r[1],t):null},c.prototype.updateCulling=function(n){var f=this,r,u;if(this.bitree){var e=this.bitree.fetch(MathUtils.aabb([n.left-1*n.width,n.top-1*n.height],[n.left+2*n.width,n.top+2*n.height])),i=this._interactionEngine.getAnimationEngine(),t=e.mapSome(function(n){return n.cullable?n.id:null});this.visibleCullableElements.forEach(function(n){t.contains(n)||(i.hide(n),Utilities.weblog("culling","hiding "+n))});r=this.scroller.getValue();u=r?r.scrolling():!1;t.forEach(function(n){f.visibleCullableElements.contains(n)||(i.show(n,!u),Utilities.weblog("culling","showing "+n))});u&&t.every(function(n){return i.isCulled(n)})&&t.forEach(function(n){return i.show(n,!0)});this.visibleCullableElements=t}},c.prototype.keyDown=function(n){return this._interactionEngine.handleKey(n)?0:6},c.prototype.keyUp=function(n){return this._interactionEngine.handleKeyUp(n),0},c.prototype.mouseClicked=function(n){return o.prototype.mouseClicked.call(this,n)?this._interactionEngine.handleMouse(n):!1},c.prototype.mouseDoubleClicked=function(n){return this._interactionEngine.handleMouse(n)},c.prototype.mouseScrolled=function(n){return this._interactionEngine.handleMouseWheel(n)},c.prototype.swipe=function(n){return this._interactionEngine.handleSwipe(n)},c.prototype.tap=function(n){return this._interactionEngine.handleTap(n)},c.prototype.updateLayout=function(n){var t=this._currentStory.getRenderModel(n).layoutTrees.getCollection(n);return t.length>0?t[0]:null},c.prototype.setBlockUpdateBindings=function(n){this.blockUpdateBindings=n},c.prototype.dispose=function(){t.Common.ImageRequestManager.setScroller(null);this.parent.parent.removeClientSignalListener(this);this._interactionEngine.getAnimationEngine().removeCameraListener(this);this._interactionEngine.dispose();this.clearFocus(!0);o.prototype.dispose.apply(this,arguments)},c}(TDB.FocusableDomViewElement);i.RootVEBase=o})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(i,r){t.call(this,i);this.parent=i;this.model=r;this._webkitOverflowScrolling=TDB.watchableTag(9216779,this,"touch");this.logic=new n.NativeScrolling(this,this.parent._interactionEngine);this.viewport=TDB.watcherTag(6150043,this,this,this.makeViewport);this.scrollchecker=new n.ScrollableChecker(this,this.parent._interactionEngine);Utilities.ios&&window.addEventListener("focus",this.resetWebkitOverflowScrolling.bind(this))}return __extends(i,t),i.prototype.viewportScale=function(n){return this.viewport.getWatchedValue(n).scale},i.prototype.getModelObjectId=function(){return this.model.id},i.prototype.rootStyleArgs=function(n){var t={overflowX:"hidden",overflowY:"hidden","-webkit-overflow-scrolling":this._webkitOverflowScrolling.getWatchedValue(n),width:this.parent.getWidth(n)+"px",height:this.parent.getHeight(n)+"px"};return this.logic.canScroll(1,n)?t.overflowY="scroll":this.logic.canScroll(0,n)&&(t.overflowX="scroll"),t},i.prototype.getWidth=function(n){var t=this.model.getChild(n).position.getHeight(n)>this.parent.getHeight(n)?UX.GetScrollbarSize():0;return this.parent.getWidth(n)-t},i.prototype.getHeight=function(n){var t=this.model.getChild(n).position.getWidth(n)>this.parent.getWidth(n)?UX.GetScrollbarSize():0;return this.parent.getHeight(n)-t},i.prototype.mouseScrolled=function(n){return this.logic.canScroll(0)?(this.logic.offsetScroll(0,-n.wheelDelta),!1):!0},i.prototype.visibleViewportSize=function(){return this.viewport.getValue().scaledServerSize()},i.prototype.getScrollChecker=function(){return this.scrollchecker},i.prototype.isScrollableKeyframe=function(n,t){return this.logic.isScrollableKeyframe(n,t)},i.prototype.fetchScrollValues=function(){return this.logic.fetchScrollValues()},i.prototype.fetchClientScrollValues=function(){var n=this;return this.logic.fetchScrollValues().map(function(t){return n.logic.toClientUnits(t)})},i.prototype.setScrollValues=function(n,t){this.logic.setScrollValues(n,t)},i.prototype.scrolling=function(){return this.logic.scrolling()},i.prototype.offsetByClientValue=function(n,t){this.logic.offsetByClientValue(n,t)},i.prototype.offsetScroll=function(n,t){return this.logic.offsetScroll(n,t)},i.prototype.animateOffset=function(n,t){this.logic.animateOffset(n,t)},i.prototype.setScroll=function(n,t){this.logic.setScroll(n,t)},i.prototype.scrollForwardToSnapPoint=function(n,t){this.logic.scrollForwardToSnapPoint(n,t)},i.prototype.scrollBackwardToSnapPoint=function(n,t){this.logic.scrollBackwardToSnapPoint(n,t)},i.prototype.getViewport=function(n){return this.viewport.getWatchedValue(n)},i.prototype.viewportArgs=function(){return this.viewport},i.prototype.updateVisibleSize=function(n){this.logic.updateVisibleSize(n)},i.prototype.updateContentSize=function(n){this.logic.updateContentSize(n)},i.prototype.rootNativeScrollInitArgs=function(){return this.logic},i.prototype.rootNativeScrollDirectionArgs=function(n){return this.logic.canScroll(1,n)?1:this.logic.canScroll(0,n)?0:undefined},i.prototype.dispose=function(n){Utilities.ios&&window.removeEventListener("focus",this.resetWebkitOverflowScrolling);t.prototype.dispose.call(this,n)},i.prototype.makeViewport=function(){return new n.ViewportVE(this,this.model)},i.prototype.resetWebkitOverflowScrolling=function(){var n=this;TDB.applyUpdate(function(){n._webkitOverflowScrolling.setValue("auto")});platform.setImmediate(function(){TDB.applyUpdate(function(){n._webkitOverflowScrolling.setValue("touch")})})},i}(TDB.FocusableViewElement);n.NativeScrollerVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var f=n.AnimationManager,u=function(n){function i(t,i){n.call(this,t);this.parent=t;this.engine=i;this.visiblescroll=[null,null];this.contentsize=[null,null];this.contentsize[0]=TDB.watcher(this,this,this.calculateClientSideContentSize.bind(this,0));this.contentsize[1]=TDB.watcher(this,this,this.calculateClientSideContentSize.bind(this,1));this.visiblescroll[0]=TDB.watcher(this,this,this.calculateVisibleScrollArea.bind(this,0));this.visiblescroll[1]=TDB.watcher(this,this,this.calculateVisibleScrollArea.bind(this,1));this.servercontentsize=TDB.watcher(this,this,this.calculateServerFullContentSize)}return __extends(i,n),i.prototype.getScrollSize=function(n,t){var i=this.contentsize[n].getWatchedValue(t),r=this.getPadding(t);return n===0?i+r.width:i+r.height},i.prototype.canScroll=function(n,t){var i=this.contentsize[n].getWatchedValue(t),r=this.visiblescroll[n].getWatchedValue(t),u=i-r;return u>0},i.prototype.getServerContentSize=function(n,t){var i=this.getScrollableKeyframe(t);return i?n===0?i.getScrollWidth(t):i.getScrollHeight(t):0},i.prototype.calculateServerFullContentSize=function(n){var t=this.getScrollableKeyframe(n);return t?new Size(t.getScrollWidth(n),t.getScrollHeight(n)):new Size},i.prototype.updateVisibleSize=function(n){var t=this.engine.getAnimationEngine(),i=n.watchValue(this.visiblescroll[0]),r=n.watchValue(this.visiblescroll[1]);t.interrogations().set(5,this.toServerUnits(i,n));t.interrogations().set(2,this.toServerUnits(r,n))},i.prototype.getContentSize=function(n,t){return this.contentsize[n].getWatchedValue(t)},i.prototype.getVisibleSize=function(n,t){return this.visiblescroll[n].getWatchedValue(t)},i.prototype.updateContentSize=function(n){var t=this.engine.getAnimationEngine(),i=n.watchValue(this.servercontentsize);t.interrogations().set(4,i.width);t.interrogations().set(1,i.height)},i.prototype.getScrollableKeyframe=function(n){return this.parent.getScrollChecker().scrollableKeyframe(n)},i.prototype.getSnapOffsets=function(n,t){var i=this.getScrollableKeyframe();return(n===0?i.getSnapPointsHorizontal(t):i.getSnapPointsVertical(t)).getCollection(t)},i.prototype.scrollForwardToSnapPoint=function(n,i){if(this.getScrollableKeyframe()){var r=t.SnapPoints.getNext(this.getScroll(i),n,this.getSnapOffsets(i),i);this.scrollTo(r,i)}},i.prototype.scrollBackwardToSnapPoint=function(n,i){if(this.getScrollableKeyframe()){var r=t.SnapPoints.getPrevious(this.getScroll(i),n,this.getSnapOffsets(i),i);this.scrollTo(r,i)}},i.prototype.getScroll=function(){throw new Error("tried calling an abstract method");},i.prototype.setScroll=function(){throw new Error("tried calling an abstract method");},i.prototype.scrollTo=function(){throw new Error("tried calling an abstract method");},i.prototype.animateOffset=function(n,t){this.scrollTo(this.getScroll(n)+t,n)},i.prototype.calculateVisibleScrollArea=function(n,t){var i=this.getPadding(t);return n===0?this.parent.getWidth(t)-i.width:this.parent.getHeight(t)-i.height},i.prototype.calculateClientSideContentSize=function(n,t){return this.toClientUnits(this.getServerContentSize(n,t),t)},i.prototype.getPadding=function(n){var i=this.parent.getViewport(n),t;return i?(t=i.absolutePositioning(n),new Size(t.left,t.top)):new Size},i.prototype.isScrollableKeyframe=function(n,t){var i=this.parent.getViewport(t),r,u;return i?(r=i.layoutSize(t),u=new Size(n.getScrollWidth(t),n.getScrollHeight(t)),!u.leq(r)):!1},i.prototype.toServerUnits=function(n,t){var i=this.viewportScale(t);return n/i},i.prototype.toClientUnits=function(n,t){var i=this.viewportScale(t);return n*i},i.prototype.toClientSize=function(n,t){return new Size(this.toClientUnits(n.width,t),this.toClientUnits(n.height,t))},i.prototype.viewportScale=function(n){var t=this.parent.getViewport(n);return t?t.getScale(n):1},i.prototype.dispose=function(){n.prototype.dispose.call(this);this.engine=null},i}(Disposable),i,r;t.GenericScrolling=u;i=Utilities.query.has("autoscroll");r=function(){function n(){this.lastposition=0;this.position=0;this.speed=0;this.speedsign=1;this.time=0;this.locked=!0;this.scrollstream=[]}return n.prototype.moving=function(){return!this.locked},n.prototype.push_speed=function(n){var t=this.scrollstream.length,r;if(t>=4&&(this.scrollstream.shift(),t--),t>1){var i=this.scrollstream[t-1],u=i.distance-this.scrollstream[t-2].distance<0,f=n.distance-i.distance<0;f!=u&&(r=i,this.scrollstream.length=0,this.scrollstream.push(r))}this.scrollstream.push(n)},n.prototype.finalize_speed=function(){var n=this.scrollstream.length,t,i;return!n||n<=1?0:(t=this.scrollstream[n-1],i=(t.distance-this.scrollstream[0].distance)/(t.time-this.scrollstream[0].time),Utilities.weblog("scrolltest","FINALIZESPEED  LEN: "+n.toString()+"; SPEED: "+i.toString()),this.scrollstream.length=0,this.push_speed(t),i)},n.prototype.scroll=function(n){this.lock();this.position=n},n.prototype.unlock=function(i,r){var u,e;this.locked=!1;this.unlockTime=this.time;this.speed=this.finalize_speed();this.speedsign=this.speed<0?-1:1;this.unlockPosition=this.position;u=this.speedsign*this.speed*this.speed/n.defaultK;e=this.position+u;Utilities.weblog("scrolltest","***UNLOCK   SPEEDSIGN: "+this.speedsign.toString()+"; DISTANCE: "+u.toString()+"; DESTINATION: "+e.toString()+"; SPEED: "+this.speed.toString());var h=i.map(function(n){return n.getStartPoint()}).concat(i.filter(function(n){return n.getEndPoint()-n.getStartPoint()>r}).map(function(n){return n.getEndPoint()-r})).sort(function(n,t){return n-t}),o=this.position+u*.5,s=this.position+u*1.5,f=t.SnapPoints.findClosestValue(h,e);f!==undefined&&f>=Math.min(o,s)&&f<=Math.max(o,s)?(this.k=this.speed*this.speed/Math.abs(f-this.position),isFinite(this.k)||(this.k=n.defaultK)):this.k=n.defaultK},n.prototype.lock=function(){this.locked=!0},n.prototype.toss=function(t){this.speedsign=t<this.position?-1:1;this.k=n.defaultK;this.speed=this.speedsign*Math.sqrt(this.k*Math.abs(t-this.position));this.locked=!1;this.unlockTime=this.time;this.unlockPosition=this.position;this.scrollstream.length=0},n.prototype.update=function(n,t){var u;if(i)return.5*(1+Math.sin(n/15e3))*t;if(this.locked)this.position=MathUtils.clamp(this.position,0,t),this.push_speed({distance:this.position,time:n}),this.position-this.lastposition!=0&&(u=n-this.time,Utilities.weblog("scrolltest","UPDATE   POSITION:"+this.position.toString()+"; LASTPOS: "+this.lastposition.toString()+"; TIMEDIFF: "+u.toString()+"; SPEED: "+((this.position-this.lastposition)/u).toString()));else{var f=Math.abs(2*this.speed/this.k),r=Math.min(f,n-this.unlockTime),e=MathUtils.clamp(this.unlockPosition+this.speed*r-this.speedsign*this.k/4*r*r,0,t);(f===r||e===this.position)&&this.lock();this.position=e}return this.lastposition=this.position,this.time=n,this.position},n.prototype.getPosition=function(){return this.position},n.defaultK=+Utilities.query.fetch("friction")||.01,n}();t.Scroller=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var o=n.AnimationManager,u=function(n){function u(i,r){n.call(this,i,r);this.initialScroll=[0,0];this.initialTouchPos=[0,0];this.fps=new f;this.touchmoved=!1;this.scroller=[new t.Scroller,new t.Scroller];this.fingerOnScreen=!1;this.updateDomScroll=[null,null];this.getDomScroll=[null,null];this.hasMoved=!1;this.crisper=new e(this);var u=this.engine.getAnimationEngine();u.addTickListener(this,this.tick.bind(this))}return __extends(u,n),u.prototype.tick=function(n){var o=this.getContentSize(0),s=this.getContentSize(1),h=this.getVisibleSize(0),c=this.getVisibleSize(1),l=r(0,o-h),a=r(0,s-c),f=this.hasMoved||this.scroller[0].moving(),e=this.hasMoved||this.scroller[1].moving(),i,u,t;this.hasMoved=!1;f||this.scroller[0].scroll(this.toServerUnits(this.getDomScroll[0]()));e||this.scroller[1].scroll(this.toServerUnits(this.getDomScroll[1]()));i=this.scroller[0].update(n,this.toServerUnits(l));u=this.scroller[1].update(n,this.toServerUnits(a));f&&this.updateDomScroll[0](this.toClientUnits(i));e&&this.updateDomScroll[1](this.toClientUnits(u));t=this.engine.getAnimationEngine();t.interrogations().set(3,i);t.interrogations().set(0,u);this.crisper.update(t,i,u);this.scrolling()?this.fps.tick(n):(t.showPending(),this.fps.reset());!this.engine.getAnimationEngine().is3dWorld()&&this.fps.runningSlow()&&this.engine.forceLowFiMode()},u.prototype.fetchScrollValues=function(){return[this.scroller[0].getPosition(),this.scroller[1].getPosition()]},u.prototype.fetchClientScrollValues=function(){var n=this;return this.fetchScrollValues().map(function(t){return n.toClientUnits(t)})},u.prototype.setScrollValues=function(n,t){var i=this;[0,1].forEach(function(r){i.setScroll(r,n[r]);t&&i.updateDomScroll[r](i.toClientUnits(n[r]))})},u.prototype.scrolling=function(){return this.fingerOnScreen||this.scroller.some(function(n){return n.moving()})},u.prototype.touchStart=function(n){return n.ismain?(this.touchmoved=!1,this.scrolling()&&this.engine.getAnimationEngine().showPending(),this.canScroll(0)&&this.stopFreeScrolling(0),this.canScroll(1)&&this.stopFreeScrolling(1),this.initialScroll[0]=this.toClientUnits(this.scroller[0].getPosition()),this.initialTouchPos[0]=n.touch.x,this.initialScroll[1]=this.toClientUnits(this.scroller[1].getPosition()),this.initialTouchPos[1]=n.touch.y,this.fingerOnScreen=!0,!1):!1},u.prototype.touchMove=function(n){var t,r;return(n.originalEvent.preventDefault(),!n.ismain)?!1:(this.canScroll(0)&&(t=n.touch.x-this.initialTouchPos[0],t*=i,this.setScroll(0,this.toServerUnits(this.initialScroll[0]-t)),this.touchmoved=!0),this.canScroll(1)&&(r=n.touch.y-this.initialTouchPos[1],r*=i,this.setScroll(1,this.toServerUnits(this.initialScroll[1]-r)),this.touchmoved=!0),!1)},u.prototype.touchStop=function(n){return n.ismain?(this.touchmoved&&(n.originalEvent.preventDefault(),this.canScroll(0)&&this.startFreeScrolling(0),this.canScroll(1)&&this.startFreeScrolling(1)),this.fingerOnScreen=!1,!1):!1},u.prototype.mouseClicked=function(){return this.touchmoved?(this.touchmoved=!1,!1):!0},u.prototype.onScroll=function(n,t){this.stopFreeScrolling(n);this.scroller[n].scroll(this.toServerUnits(t))},u.prototype.setScroll=function(n,t){this.scroller[n].getPosition()!==t&&(this.scroller[n].scroll(t),this.hasMoved=!0)},u.prototype.getScroll=function(n){return this.scroller[n].getPosition()},u.prototype.scrollTo=function(n,t){isNaN(n)||(n=MathUtils.clamp(n,0,Math.max(0,this.toServerUnits(this.getContentSize(t)-this.getVisibleSize(t)))),this.scroller[t].toss(n))},u.prototype.offsetByClientValue=function(n,t){this.offsetScroll(n,this.toClientUnits(t))},u.prototype.offsetScroll=function(n,t){this.stopFreeScrolling(n);var i=this.scroller[n];i.scroll(i.getPosition()+t);this.updateDomScroll[n](this.fetchClientScrollValues()[n])},u.prototype.stopFreeScrolling=function(n){Utilities.weblog("touch","stopped free scrolling");this.scroller[n].lock()},u.prototype.startFreeScrolling=function(n){Utilities.weblog("touch","started free scrolling");this.scroller[n].unlock(this.getSnapOffsets(n),this.toServerUnits(this.getVisibleSize(n)))},u.prototype.dispose=function(){this.stopFreeScrolling(0);this.stopFreeScrolling(1);n.prototype.dispose.call(this)},u}(t.GenericScrolling);t.AnimatedScrolling=u;var i=+Utilities.query.fetch("touchmul")||1.3,f=function(){function n(){this.lasttime=0;this.avg=0;this.N=0;this.tries=0}return n.prototype.reset=function(){this.N>0&&Utilities.weblog("FramerateAnalyzer ",this.N+": "+this.avg+"ms");this.N=this.avg=this.lasttime=0},n.prototype.tick=function(n){if(this.lasttime===0){this.lasttime=n;return}var t=n-this.lasttime;this.lasttime=n;this.avg=(this.N*this.avg+t)/(this.N+1);this.N+=1},n.prototype.runningSlow=function(){return this.N<3?!1:this.avg<40?(this.tries>0&&this.tries--,!1):++this.tries<=3?(this.reset(),!1):(this.reset(),this.tries=0,!0)},n}(),e=function(){function n(n){this.scroller=n;this.lastx=0;this.lasty=0;this.identicalcount=0}return n.prototype.update=function(n,t,i){if(Utilities.isWebkit()){var r=this.lastx===t&&this.lasty===i;this.lastx=t;this.lasty=i;r?this.identicalcount++:this.identicalcount=0;this.identicalcount===0||this.scroller.scrolling()?n.accelerateCamera():this.identicalcount===10&&n.decelerateCamera()}},n}(),r=Math.max})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.AnimationManager,i=function(n){function i(i,r){n.call(this,i,r);this.updateDomScroll=[function(){},function(){}];this.getDomScroll=[function(){return 0},function(){return 0}];this.scroller=[new t.Scroller,new t.Scroller];this.newToss=!1;var u=this.engine.getAnimationEngine();u.addTickListener(this,this.tick.bind(this))}return __extends(i,n),i.prototype.tick=function(n){var o=this.getContentSize(0),s=this.getContentSize(1),h=this.getVisibleSize(0),c=this.getVisibleSize(1),u=Math.max(0,o-h),f=Math.max(0,s-c),e,t,i,r;(this.newToss&&(this.newToss=!1,e=this.getDomScroll[this.tossDirection](),t=this.scroller[this.tossDirection],t.moving()||t.update(n-1,this.tossDirection===0?u:f),t.scroll(e),t.toss(this.tossDestination)),this.scroller[0].moving()||this.scroller[1].moving())&&(i=this.scroller[0].update(n,u),r=this.scroller[1].update(n,f),this.updateDomScroll[0](i),this.updateDomScroll[1](r),this.internalSetScroll(0,this.toServerUnits(i)),this.internalSetScroll(1,this.toServerUnits(r)),this.scrolling()?this.engine.getAnimationEngine().jumpstart():this.engine.getAnimationEngine().showPending())},i.prototype.fetchScrollValues=function(){return[this.getScroll(0),this.getScroll(1)]},i.prototype.fetchClientScrollValues=function(){var n=this;return this.fetchScrollValues().map(function(t){return n.toClientUnits(t)})},i.prototype.setScrollValues=function(n){this.setScroll(0,n[0]);this.setScroll(1,n[1])},i.prototype.scrolling=function(){return this.scroller[0].moving()||this.scroller[1].moving()},i.prototype.onScroll=function(n,t){this.internalSetScroll(n,this.toServerUnits(MathUtils.clamp(t,0,Math.max(0,this.getContentSize(n)-this.getVisibleSize(n)))))},i.prototype.getScroll=function(n){return this.toServerUnits(this.getDomScroll[n]())},i.prototype.setScroll=function(n,t){var i=this.toClientUnits(t);this.scroller[n].scroll(i);this.updateDomScroll[n](i);this.internalSetScroll(n,t)},i.prototype.scrollTo=function(n,t){if(!isNaN(n)){var i=this.toClientUnits(n);this.tossDestination=MathUtils.clamp(i,0,Math.max(0,this.getContentSize(t)-this.getVisibleSize(t)));this.tossDirection=t;this.newToss=!0;this.engine.getAnimationEngine().jumpstart()}},i.prototype.offsetByClientValue=function(n,t){var i=this.toServerUnits(this.getDomScroll[n]()+t);this.setScroll(n,i)},i.prototype.offsetScroll=function(n,t){this.offsetByClientValue(n,this.toClientUnits(t))},i.prototype.internalSetScroll=function(n,t){var i=this.engine.getAnimationEngine();n==0?i.interrogations().set(3,t):i.interrogations().set(0,t);i.cameraTransform().set(n,t/100)},i}(t.GenericScrolling);t.NativeScrolling=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(i,r){t.call(this,i);this.parent=i;this.model=r;this.logic=new n.AnimatedScrolling(this,this.parent._interactionEngine);this.viewport=TDB.watcherTag(6150042,this,this,this.makeViewport);this.scrollchecker=new n.ScrollableChecker(this,this.parent._interactionEngine)}return __extends(i,t),i.prototype.viewportScale=function(n){return this.viewport.getWatchedValue(n).scale},i.prototype.getModelObjectId=function(){return this.model.id},i.prototype.visibleViewportSize=function(){return this.viewport.getValue().scaledServerSize()},i.prototype.getScrollChecker=function(){return this.scrollchecker},i.prototype.getViewport=function(n){return this.viewport.getWatchedValue(n)},i.prototype.getWidth=function(n){return this.parent.getWidth(n)},i.prototype.getHeight=function(n){return this.parent.getHeight(n)},i.prototype.viewportArgs=function(){return this.viewport},i.prototype.touchStart=function(n){return this.logic.touchStart(n)},i.prototype.touchMove=function(n){return this.logic.touchMove(n)},i.prototype.touchStop=function(n){return this.logic.touchStop(n)},i.prototype.mouseClicked=function(n){return t.prototype.mouseClicked.call(this,n)?this.logic.mouseClicked(n):!1},i.prototype.isScrollableKeyframe=function(n,t){return this.logic.isScrollableKeyframe(n,t)},i.prototype.fetchScrollValues=function(){return this.logic.fetchScrollValues()},i.prototype.fetchClientScrollValues=function(){var n=this;return this.logic.fetchScrollValues().map(function(t){return n.logic.toClientUnits(t)})},i.prototype.setScrollValues=function(n,t){this.logic.setScrollValues(n,t)},i.prototype.scrolling=function(){return this.logic.scrolling()},i.prototype.scrollForwardToSnapPoint=function(n,t){this.logic.scrollForwardToSnapPoint(n,t)},i.prototype.scrollBackwardToSnapPoint=function(n,t){this.logic.scrollBackwardToSnapPoint(n,t)},i.prototype.offsetByClientValue=function(n,t){this.logic.offsetByClientValue(n,t)},i.prototype.offsetScroll=function(n,t){this.logic.offsetScroll(n,t)},i.prototype.animateOffset=function(n,t){this.logic.animateOffset(n,t)},i.prototype.setScroll=function(n,t){this.logic.setScroll(n,t)},i.prototype.makeViewport=function(){return new n.ViewportVE(this,this.model)},i.prototype.verticalScrollInitArgs=function(){return{direction:1,listener:this.logic}},i.prototype.horizontalScrollInitArgs=function(){return{direction:0,listener:this.logic}},i.prototype.verticalScrollScrollSizeArgs=function(n){return this.logic.getScrollSize(1,n)},i.prototype.horizontalScrollScrollSizeArgs=function(n){return this.logic.getScrollSize(0,n)},i.prototype.verticalScrollEnabledArgs=function(n){var t=this.parent.parent.parent;return t.isEditMode.getWatchedValue(n)&&t.authoringPaneOpen.getWatchedValue(n)?!1:t.inEmbedHostMode.getWatchedValue(n)?!1:this.logic.canScroll(1,n)},i.prototype.horizontalScrollEnabledArgs=function(n){var t=this.parent.parent.parent;return t.inEmbedHostMode.getWatchedValue(n)?!1:this.logic.canScroll(0,n)},i.prototype.updateVisibleSize=function(n){this.logic.updateVisibleSize(n)},i.prototype.updateContentSize=function(n){this.logic.updateContentSize(n)},i}(TDB.FocusableViewElement);n.AnimatedScrollerVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Common,r=function(r){function u(t,f){var e,o,h,c,l,a,s;r.call(this,t);e=this;e._embedModel=f.embedModel;e._click=f.click;e._context=f.context;e._placeholderInfo=TDB.watchableTag(8987714,e,null);o=this._embedModel.getEmbedSourceUrl();h=Utilities.extractHostnameFromUrl(o);u._swayDomains.contains(h)?(e._embedType=TDB.watchableTag(8987715,e,1),s={name:"GetEmbeddedStoryInfo",description:"Gets EmbeddedStoryInfo",type:"POST",dataType:"json",timeout:6e4,cache:!1,context:e,success:e.swayPlaceholderSuccess,error:e.swayPlaceholderError},c=o.match("/s/(\\S+)/embed$"),c.length==2&&(l=c[1],$.ajax(i.UrlHelper.getInstance().getEmbeddedStoryInfoUrl(l),s))):u._oneDriveDomains.contains(h)?(e._embedType=TDB.watchableTag(8988696,e,2),StoryPageSettings.SiteOneDriveEmbedDetailsEnabled&&(a={EmbedSrc:o},s={name:"GetEmbeddedOneDriveInfo",description:"Gets EmbeddedOneDriveInfo",type:"POST",dataType:"json",data:JSON.stringify(a),contentType:n.RequestManager.JsonContentType,timeout:6e4,cache:!1,context:e,success:e.oneDrivePlaceholderSuccess,error:e.oneDrivePlaceholderError},$.ajax(i.UrlHelper.getInstance().getEmbeddedOneDriveInfoUrl(),s))):e._embedType=TDB.watchableTag(8987717,e,0)}return __extends(u,r),u.prototype.viewButtonArgs=function(n){var r=this,u=r._embedType.getWatchedValue(n),i={buttonId:131,text:Resources.LayoutEmbedPlaceholderView,context:r._context,cssClass:"",click:r._click,textClass:"segoeUI"};switch(u){case 1:i.cssClass="EmbedPlaceholderViewSwayButton";break;case 2:i.cssClass="EmbedPlaceholderViewOneDriveButton";break;case 3:i.cssClass="EmbedPlaceholderViewWordButton";break;case 4:i.cssClass="EmbedPlaceholderViewExcelButton";break;case 5:i.cssClass="EmbedPlaceholderViewPowerpointButton";break;default:return null}return new t.TextButtonVE(r,i)},u.prototype.iconArgs=function(n){var r=this,i,u=r._embedType.getWatchedValue(n);switch(u){case 1:i={clipClass:Glyphs.PreviewSwayEmbedIconClip,glyphClass:Glyphs.PreviewSwayEmbedIconGlyph,cssClass:"EmbedPlaceholderIcon"};break;case 2:i={clipClass:Glyphs.PreviewOneDriveEmbedIconClip,glyphClass:Glyphs.PreviewOneDriveEmbedIconGlyph,cssClass:"EmbedPlaceholderIcon"};break;case 3:i={clipClass:Glyphs.PreviewOneDriveWordEmbedIconClip,glyphClass:Glyphs.PreviewOneDriveWordEmbedIconGlyph,cssClass:"EmbedPlaceholderIcon"};break;case 4:i={clipClass:Glyphs.PreviewOneDriveExcelEmbedIconClip,glyphClass:Glyphs.PreviewOneDriveExcelEmbedIconGlyph,cssClass:"EmbedPlaceholderIcon"};break;case 5:i={clipClass:Glyphs.PreviewOneDrivePowerpointEmbedIconClip,glyphClass:Glyphs.PreviewOneDrivePowerpointEmbedIconGlyph,cssClass:"EmbedPlaceholderIcon"};break;default:return null}return new t.GlyphVE(r,i)},u.prototype.wrapperStyleArgs=function(n){var i=this,t=i._placeholderInfo.getWatchedValue(n);return t?{"background-image":"url("+t.Thumbnail+")"}:null},u.prototype.titleTextArgs=function(n){var i=this,t=i._placeholderInfo.getWatchedValue(n);return t?t.Title?t.Title:"":null},u.prototype.authorTextArgs=function(n){var i=this,t=i._placeholderInfo.getWatchedValue(n);return t?t.Author?t.Author:"":null},u.prototype.swayPlaceholderSuccess=function(n){var t=this;TDB.applyUpdate(function(){t._placeholderInfo.setValue(n)})},u.prototype.swayPlaceholderError=function(){StoryLog.TraceTag(8988697,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.warning,"GetEmbeddedStoryInfo returned an error.")},u.prototype.oneDrivePlaceholderSuccess=function(n){var r=this,i=n,u={Author:i.Author,Thumbnail:"",Title:i.Title},t;switch(i.Type){case 0:t=2;break;case 1:t=3;break;case 2:t=4;break;case 3:t=5;break;default:t=2}TDB.applyUpdate(function(){r._placeholderInfo.setValue(u);r._embedType.setValue(t)})},u.prototype.oneDrivePlaceholderError=function(){StoryLog.TraceTag(8988698,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"GetEmbeddedStoryInfo returned an error.")},u._swayDomains=["sway.com","sway-int.com","edog.sway.com"],u._oneDriveDomains=["onedrive.live.com","onedrive.live-int.com"],u}(TDB.FocusableViewElement);t.EmbedPlaceholderVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i){n.call(this,t);this.model=i}return __extends(t,n),t.prototype.mouseDown=function(){return getSelection().removeAllRanges(),!0},t.prototype.mouseClicked=function(){return!1},t.prototype.onChange=function(n){var t=this.model;return TDB.applyUpdate(function(){t.onChange.call(t.context,n.target.value)}),!1},t.prototype.selectSelectInitArgs=function(){return undefined},t.prototype.selectSelectOptionsArgs=function(n){var t=this.model;return t.getOptions.call(t.context,n)},t.prototype.selectPropsArgs=function(n){var t=this.model;return t.getOptions.call(t.context,n),{value:t.getValue.call(t.context,n),className:t.className}},t.prototype.selectEventsInitArgs=function(){return{change:this.onChange}},t}(TDB.FocusableViewElement);n.SelectVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=ClientAction.StatisticalMeasure,i=function(i){function r(t,r){i.call(this,t,r);this.parent=t;this.textLayoutProps=TDB.watcherTag(6295699,this,this,this.calculateTextLayoutProps);var u=this;u._sectionList=n.TextSectionVE.create(u,u._model.getSectionList(),null);this._allRunVEs=TDB.watcherTag(6821135,u,u,u.findAllRunVEs)}return __extends(r,i),r.prototype.hasSectionsArgs=function(n){return this._model.getSectionList(n).children.getCollection(n).length>0},r.prototype.sectionListArgs=function(){return this._sectionList},r.prototype.getAllParagraphVEs=function(t){var i=this._sectionList.getSectionVEsRecursive(t);return i.filter(function(t){return t instanceof n.TextParagraphVE})},r.prototype.findAllRunVEs=function(n){return this.getAllParagraphVEs(n).mapmany(function(t){return t.getRunVEs(n)})},r.prototype.getAllRunVEs=function(n){return this._allRunVEs.getWatchedValue(n)},r.prototype.getParagraphChildrenModels=function(n){return this.getAllParagraphVEs(n).map(function(n){return n.model})},r.prototype.getAllRunModels=function(n){return this.getAllRunVEs(n).map(function(n){return n._model})},r.prototype.getTextStyleFromId=function(n,t){var i=this.findRootVE(t);return i.fetchTextStyle(n,t)},r.prototype.isTextVisible=function(t){return n.isTextVisible(this.getAllRunVEs(t),t)},r.prototype.calculateTextLayoutProps=function(n){var t;if(!this.isTextVisible(n)||(t=this.getScaledBlockMetrics(n),t.effectiveHeight===0))return null;var u=t.targetHeight,f=t.effectiveHeight,i=u/f,e=this.getScale(n)*this._model.position.getWidth(n),o=t.width,s=i*o,r=Math.min(0,(e-s)/t.maxLineChars);return this.logMetrics(i,r,n),{scale:i,letterSpacing:r}},r.prototype.logMetrics=function(n,i,r){var u=0,f=this.getStyle(r),e;f!=null&&(e=f.getSize(r),u=Math.abs(i)/e);ActionLogger.ObserveClientMeasure(t[5],{scale:n,spacingRatio:u})},r.prototype.textWrapperStyleArgs=function(n){var t={},i;return t.display=this.isTextVisible(n)?"":"none",t[Modernizr.prefixed("transform")]=this.getTransformScaleString(n),i=this.getStyle(n),t.fontSize=this.getScaledFontSizeTextForStyle(n,i),t.lineHeight=this.getScaledLineHeightText(n),t.letterSpacing=this.getScaledAdjustedLetterSpacingTextForStyle(n,i),t.textAlign=this.getTextAlignmentString(n),t},r.prototype.textWrapperPropsArgs=function(t){var r={},i="text_wrapper ";return i+=this._model.getTextStyleId(t),i+=" "+n.LayoutCssClasses.getColor(this._model.getTextColorId(t)),r.className=i,r},r.prototype.getTransformScaleString=function(n){var i=n.watchValue(this.textLayoutProps),t;return i?(t=i.scale.toFixed(4),t==="1.0000")?"":"scale("+t+")":""},r.getMaxLineChars=function(n){return Math.max.apply(Math,n.lineMetrics.map(function(n){return n.characters}))},r.prototype.getScaledBlockMetrics=function(n){var t=this.getAllParagraphVEs(n).map(function(t){return t.getScaledMetrics(n)});return{width:Math.max.apply(Math,t.map(function(n){return n.width})),targetHeight:t.reduce(function(n,t){return n+t.targetHeight},0),effectiveHeight:t.reduce(function(n,t){return n+t.effectiveHeight},0),maxLineChars:Math.max.apply(Math,t.map(function(n){return r.getMaxLineChars(n)}))}},r.prototype.getStyle=function(n){var t=this._model.getTextStyleId(n);return t?this.getTextStyleFromId(t,n):null},r.prototype.getFontFamily=function(n){return this._model.getTextStyleId(n)},r.prototype.getScaledFontSizeTextForStyle=function(n,t,i){if(i===void 0&&(i=!0),!t)return"0";var u=t.getSize(n),r=this.getScale(n)*u;return(r=UX.getAdjustedFontSize(r),i&&r===u)?"":Utilities.toPxStr(r)},r.prototype.getScaledTargetLineHeight=function(n){return this.getScale(n)*this._model.getLineHeight(n)},r.prototype.getScaledLineHeight=function(n){var t=this.getScaledTargetLineHeight(n);return UX.getAdjustedLineHeight(t)},r.prototype.getScaledLineHeightText=function(n){return Utilities.toPxStr(this.getScaledLineHeight(n))},r.prototype.getScaledAdjustedLetterSpacingTextForStyle=function(n,t,i){if(i===void 0&&(i=!0),!t)return"";var u=this.textLayoutProps.getWatchedValue(n),f=t.getTracking(n),r=this.getScale(n)*f;return(u&&(r+=u.letterSpacing),i&&r===f)?"":Utilities.toPxStr(r)},r.prototype.getTextAlignmentString=function(t){var r=this.getAllRunVEs(t).firstOrDefault(),i;return r==null?"":(i=r.getTextStyle(t),i==null)?"":n.toCSSTextAlignment(i.getTextAlignment(t))},r}(n.LayoutVE);n.TextBlockLayoutVEBase=i;ActionLogger.CreateClientMeasure(t[5],{scale:null,spacingRatio:null})})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(n,i){t.call(this,n,i)}return __extends(i,t),i.prototype.contentArgs=function(t){return new n.TweetVE(this,this._model.getSourceId(t))},i}(n.LayoutVE);n.StatusUpdateLayoutVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){function f(n,t){return n.every(function(n){return n.isTextVisible(t)})}var r=n.Model.RM,u=function(n){function u(t,i){this.block=t.parent;this._model=i;n.call(this,t)}return __extends(u,n),u.prototype.getModelObjectId=function(){return this._model.id},u.prototype.getTextStyle=function(n){var i=this._model.getTextStyle(n),t;if(i)return i;if(t=this._model.getFontKey(n),t)return this.block.getTextStyleFromId(t,n);throw new Error("Text span doesn't have a text style or a font key");},u.prototype.getTextStyleId=function(n){if(this._model.getTextStyle(n)!=null)return"";var t=this._model.getFontKey(n);if(t)return t;throw new Error("Text span doesn't have a text style or a font key");},u.prototype.TextSpanTextArgs=function(n){return this._model.getText(n)},u.prototype.TextSpanPropsArgs=function(n){var r=this._model,s=this.block._model,u="",f=this.getTextStyleId(n),e,t,o;return f&&f!==s.getTextStyleId(n)&&(u+=f),e=r.getTextColorName(n),e!==s.getTextColorId(n)&&(u+=" "+i.LayoutCssClasses.getColor(e)),t={className:u,id:"text_"+r.id},o=r.getHyperlinkUri(n),o&&(t.href=o,SharingManager.getCurrentStoryAudience()!==4?(t.target="_blank",t.rel="nofollow noreferrer"):t.rel="nofollow"),t},u.prototype.TextSpanJQStyleStyleArgs=function(n){var t=this._model,f=i.LayoutCssClasses.getARGB(t.getTextColorOverride(n)),u=t.getTextOpacityOverride(n),e=t.getTextShadowXOff(n)||0,o=t.getTextShadowYOff(n)||0,s=t.getTextShadowBlur(n)||0,h=t.getTextShadowColor(n)||"#00000000",r={color:f,opacity:u>=0?u:"",textShadow:{xOffset:e,yOffset:o,blur:s,color:h,scale:this.block.getScale(n)}};return this.addSizingAdjustments(r,n),this.addStyleAdjustments(r,n),r},u.prototype.addSizingAdjustments=function(n,t){var i=this.getTextStyle(t),r=this.block,f="",e="",u;i!==r.getStyle(t)&&(u=this._model.getTextStyle(t)==null,f=r.getScaledFontSizeTextForStyle(t,i,u),e=r.getScaledAdjustedLetterSpacingTextForStyle(t,i,u));n.fontSize=f;n.letterSpacing=e},u.prototype.addStyleAdjustments=function(n,t){var f="",e="",u=this._model.getTextStyle(t);if(u!=null){var h=this.block,i=h.getStyle(t),o=u.getStyle(t),s=u.getWeight(t);(i==null||o!==i.getStyle(t))&&(f=r.FontStyle[o]);(i==null||s!==i.getWeight(t))&&(e=r.FontWeight[s])}n.fontStyle=f;n.fontWeight=e},u.prototype.hasUrlArgs=function(n){return!!this._model.getHyperlinkUri(n)},u.prototype.mouseClicked=function(t){var i=this;return t.which!=1?!0:i.hasUrlArgs()?!1:n.prototype.mouseClicked.call(this,t)},u.prototype.isTextVisible=function(n){var r=this.getTextStyle(n),u,i;return r?(u=this._model.getFontKey(n),!t.Common.isTextVisible(u,n))?!1:(i=r.fallbackChain.getCollection(n),i.length===0)?!0:i.every(function(i){return t.Common.isTextVisible(i,n)}):!0},u}(TDB.FocusableViewElement);i.TextRunVEBase=u;i.isTextVisible=f})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r=function(n){function r(t,i){n.call(this,t,i);this.parentList=null}return __extends(r,n),r.prototype.getSectionVEsRecursive=function(){return[this]},r.prototype.getHierarchyLevel=function(){for(var t=0,n=this.parentList;n!=null;n=n.parentList)++t;return t},r.create=function(n,r,u){var f;return f=r instanceof i.TextList?new t.TextListVE(n,r):new t.TextParagraphVE(n,r),u&&(f.parentList=u),f},r}(t.SelectableElement);t.TextSectionVE=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(n,i){var r=this;t.call(this,n,i);this.model=i;this._sectionChildren=TDB.mappedWatcherOwnerTag(6295700,r,r,r.getSectionChildrenModels,r.createChildSectionVE)}return __extends(i,t),i.prototype.getSectionVEsRecursive=function(n){var t=n.watchValue(this._sectionChildren),i=t.mapmany(function(t){return t.getSectionVEsRecursive(n)});return[this].concat(i)},i.prototype.sectionChildrenArgs=function(){return this._sectionChildren},i.prototype.getSectionChildrenModels=function(n){return this.model.children.getCollection(n)},i.prototype.createChildSectionVE=function(t){return n.TextSectionVE.create(this.parent,t,this)},i.prototype.listTypeArgs=function(n){return this.model.getStyle(n)},i.prototype.ListStyleArgs=function(n){var t=this.getHierarchyLevel(n),i=this.model.getStartNum(n)-1,r=new Array(t).join("sub")+"section "+i;return{counterReset:r}},i}(n.TextSectionVE);n.TextListVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r=function(r){function u(n,t){r.call(this,n,t);var i=this;this.model=t;this._metrics=TDB.watcherTag(6575430,i,i,i.calculateScaledMetrics);this._runChildren=TDB.mappedWatcherOwnerTag(6375010,i,i,i.getRunChildrenModels,i.createChildRunVE)}return __extends(u,r),u.prototype.getLayoutContext=function(){return this.model.getLayoutContext()},u.prototype.getContentType=function(){return this.parent._model.getContentType()},u.prototype.runChildrenArgs=function(){return this._runChildren},u.prototype.getRunChildrenModels=function(n){return this.model.runs.getCollection(n)},u.prototype.getRunVEs=function(n){return n.watchValue(this._runChildren)},u.prototype.createChildRunVE=function(n){return new t.TextRunVE(this,n)},u.prototype.isListItemArgs=function(n){return this.model.getParagraphStyle(n)===1},u.prototype.getPaddingBottom=function(n){return this.model.getSpacingAfter(n)*this.parent.getScale(n)},u.prototype.getContentHeight=function(n){return this.getScaledMetrics(n).contentHeight},u.prototype.getBlockLineHeight=function(n){return this.parent.getScaledLineHeight(n)},u.prototype.getSpanInfoByLine=function(t){for(var r,u=[],i=[],s=this.getRunVEs(t),f=0;f<s.length;++f){var e=s[f],h=e.getTextStyle(t),c=e._model.getFontKey(t),l=n.View.ViewElements.buildFamilyFallbackChain(h,c,t),o=e._model.getText(t).split("\n");for(r=0;r<o.length;++r)i.push({text:o[r],style:h,family:l}),r!==o.length-1&&(u.push(i),i=[])}return i.length>0&&u.push(i),u},u.prototype.getScaledLineMetrics=function(n,t){var r=this,i=this.parent.getScaledTargetLineHeight(n);return{width:t.map(function(t){return r.getScaledSpanWidth(n,t)}).reduce(function(n,t){return n+t},0),targetHeight:i,effectiveHeight:UX.getAdjustedLineHeight(i),characters:t.reduce(function(n,t){return n+t.text.length},0)}},u.prototype.getScaledSpanWidth=function(n,r){var u=this.parent.getScale(n),f=[i.FontStyle[r.style.getStyle(n)],t.toCSSFontWeight(r.style.getWeight(n)).toString(),u*r.style.getSize(n)+"px",r.family].join(" ");return UX.getTextWidth(r.text,f)},u.prototype.calculateScaledMetrics=function(n){var u=this,f=this.getSpanInfoByLine(n),i=f.map(function(t){return u.getScaledLineMetrics(n,t)}),t={width:0,targetHeight:0,effectiveHeight:0,contentHeight:0,lineMetrics:i},r;return i.empty()||(t.width=Math.max.apply(Math,i.map(function(n){return n.width}))+this.getIndentation(n),t.targetHeight=i.reduce(function(n,t){return n+t.targetHeight},0),t.effectiveHeight=i.reduce(function(n,t){return n+t.effectiveHeight},0),t.contentHeight=t.effectiveHeight),r=this.getPaddingBottom(n),t.targetHeight+=r,t.effectiveHeight+=r,t},u.prototype.getScaledMetrics=function(n){return n.watchValue(this._metrics)},u.prototype.getIndentation=function(n){var r,u,i,t,f;if(this.getHierarchyLevel(n)<=1||(r=this.parent.getStyle(n),r==null))return 0;for(u=r.getSize(n),i=0,t=this.model.getParentList(n);t!=null;t=t.getParentList(n))f=t.getStyle(n),f===2?i+=u:f===3&&(i+=u*1.5);return i},u.prototype.isTextVisible=function(n){return t.isTextVisible(this.getRunVEs(n),n)},u.prototype.ParagraphStyleArgs=function(n){var t={paddingBottom:Utilities.toPxStr(this.getPaddingBottom(n))},r="",u=this.getRunChildrenModels(n).length,i;return u===0&&this.isListItemArgs(n)&&(r=Utilities.toPxStr(this.getBlockLineHeight(n))),t.minHeight=r,i="",u>0&&this.isTextVisible(n)&&(i=Utilities.toPxStr(this.getContentHeight(n))),t.maxHeight=i,t},u.prototype.ParagraphPropsArgs=function(){var n=this.model;return{id:"paragraph_"+n.id}},u}(t.TextSectionVE);t.TextParagraphVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function u(n){switch(n){case 0:case 1:case 2:return 100;case 3:case 4:return 200;case 5:return 300;case 6:return 350;case 7:case 8:return 400;case 9:return 500;case 10:case 11:return 600;case 12:return 700;case 13:case 14:return 800;case 15:case 16:case 17:case 18:return 900;default:throw new Error("invalid font weight value: "+n);}}function f(n){switch(n){case 1:return"center";case 2:return"right";case 3:return"justified";case 0:return"left";default:throw new Error("invalid value for LayoutTextAlignment: "+n);}}function e(n){switch(n){case 0:return 0;case 2:return 1;case 1:return 2;default:throw new Error("invalid FontStyle: "+n);}}function o(n,t,u){var f="",e;return f=i(f,n,t,u),n.fallbackChain.getCollection(u).forEach(function(t){f=i(f,n,t,u)}),e=n.getGenericFamily(u),e&&(f=r(f,e,!0)),f}function i(t,i,u,f){var e=u?u:i.getFamily(f),o=n.View.Common.shouldUseSystemFallback(e,f);return i&&!o?r(t,e,!1):t}function r(n,t,i){var r="";return(n&&(r=n+", "),i)?r+t:r+"'"+t+"'"}var s=n.Model.RM;t.toCSSFontWeight=u;t.toCSSTextAlignment=f;t.modelStyleToFontStyle=e;t.buildFamilyFallbackChain=o})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r=n.AnimationManager,u=function(n){function u(t,i){n.call(this,t,i);this.parent=t;this.model=i}return __extends(u,n),u.prototype.transformedStyleArgs=function(n){if(Modernizr.preserve3d)return{};var t=this.getAnimatableTransforms(n).filter(function(n){return n instanceof r.Properties.Scaled}),i=t.length?t[0].get(2):0;return{zIndex:i.toFixed()}},u.prototype.containerArgs=function(n){return t.createLayoutVE(this,this.model.getTexture(n))},u.prototype.transformedAnimatableInitArgs=function(){return this.model.id},u.prototype.createChild=function(n,r){if(r instanceof i.ContainerSceneGraphElement)return new t.ContainerSceneGraphVE(this,r);if(r instanceof i.TextureSceneGraphElement)return new t.TextureSceneGraphVE(this,r);throw Error("unsupported child type "+r);},u}(t.SceneGraphVE);t.TextureSceneGraphVEBase=u})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Common,r=function(n){function t(t,i){n.call(this,t);this.tweetHeight=TDB.watchableTag(6341838,this,0);this.tweetId=i}return __extends(t,n),t.prototype.onTweetResize=function(n){var t=this;typeof n=="number"&&TDB.applyUpdate(function(){return t.tweetHeight.setValue(n)})},t.prototype.tweetMessageInitArgs=function(){return this.onTweetResize},t.getAdditionalIframeAttrs=function(){return{}},t.prototype.tweetAttrArgs=function(){return t.getAdditionalIframeAttrs()},t.prototype.tweetPropsArgs=function(){return{src:i.UrlHelper.getInstance().twitterIFrameUrl(this.tweetId)}},t.prototype.tweetStyleArgs=function(n){var i=this.parent,r=i._model.position,t=n.watchValue(this.tweetHeight),u={width:Utilities.toPxStr(r.getWidth(n)),height:Utilities.toPxStr(t)},f=i.getScale(n),e=f===1?"":"scale("+f.toFixed(3)+") ",o=r.getHeight(n),s;return o<t&&(s=o/t,e+="scale("+s.toFixed(3)+")"),u[Modernizr.prefixed("transform")]=e,u},t}(TDB.ViewElement);t.TweetVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){var e=n.Model.RM,u,f,r;(function(n){n[n.LEFT=0]="LEFT";n[n.CENTER=1]="CENTER";n[n.RIGHT=2]="RIGHT"})(i.ViewportHorizontalAlignment||(i.ViewportHorizontalAlignment={}));u=i.ViewportHorizontalAlignment,function(n){n[n.TOP=0]="TOP";n[n.CENTER=1]="CENTER";n[n.BOTTOM=2]="BOTTOM"}(i.ViewportVerticalAlignment||(i.ViewportVerticalAlignment={}));f=i.ViewportVerticalAlignment;r=function(n){function r(i,r){n.call(this,i);this.parent=i;this._model=r;this.horizontalalignment=TDB.watcherTag(4543746,this,this,this.getHorizontalAlignment);this.verticalalignment=TDB.watcherTag(4543747,this,this,this.getVerticalAlignment);this.scaling=TDB.watcherTag(4587731,this,this,this.getScaling);this.scale=TDB.watcherTag(4748042,this,this,this.computeScale);this.ismain=TDB.watcherTag(6094881,this,this,t.isMainViewport.bind(null,this._model));this.cachedScaledServerSize=TDB.watcherTag(6150045,this,this,this.computeScaledServerSize)}return __extends(r,n),r.prototype.model=function(){return this._model},r.prototype.getModelObjectId=function(){return this._model.id},r.prototype.viewportScale=function(){return this.scale},r.prototype.getHorizontalAlignment=function(n){var t=this._model.getHorizontalAlignment(n);switch(t){case 1:return 1;case 0:return 0;case 2:return 2;default:throw new Error("invalid alignment property for horizontal alignment");}},r.prototype.getScaling=function(n){return this._model.getContentStretch(n)},r.prototype.getVerticalAlignment=function(n){var t=this._model.getVerticalAlignment(n);switch(t){case 1:return 1;case 0:return 0;case 2:return 2;default:throw new Error("invalid alignment property for horizontal alignment");}},r.prototype.layoutSize=function(n){return new Size(this._model.position.getWidth(n),this._model.position.getHeight(n))},r.prototype.absolutePositioning=function(n){var t=this.position(n),i=this.parent.getWidth(n),r=this.parent.getHeight(n);return t.left!==undefined?t.right=i-t.left:t.right!==undefined&&(t.left=i-t.right),t.top!==undefined?t.bottom=r-t.top:t.bottom!==undefined&&(t.top=r-t.bottom),t},r.prototype.position=function(n){var i=this.viewportSize(n),t={},u=this.horizontalalignment.getWatchedValue(n),f,r,e;return u===0?t.left=0:u===2?t.right=i.width:(f=this.parent.getWidth(n),t.left=Utilities.roundPx(.5*(f-i.width))),r=this.verticalalignment.getWatchedValue(n),r===0?t.top=0:r===2?t.bottom=i.height:(e=this.parent.getHeight(n),t.top=Utilities.roundPx(.5*(e-i.height))),t},r.prototype.positioningStyle=function(n){var i={},t=this.position(n);return t.left!==undefined?i.left=t.left+"px":t.right!==undefined&&(i.right=t.right+"px"),t.top!==undefined?i.top=t.top+"px":t.bottom!==undefined&&(i.bottom=t.bottom+"px"),i},r.prototype.sizeToFit=function(n,t,i,r){var f=r,u=t*(r/n);return u>i&&(u=i,f=n*(i/t)),new Size(u,f)},r.prototype.sizeToFill=function(n,t,i,r){var e=t/n,f=r,u=e*f;return u<i&&(u=i,f=1/e*u),new Size(u,f)},r.prototype.backgroundType=function(n){return this._model.getBackgroundType(n)},r.prototype.viewportSize=function(n){var t=this.layoutSize(n),u=this.scaling.getWatchedValue(n),i,r;return u===3?t:(i=this.parent.getWidth(n),r=this.parent.getHeight(n),u===0?this.sizeToFit(t.height,t.width,i,r):this.sizeToFill(t.height,t.width,i,r))},r.prototype.contentArgs=function(n){return this._model.getBackgroundType(n)===0?i.createLayoutVE(this,this.getModelChild(n)):new i.ViewportBackgroundVE(this,this._model)},r.prototype.getModelChild=function(n){return this._model.getChild(n)},r.prototype.getScale=function(n){return this.scale.getWatchedValue(n)},r.prototype.computeScale=function(n){var t=this.scaling.getWatchedValue(n),i,r;return t===2||t===3?1:(i=this.layoutSize(n),r=this.viewportSize(n),r.width/i.width)},r.prototype.scaledServerSize=function(){return this.cachedScaledServerSize.getValue().clone()},r.prototype.computeScaledServerSize=function(n){var r=this.parent.getWidth(n),u=this.parent.getHeight(n),i=this.absolutePositioning(n),t=1/this.getScale(n);return new BaseRect(-i.left*t,-i.top*t,r*t,u*t)},r.prototype.PositionDivStyleArgs=function(n){if(n.watchValue(this.scaling)===2)return{fontSize:"100px",top:"0px",left:"0px"};var t=this.positioningStyle(n),i=n.watchValue(this.scale);return t.fontSize=100*i+"px",t[Modernizr.prefixed("transform")]="translateZ(0)",t},r.prototype.PositionDivAttrArgs=function(n){return i.createAttributes(n,this._model)},r.prototype.PositionDivAnimatableInitArgs=function(){return this._model.id},r}(TDB.FocusableViewElement);i.ViewportVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){function t(n,t,i){var r,u,f;return i===void 0&&(i=null),i||(i={}),r=t.getUnhashedId(n),r&&(i.unhashedId=r),u=t.getAccessibilityInfo(n),u&&(f=u.attributes.getCollection(n),f.forEach(function(t){return i[t.getName(n)]=t.getValue(n)})),i}function i(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQVJREFUeNpizM0r3MDAwODPQB/wEYgdmOhoIQjwA3EAE8MAABYs3r9AZTsEgFgfn6UXJk3sc6CmjXn5RSDz9iOLDUjwjhxLWUiMnwAglYCUzR6C+MB0cIBmlgJBARAbAHEjEn8DNIXSzNIGZF8BfQ6i6kEplBTfkhSnWAxWgGU1uiQkoO9AcRsPxBOBjvlAc0uhCWo+EF8EBTm9sswCqIUOpPqSLEuhxRo/NFF9oFfh8AEtEdG2cICmYFBKZaR7MQgM4gJoYqKPpUDLQCVSP7Q0oo+l0OAtJCerkB2nUIsnjNan5ASvADTzUxMYELJUH70RNdpGGrV0UFu6kY72gfpKGwACDAAZ4kYMKNP2EwAAAABJRU5ErkJggg=="}n.createAttributes=t;n.getFailedImageBase64=i})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Common,r=function(n){function r(t,i){n.call(this,t);this.parent=t;this.model=i}return __extends(r,n),r.prototype.subtemplateArgs=function(n){return i.Environment.getInstance().isClientOnline(n)?t.createLayoutVE(this,this.model,!0):new t.OfflineLayoutVE(this,this.model)},r}(TDB.FocusableViewElement);t.ModeSelectorVEBase=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r="EmbedPlaceholder.png",l="stack_24x24.png",a="reveal_24x24.png",o="TweetPlaceholder.png",e="imagePlaceholder.png",u="document_24x24.png",f="VideoPlaceholder.png",a="Comparison.png",l="Stack.png",s={"www.google.com":"map_24x24.png","e.infogr.am":"infographic_24x24.png","flickrit.com":e,"giphy.com":e,"mix.office.com":u,"onedrive.live.com":u,"sway.com":u,"www.youtube.com":f,"vine.co":f,"player.vimeo.com":f,"sketchfab.com":"3Dinteractable_24x24_cube.png","w.soundcloud.com":"audio_24x24.png"},h={"www.google.com":Resources.OfflineMapEmbedMessage,"e.infogr.am":Resources.OfflineInfogramEmbedMessage,"flickrit.com":Resources.OfflineImageEmbedMessage,"giphy.com":Resources.OfflineImageEmbedMessage,"mix.office.com":Resources.OfflineDocumentEmbedMessage,"onedrive.live.com":Resources.OfflineDocumentEmbedMessage,"sway.com":Resources.OfflineSwayEmbedMessage,"www.youtube.com":Resources.OfflineVideoEmbedMessage,"vine.co":Resources.OfflineVideoEmbedMessage,"player.vimeo.com":Resources.OfflineVideoEmbedMessage,"sketchfab.com":Resources.Offline3dDocumentEmbedMessage,"w.soundcloud.com":Resources.OfflineAudioEmbedMessage},c=function(n){function t(t,i){n.call(this,t,i);this.parent=t}return __extends(t,n),t.prototype.messageTextArgs=function(n){return this._model instanceof i.EmbedLayoutElement?this.getEmbedContentMessage(n):this._model instanceof i.StatusUpdateLayoutElement?Resources.OfflineTweetMessage:this._model instanceof i.AgaveLayoutElement?Resources.OfflineAgaveMessage:Resources.OfflineDefaultContentMessage},t.prototype.imagePropsArgs=function(n){return{src:this.getIconUrl(n)}},t.prototype.hasImageArgs=function(n){var t=this.getIconUrl(n);return!!t},t.prototype.getIconUrl=function(n){return this._model instanceof i.EmbedLayoutElement?this.getEmbedIconUrl(n):this._model instanceof i.StatusUpdateLayoutElement?o:this._model instanceof i.AgaveLayoutElement?r:r},t.prototype.getEmbedIconUrl=function(n){if(!(this._model instanceof i.EmbedLayoutElement))throw new Error("Bad cast, element is not an embed");var u=this._model,f=Utilities.extractHostnameFromUrl(u.getEmbedSourceUrl(n)),t=s[f];return t===undefined&&(t=r),t},t.prototype.getEmbedContentMessage=function(n){if(!(this._model instanceof i.EmbedLayoutElement))throw new Error("Bad cast, element is not an embed");var r=this._model,u=Utilities.extractHostnameFromUrl(r.getEmbedSourceUrl(n)),t=h[u];return t===undefined&&(t=Resources.OfflineEmbedMessage),t},t}(t.LayoutVE);t.OfflineLayoutVEBase=c})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i){n.call(this,t,i);this.parent=t}return __extends(t,n),t}(n.ContainerLayoutVEBase);n.MediaViewportLayoutVEBase=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.View.Bindings,u=CommonBindings.View.Bindings,i=TDB.View.Bindings,bu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new h.C1(u);i.add(this,n,t);r.push(i)},t}(t.StatusUpdateContentVEBase),h,ci,c,li,l,ai,a,vi,f,yi,v,pi,e,wi,y,bi,p,ki,w,di,b,gi,k,nr,d,tr,g,ir,nt,rr,o,ur,tt,fr,it,er,rt,or,ut,sr,ft,hr,et,cr,ot,lr,ar,st,vr,ht,yr,pr,ct,wr,lt,br,at,kr,vt,dr,yt,gr,pt,nu,wt,tu,bt,iu,kt,ru,dt,uu,gt,fu,ni,eu,ti,ou,ii,su,s,hu,ri,cu,lu,ui,au,fi,vu,ei,yu,oi,pu,si,wu,hi;t.StatusUpdateContentVE=bu,function(n){var l=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var f=this._context,u=document.createElement("div"),r;this.domElement=u;u._context=f;u.className="StatusUpdateContent";var e=null,o=this.children,r=new n.CifProfileImage(f);r.add(this,u,e);o.push(r);r=new n.Cauthor(f);r.add(this,u,e);o.push(r);r=new n.CuserName(f);r.add(this,u,e);o.push(r);r=new n.CifAttribution(f);r.add(this,u,e);o.push(r);r=new n.Cbody(f);r.add(this,u,e);o.push(r);this._addToDom(t,i)},i}(TDB.ViewElement),t,r,u,f,e,o,s,h,c;n.C1=l;t=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.ifProfileImageArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.C2(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.CifProfileImage=t;r=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="StatusUpdateProfileImage";var e=this.children,f=new n.CprofileImage(u);f.add(this,r,null);e.push(f);this._addToDom(t,i)},i}(TDB.ViewElement);n.C2=r;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("img");this.domElement=u;u._context=r;this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.profileImageAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CprofileImage=u;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="StatusUpdateName segoeUI";this._TextBinding=new i.Text.Binding(r,n,u,this,u.authorTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.Cauthor=f;e=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="StatusUpdateUserName segoeUI font7";this._TextBinding=new i.Text.Binding(r,n,u,this,u.userNameTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.CuserName=e;o=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.ifAttributionArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.C3(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.CifAttribution=o;s=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="StatusUpdateAttribution";var e=this.children,f=new n.Cattribution(u);f.add(this,r,null);e.push(f);this._addToDom(t,i)},i}(TDB.ViewElement);n.C3=s;h=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("img");this.domElement=u;u._context=r;this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.attributionAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cattribution=h;c=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="StatusUpdateBody segoeUI";this._TextBinding=new i.Text.Binding(r,n,u,this,u.bodyTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.Cbody=c}(h||(h={}));ci=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);this._subscribeToWatchable(this._triggerPreviewCalloutWatcher=TDB.watcherTag(5796370,this,this,this.triggerPreviewCallout),2);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new c.CpageRoot(u);i.add(this,n,t);r.push(i);this._triggerPreviewCalloutWatcher.resolve()},t.prototype.onUpdate=function(n){n===2&&this._triggerPreviewCalloutWatcher.resolve()},t}(t.StoryPageVEBase);t.StoryPageVE=ci,function(n){var v=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,e=document.createElement("div"),o,s,u;this.domElement=e;e._context=f;e.className="page-root";this._StyleBinding=new i.Style.Binding(e,t,f,this,f.pageRootStyleArgs);o=null;s=this.children;f.showAccessibleModeLinkArgs()&&(u=new n.CaccessibleModeLink(f),u.add(this,e,o),s.push(u));u=new n.CappBarWrapper(f);u.add(this,e,o);s.push(u);u=new n.CnotificationBarWrapper(f);u.add(this,e,o);s.push(u);u=new n.CpaneHolder(f);u.add(this,e,o);s.push(u);u=f.authoringPageArgs();u&&(u.add(this,e,o),s.push(u));u=f.blockingProgressArgs();u&&(u.add(this,e,o),s.push(u));this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n)},r}(TDB.ViewElement),t,r,f,e,o,s,h,c,l,a;n.CpageRoot=v;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("a");this.domElement=u;u._context=r;u.className="accessibleModeLink segoeUI";this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.accessibleModeLinkAttrArgs);this._TextBinding=new i.Text.Binding(u,n,r,this,r.accessibleModeLinkTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n);this._TextBinding.update(n)},t}(TDB.ViewElement);n.CaccessibleModeLink=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("div");this.domElement=u;u._context=r;u.className="appBarWrapper";this._StyleBinding=new i.Style.Binding(u,n,r,this,r.appBarWrapperStyleArgs);var o=this.children,e=TDB.watcherTag(4543755,r,null,r.appBarArgs),f=new TDB.SubTemplateInstructionVE(!0,e);f.addResource(e);f.add(this,u,null);o.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n)},t}(TDB.ViewElement);n.CappBarWrapper=r;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("div");this.domElement=u;u._context=r;u.className="storyNotificationBarWrapper";this._StyleBinding=new i.Style.Binding(u,n,r,this,r.notificationBarWrapperStyleArgs);var o=this.children,e=TDB.watcherTag(4543755,r,null,r.notificationBarArgs),f=new TDB.SubTemplateInstructionVE(!1,e);f.addResource(e);f.add(this,u,null);o.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n)},t}(TDB.ViewElement);n.CnotificationBarWrapper=f;e=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,u=document.createElement("div");this.domElement=u;u._context=f;u.id="pane-holder";this._StyleBinding=new i.Style.Binding(u,t,f,this,f.paneHolderStyleArgs);var o=this.children,e=new n.CpreviewPane(f);e.add(this,u,null);o.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n)},r}(TDB.ViewElement);n.CpaneHolder=e;o=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,e=document.createElement("div"),u;this.domElement=e;e._context=f;e.id="preview";this._PropsBinding=new i.Props.Binding(e,t,f,this,f.previewPanePropsArgs);this._StyleBinding=new i.Style.Binding(e,t,f,this,f.previewPaneStyleArgs);var o=null,s=this.children,u=new n.CUpdateStatus(f);u.add(this,e,o);s.push(u);u=f.surfaceAuthoringArgs();u&&(u.add(this,e,o),s.push(u));u=f.offlineVellumArgs();u&&(u.add(this,e,o),s.push(u));u=f.previewArgs();u&&(u.add(this,e,o),s.push(u));this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n)},r}(TDB.ViewElement);n.CpreviewPane=o;s=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,u=document.createElement("div"),e;this.domElement=u;u._context=f;u.className="updateStatus";this._StyleBinding=new i.Style.Binding(u,t,f,this,f.UpdateStatusStyleArgs);var o=null,s=this.children,e=new n.CTransientUpdateStatus(f);e.add(this,u,o);s.push(e);e=new n.CBlockingUpdateStatus(f);e.add(this,u,o);s.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n)},r}(TDB.ViewElement);n.CUpdateStatus=s;h=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var r=this._context,f=document.createElement("div");this.domElement=f;f._context=r;this._SlideVisibleBinding=new u.SlideVisible.Binding(f,t,r,this,r.TransientUpdateStatusSlideVisibleInitArgs(),r.TransientUpdateStatusSlideVisibleArgs);this._ClassNameBinding=new u.ClassName.Binding(f,t,r,this,r.TransientUpdateStatusClassNameArgs);this.receivePhaseNotification(4);var o=this.children,e=new n.CTransientUpdatingGif(r);e.add(this,f,null);o.push(e);this._addToDom(t,i)},i.prototype.onUpdate=function(n){this._SlideVisibleBinding.update(n);this._ClassNameBinding.update(n)},i}(TDB.ViewElement);n.CTransientUpdateStatus=h;c=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("img");this.domElement=u;u._context=r;this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.TransientUpdatingGifAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CTransientUpdatingGif=c;l=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,u=document.createElement("div");this.domElement=u;u._context=f;u.className="blockingUpdateStatus";this._VisibleBinding=new i.Visible.Binding(u,t,f,this,f.BlockingUpdateStatusVisibleArgs);var o=this.children,e=new n.CBlockingUpdatingGif(f);e.add(this,u,null);o.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._VisibleBinding.update(n)},r}(TDB.ViewElement);n.CBlockingUpdateStatus=l;a=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("img");this.domElement=u;u._context=r;this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.BlockingUpdatingGifAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CBlockingUpdatingGif=a}(c||(c={}));li=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var f=this.children,r=this,i=new l.CPositionDiv(r),u;i.add(this,n,t);f.push(i);u=TDB.watcherTag(4543755,r,null,r.failedImageArgs);i=new TDB.SubTemplateInstructionVE(!1,u);i.addResource(u);i.add(this,n,t);f.push(i)},t}(t.ComplexImageVEBase);t.ComplexImageVE=li,function(n){var e=function(t){function u(n){t.call(this,null);this._context=n}return __extends(u,t),u.prototype._create=function(t,u){var f=this._context,e=document.createElementNS("http://www.w3.org/2000/svg","svg"),o;this.domElement=e;e._context=f;e.setAttribute("version","1.1");e.setAttribute("preserveaspectratio","none");e.setAttribute("role","img");this._AnimatableBinding=new r.Animatable.Binding(e,t,f,this,f.PositionDivAnimatableInitArgs());this._PropsBinding=new i.Props.Binding(e,t,f,this,f.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(e,t,f,this,f.PositionDivStyleArgs);this._AttrBinding=new i.Attr.Binding(e,t,f,this,f.PositionDivAttrArgs);this._BoxShadowBinding=new r.BoxShadow.Binding(e,t,f,this,f.PositionDivBoxShadowArgs);var s=null,h=this.children,o=f.internalsArgs();o&&(o.add(this,e,s),h.push(o));o=new n.Cupgrading(f);o.add(this,e,s);h.push(o);this._addToDom(t,u)},u.prototype.onUpdate=function(n){this._AnimatableBinding.update(n);this._PropsBinding.update(n);this._StyleBinding.update(n);this._AttrBinding.update(n);this._BoxShadowBinding.update(n)},u.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},u}(TDB.ViewElement),t,f;n.CPositionDiv=e;t=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.upgradingArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.CnewImage(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.Cupgrading=t;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var i=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","g");this.domElement=r;r._context=i;this._FadeVisibleBinding=new u.FadeVisible.Binding(r,n,i,this,i.newImageFadeVisibleInitArgs(),i.newImageFadeVisibleArgs);var e=this.children,f=i.newInternalsArgs();f&&(f.add(this,r,null),e.push(f));this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._FadeVisibleBinding.update(n)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},t}(TDB.ViewElement);n.CnewImage=f}(l||(l={}));ai=function(n){function t(t){this.constructing=!0;n.call(this,t);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new a.C1(u);i.add(this,n,t);r.push(i)},t}(t.FailedImageVEBase);t.FailedImageVE=ai,function(n){var f=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var f=this._context,u=document.createElement("div"),r;this.domElement=u;u._context=f;u.className="missingImageBlock";var e=null,o=this.children,r=new n.CfailedImageIcon(f);r.add(this,u,e);o.push(r);r=new n.CerrorMessage(f);r.add(this,u,e);o.push(r);r=new n.CerrorMessageImageURL(f);r.add(this,u,e);o.push(r);this._addToDom(t,i)},i}(TDB.ViewElement),t,r,u;n.C1=f;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("img");this.domElement=r;r._context=u;r.className="missingImageIcon";this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.failedImageIconAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CfailedImageIcon=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("span");this.domElement=u;u._context=r;this._TextBinding=new i.Text.Binding(u,n,r,this,r.errorMessageTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.CerrorMessage=r;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("span");this.domElement=r;r._context=u;r.className="missingImageBlockURL";this._TextBinding=new i.Text.Binding(r,n,u,this,u.errorMessageImageURLTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.CerrorMessageImageURL=u}(a||(a={}));vi=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var u=this.children,r=this,i=new f.CPositionDiv(r),e;i.add(this,n,t);u.push(i);i=new f.Cupgrading(r);i.add(this,n,t);u.push(i);e=TDB.watcherTag(4543755,r,null,r.failedImageArgs);i=new TDB.SubTemplateInstructionVE(!1,e);i.addResource(e);i.add(this,n,t);u.push(i)},t}(t.ImageVEBase);t.ImageVE=vi,function(n){var e=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("img");this.domElement=f;f._context=u;f.className="container";this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.PositionDivAnimatableInitArgs());this._PropsBinding=new i.Props.Binding(f,n,u,this,u.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(f,n,u,this,u.PositionDivStyleArgs);this._BoxShadowBinding=new r.BoxShadow.Binding(f,n,u,this,u.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(f,n,u,this,u.PositionDivAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AnimatableBinding.update(n);this._PropsBinding.update(n);this._StyleBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement),t,f;n.CPositionDiv=e;t=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.upgradingArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.CnewImage(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.Cupgrading=t;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,f=document.createElement("img");this.domElement=f;f._context=r;f.className="container";this._PropsBinding=new i.Props.Binding(f,n,r,this,r.newImagePropsArgs);this._StyleBinding=new i.Style.Binding(f,n,r,this,r.newImageStyleArgs);this._FadeVisibleBinding=new u.FadeVisible.Binding(f,n,r,this,r.newImageFadeVisibleInitArgs(),r.newImageFadeVisibleArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._FadeVisibleBinding.update(n)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},t}(TDB.ViewElement);n.CnewImage=f}(f||(f={}));yi=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new v.CsvgRoot(u);i.add(this,n,t);r.push(i)},t}(t.SvgVEBase);t.SvgVE=yi,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","svg");this.domElement=r;r._context=u;r.setAttribute("version","1.1");r.setAttribute("preserveaspectratio","none");this._StyleBinding=new i.Style.Binding(r,n,u,this,u.svgRootStyleArgs);this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.svgRootAttrArgs);var e=this.children,f=u.internalsArgs();f&&(f.add(this,r,null),e.push(f));this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CsvgRoot=t}(v||(v={}));pi=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var u=this.children,r=this,i=new e.ChasDefs(r),f;i.add(this,n,t);u.push(i);f=TDB.watcherTag(4543753,r,null,r.pathsArgs);i=new TDB.ForeachInstructionVE(!1,f);i.addResource(f);i.add(this,n,t);u.push(i);i=new e.ChasRects(r);i.add(this,n,t);u.push(i)},t}(t.SvgInternalsVEBase);t.SvgInternalsVE=pi,function(n){var f=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.hasDefsArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.C1(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE),t,r,u;n.ChasDefs=f;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,i=document.createElementNS("http://www.w3.org/2000/svg","defs");this.domElement=i;i._context=r;var f=this.children,u=new TDB.ForeachInstructionVE(!1,r.definitionsArgs());u.add(this,i,null);f.push(u);this._addToDom(n,t)},t}(TDB.ViewElement);n.C1=t;r=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.hasRectsArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.Cgroup(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.ChasRects=r;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","g");this.domElement=u;u._context=r;this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.groupAttrArgs);var e=this.children,f=new TDB.ForeachInstructionVE(!1,r.rectanglesArgs());f.add(this,u,null);e.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cgroup=u}(e||(e={}));wi=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new y.Cclippath(u);i.add(this,n,t);r.push(i)},t}(t.SvgClipPathVEBase);t.SvgClipPathVE=wi,function(n){var r=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var u=this._context,f=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.domElement=f;f._context=u;this._AttrBinding=new i.Attr.Binding(f,t,u,this,u.clippathAttrArgs);var o=this.children,e=new n.Cpath(u);e.add(this,f,null);o.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._AttrBinding.update(n)},r}(TDB.ViewElement),t;n.Cclippath=r;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","path");this.domElement=u;u._context=r;this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.pathAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cpath=t}(y||(y={}));bi=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new p.CcolorFilter(u);i.add(this,n,t);r.push(i)},t}(t.SvgColorFilterVEBase);t.SvgColorFilterVE=bi,function(n){var e=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var u=this._context,f=document.createElementNS("http://www.w3.org/2000/svg","filter");this.domElement=f;f._context=u;this._AttrBinding=new i.Attr.Binding(f,t,u,this,u.colorFilterAttrArgs);var o=this.children,e=new n.C1(u);e.add(this,f,null);o.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._AttrBinding.update(n)},r}(TDB.ViewElement),t,r,u,f;n.CcolorFilter=e;t=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var f=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer"),r;this.domElement=u;u._context=f;var e=null,o=this.children,r=new n.Cred(f);r.add(this,u,e);o.push(r);r=new n.Cgreen(f);r.add(this,u,e);o.push(r);r=new n.Cblue(f);r.add(this,u,e);o.push(r);this._addToDom(t,i)},i}(TDB.ViewElement);n.C1=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","feFuncR");this.domElement=r;r._context=u;r.setAttribute("type","linear");r.setAttribute("intercept","0");this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.redAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cred=r;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","feFuncG");this.domElement=r;r._context=u;r.setAttribute("type","linear");r.setAttribute("intercept","0");this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.greenAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cgreen=u;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","feFuncB");this.domElement=r;r._context=u;r.setAttribute("type","linear");r.setAttribute("intercept","0");this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.blueAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cblue=f}(p||(p={}));ki=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new w.CdropShadowFilter(u);i.add(this,n,t);r.push(i)},t}(t.SvgDropShadowFilterVEBase);t.SvgDropShadowFilterVE=ki,function(n){var u=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var u=this._context,f=document.createElementNS("http://www.w3.org/2000/svg","filter"),e;this.domElement=f;f._context=u;this._AttrBinding=new i.Attr.Binding(f,t,u,this,u.dropShadowFilterAttrArgs);var o=null,s=this.children,e=new n.Coffset(u);e.add(this,f,o);s.push(e);e=new n.Cblur(u);e.add(this,f,o);s.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._AttrBinding.update(n)},r}(TDB.ViewElement),t,r;n.CdropShadowFilter=u;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","feOffset");this.domElement=r;r._context=u;r.setAttribute("result","offOut");r.setAttribute("in","SourceGraphic");this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.offsetAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Coffset=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");this.domElement=r;r._context=u;r.setAttribute("result","blurOut");r.setAttribute("in","offOut");this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.blurAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cblur=r}(w||(w={}));di=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new b.Cpattern(u);i.add(this,n,t);r.push(i)},t}(t.SvgPatternVEBase);t.SvgPatternVE=di,function(n){var r=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","pattern");this.domElement=u;u._context=f;u.setAttribute("patternunits","userSpaceOnUse");this._AttrBinding=new i.Attr.Binding(u,t,f,this,f.patternAttrArgs);var o=this.children,e=new n.Cimage(f);e.add(this,u,null);o.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._AttrBinding.update(n)},r}(TDB.ViewElement),t;n.Cpattern=r;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","image");this.domElement=u;u._context=r;u.setAttribute("preserveAspectRatio","none");this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.imageAttrArgs);this._NamespaceAttrBinding=new i.NamespaceAttr.Binding(u,n,r,this,r.imageNamespaceAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n);this._NamespaceAttrBinding.update(n)},t}(TDB.ViewElement);n.Cimage=t}(b||(b={}));gi=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new k.Cimage(u);i.add(this,n,t);r.push(i)},t}(t.SvgImageVEBase);t.SvgImageVE=gi,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","image");this.domElement=u;u._context=r;u.setAttribute("preserveAspectRatio","none");this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.imageAttrArgs);this._NamespaceAttrBinding=new i.NamespaceAttr.Binding(u,n,r,this,r.imageNamespaceAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n);this._NamespaceAttrBinding.update(n)},t}(TDB.ViewElement);n.Cimage=t}(k||(k={}));nr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new d.Cpath(u);i.add(this,n,t);r.push(i)},t}(t.SvgPathVEBase);t.SvgPathVE=nr,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","path");this.domElement=u;u._context=r;this._StyleBinding=new i.Style.Binding(u,n,r,this,r.pathStyleArgs);this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.pathAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Cpath=t}(d||(d={}));tr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new g.Crect(u);i.add(this,n,t);r.push(i)},t}(t.SvgRectVEBase);t.SvgRectVE=tr,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElementNS("http://www.w3.org/2000/svg","rect");this.domElement=u;u._context=r;this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.rectAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.Crect=t}(g||(g={}));ir=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new nt.CbackgroundType(u);i.add(this,n,t);r.push(i)},t}(t.BackgroundVEBase);t.BackgroundVE=ir,function(n){var t=function(n){function t(t){var i=TDB.watcherTag(4519824,t,null,t.backgroundTypeArgs);n.call(this,i);this.addResource(i);this._context=t}return __extends(t,n),t.prototype.buildChildren=function(n,t,i){var u=this._context,f=this.children,r;switch(n){case 2:r=u.backgroundShapeArgs();r&&(r.add(this,t,i),f.push(r))}},t}(TDB.SwitchInstructionVE);n.CbackgroundType=t}(nt||(nt={}));rr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new o.CAgaveFrame(u);i.add(this,n,t);r.push(i);i=new o.CAgaveFailedPlaceholder(u);i.add(this,n,t);r.push(i)},t}(t.AgaveLayoutVEBase);t.AgaveLayoutVE=rr,function(n){var e=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;this._AttrBinding=new i.Attr.Binding(f,n,u,this,u.AgaveFrameAttrArgs);this._ContentAgaveBinding=new r.ContentAgave.Binding(f,n,u,this,u.AgaveFrameContentAgaveCreateArgs,u.AgaveFrameContentAgaveDataChangedArgs,u.AgaveFrameContentAgaveSizeChangedArgs,u.AgaveFrameContentAgaveIsEditChangedArgs,u.AgaveFrameContentAgaveSettingsChangedArgs);this._StyleBinding=new i.Style.Binding(f,n,u,this,u.AgaveFrameStyleArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n);this._ContentAgaveBinding.update(n);this._StyleBinding.update(n)},t.prototype.disposeBindings=function(){this._ContentAgaveBinding.dispose()},t}(TDB.ViewElement),t,u,f;n.CAgaveFrame=e;t=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,u=document.createElement("div"),e;this.domElement=u;u._context=f;u.className="missingAgaveBlock";this._StyleBinding=new i.Style.Binding(u,t,f,this,f.AgaveFailedPlaceholderStyleArgs);var o=null,s=this.children,e=new n.CAgaveFailedImage(f);e.add(this,u,o);s.push(e);e=new n.CErrorMessage(f);e.add(this,u,o);s.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n)},r}(TDB.ViewElement);n.CAgaveFailedPlaceholder=t;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("img");this.domElement=r;r._context=u;r.className="missingAgaveIcon";this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.AgaveFailedImageAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CAgaveFailedImage=u;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("span");this.domElement=u;u._context=r;this._TextBinding=new i.Text.Binding(u,n,r,this,r.ErrorMessageTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.CErrorMessage=f}(o||(o={}));ur=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new tt.CrootDiv(u);i.add(this,n,t);r.push(i)},t}(t.ContainerSceneGraphVEBase);t.ContainerSceneGraphVE=ur,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;f.className="containerscenegraph virtual";this._StyleBinding=new i.Style.Binding(f,n,u,this,u.rootDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.rootDivAnimatableInitArgs());var s=this.children,o=TDB.watcherTag(4543753,u,null,u.childrenArgs),e=new TDB.ForeachInstructionVE(!1,o);e.addResource(o);e.add(this,f,null);s.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AnimatableBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.CrootDiv=t}(tt||(tt={}));fr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var f=this.children,r=this,u,i;switch(r.isIframeLoadingManagerEnabledArgs()){case!0:i=new it.CplaceholderImage(r);i.add(this,n,t);f.push(i);break;case!1:u=TDB.watcherTag(4543755,r,null,r.placeholderOldArgs);i=new TDB.SubTemplateInstructionVE(!1,u);i.addResource(u);i.add(this,n,t);f.push(i);u=TDB.watcherTag(4543755,r,null,r.embedIframeOldArgs);i=new TDB.SubTemplateInstructionVE(!1,u);i.addResource(u);i.add(this,n,t);f.push(i)}},t}(t.EmbedLayoutVEBase);t.EmbedLayoutVE=fr,function(n){var f=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var u=this._context,e=document.createElement("div"),o,f;this.domElement=e;e._context=u;this._StyleBinding=new i.Style.Binding(e,t,u,this,u.placeholderImageStyleArgs);this._AttrBinding=new i.Attr.Binding(e,t,u,this,u.placeholderImageAttrArgs);var s=null,h=this.children,f=new n.CifLoading(u);f.add(this,e,s);h.push(f);o=TDB.watcherTag(4543755,u,null,u.placeholderArgs);f=new TDB.SubTemplateInstructionVE(!1,o);f.addResource(o);f.add(this,e,s);h.push(f);o=TDB.watcherTag(4543755,u,null,u.embedIframeArgs);f=new TDB.SubTemplateInstructionVE(!1,o);f.addResource(o);f.add(this,e,s);h.push(f);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AttrBinding.update(n)},r}(TDB.ViewElement),t,r,u;n.CplaceholderImage=f;t=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.ifLoadingArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.CloadingSpinner(u);r.add(this,t,i);f.push(r);r=new n.CloadingText(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.CifLoading=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="EmbedLayoutLoadingSpinner";this._StyleBinding=new i.Style.Binding(r,n,u,this,u.loadingSpinnerStyleArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n)},t}(TDB.ViewElement);n.CloadingSpinner=r;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="EmbedLayoutLoadingText";this._TextBinding=new i.Text.Binding(r,n,u,this,u.loadingTextTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.CloadingText=u}(it||(it={}));er=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new rt.Cwrapper(u);i.add(this,n,t);r.push(i)},t}(t.EmbedPlaceholderVEBase);t.EmbedPlaceholderVE=er,function(n){var e=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var f=this._context,e=document.createElement("div"),h,u;this.domElement=e;e._context=f;e.className="EmbedPlaceholderWrapper";this._StyleBinding=new i.Style.Binding(e,t,f,this,f.wrapperStyleArgs);var o=null,s=this.children,u=new n.C1(f);u.add(this,e,o);s.push(u);h=TDB.watcherTag(4543755,f,null,f.iconArgs);u=new TDB.SubTemplateInstructionVE(!1,h);u.addResource(h);u.add(this,e,o);s.push(u);u=new n.Ctitle(f);u.add(this,e,o);s.push(u);u=new n.Cauthor(f);u.add(this,e,o);s.push(u);u=new n.C2(f);u.add(this,e,o);s.push(u);h=TDB.watcherTag(4543755,f,null,f.viewButtonArgs);u=new TDB.SubTemplateInstructionVE(!1,h);u.addResource(h);u.add(this,e,o);s.push(u);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n)},r}(TDB.ViewElement),t,r,u,f;n.Cwrapper=e;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,i=document.createElement("div");this.domElement=i;i._context=r;i.className="EmbedPlaceholderGradientDecorator";this._addToDom(n,t)},t}(TDB.ViewElement);n.C1=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="EmbedPlaceholderTitle";this._TextBinding=new i.Text.Binding(r,n,u,this,u.titleTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.Ctitle=r;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="EmbedPlaceholderAuthor";this._TextBinding=new i.Text.Binding(r,n,u,this,u.authorTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.Cauthor=u;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,i=document.createElement("div");this.domElement=i;i._context=r;i.className="EmbedPlaceholderViewButtonGhost";this._addToDom(n,t)},t}(TDB.ViewElement);n.C2=f}(rt||(rt={}));or=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);this._subscribeToWatchable(this._initializeShareThisWatcher=TDB.watcherTag(5796370,this,this,this.initializeShareThis),4);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ut.CPositionDiv(u);i.add(this,n,t);r.push(i);this.receivePhaseNotification(4)},t.prototype.onUpdate=function(n){n===4&&this._initializeShareThisWatcher.resolve()},t}(t.EndOfStoryLayoutVEBase);t.EndOfStoryLayoutVE=or,function(n){var e=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;f.className="endOfStoryWrapper";this._StyleBinding=new i.Style.Binding(f,t,u,this,u.PositionDivStyleArgs);this._AttrBinding=new i.Attr.Binding(f,t,u,this,u.PositionDivAttrArgs);var o=this.children,e=new n.C1(u);e.add(this,f,null);o.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AttrBinding.update(n)},r}(TDB.ViewElement),t,r,u,f;n.CPositionDiv=e;t=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var f=this._context,u=document.createElement("div"),r;this.domElement=u;u._context=f;u.className="endOfStory";var e=null,o=this.children,r=new n.Cheading(f);r.add(this,u,e);o.push(r);r=new n.Cmessage(f);r.add(this,u,e);o.push(r);r=f.getStartedButtonArgs();r&&(r.add(this,u,e),o.push(r));r=new n.C2(f);r.add(this,u,e);o.push(r);this._addToDom(t,i)},i}(TDB.ViewElement);n.C1=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="endOfStoryHeader segoeUISemilight";this._TextBinding=new i.Text.Binding(r,n,u,this,u.headingTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.Cheading=r;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("p");this.domElement=r;r._context=u;r.className="endOfStoryBodyText segoeUISemilight";this._TextBinding=new i.Text.Binding(r,n,u,this,u.messageTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.Cmessage=u;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("div"),f,i;this.domElement=u;u._context=r;u.className="endOfStoryShareWrapper";var e=null,o=this.children,f=TDB.watcherTag(4543755,r,null,r.facebookButtonArgs),i=new TDB.SubTemplateInstructionVE(!1,f);i.addResource(f);i.add(this,u,e);o.push(i);f=TDB.watcherTag(4543755,r,null,r.twitterButtonArgs);i=new TDB.SubTemplateInstructionVE(!1,f);i.addResource(f);i.add(this,u,e);o.push(i);i=r.linkButtonArgs();i&&(i.add(this,u,e),o.push(i));this._addToDom(n,t)},t}(TDB.ViewElement);n.C2=f}(ut||(ut={}));sr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ft.Ciframe(u);i.add(this,n,t);r.push(i)},t}(t.IframeVEBase);t.IframeVE=sr,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("iframe");this.domElement=u;u._context=r;u.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups");u.setAttribute("frameborder","0");u.className="embed";this._Attr1Binding=new i.Attr.Binding(u,n,r,this,r.iframeAttr1Args);this._Attr2Binding=new i.Attr.Binding(u,n,r,this,r.iframeAttr2Args);this._EventsBinding=new i.Events.Binding(u,n,r,this,r.iframeEventsInitArgs());this._StyleBinding=new i.Style.Binding(u,n,r,this,r.iframeStyleArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._Attr1Binding.update(n);this._Attr2Binding.update(n);this._EventsBinding.update(n);this._StyleBinding.update(n)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose()},t}(TDB.ViewElement);n.Ciframe=t}(ft||(ft={}));hr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var u=this.children,r=this,i;r.showMadeWithSwayArgs()&&(i=new et.CPositionDiv(r),i.add(this,n,t),u.push(i))},t}(t.MadeWithSwayLayoutVEBase);t.MadeWithSwayLayoutVE=hr,function(n){var f=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var u=this._context,f=document.createElement("div"),e;this.domElement=f;f._context=u;f.className="madeWithSwayWrapper";this._StyleBinding=new i.Style.Binding(f,t,u,this,u.PositionDivStyleArgs);this._AttrBinding=new i.Attr.Binding(f,t,u,this,u.PositionDivAttrArgs);var o=null,s=this.children,e=new n.CsmallButtonWrapper(u);e.add(this,f,o);s.push(e);e=new n.CbuttonWrapper(u);e.add(this,f,o);s.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AttrBinding.update(n)},r}(TDB.ViewElement),t,r;n.CPositionDiv=f;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,f=document.createElement("div");this.domElement=f;f._context=r;f.setAttribute("disabled","disabled");this._FadeVisibleBinding=new u.FadeVisible.Binding(f,n,r,this,r.smallButtonWrapperFadeVisibleInitArgs(),r.smallButtonWrapperFadeVisibleArgs);this._EventsBinding=new i.Events.Binding(f,n,r,this,r.smallButtonWrapperEventsInitArgs());var o=this.children,e=r.madeWithSwaySmallButtonArgs();e&&(e.add(this,f,null),o.push(e));this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._FadeVisibleBinding.update(n);this._EventsBinding.update(n)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose();this._EventsBinding.dispose()},t}(TDB.ViewElement);n.CsmallButtonWrapper=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,f=document.createElement("div");this.domElement=f;f._context=r;this._FadeVisibleBinding=new u.FadeVisible.Binding(f,n,r,this,r.buttonWrapperFadeVisibleInitArgs(),r.buttonWrapperFadeVisibleArgs);this._EventsBinding=new i.Events.Binding(f,n,r,this,r.buttonWrapperEventsInitArgs());var o=this.children,e=r.madeWithSwayButtonArgs();e&&(e.add(this,f,null),o.push(e));this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._FadeVisibleBinding.update(n);this._EventsBinding.update(n)},t.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose();this._EventsBinding.dispose()},t}(TDB.ViewElement);n.CbuttonWrapper=r}(et||(et={}));cr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ot.Ctransformed(u);i.add(this,n,t);r.push(i)},t}(t.TextureSceneGraphVEBase);t.TextureSceneGraphVE=cr,function(n){var f=function(t){function u(n){t.call(this,null);this._context=n}return __extends(u,t),u.prototype._create=function(t,u){var f=this._context,e=document.createElement("div");this.domElement=e;e._context=f;e.className="texturescenegraph";this._StyleBinding=new i.Style.Binding(e,t,f,this,f.transformedStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(e,t,f,this,f.transformedAnimatableInitArgs());var s=this.children,o=new n.C1(f);o.add(this,e,null);s.push(o);this._addToDom(t,u)},u.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AnimatableBinding.update(n)},u.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},u}(TDB.ViewElement),t,u;n.Ctransformed=f;t=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="visuals";var e=this.children,f=new n.C2(u);f.add(this,r,null);e.push(f);this._addToDom(t,i)},i}(TDB.ViewElement);n.C1=t;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,i=document.createElement("div");this.domElement=i;i._context=r;i.className="layout";var e=this.children,f=TDB.watcherTag(4543755,r,null,r.containerArgs),u=new TDB.SubTemplateInstructionVE(!1,f);u.addResource(f);u.add(this,i,null);e.push(u);this._addToDom(n,t)},t}(TDB.ViewElement);n.C2=u}(ot||(ot={}));lr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);this._subscribeToWatchable(this._updatePaletteColorsWatcher=TDB.watcherTag(5796370,this,this,this.updatePaletteColors),2);this._subscribeToWatchable(this._updateFontFacesWatcher=TDB.watcherTag(5796370,this,this,this.updateFontFaces),2);this._subscribeToWatchable(this._updateTextStylesWatcher=TDB.watcherTag(5796370,this,this,this.updateTextStyles),2);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var u=this.children,r=this,i=new TDB.SubTemplateInstructionVE(!1,r.rootArgs()),f;i.add(this,n,t);u.push(i);f=TDB.watcherTag(4543755,r,null,r.navigationCalloutArgs);i=new TDB.SubTemplateInstructionVE(!1,f);i.addResource(f);i.add(this,n,t);u.push(i);i=r.debugArgs();i&&(i.add(this,n,t),u.push(i));this._updatePaletteColorsWatcher.resolve();this._updateFontFacesWatcher.resolve();this._updateTextStylesWatcher.resolve()},t.prototype.onUpdate=function(n){n===2&&(this._updatePaletteColorsWatcher.resolve(),this._updateFontFacesWatcher.resolve(),this._updateTextStylesWatcher.resolve())},t}(t.PreviewVEBase);t.PreviewVE=lr;ar=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new st.Cselect(u);i.add(this,n,t);r.push(i)},t}(t.SelectVEBase);t.SelectVE=ar,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("select");this.domElement=u;u._context=r;this._SelectBinding=new i.Select.Binding(u,n,r,this,r.selectSelectInitArgs(),r.selectSelectOptionsArgs);this._PropsBinding=new i.Props.Binding(u,n,r,this,r.selectPropsArgs);this._EventsBinding=new i.Events.Binding(u,n,r,this,r.selectEventsInitArgs());this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._SelectBinding.update(n);this._PropsBinding.update(n);this._EventsBinding.update(n)},t.prototype.disposeBindings=function(){this._SelectBinding.dispose();this._EventsBinding.dispose()},t}(TDB.ViewElement);n.Cselect=t}(st||(st={}));vr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ht.ChasUrl(u);i.add(this,n,t);r.push(i)},t}(t.TextRunVEBase);t.TextRunVE=vr,function(n){var u=function(t){function i(n){var i=TDB.watcherTag(4519824,n,null,n.hasUrlArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i,r){var f=this._context,e=this.children,u;switch(t){case!0:u=new n.CTextSpan(f);u.add(this,i,r);e.push(u);break;case!1:u=new n.C1TextSpan(f);u.add(this,i,r);e.push(u)}},i}(TDB.SwitchInstructionVE),t,r;n.ChasUrl=u;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("a");this.domElement=u;u._context=r;this._TextBinding=new i.Text.Binding(u,n,r,this,r.TextSpanTextArgs);this._PropsBinding=new i.Props.Binding(u,n,r,this,r.TextSpanPropsArgs);this._JQStyleBinding=new i.JQStyle.Binding(u,n,r,this,r.TextSpanJQStyleStyleArgs);this.receivePhaseNotification(4);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n);this._PropsBinding.update(n);this._JQStyleBinding.update(n)},t}(TDB.ViewElement);n.CTextSpan=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("span");this.domElement=u;u._context=r;this._TextBinding=new i.Text.Binding(u,n,r,this,r.TextSpanTextArgs);this._PropsBinding=new i.Props.Binding(u,n,r,this,r.TextSpanPropsArgs);this._JQStyleBinding=new i.JQStyle.Binding(u,n,r,this,r.TextSpanJQStyleStyleArgs);this.receivePhaseNotification(4);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n);this._PropsBinding.update(n);this._JQStyleBinding.update(n)},t}(TDB.ViewElement);n.C1TextSpan=r}(ht||(ht={}));yr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new TDB.SubTemplateInstructionVE(!1,u.imageArgs());i.add(this,n,t);r.push(i)},t}(t.ImageSelectorVEBase);t.ImageSelectorVE=yr;pr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ct.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.ContainerLayoutVEBase);t.ContainerLayoutVE=pr,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,e=document.createElement("div"),h,f;this.domElement=e;e._context=u;this._PropsBinding=new i.Props.Binding(e,n,u,this,u.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(e,n,u,this,u.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(e,n,u,this,u.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(e,n,u,this,u.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(e,n,u,this,u.PositionDivAttrArgs);var o=null,s=this.children,f=u.calloutArgs();f&&(f.add(this,e,o),s.push(f));f=u.backgroundArgs();f&&(f.add(this,e,o),s.push(f));f=new TDB.ForeachInstructionVE(!0,u.layoutChildrenArgs());f.add(this,e,o);s.push(f);h=TDB.watcherTag(4543755,u,null,u.debugArgs);f=new TDB.SubTemplateInstructionVE(!1,h);f.addResource(h);f.add(this,e,o);s.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.CPositionDiv=t}(ct||(ct={}));wr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new lt.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.MediaViewportLayoutVEBase);t.MediaViewportLayoutVE=wr,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div"),h,e;this.domElement=f;f._context=u;this._PropsBinding=new i.Props.Binding(f,n,u,this,u.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(f,n,u,this,u.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(f,n,u,this,u.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(f,n,u,this,u.PositionDivAttrArgs);var o=null,s=this.children,e=u.backgroundArgs();e&&(e.add(this,f,o),s.push(e));e=new TDB.ForeachInstructionVE(!0,u.layoutChildrenArgs());e.add(this,f,o);s.push(e);h=TDB.watcherTag(4543755,u,null,u.debugArgs);e=new TDB.SubTemplateInstructionVE(!1,h);e.addResource(h);e.add(this,f,o);s.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.CPositionDiv=t}(lt||(lt={}));br=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new at.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.TextBlockLayoutVEBase);t.TextBlockLayoutVE=br,function(n){var f=function(t){function u(n){t.call(this,null);this._context=n}return __extends(u,t),u.prototype._create=function(t,u){var f=this._context,e=document.createElement("div"),o;this.domElement=e;e._context=f;this._PropsBinding=new i.Props.Binding(e,t,f,this,f.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(e,t,f,this,f.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(e,t,f,this,f.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(e,t,f,this,f.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(e,t,f,this,f.PositionDivAttrArgs);var s=null,h=this.children,o=f.backgroundArgs();o&&(o.add(this,e,s),h.push(o));o=new n.ChasSections(f);o.add(this,e,s);h.push(o);this._addToDom(t,u)},u.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},u.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},u}(TDB.ViewElement),t,u;n.CPositionDiv=f;t=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.hasSectionsArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.CtextWrapper(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.ChasSections=t;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("div");this.domElement=u;u._context=r;u.className="text_wrapper";this._PropsBinding=new i.Props.Binding(u,n,r,this,r.textWrapperPropsArgs);this._StyleBinding=new i.Style.Binding(u,n,r,this,r.textWrapperStyleArgs);var o=this.children,e=TDB.watcherTag(4543755,r,null,r.sectionListArgs),f=new TDB.SubTemplateInstructionVE(!0,e);f.addResource(e);f.add(this,u,null);o.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n)},t}(TDB.ViewElement);n.CtextWrapper=u}(at||(at={}));kr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new vt.CisListItem(u);i.add(this,n,t);r.push(i)},t}(t.TextParagraphVEBase);t.TextParagraphVE=kr,function(n){var u=function(t){function i(n){var i=TDB.watcherTag(4519824,n,null,n.isListItemArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i,r){var f=this._context,e=this.children,u;switch(t){case!0:u=new n.CParagraph(f);u.add(this,i,r);e.push(u);break;case!1:u=new n.C1Paragraph(f);u.add(this,i,r);e.push(u)}},i}(TDB.SwitchInstructionVE),t,r;n.CisListItem=u;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("li");this.domElement=u;u._context=r;this._StyleBinding=new i.Style.Binding(u,n,r,this,r.ParagraphStyleArgs);this._PropsBinding=new i.Props.Binding(u,n,r,this,r.ParagraphPropsArgs);var e=this.children,f=new TDB.ForeachInstructionVE(!0,r.runChildrenArgs());f.add(this,u,null);e.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._PropsBinding.update(n)},t}(TDB.ViewElement);n.CParagraph=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("p");this.domElement=u;u._context=r;this._StyleBinding=new i.Style.Binding(u,n,r,this,r.ParagraphStyleArgs);this._PropsBinding=new i.Props.Binding(u,n,r,this,r.ParagraphPropsArgs);var e=this.children,f=new TDB.ForeachInstructionVE(!0,r.runChildrenArgs());f.add(this,u,null);e.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._PropsBinding.update(n)},t}(TDB.ViewElement);n.C1Paragraph=r}(vt||(vt={}));dr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new yt.ClistType(u);i.add(this,n,t);r.push(i)},t}(t.TextListVEBase);t.TextListVE=dr,function(n){var u=function(t){function i(n){var i=TDB.watcherTag(4519824,n,null,n.listTypeArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i,r){var f=this._context,e=this.children,u;switch(t){case 2:u=new n.C1(f);u.add(this,i,r);e.push(u);break;case 3:u=new n.CList(f);u.add(this,i,r);e.push(u);break;case 1:u=new TDB.ForeachInstructionVE(!0,f.sectionChildrenArgs());u.add(this,i,r);e.push(u)}},i}(TDB.SwitchInstructionVE),t,r;n.ClistType=u;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,i=document.createElement("ul");this.domElement=i;i._context=r;var f=this.children,u=new TDB.ForeachInstructionVE(!0,r.sectionChildrenArgs());u.add(this,i,null);f.push(u);this._addToDom(n,t)},t}(TDB.ViewElement);n.C1=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("ol");this.domElement=u;u._context=r;this._StyleBinding=new i.Style.Binding(u,n,r,this,r.ListStyleArgs);var e=this.children,f=new TDB.ForeachInstructionVE(!0,r.sectionChildrenArgs());f.add(this,u,null);e.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n)},t}(TDB.ViewElement);n.CList=r}(yt||(yt={}));gr=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new pt.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.DecorationLayoutVEBase);t.DecorationLayoutVE=gr,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;this._PropsBinding=new i.Props.Binding(f,n,u,this,u.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(f,n,u,this,u.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(f,n,u,this,u.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(f,n,u,this,u.PositionDivAttrArgs);var o=this.children,e=u.backgroundArgs();e&&(e.add(this,f,null),o.push(e));this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.CPositionDiv=t}(pt||(pt={}));nu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new wt.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.StatusUpdateLayoutVEBase);t.StatusUpdateLayoutVE=nu,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;this._PropsBinding=new i.Props.Binding(f,n,u,this,u.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(f,n,u,this,u.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(f,n,u,this,u.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(f,n,u,this,u.PositionDivAttrArgs);var s=this.children,o=TDB.watcherTag(4543755,u,null,u.contentArgs),e=new TDB.SubTemplateInstructionVE(!1,o);e.addResource(o);e.add(this,f,null);s.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.CPositionDiv=t}(wt||(wt={}));tu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new bt.Ctweet(u);i.add(this,n,t);r.push(i)},t}(t.TweetVEBase);t.TweetVE=tu,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var f=this._context,u=document.createElement("iframe");this.domElement=u;u._context=f;u.className="tweet";u.setAttribute("frameborder","0");u.setAttribute("scrolling","no");u.setAttribute("allowtransparency","true");u.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups");this._AttrBinding=new i.Attr.Binding(u,n,f,this,f.tweetAttrArgs);this._StyleBinding=new i.Style.Binding(u,n,f,this,f.tweetStyleArgs);this._PropsBinding=new i.Props.Binding(u,n,f,this,f.tweetPropsArgs);this._MessageBinding=new r.Message.Binding(u,n,f,this,f.tweetMessageInitArgs());this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n);this._StyleBinding.update(n);this._PropsBinding.update(n);this._MessageBinding.update(n)},t.prototype.disposeBindings=function(){this._MessageBinding.dispose()},t}(TDB.ViewElement);n.Ctweet=t}(bt||(bt={}));iu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new kt.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.MapLayoutVEBase);t.MapLayoutVE=iu,function(n){var e=function(t){function u(n){t.call(this,null);this._context=n}return __extends(u,t),u.prototype._create=function(t,u){var f=this._context,e=document.createElement("div"),c,o;this.domElement=e;e._context=f;this._PropsBinding=new i.Props.Binding(e,t,f,this,f.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(e,t,f,this,f.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(e,t,f,this,f.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(e,t,f,this,f.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(e,t,f,this,f.PositionDivAttrArgs);var s=null,h=this.children,o=new n.C1(f);o.add(this,e,s);h.push(o);o=new n.C2(f);o.add(this,e,s);h.push(o);c=TDB.watcherTag(4543755,f,null,f.currentChildArgs);o=new TDB.SubTemplateInstructionVE(!0,c);o.addResource(c);o.add(this,e,s);h.push(o);this._addToDom(t,u)},u.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},u.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},u}(TDB.ViewElement),t,u,f;n.CPositionDiv=e;t=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="layoutMapWrapper";r.setAttribute("style","float: left; width: 50%");var e=this.children,f=new n.CMap(u);f.add(this,r,null);e.push(f);this._addToDom(t,i)},i}(TDB.ViewElement);n.C1=t;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var i=this._context,u=document.createElement("div");this.domElement=u;u._context=i;this._BingMapBinding=new r.BingMap.Binding(u,n,i,this,i.MapBingMapCreateArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._BingMapBinding.update(n)},t.prototype.disposeBindings=function(){this._BingMapBinding.dispose()},t}(TDB.ViewElement);n.CMap=u;f=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div"),i;this.domElement=r;r._context=u;r.className="layoutMapButtons";var f=null,e=this.children,i=u.leftButtonArgs();i&&(i.add(this,r,f),e.push(i));i=u.rightButtonArgs();i&&(i.add(this,r,f),e.push(i));this._addToDom(n,t)},t}(TDB.ViewElement);n.C2=f}(kt||(kt={}));ru=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new dt.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.ProjectionVEBase);t.ProjectionVE=ru,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div"),o,e;this.domElement=f;f._context=u;f.className="projection";this._PropsBinding=new i.Props.Binding(f,n,u,this,u.PositionDivPropsArgs);this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.PositionDivAnimatableInitArgs());this._StyleBinding=new i.Style.Binding(f,n,u,this,u.PositionDivStyleArgs);this._BoxShadowBinding=new r.BoxShadow.Binding(f,n,u,this,u.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(f,n,u,this,u.PositionDivAttrArgs);var s=null,h=this.children,e=u.backgroundArgs();e&&(e.add(this,f,s),h.push(e));o=TDB.watcherTag(4543755,u,null,u.scenegraphArgs);e=new TDB.SubTemplateInstructionVE(!1,o);e.addResource(o);e.add(this,f,s);h.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._AnimatableBinding.update(n);this._StyleBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.CPositionDiv=t}(dt||(dt={}));uu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);this._subscribeToWatchable(this._clearAnimationCacheWatcher=TDB.watcherTag(5796370,this,this,this.clearAnimationCache),4);this._subscribeToWatchable(this._updateSpacePartitioningWatcher=TDB.watcherTag(5796370,this,this,this.updateSpacePartitioning),4);this._subscribeToWatchable(this._initializeOrUpdateStateMachineWatcher=TDB.watcherTag(5796370,this,this,this.initializeOrUpdateStateMachine),4);this._subscribeToWatchable(this._gotoHashTargetWatcher=TDB.watcherTag(5796370,this,this,this.gotoHashTarget),4);this._subscribeToWatchable(this._validateLayoutTreeWatcher=TDB.watcherTag(5796370,this,this,this.validateLayoutTree),4);this._subscribeToWatchable(this._scaleUpdaterWatcher=TDB.watcherTag(5796370,this,this,this.scaleUpdater),4);this._subscribeToWatchable(this._applyRestoreStateWatcher=TDB.watcherTag(5796370,this,this,this.applyRestoreState),4);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new gt.C1(u);i.add(this,n,t);r.push(i);this.receivePhaseNotification(4)},t.prototype.onUpdate=function(n){n===4&&(this._clearAnimationCacheWatcher.resolve(),this._updateSpacePartitioningWatcher.resolve(),this._initializeOrUpdateStateMachineWatcher.resolve(),this._gotoHashTargetWatcher.resolve(),this._validateLayoutTreeWatcher.resolve(),this._scaleUpdaterWatcher.resolve(),this._applyRestoreStateWatcher.resolve())},t}(t.RootVEBase);t.RootVE=uu,function(n){var r=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.id="rootve";var e=this.children,f=new n.CrootDiv(u);f.add(this,r,null);e.push(f);this._addToDom(t,i)},i}(TDB.ViewElement),t;n.C1=r;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("div");this.domElement=u;u._context=r;u.id="storyroot";this._StyleBinding=new i.Style.Binding(u,n,r,this,r.rootDivStyleArgs);this._EventsBinding=new i.Events.Binding(u,n,r,this,r.rootDivEventsInitArgs());this._AttrBinding=new i.Attr.Binding(u,n,r,this,r.rootDivAttrArgs);this._FocusableBinding=new i.Focusable.Binding(u,n,r,this,r.FocusableInitArgs());this.receivePhaseNotification(4);var o=this.children,e=TDB.watcherTag(4543753,r,null,r.viewportsArgs),f=new TDB.ForeachInstructionVE(!1,e);f.addResource(e);f.add(this,u,null);o.push(f);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._EventsBinding.update(n);this._AttrBinding.update(n);this._FocusableBinding.update(n)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose();this._FocusableBinding.dispose()},t}(TDB.ViewElement);n.CrootDiv=t}(gt||(gt={}));fu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ni.C1(u);i.add(this,n,t);r.push(i)},t}(t.OneDriveVideoPlayerVEBase);t.OneDriveVideoPlayerVE=fu,function(n){var r=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;var e=this.children,f=new n.CplayerIframe(u);f.add(this,r,null);e.push(f);this._addToDom(t,i)},i}(TDB.ViewElement),t;n.C1=r;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("iframe");this.domElement=r;r._context=u;r.setAttribute("frameborder","0");r.setAttribute("scrolling","no");r.setAttribute("allowfullscreen","true");this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.playerIframeAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CplayerIframe=t}(ni||(ni={}));eu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ti.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.VideoLayoutVEBase);t.VideoLayoutVE=eu,function(n){var f=function(t){function u(n){t.call(this,null);this._context=n}return __extends(u,t),u.prototype._create=function(t,u){var f=this._context,e=document.createElement("div"),o;this.domElement=e;e._context=f;this._PropsBinding=new i.Props.Binding(e,t,f,this,f.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(e,t,f,this,f.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(e,t,f,this,f.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(e,t,f,this,f.PositionDivBoxShadowArgs);var s=null,h=this.children,o=new n.CThumbnailImg(f);o.add(this,e,s);h.push(o);o=new n.CPlayerPositionDiv(f);o.add(this,e,s);h.push(o);this._addToDom(t,u)},u.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n)},u.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},u}(TDB.ViewElement),t,u;n.CPositionDiv=f;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("img");this.domElement=r;r._context=u;r.className="VideoLayoutThumbnail";this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.ThumbnailImgAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CThumbnailImg=t;u=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,f=document.createElement("div"),e,u;this.domElement=f;f._context=r;this._StyleBinding=new i.Style.Binding(f,n,r,this,r.PlayerPositionDivStyleArgs);var o=null,s=this.children,e=TDB.watcherTag(4543755,r,null,r.PlayButtonArgs),u=new TDB.SubTemplateInstructionVE(!1,e);u.addResource(e);u.add(this,f,o);s.push(u);e=TDB.watcherTag(4543755,r,null,r.VideoArgs);u=new TDB.SubTemplateInstructionVE(!1,e);u.addResource(e);u.add(this,f,o);s.push(u);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n)},t}(TDB.ViewElement);n.CPlayerPositionDiv=u}(ti||(ti={}));ou=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ii.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.ViewportVEBase);t.ViewportVE=ou,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;f.className="viewport layout";this._StyleBinding=new i.Style.Binding(f,n,u,this,u.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.PositionDivAnimatableInitArgs());this._AttrBinding=new i.Attr.Binding(f,n,u,this,u.PositionDivAttrArgs);var s=this.children,o=TDB.watcherTag(4543755,u,null,u.contentArgs),e=new TDB.SubTemplateInstructionVE(!1,o);e.addResource(o);e.add(this,f,null);s.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._AttrBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.CPositionDiv=t}(ii||(ii={}));su=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);this._subscribeToWatchable(this._updateVisibleSizeWatcher=TDB.watcherTag(5796370,this,this,this.updateVisibleSize),4);this._subscribeToWatchable(this._updateContentSizeWatcher=TDB.watcherTag(5796370,this,this,this.updateContentSize),4);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new TDB.SubTemplateInstructionVE(!1,u.viewportArgs());i.add(this,n,t);r.push(i);i=new s.Cvertical(u);i.add(this,n,t);r.push(i);i=new s.Chorizontal(u);i.add(this,n,t);r.push(i);this.receivePhaseNotification(4)},t.prototype.onUpdate=function(n){n===4&&(this._updateVisibleSizeWatcher.resolve(),this._updateContentSizeWatcher.resolve())},t}(t.AnimatedScrollerVEBase);t.AnimatedScrollerVE=su,function(n){var i=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var i=this._context,u=document.createElement("div");this.domElement=u;u._context=i;u.id="vertical-scrollbar";u.className="scrollbar-element vertical scrollbar-hidden";this._ScrollBinding=new r.Scroll.Binding(u,n,i,this,i.verticalScrollInitArgs(),i.verticalScrollScrollSizeArgs,i.verticalScrollEnabledArgs);this.receivePhaseNotification(4);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._ScrollBinding.update(n)},t.prototype.disposeBindings=function(){this._ScrollBinding.dispose()},t}(TDB.ViewElement),t;n.Cvertical=i;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var i=this._context,u=document.createElement("div");this.domElement=u;u._context=i;u.id="horizontal-scrollbar";u.className="scrollbar-element horizontal scrollbar-hidden";this._ScrollBinding=new r.Scroll.Binding(u,n,i,this,i.horizontalScrollInitArgs(),i.horizontalScrollScrollSizeArgs,i.horizontalScrollEnabledArgs);this.receivePhaseNotification(4);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._ScrollBinding.update(n)},t.prototype.disposeBindings=function(){this._ScrollBinding.dispose()},t}(TDB.ViewElement);n.Chorizontal=t}(s||(s={}));hu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);this._subscribeToWatchable(this._updateVisibleSizeWatcher=TDB.watcherTag(5796370,this,this,this.updateVisibleSize),4);this._subscribeToWatchable(this._updateContentSizeWatcher=TDB.watcherTag(5796370,this,this,this.updateContentSize),4);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ri.Croot(u);i.add(this,n,t);r.push(i);this.receivePhaseNotification(4)},t.prototype.onUpdate=function(n){n===4&&(this._updateVisibleSizeWatcher.resolve(),this._updateContentSizeWatcher.resolve())},t}(t.NativeScrollerVEBase);t.NativeScrollerVE=hu,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;f.className="native-scroller";this._StyleBinding=new i.Style.Binding(f,n,u,this,u.rootStyleArgs);this._NativeScrollBinding=new r.NativeScroll.Binding(f,n,u,this,u.rootNativeScrollInitArgs(),u.rootNativeScrollDirectionArgs);var o=this.children,e=new TDB.SubTemplateInstructionVE(!1,u.viewportArgs());e.add(this,f,null);o.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._StyleBinding.update(n);this._NativeScrollBinding.update(n)},t.prototype.disposeBindings=function(){this._NativeScrollBinding.dispose()},t}(TDB.ViewElement);n.Croot=t}(ri||(ri={}));cu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var f=this.children,r=this,u=TDB.watcherTag(4543755,r,null,r.subtemplateArgs),i=new TDB.SubTemplateInstructionVE(!1,u);i.addResource(u);i.add(this,n,t);f.push(i)},t}(t.ModeSelectorVEBase);t.ModeSelectorVE=cu;lu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ui.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.OfflineLayoutVEBase);t.OfflineLayoutVE=lu,function(n){var h=function(t){function u(n){t.call(this,null);this._context=n}return __extends(u,t),u.prototype._create=function(t,u){var f=this._context,e=document.createElement("div");this.domElement=e;e._context=f;this._PropsBinding=new i.Props.Binding(e,t,f,this,f.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(e,t,f,this,f.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(e,t,f,this,f.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(e,t,f,this,f.PositionDivBoxShadowArgs);this._AttrBinding=new i.Attr.Binding(e,t,f,this,f.PositionDivAttrArgs);var s=this.children,o=new n.C1(f);o.add(this,e,null);s.push(o);this._addToDom(t,u)},u.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n);this._AttrBinding.update(n)},u.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},u}(TDB.ViewElement),t,u,f,e,o,s;n.CPositionDiv=h;t=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="offlineContentBackground";var e=this.children,f=new n.C2(u);f.add(this,r,null);e.push(f);this._addToDom(t,i)},i}(TDB.ViewElement);n.C1=t;u=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var f=this._context,r=document.createElement("div"),u;this.domElement=r;r._context=f;r.className="offlineContentWrapper";var e=null,o=this.children,u=new n.ChasImage(f);u.add(this,r,e);o.push(u);u=new n.Cmessage(f);u.add(this,r,e);o.push(u);this._addToDom(t,i)},i}(TDB.ViewElement);n.C2=u;f=function(t){function i(n){var i=TDB.watcherTag(4543754,n,null,n.hasImageArgs);t.call(this,i);this.addResource(i);this._context=n}return __extends(i,t),i.prototype.buildChildren=function(t,i){var u=this._context,f=this.children,r=new n.Cimage(u);r.add(this,t,i);f.push(r);r=new n.C3(u);r.add(this,t,i);f.push(r)},i}(TDB.IfInstructionVE);n.ChasImage=f;e=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("img");this.domElement=r;r._context=u;r.className="offlineContentImage";this._PropsBinding=new i.Props.Binding(r,n,u,this,u.imagePropsArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n)},t}(TDB.ViewElement);n.Cimage=e;o=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,i=document.createElement("div");this.domElement=i;i._context=r;i.className="offlineContentSpacer";this._addToDom(n,t)},t}(TDB.ViewElement);n.C3=o;s=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div");this.domElement=r;r._context=u;r.className="offlineContentMessage";this._TextBinding=new i.Text.Binding(r,n,u,this,u.messageTextArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._TextBinding.update(n)},t}(TDB.ViewElement);n.Cmessage=s}(ui||(ui={}));au=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new fi.Croot(u);i.add(this,n,t);r.push(i)},t}(t.ViewportBackgroundVEBase);t.ViewportBackgroundVE=au,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,f=document.createElement("div"),o,e;this.domElement=f;f._context=u;this._PropsBinding=new i.Props.Binding(f,n,u,this,u.rootPropsArgs);this._StyleBinding=new i.Style.Binding(f,n,u,this,u.rootStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(f,n,u,this,u.rootAnimatableInitArgs());var s=null,h=this.children,e=u.backgroundArgs();e&&(e.add(this,f,s),h.push(e));o=TDB.watcherTag(4543755,u,null,u.contentArgs);e=new TDB.SubTemplateInstructionVE(!1,o);e.addResource(o);e.add(this,f,s);h.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n)},t.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},t}(TDB.ViewElement);n.Croot=t}(fi||(fi={}));vu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new ei.CshowButtonGroup(u);i.add(this,n,t);r.push(i)},t}(t.StoryAppBarButtonGroupVEBase);t.StoryAppBarButtonGroupVE=vu,function(n){var t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,u=document.createElement("div"),o,s,e;this.domElement=u;u._context=r;u.className="consumptionButtonGroup";this._EventsBinding=new i.Events.Binding(u,n,r,this,r.showButtonGroupEventsInitArgs());this._VisibleBinding=new i.Visible.Binding(u,n,r,this,r.showButtonGroupVisibleArgs);o=null;s=this.children;for(var h=r.buttonsArgs(),f=0,c=h.length;f<c;++f)e=h[f],e.add(this,u,o),s.push(e);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._EventsBinding.update(n);this._VisibleBinding.update(n)},t.prototype.disposeBindings=function(){this._EventsBinding.dispose()},t}(TDB.ViewElement);n.CshowButtonGroup=t}(ei||(ei={}));yu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);this._subscribeToWatchable(this._setFadeTimerWatcher=TDB.watcherTag(5796370,this,this,this.setFadeTimer),4);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new oi.CappbarPlaceholder(u);i.add(this,n,t);r.push(i);this.receivePhaseNotification(4)},t.prototype.onUpdate=function(n){n===4&&this._setFadeTimerWatcher.resolve()},t}(t.StoryAppBarVEBase);t.StoryAppBarVE=yu,function(n){var f=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var u=this._context,f=document.createElement("div");this.domElement=f;f._context=u;f.className="consumptionAppBar";this._EventsBinding=new i.Events.Binding(f,t,u,this,u.appbarPlaceholderEventsInitArgs());this._StyleBinding=new i.Style.Binding(f,t,u,this,u.appbarPlaceholderStyleArgs);var o=this.children,e=new n.Cwrapper(u);e.add(this,f,null);o.push(e);this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._EventsBinding.update(n);this._StyleBinding.update(n)},r.prototype.disposeBindings=function(){this._EventsBinding.dispose()},r}(TDB.ViewElement),t,r;n.CappbarPlaceholder=f;t=function(t){function r(n){t.call(this,null);this._context=n}return __extends(r,t),r.prototype._create=function(t,r){var e=this._context,o=document.createElement("div"),f;this.domElement=o;o._context=e;this._FadeVisibleBinding=new u.FadeVisible.Binding(o,t,e,this,e.wrapperFadeVisibleInitArgs(),e.wrapperFadeVisibleArgs);this._StyleBinding=new i.Style.Binding(o,t,e,this,e.wrapperStyleArgs);var s=null,h=this.children,f=new n.C1(e);f.add(this,o,s);h.push(f);f=e.socialFlyoutArgs();f&&(f.add(this,o,s),h.push(f));f=e.overflowMenuArgs();f&&(f.add(this,o,s),h.push(f));this._addToDom(t,r)},r.prototype.onUpdate=function(n){this._FadeVisibleBinding.update(n);this._StyleBinding.update(n)},r.prototype.disposeBindings=function(){this._FadeVisibleBinding.dispose()},r}(TDB.ViewElement);n.Cwrapper=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("div"),i;this.domElement=r;r._context=u;r.className="appBarButtonGroups";var e=null,o=this.children,i=u.returnToEditCalloutArgs();i&&(i.add(this,r,e),o.push(i));for(var s=u.buttonGroupsArgs(),f=0,h=s.length;f<h;++f)i=s[f],i.add(this,r,e),o.push(i);this._addToDom(n,t)},t}(TDB.ViewElement);n.C1=r}(oi||(oi={}));pu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new si.CPositionDiv(u);i.add(this,n,t);r.push(i)},t}(t.AudioLayoutVEBase);t.AudioLayoutVE=pu,function(n){var u=function(t){function u(n){t.call(this,null);this._context=n}return __extends(u,t),u.prototype._create=function(t,u){var f=this._context,o=document.createElement("div"),s,e;this.domElement=o;o._context=f;this._PropsBinding=new i.Props.Binding(o,t,f,this,f.PositionDivPropsArgs);this._StyleBinding=new i.Style.Binding(o,t,f,this,f.PositionDivStyleArgs);this._AnimatableBinding=new r.Animatable.Binding(o,t,f,this,f.PositionDivAnimatableInitArgs());this._BoxShadowBinding=new r.BoxShadow.Binding(o,t,f,this,f.PositionDivBoxShadowArgs);var h=null,c=this.children,e=new n.CThumbnailImg(f);e.add(this,o,h);c.push(e);s=TDB.watcherTag(4543755,f,null,f.PlayButtonArgs);e=new TDB.SubTemplateInstructionVE(!1,s);e.addResource(s);e.add(this,o,h);c.push(e);s=TDB.watcherTag(4543755,f,null,f.AudioArgs);e=new TDB.SubTemplateInstructionVE(!1,s);e.addResource(s);e.add(this,o,h);c.push(e);this._addToDom(t,u)},u.prototype.onUpdate=function(n){this._PropsBinding.update(n);this._StyleBinding.update(n);this._AnimatableBinding.update(n);this._BoxShadowBinding.update(n)},u.prototype.disposeBindings=function(){this._AnimatableBinding.dispose()},u}(TDB.ViewElement),t;n.CPositionDiv=u;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("img");this.domElement=r;r._context=u;r.className="AudioLayoutThumbnail";this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.ThumbnailImgAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.CThumbnailImg=t}(si||(si={}));wu=function(n){function t(t,i){this.constructing=!0;n.call(this,t,i);delete this.constructing}return __extends(t,n),t.prototype._create=function(n,t){var r=this.children,u=this,i=new hi.C1(u);i.add(this,n,t);r.push(i)},t}(t.BrowserAudioPlayerVEBase);t.BrowserAudioPlayerVE=wu,function(n){var u=function(t){function i(n){t.call(this,null);this._context=n}return __extends(i,t),i.prototype._create=function(t,i){var f=this._context,r=document.createElement("div"),u;this.domElement=r;r._context=f;r.className="AudioPlayerWrapper";var e=null,o=this.children,u=new n.ChtmlBrowserPlayer(f);u.add(this,r,e);o.push(u);u=new n.C2(f);u.add(this,r,e);o.push(u);this._addToDom(t,i)},i}(TDB.ViewElement),t,r;n.C1=u;t=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var u=this._context,r=document.createElement("audio");this.domElement=r;r._context=u;r.setAttribute("controls","");r.setAttribute("autoplay","");this._AttrBinding=new i.Attr.Binding(r,n,u,this,u.htmlBrowserPlayerAttrArgs);this._addToDom(n,t)},t.prototype.onUpdate=function(n){this._AttrBinding.update(n)},t}(TDB.ViewElement);n.ChtmlBrowserPlayer=t;r=function(n){function t(t){n.call(this,null);this._context=t}return __extends(t,n),t.prototype._create=function(n,t){var r=this._context,i=document.createElement("div");this.domElement=i;i._context=r;i.className="blackBox";this._addToDom(n,t)},t}(TDB.ViewElement);n.C2=r}(hi||(hi={}))})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.View.ViewElements,r=function(n){function t(i,r){var u=this;n.call(this,i,r);r.embedModel.getEmbedSourceUrl()==t.errorIframe?platform.setImmediate(function(){r.onerror.call(u)}):r.embedModel.getEmbedSourceUrl()==t.neverloadingIframe||platform.setImmediate(function(){r.onload.call(u)})}return __extends(t,n),t.prototype.iframeEventsInitArgs=function(){return{}},t.errorIframe="error",t.neverloadingIframe="neverloading",t}(i.IframeVE);t.MockIframeVE=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),r.triggerPlayEntered=function(){var i=n.View.ViewElements.ViewModel.getWorldId();switch(i){case"VerticalWorld":t.FirstRunTriggers.playEnteredFromVertical();break;case"PanoramaWorld":t.FirstRunTriggers.playEnteredFromPanorama();break;case"ExpoWorld":t.FirstRunTriggers.playEnteredFromExpo()}},r.OnExpoWorldNavigatedFromEditMode=function(){t.getCalloutManager().getCurrentCalloutID()===8&&t.FirstRunTriggers.navigatedFromPreview()},r}(t.CommonFirstRunHelper);t.StoryFirstRunHelper=i})(i=t.FRE||(t.FRE={}))})(i=t.Common||(t.Common={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){}return n.LeftMouseButton=1,n.ClickEventType="click",n.DoubleClickEventType="dblclick",n.MouseWheelEventType="mousewheel",n}(),i,r;n.EventConstants=t,function(n){n[n.Keyboard=0]="Keyboard";n[n.Mouse=1]="Mouse";n[n.Touch=2]="Touch";n[n.Timing=3]="Timing";n[n.Client=4]="Client"}(n.EventType||(n.EventType={}));i=n.EventType,function(n){n[n.EditMode=0]="EditMode"}(n.ClientSignal||(n.ClientSignal={}));r=n.ClientSignal})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(i){var r=n.Model.RM,e="Interrogable",o="Direction",s="InterrogableValue",u="forward",f="backward",h=function(h){function c(t,u,f,e,o,s){var c=this;h.call(this,t);this.owner=t;this.rootve=u;this.scrollable=f;this._fsmactor=TDB.watchable(this,null);this._capabilities=new Flags(r.ClientCapabilities,0);this.keyupCallbacks=[];this.currentKey=-1;this.keysDown=[];this._transitionData=TDB.watcherTag(6420362,this,this,this.getTransitionData);this.detectCapabilities();this._engine=new n.AnimationManager.AnimationEngine({state:this.queryStateVariable.bind(this)},this,this._capabilities,function(){return c._transitionData.getValue()},s);n.AnimationManager.Engine=this._engine;this.clientState=new i.ClientState;this.clientState.editMode=e;this.embedHostMode=o;this._triggerManager=new i.TriggerManager(this,u,this.handleTimeout.bind(this))}return __extends(c,h),c.prototype.clientCapabilities=function(){return this._capabilities},c.prototype.detectCapabilities=function(){this._capabilities.reset();Modernizr.dynamicscrollevents&&this._capabilities.set(1)},c.prototype.scrollchecker=function(){var n=this.scrollable.getValue();return n?n.getScrollChecker():null},c.prototype.viewModeChanged=function(n){var i=n===2,t;this.clientState.editMode=i;i||(t=this.scrollable.getValue(),t&&(t.setScroll(0,0),t.setScroll(1,0)));this.handleClientSignal({signal:0,editMode:i})},c.prototype.handleClientSignal=function(n){return this.defaultEventHandler({eventType:4,inputEvent:n}).bubble},c.prototype.handleKey=function(n){this.currentKey=n.which;var t=this.simulateClick(n);return t.handled||(t=this.defaultEventHandler({eventType:0,inputEvent:n})),this.currentKey=-1,this.keysDown.contains(n.which)||this.keysDown.push(n.which),t.bubble},c.prototype.handleKeyUp=function(n){this.keyupCallbacks=this.keyupCallbacks.filter(function(t){return t.which===n.which?(t.fn(),!1):!0});this.keysDown.removefirst(n.which)},c.prototype.handleMouseWheel=function(n){return this.defaultEventHandler({eventType:1,inputEvent:n}).bubble},c.prototype.handleMouse=function(n){return this.defaultEventHandler({eventType:1,inputEvent:n}).bubble},c.prototype.handleSwipe=function(n){return this.defaultEventHandler({eventType:2,inputEvent:n}).bubble},c.prototype.handleTap=function(n){var t=$.Event("click",{type:"click",which:1,target:n.target});return this.defaultEventHandler({eventType:1,inputEvent:t}).bubble},c.prototype.handleTimeout=function(n){var u=this,r={eventType:3,inputEvent:n},t;return this._triggerManager.killDelayTimer(r),Utilities.weblog("timer","timeout callback invoked for triggerset: "+n.triggerSet.id),t=this.defaultEventHandler(r),n.quickTrigger&&!t.handled?(Utilities.weblog("timer","scheduling quick trigger retry for triggerset: "+n.triggerSet.id),setTimeout(function(){return u._triggerManager.startDelayTimers(!0,n.triggerSet)},i.TriggerManager.quickTriggerRetryDelay)):this._triggerManager.startDelayTimers(!1,n.triggerSet),t.bubble},c.prototype.queryStateVariable=function(n,t){var i=this.actor();if(!i)return 0;switch(t){case"scroll_x":return this.scrollchecker().fetchStateScroll(n)[0];case"scroll_y":return this.scrollchecker().fetchStateScroll(n)[1];default:return 0}},c.prototype.getClientState=function(){return this.clientState},c.prototype.getAnimationEngine=function(){return this._engine},c.prototype.actor=function(n){return this._fsmactor.getWatchedValue(n)},c.prototype.setActor=function(n){var t=this._fsmactor,i=t.getValue();i&&i.dispose();this._fsmactor=TDB.watchableTag(6034463,this,n);n&&this._triggerManager.startDelayTimers(!0);TDB.applyUpdate(function(){return t.notify()},1)},c.prototype.navigateTo=function(n,t,i,r){if(n===this.rootve.getInteractionModel().getStartNode().id)return!0;var u=this.navigateToWorker(n,t,r);return StoryLog.StructuredTraceTag(7381474,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"navigateTo invoked",{"callerMessage: ":i?i:"","navigateTo result: ":u.toString()}),u},c.prototype.getRootContainerId=function(){var n=this.rootve.getInteractionModel().keyFrames.getCollection().firstOrDefault(function(n){return i.rootKeyframeTypes.contains(n.getType())});return n?n.layoutElements.getCollection()[0].id:null},c.prototype.navigateToWorker=function(n,t,i){var u=this,r,f;return n?(r=Utilities.sequence(),f=this.getRootContainerId(),t&&r.run(function(){u._engine.hideOutput(f);i||TDB.applyUpdate(function(){return u._engine.resetAnimatables.notify()},1)}),this.follow(r,n,t,i))?(t&&r.run(function(){u._engine.showOutput(f)}),r.start(),!0):!1:!1},c.prototype.forceLowFiMode=function(){var f=n.AnimationManager.forcedToLowFi.getValue(),u;f||(StoryLog.StructuredActivityTag(6333130,Diag.ULSCat.msoulscat_Story_Preview,Diag.ULSTraceLevel.info,"FallbackToLowEndMode","The user is experiencing performance issues and would have been switched to low end mode",StoryPageSettings.StoryId,{UserAgent:navigator.userAgent,ClientDevice:r.ClientDevice[i.ViewModel.previewVE._root.getValue().getLayout(null).getDevice()]}),TDB.applyUpdate(function(){return n.AnimationManager.forcedToLowFi.setValue(!0)}),n.AnimationManager.LowFi.getValue())&&(u=t.Common.NotificationBarManager.getInstance(),u.createAndShowNotificationBar({text:Resources.LowEndModeEnabledBrowserMessage},!1))},c.prototype.getTransitionData=function(n){var t=this.rootve.getInteractionModel(n);return{transitions:t?t.getTransitions(n).getCollection():[],containers:t?t.getAnimationContainers(n).getCollection():[],effects:t?t.getAnimationEffects(n).getCollection():[],schemaVersion:t.renderModel.getSchemaVersion()}},c.prototype.defaultEventHandler=function(n){var t={bubble:!0,handled:!1},i;return this.rootve?(this._engine.checkDisposableAnimations(),i=this._triggerManager.mapEventToTriggerSets(n),i&&i.length?this.handleTrigger(i)&&(t.handled=!0,n.inputEvent.preventDefault&&n.inputEvent.preventDefault(),t.bubble=!1):StoryLog.TraceTag(7951962,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"No triggerset found for event: ",[n]),t):(t.bubble=!1,t)},c.prototype.waitForExecutingAnimations=function(n){var t=this;n&&n.waitfor(function(){return!t.actor()||t.actor().findCurrentNode()!==null},500)},c.prototype.follow=function(n,t,r,u){var f=this,e,c,l,o,a,s,h;if(!n||!t||(e=this.actor(),!e)||(c=u?e.getImmediatesMap():null,l=i.createAtlas(e.getImmediateNode(),c),!l)||(o=l.directionsTo(t),!o))return!1;for(this.waitForExecutingAnimations(n),a={actor:e},s=0;s<o.targets.length;s++){if(h=o.targets[s],!h.edge){n.run(function(n,t){n.actor&&(n.actor=n.actor.children().firstOrDefault(function(n){return f.getRefreshedStartNodeId(n,c)==t}))},a,h.target.id);continue}n.run(function(n,t){if(n.actor){var i=n.actor.findCurrentNode();i&&i.edges.getCollection().contains(t)&&n.actor.followEdge(t)}},a,h.edge);r?n.waitfor(function(){return f.actor()?(f._engine.forceTick(i.NavigationHelper.animationClockAdvanceAmount),f.actor().findCurrentNode()!==null):!0},0):this.waitForExecutingAnimations(n);n.run(function(){return f.rootve.changed(f.getAnimationEngine().cameraTransform(),!0)})}return Utilities.weblog("traversal","following edges: "+o.targets.map(function(n){return n.edge?"edge: "+n.edge.id+" ":"child fsm: "+n.target.id+" "}).join(", ")),!0},c.prototype.getRefreshedStartNodeId=function(n,t){if(!n.startnode)return null;var i=null;return t&&(i=t[n.startnode.id]),i!=null?i.id:n.startnode.id},c.prototype.handleTrigger=function(n){var i,t;if(this.clientState.runAnimationsInstantly=!1,!n||n.length==0)return StoryLog.TraceTag(4543744,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.info,"null passed to handleTrigger",null),!1;if(i=this.actor(),!i)return!1;for(t=0;t<n.length;t++){if(Utilities.weblog("trigger","attempting triggerset: "+n[t].modelTriggerSet.id+" "+n[t].modelTriggerSet.getName()),this.rootve.getInteractionModel().renderModel.getSchemaVersion()>=51&&this.embedHostMode&&n[t].modelTriggerSet.getBehaviors()==1)return!1;if(i.followEdgesForTriggerSet(n[t].modelTriggerSet)){if(Utilities.weblog("trigger","processed triggerset: "+n[t].modelTriggerSet.id+" "+n[t].modelTriggerSet.getName()),n[t].modelTriggerSet.getAlwaysTryDefaultAction())break;return!0}i.findCurrentNode()||Utilities.weblog("trigger","triggerset ignored due to busy actor tree.")}for(t=0;t<n.length;t++)if(this.tryDefaultAction(n[t]))return!0;return!1},c.prototype.tryDefaultAction=function(n){var t,i;return n.firedTriggerIndex==-1?!1:(t=n.modelTriggerSet.triggers.getCollection(),n.firedTriggerIndex>=t.length)?!1:(i=t[n.firedTriggerIndex].defaultActions.getCollection(),!i.length)?!1:(i.forEach(this.applyDefaultAction,this),!0)},c.prototype.applyDefaultAction=function(n){var t=n.parameters.getCollection().todict(function(n,t){t[n.getParameterName()]=n.getParameterValue()});this.applyDefaultActionInternal(n.getAction(),t)},c.prototype.applyDefaultActionInternal=function(t,i){var y=this,c=n.AnimationManager.Interrogation[i[e]],l,r,h;switch(t){case 1:case 0:l=parseInt(i[s]);c==3||c==0?(r=c===3?0:1,h=this.scrollable.getValue(),t===1?h.offsetScroll(r,l):h.setScroll(r,l)):(t===1&&(l+=this._engine.interrogations().get(c)),this._engine.interrogations().set(c,l));break;case 2:var a=i[o],p=c===3,w=this._engine.interrogations(),b=p?5:2,v=w.get(b),h=this.scrollable.getValue(),r=p?0:1;if(this.keysDown.contains(this.currentKey)){switch(a.toLowerCase()){case u:h.animateOffset(r,v);break;case f:h.animateOffset(r,-v);break;default:throw new Error("unknown direction "+a);}this.keyupCallbacks.some(function(n){return n.which===y.currentKey})||this.keyupCallbacks.push({which:this.currentKey,fn:function(){return y.applyDefaultActionInternal(t,i)}})}else switch(a.toLowerCase()){case u:h.scrollForwardToSnapPoint(v,r);break;case f:h.scrollBackwardToSnapPoint(v,r);break;default:throw new Error("unknown direction "+a);}}},c.prototype.simulateClick=function(n){var t={bubble:!0,handled:!1},r;return n.keyCode!==KeyCodeType.EnterKey&&n.keyCode!==KeyCodeType.SpaceKey||n.altKey||n.ctrlKey||n.shiftKey||n.metaKey||n.srcElement!==document.activeElement||!$(n.srcElement).hasClass(i.LayoutVE.FocusableClass)||(r=document.createEvent("MouseEvents"),r.initMouseEvent("click",n.bubbles,n.cancelable,window,-1,-1,-1,-1,-1,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),n.srcElement.dispatchEvent(r),t.handled=!0,t.bubble=!1),t},c.prototype.dispose=function(){var n=this._fsmactor.getValue();n&&n.dispose();this._triggerManager.dispose();this.rootve=null;this.scrollable=null;h.prototype.dispose.call(this)},c}(Disposable);i.InteractionEngine=h})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var f=n.Model.RM,r=function(){function r(n,t,r){var u=this;this.startnode=n;this.data=t;this.parentNodeId=r;this.inifiniteDuration="-1";this.animatingSequences=[];this.queueEdges=!1;this.immediatenode=TDB.watchable(this,n);this.currentnode=TDB.watchable(this,new i(n));this.cacheImmediateNodeValues(n);this.cachecurrentNodeValues(n);this.childactors=this.data.childmap.getOrCreateChildActors(n);this.createAtlas(n);this.firstEnter=!0;this.initialAmbientsComplete=!0;this.traversalState={currentPath:null,currentKeyframeId:null,currentKeyframeScrollWidth:0,currentKeyframeScrollHeight:0,currentAmbientFunctionIds:"",edgeIds:t.edgeIds,originalNodeId:n?n.id:null,parentNodeId:r,getChildTraversalStates:function(n){return u.data.childmap.getChildActors(n).map(function(n){return n.traversalState})},lastUpdated:0};n&&this.updateTraversalState(n)}return r.CreateRootActor=function(n,i,f,e,o){var s={listener:f,childmap:null,engine:e.getAnimationEngine(),clientState:e.getClientState(),capabilities:e.clientCapabilities(),edgeIds:t.getEdgeIds(i),traveler:o};return s.childmap=new u(s),new r(n,s,null)},r.prototype.createAtlas=function(n){return n?(this.atlas=t.createAtlas(n),this.atlas):null},r.prototype.enter=function(n){var u=this,i,r;if(this.exitOnEndTransition){this.exitOnEndTransition=!1;return}(i=this.immediatenode.getValue(),i)&&(this.data.listener.enter(this,i,n),this.data.traveler&&this.data.traveler.visit(i.getKeyFrame()),this.cacheAnimations(i),r=i.getAmbientAnimationSequence(),r&&(this.initialAmbientsComplete=r.getAnimationsCompleteFunction()===this.inifiniteDuration,this.runAnimationSequence(r,function(){u.killRunningAnimations();u.initialAmbientsComplete=!0;u.followEdgesForTriggerSet(null)}),this.traversalState.currentAmbientFunctionIds=t.getFunctionIds(r)),this.childactors.forEach(function(t){return t.enter(n)}),!this.parentNodeId&&this.firstEnter&&(this.firstEnter=!1,this.followEdgesForTriggerSet(null)))},r.prototype.canExit=function(){return this.selfCanExit()?this.childactors.every(function(n){return n.allowDeferredExit||n.canExit()}):!1},r.prototype.exit=function(){var n=this.immediatenode.getValue();if(!this.selfCanExit()){if(n.renderModel.getSchemaVersion()>=46&&n.getAllowDeferredExit()){this.exitOnEndTransition=!0;return}throw new Error("tried exiting an fsm that wasn't ready to be exited");}this.killRunningAnimations();this.data.listener.leave(this,n);this.childactors.forEach(function(n){return n.exit()})},r.prototype.children=function(){return this.childactors.slice(0)},r.prototype.followEdgesForTriggerSet=function(n){var f=this,t,i,u;if(this.disposing)return!0;if(!this.currentnode||!this.currentnode.getValue())throw new Error("Attempted to get edges for an actor during a state transition.");if(t=!1,i=this.currentnode.getValue().get(),!i)return!1;if(this.childactors.forEach(function(i){return t=i.followEdgesForTriggerSet(n)||t}),!t){if(i.renderModel.getSchemaVersion()>=47&&(r.checkForModalChild(this.childactors)||this.checkForModalSibling()))return!1;if(u=i.edges.getCollection().firstOrDefault(function(t){return f.isEdgeAutomatic(t)||!t.getTriggerSet()||t.getTriggerSet()===n}),u)return this.followEdge(u)?!u.getAllowBubbling():!1}return t},r.prototype.followEdge=function(i){var r=this,f,u,e;if(!this.canExit()||(f=i.getTriggerSet(),f&&!this.data.clientState.compareTo(f.getClientState())))return!1;if(this.queueEdges)return this.queuedEdge=i,!1;u="following edge: "+i.id+" "+i.getName();this.isEdgeAutomatic(i)&&(u="(auto followed in edit mode) "+u);Utilities.weblog("animation",u);this.killRunningAnimations();e=this.getExitAnimations(!1);this.startTransition(i.getTarget());i.getResetDescendants()&&this.resetTargetStateMachines(i);var h=i.getTransitionOutAnimationSequence(),c=i.getTransitionInAnimationSequence(),s=i.getTarget().getAmbientAnimationSequence(),o=n.AnimationManager.after(2+e.length,function(){r.disposing||TDB.applyUpdate(function(){r.endTransition(i);r.killRunningAnimations();r.runAnimationSequence(s,function(){r.killRunningAnimations()});r.traversalState.currentAmbientFunctionIds=t.getFunctionIds(s);r.followEdgesForTriggerSet(null);r.data.listener.edgeFollowed(i)},1)},i);return e.forEach(function(n){return r.runAnimationSequence(n,o)}),this.runAnimationSequence(h,o),this.runAnimationSequence(c,o),!0},r.prototype.findCurrentNode=function(){return this.canExit()?this.currentnode.getValue().get():null},r.prototype.getCurrentNode=function(n){var t=this.immediatenode.getValue();return t&&this.allowDeferredExit?t:this.currentnode.getWatchedValue(n).get()},r.prototype.getImmediateNode=function(n){return this.immediatenode.getWatchedValue(n)},r.prototype.dispose=function(){this.disposing=!0;this.killRunningAnimations();this.childactors.forEach(function(n){return n.dispose()});this.setCurrentNode(null);this.data=null;this.startnode=null;this.atlas=null},r.prototype.getMostRecentActor=function(n){var t=this,i;return n&&(i=t.getCurrentNode(),!i||!t.currentNodeIsDefaultNavigation&&!t.currentNodeCanNavigateTo)?null:(this.childactors.forEach(function(i){var r=i.getMostRecentActor(n);r&&r.traversalState.lastUpdated>=t.traversalState.lastUpdated&&(t=r)}),t)},r.prototype.getImmediatesMap=function(){var n={};return this.populateImmediatesMap(n),n},r.prototype.isEdgeAutomatic=function(n){return n.model.renderModel.getSchemaVersion()<56?!1:this.data.clientState.editMode&&n.getBehaviors().has(1)},r.prototype.checkForModalSibling=function(){var t=this,n;return this.parentNodeId?(n=this.data.childmap.getChildActors(this.parentNodeId).filter(function(n){return n.startnode.id!==t.startnode.id}),n.some(function(n){var t=n.immediatenode.getValue();return t&&n.immediateNodeIsModal})):!1},r.checkForModalChild=function(n){if(n.some(function(n){var t=n.currentnode.getValue().get();return t&&n.immediateNodeIsModal}))return!0;for(var t=0;t<n.length;t++)if(r.checkForModalChild(n[t].children()))return!0;return!1},r.prototype.resetTargetStateMachines=function(n){var t=this.data.childmap.getOrCreateChildActors(n.getTarget());this.resetDescendants(t);t.forEach(function(t){t.enter(n);var i=Utilities.sequence();i.waitfor(function(){return t.canExit()},50).run(function(n){n.immediatenode.getValue().edges.getCollection().forEach(function(t){t.getTriggerSet()||n.followEdge(t)})},t);i.start()})},r.prototype.populateImmediatesMap=function(n){this.childactors.forEach(function(t){return t.populateImmediatesMap(n)});n[this.startnode.id]=this.getImmediateNode()},r.prototype.getExitAnimations=function(n){var i=this.childactors.mapmany(function(n){return n.getExitAnimations(!0)}),t;return n&&(t=this.currentnode.getValue().get(),t&&i.unshift(t.getExitAnimationSequence())),i},r.prototype.selfCanExit=function(){return this.initialAmbientsComplete&&this.currentnode.getValue().get()!==null},r.prototype.killRunningAnimations=function(){var t=this.animatingSequences.slice(0),n;for(this.animatingSequences=[],n=0;n<t.length;++n)this.data.engine.killAnimationSequence(t[n])},r.prototype.resetDescendants=function(n){n||(n=this.childactors);n.forEach(function(n){return n.reset()});n.forEach(function(n){return n.resetDescendants()})},r.prototype.reset=function(){var n=this;TDB.applyUpdate(function(){n.setImmediateNode(n.startnode);n.setCurrentNode(n.startnode)});this.exitOnEndTransition=!1},r.prototype.setImmediateNode=function(n){this.immediatenode.setValue(n);this.cacheImmediateNodeValues(n)},r.prototype.setCurrentNode=function(n){var t=this.currentnode.getValue();t&&t.dispose();this.disposing||(this.currentnode.setValue(new i(n)),this.cachecurrentNodeValues(n))},r.prototype.cacheImmediateNodeValues=function(n){n&&(this.immediateNodeIsModal=n.getIsModal(),this.allowDeferredExit=n.getAllowDeferredExit())},r.prototype.cachecurrentNodeValues=function(n){n&&(this.currentNodeCanNavigateTo=n.getCanNavigateTo(),this.currentNodeIsDefaultNavigation=n.getKeyFrame().getIsDefaultNavigation())},r.prototype.startTransition=function(n){var t=this,i;if(this.exitOnEndTransition)throw new Error("tried to start a transition on an fsm that is waiting to be exited");i=this.immediatenode.getValue();this.data.listener.leave(this,i);TDB.applyUpdate(function(){t.setImmediateNode(n);t.setCurrentNode(null)});this.updateTraversalState(n);this.childactors.forEach(function(n){return n.exit()})},r.prototype.endTransition=function(n){var r=this,i=this.immediatenode.getValue(),t;TDB.applyUpdate(function(){r.setCurrentNode(i)});this.queueEdges=!0;this.queuedEdge=null;this.data.listener.enter(this,i,n);t=this.currentnode.getValue().get();this.data.traveler&&this.data.traveler.visit(t.getKeyFrame());this.childactors=this.data.childmap.getOrCreateChildActors(t);this.childactors.forEach(function(t){return t.enter(n)});this.queueEdges=!1;this.queuedEdge&&this.followEdge(this.queuedEdge);this.exitOnEndTransition&&(this.exitOnEndTransition=!1,this.exit())},r.prototype.updateTraversalState=function(n){var i=n.getKeyFrame(),t;this.traversalState.currentKeyframeId=i.id;t=this.atlas.directionsTo(n.id);this.traversalState.currentPath=t&&t.targets?t.targets.map(function(n){return n.edge!=null?n.edge.id:null}):null;this.traversalState.lastUpdated=(new Date).getTime()},r.prototype.runAnimationSequence=function(t,i){if(t){var r=new n.AnimationInterfaces.AnimationSequence(t,this.data.clientState.compareTo.bind(this.data.clientState));if(r.animations.getCollection().length&&this.data.engine.executeAnimationSequence(r,this.data.clientState.editMode||this.data.clientState.runAnimationsInstantly,i)){this.animatingSequences.push(t);return}}i()},r.prototype.cacheAnimations=function(n){var t=this;n.edges.getCollection().forEach(function(n){var i=n.getTriggerSet(),r;(!i||t.data.clientState.compareTo(i.getClientState()))&&(i&&!t.data.capabilities.has(1)&&(r=i.triggers.getCollection().some(function(n){return n.selectMethods.getCollection().some(function(n){return n.getMethod()===6})}),r)||n.getPreFetchAnimations()&&(t.data.engine.cacheAnimationSequence(n.getTransitionInAnimationSequence()),t.data.engine.cacheAnimationSequence(n.getTransitionOutAnimationSequence())))})},r}(),u,i;t.FSMActor=r;u=function(){function n(n){this.data=n;this.map={}}return n.prototype.getOrCreateChildActors=function(n){return this.map[n.id]||this.createChildActors(n)},n.prototype.getChildActors=function(n){var t=this.map[n];return t?t:[]},n.prototype.createChildActors=function(n){var i=this,u=n.childStartStates.getCollection(),t=u.map(function(t){return new r(t,i.data,n.id)});return this.map[n.id]=t,t},n}();i=function(){function n(n,t){this.item=n;this.ondispose=t;n?n.addResource(this):this.item=null}return n.prototype.get=function(){return this.item},n.prototype.dispose=function(){if(this.item){if(this.item.removeResource(this),this.ondispose)this.ondispose(this.item);this.ondispose=null;this.item=null}},n}();t.Handle=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){function f(n,t){return n.length<=t.length}function u(n,t,i){var r=n.edges.getCollection(i).map(function(n){return{edge:n,target:n.getTarget(i)}}),u=n.childStartStates.getCollection(i).map(function(n){return t?t[n.id]||n:n}).map(function(n){return{edge:null,target:n}});return r.concat(u)}function e(n,e,o){var l={},s,h,c,a,v,p,w,k;i(n,l,o);s={};for(c in l)s[c]=new t(c,Number.POSITIVE_INFINITY);s[n.id].length=0;h=[s[n.id]];for(c in l)c!==n.id&&h.push(s[c]);while(h.length!==0){var y=h.shift(),d=l[y.nodeid],b=u(d,e,o);for(a=0;a<b.length;++a)v=b[a],p=s[v.target.id],p.length>y.length+1&&(w=t.extend(y,v),s[v.target.id]=w,k=h.indexOf(p),h.splice(k,1),Utilities.insertInOrder(h,w,f))}return new r(n,s)}function i(n,t,r){var e,f,o;if(!t[n.id]){for(t[n.id]=n,e=u(n,null,r),f=0;f<e.length;++f)i(e[f].target,t,r);for(o=n.childStartStates.getCollection(r),f=0;f<o.length;f++)i(o[f],t,r)}}var r=function(){function n(n,t){this.startnode=n;this.pathmap=t}return n.prototype.directionsTo=function(n){return this.pathmap[n]},n}(),t;n.FSMAtlas=r;t=function(){function n(n,t,i){this.nodeid=n;this.targets=[];this.length=t||0;this.targets=i||[]}return n.extend=function(t,i){var r=t.targets.slice(0);return r.push(i),new n(i.target.id,t.length+1,r)},n}();n.FSMPath=t;n.createAtlas=e})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){function t(n){var t="";return n&&n.animations&&n.animations.getCollection().forEach(function(n){n.animationFunctions&&n.animationFunctions.getCollection().forEach(function(n){return t+=n.id})}),t}function i(n){return n.mapmany(function(n){return n.edges.getCollection().map(function(n){return n.id})})}var r=function(){function n(n,t,i){this.nodes=n;this.rootNode=t;this.isNewKeyframe=i}return n.prototype.checkCurrentStateFromRoot=function(n){return this.checkCurrentState(this.rootNode,n)},n.prototype.checkCurrentState=function(n,r){var c,f,e,o;if(!r)return null;if(!n.edges.getCollection().length&&r.currentPath&&r.currentPath.length)return n.id;var u=n,s=!1,h=!0;if(r.currentPath){for(c=i(this.nodes),f=0;f<r.currentPath.length;f++){if(e=r.currentPath[f],o=u.edges.getCollection().firstOrDefault(function(n){return n.id===e}),!o)break;if(this.isNewKeyframe(u.getKeyFrame())){s=!0;break}if(u=o.getTarget(),c.indexOf(e)!=r.edgeIds.indexOf(e))break}h=f==r.currentPath.length}var l=this.keyframeChanged(u,r),a=r.currentAmbientFunctionIds!=t(u.getAmbientAnimationSequence()),v=this.isStaleTraversalState(r);return!s&&!l&&!a&&h&&!v?this.checkChildren(r):u.id},n.prototype.isStaleTraversalState=function(n){return!this.nodes.some(function(t){return t.id==n.originalNodeId})},n.prototype.findBestChildStateId=function(n){var t=n.parentNodeId;return this.nodes.some(function(n){return n.id==t})||(t=this.rootNode.id),t},n.prototype.checkChildren=function(n){var r=n.getChildTraversalStates(n.originalNodeId),t,i,u,f;if(!r.length)return null;for(t=0;t<r.length;t++){if(i=r[t],u=this.nodes.firstOrDefault(function(n){return n.id==i.originalNodeId}),!u)return this.findBestChildStateId(i);if(f=this.checkCurrentState(u,i),f)return f}return null},n.prototype.keyframeChanged=function(n,t){var i=n.getKeyFrame();return t.currentKeyframeId!==i.id},n}();n.FSMComparer=r;n.getFunctionIds=t;n.getEdgeIds=i})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){function t(n,t,r){return!window.history||window.top!==window||!StoryPageSettings.EnableTraversalHistory?null:new i(n,t,r)}n.makeHistorian=t;var i=function(n){function t(t,i,r){n.call(this,t);this.owner=t;this.fetchModel=i;this.navfun=r;this.stackPosition=-1;this.ignorePopState=!1;this.historyStack=[]}return __extends(t,n),t.prototype.traverse=function(n){var i=n.getParentNode(),r=n.getTarget(),t,u;if(this.poppedState==r.id){this.poppedState=null;return}this.poppedState==null&&n.getHistoricallyRelevant()&&(t=this.historyStack.lastIndexOf(r.id),t>=0?(u=t-this.stackPosition,this.stackPosition=t,window.history.go(u)):((this.historyStack.empty()||window.history.state!=i.id&&this.historyStack.last()!=i.id)&&(this.historyStack.length>1&&this.stackPosition!=0&&(this.ignorePopState=!0,window.history.go(-this.stackPosition),this.ignorePopState=!1),this.stackPosition=-1,this.historyStack.length=0,this.insertState(i.id)),this.insertState(r.id)))},t.prototype.insertState=function(n){this.stackPosition!=this.historyStack.length-1&&(this.historyStack.length=this.stackPosition+1);this.historyStack.length==0?window.history.replaceState(n,document.title,null):window.history.pushState(n,document.title,null);this.historyStack.push(n);this.stackPosition++},t.prototype.handlePopState=function(n){this.ignorePopState||!n.state||this.historyStack.empty()||this.historyStack[this.stackPosition]===n.state||this.go(n.state)&&(this.poppedState=n.state,this.stackPosition=this.historyStack.lastIndexOf(n.state))},t.prototype.go=function(n){var t=this.historyStack[this.stackPosition],i;return t===n?!1:(i=this.fetchModel(n),!i)?!1:this.navfun(t,n)},t.prototype.dispose=function(){n.prototype.dispose.call(this);this.historyStack.length>1&&this.historyStack[this.stackPosition]==window.history.state&&this.stackPosition!=0&&(this.ignorePopState=!0,window.history.go(-this.stackPosition))},t}(Disposable)})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=MathUtils,f=function(){function n(n){this.listener=n;this.targets=[]}return n.prototype.setViewport=function(n){var i,t;for(this.lastViewport=this.viewport,this.viewport=n,i=this.targets.slice(0),t=0;t<i.length;++t)this.checkWanted(i[t])},n.prototype.registerWantedObject=function(n){var t=new u(n);this.targets.push(t);this.checkWanted(t)},n.prototype.unRegisterWantedObject=function(n){for(var t=0;t<this.targets.length;++t)if(this.targets[t].target.id===n){this.targets.splice(t,1);return}throw new Error("Target not found "+n);},n.prototype.checkWanted=function(n){if(this.viewport){var i=this.fetchScaledAndOffset(this.viewport,n),r=this.lastViewport?this.fetchScaledAndOffset(this.lastViewport,n):null;r&&!t.aabbsIntersect(r,i)&&this.checkBox(t.aabbUnion(i,r),n);this.checkBox(i,n)}},n.prototype.checkBox=function(n,r){var e=t.aabbIntersection2d(n,r.target.aabb),f=i(e/r.maxintersection*100)/100,u;r.state!==1&&(r.target.criteria.confidence<f||f===1)?(r.state=1,u=r.target.notify,(u===2||u===0)&&this.listener.targetSpotted(r.target)):r.state!==0&&(f<r.target.criteria.confidence||f===0)&&(r.state=0,u=r.target.notify,(u===1||u===0)&&this.listener.targetLost(r.target))},n.prototype.fetchScaledAndOffset=function(n,t){var i=t.target.criteria,u=i.scale[0],f=i.scale[1],e=i.offsetRatio[0],o=i.offsetRatio[1],r;return u===1&&f===1&&e===0&&o===0?n:(r=n.scaled(u,f),(e||o)&&r.move([n.width()*i.offsetRatio[0],n.height()*i.offsetRatio[1]]),r)},n}(),i,e,r,u;n.Lookout=f;i=Math.round,function(n){n[n.Both=0]="Both";n[n.Out=1]="Out";n[n.In=2]="In"}(n.NotifyOn||(n.NotifyOn={}));e=n.NotifyOn,function(n){n[n.Out=0]="Out";n[n.In=1]="In";n[n.New=2]="New"}(r||(r={}));u=function(){function n(n){if(this.target=n,this.state=2,this.maxintersection=0,this.maxintersection=n.aabb.space(),n.criteria.confidence<0||1<n.criteria.confidence)throw new Error("desired confidence must be a ratio between [0, 1]");}return n}()})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r=function(){function n(n){this.triggerManager=n}return n.prototype.getTriggerSetsForEvent=function(n){return n.signal==0?this.handleEditModeEvent(n):[]},n.prototype.handleEditModeEvent=function(n){return this.triggerManager.findTriggerSets(10,function(t){if(t.objectType==48){var r=t;if(r.getSignal()instanceof i.EditModeClientSignal&&n.editMode)return!0}return!1})},n}();t.ClientEventMapper=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(){function n(){}return n.prototype.compareTo=function(n){if(!n)return!0;switch(n.getEditMode()){case 0:return!0;case 1:return this.editMode==!0;case 2:return this.editMode==!1}return!0},n}();t.ClientState=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i){n.call(this,t);this.scroller=t;this.interactions=i;this.scrollmemory={};this.lastscrollid="";this.current=TDB.watcher(this,this,this.calculateCurrent)}return __extends(t,n),t.prototype.leave=function(){var n=this.current.getValue();this.lastscrollid=this.scrollId(n);n&&this.lastscrollid&&(this.scrollmemory[this.lastscrollid]=this.scroller.fetchScrollValues())},t.prototype.enter=function(){var i=this.current.getValue(),t=this.scrollId(i),n;this.lastscrollid!==t&&(n=this.scrollmemory[t],n&&this.scroller.setScrollValues(n))},t.prototype.fetchStateScroll=function(n){var t=this.scrollmemory[n];return t||(t=this.scrollmemory[n]=[0,0]),t},t.prototype.updateScrollMemory=function(n,t){if(n&&t&&t.length==2){var i=this.scrollId(n);this.scrollmemory[i]=t;this.lastscrollid=i}},t.prototype.scrollableKeyframe=function(n){return this.current.getWatchedValue(n)},t.prototype.scrollId=function(n){return n?n.layoutElements.getCollection().first().id:""},t.prototype.findScrollable=function(n,t){var f=n&&n.getCurrentNode(t),i,u,r;if(!f)return null;if(i=f.getKeyFrame(t),this.scroller.isScrollableKeyframe(i,t))return i;for(u=n.children(),r=0;r<u.length;++r)if(i=this.findScrollable(u[r],t),i)return i;return null},t.prototype.calculateCurrent=function(n){return this.findScrollable(this.interactions.actor(n),n)},t}(Disposable);n.ScrollableChecker=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,u=function(){function n(){this.lookout=new t.Lookout(this);this.followedtargets={}}return n.prototype.updateView=function(n){this.lookout.setViewport(this.rectToAAABB(n))},n.prototype.enter=function(n,t){var i=this,r=this.getCameraSelects(n,t);r.forEach(function(n){var r=n.id,u=n.select();if(i.lookout.registerWantedObject({id:r,aabb:i.keyframeToAABB(t.getKeyFrame()),notify:u.getAction()===0?2:1,criteria:i.toCriteria(u)}),r in i.followedtargets)throw new Error("Tried overwriting select that already exists");i.followedtargets[r]=n})},n.prototype.leave=function(n,t){var i=this,r=t.edges.getCollection().mapmany(function(n){var t=n.getTriggerSet();return t?t.triggers.getCollection().mapmany(function(n){return n.selectMethods.getCollection()}).filter(function(n){return n.getMethod()===6}).map(function(n){return n.id}):[]});r.forEach(function(n){i.clearVisibilityData(n)})},n.prototype.targetSpotted=function(n){var i=this.followedtargets[n.id],t;i&&(t=i.edge(),Utilities.weblog("trigger","target: "+n.id+" spotted with visibility trigger: "+t.getTriggerSet().id+" "+t.getTriggerSet().getName()),i.actor.followEdge(t))},n.prototype.targetLost=function(n){var i=this.followedtargets[n.id],t;i&&(t=i.edge(),Utilities.weblog("trigger","target: "+n.id+" lost with visibility trigger: "+t.getTriggerSet().id+" "+t.getTriggerSet().getName()),i.actor.followEdge(t))},n.prototype.dispose=function(){for(var n in this.followedtargets)this.clearVisibilityData(n);this.lookout=null},n.prototype.clearVisibilityData=function(n){n in this.followedtargets&&(this.lookout.unRegisterWantedObject(n),this.followedtargets[n].dispose(),delete this.followedtargets[n])},n.prototype.toCriteria=function(n){return{confidence:n.getVisibilityRatio(),scale:[n.getViewportScaleX(),n.getViewportScaleY()],offsetRatio:[n.getViewportOffsetRatioX(),n.getViewportOffsetRatioY()]}},n.prototype.keyframeToAABB=function(n){var u=n.layoutElements.getCollection().first();if(!u.position)throw new Error("Layout element doesn't have a position with which to create a bounding box");for(var t=this.determineTarget(n),i=0,r=0;t.parent;)i+=t.parent.position.getLeft(),r+=t.parent.position.getTop(),t.parent=t.parent.getParentContainer();return MathUtils.Vec2.add([i,r],t.aabb.min,t.aabb.min),MathUtils.Vec2.add([i,r],t.aabb.max,t.aabb.max),t.aabb},n.prototype.determineTarget=function(n){var i=n.layoutElements.getCollection().first(),u,t,f,e,o;if(!i.position)throw new Error("Layout element doesn't have a position with which to create a bounding box");return u=i.position,t=i.getParentContainer(),t&&(f=t instanceof r.MediaViewportLayoutElement,i.renderModel.getSchemaVersion()<48&&(e="MediaViewportPositioned",o=t.getType(),f=o&&o.substr(-e.length)===e),f&&(u=t.position,t=t.getParentContainer())),{parent:t,aabb:this.rectangleToAAABB(u)}},n.prototype.getCameraSelects=function(n,t){var i=this;return t.edges.getCollection().mapmany(function(t){return i.selectsFromEdge(n,t)})},n.prototype.selectsFromEdge=function(n,t){var r=this,u=t.getTriggerSet();return u?u.triggers.getCollection().mapmany(function(n){return n.selectMethods.getCollection()}).filter(function(n){return n.getMethod()===6}).map(function(u){return new i(u.id,t,u.getCameraSelect(),n,r.clearVisibilityData.bind(r))}):[]},n.prototype.rectToAAABB=function(n){var t=[n.left,n.top],i=[n.width,n.height];return new MathUtils.AxisAlignedBoundingBox(t,MathUtils.Vec2.add(t,i))},n.prototype.rectangleToAAABB=function(n){var t=[n.getLeft(),n.getTop()],i=[n.getWidth(),n.getHeight()];return new MathUtils.AxisAlignedBoundingBox(t,MathUtils.Vec2.add(t,i))},n}(),i;t.VisibilityChecker=u;i=function(){function n(n,i,r,u,f){var o=this,e;this.id=n;this.actor=u;this.onDispose=f;e=function(){if(o.onDispose)o.onDispose(n)};this.edgehandle=new t.Handle(i,e);this.selecthandle=new t.Handle(r,e)}return n.prototype.edge=function(){return this.edgehandle.get()},n.prototype.select=function(){return this.selecthandle.get()},n.prototype.dispose=function(){this.onDispose=null;this.actor=null;this.edgehandle.dispose();this.selecthandle.dispose()},n}()})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(){function n(n){this.triggerManager=n}return n.prototype.getTriggerSetsForEvent=function(t){var i,f=!1,r,u;return(t.which>=48&&t.which<=57||t.which>=65&&t.which<=90?(i=String.fromCharCode(t.which),f=!0):i=n.keycodeMapping[t.which],StoryPageSettings.Mode===2||f||(r=null,t.altKey?r="ALT":t.ctrlKey?r="CTRL":t.shiftKey?r="SHIFT":i!==undefined&&(r=i),StoryLog.StructuredTraceTag(5858771,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.verbose,"User Action: Key pressed",{Key:r,"User Id":CommonSettings.AnonUserId,"Story Id":StoryPageSettings.StoryId})),!i)?[]:(u=this.getTriggerSetsByKey(i),u.length&&!t.metaKey&&!t.altKey&&!t.ctrlKey)?u:[]},n.prototype.getTriggerSetsByKey=function(n){var t=n.toUpperCase();return this.triggerManager.findTriggerSets(0,function(n){return n.getKeyNames().toUpperCase().split(",").contains(t)})},n.keycodeMapping={32:"SPACE",33:"PAGEUP",34:"PAGEDOWN",35:"END",36:"HOME",27:"ESCAPE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",96:"0",97:"1",98:"2",99:"3",101:"4",102:"5",103:"6",104:"7",105:"8",106:"9"},n}();t.KeyboardEventMapper=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(){function n(n,t,i){this.recordConsumptionChange=i;this.keyFrameData={};this.initializeKeyframeData(n,t);this.firstVisit=!t}return n.prototype.getCoverage=function(){var i=this,t=Obj.properties(this.keyFrameData),n;return t.length?(n=0,t.forEach(function(t){var r=i.keyFrameData[t];r.visited&&(n+=r.scrollability==0?1:r.scrollExtent?Math.min(r.scrolled/r.scrollExtent,1):1)}),Math.round(n/t.length*100)/100):0},n.prototype.visit=function(n){var t=this.keyFrameData[n.id];t&&(t.visited=!0,t.scrollability!=0&&(this.scrollableKeyframeId=n.id,this.setScrollCoverage(t)),this.recordCoverage())},n.prototype.setScrollState=function(n){this.lastScrollState=n;var t=this.keyFrameData[this.scrollableKeyframeId];t&&(this.setScrollCoverage(t),this.recordCoverage())},n.prototype.getKeyframeData=function(){return Obj.extend({},this.keyFrameData)},n.prototype.recordCoverage=function(){this.recordConsumptionChange(this.getCoverage(),this.firstVisit);this.firstVisit=!1},n.prototype.setScrollCoverage=function(n){if(this.lastScrollState)switch(n.scrollability){case 1:n.scrolled=Math.max(n.scrolled,this.lastScrollState.visibleScrollX+this.lastScrollState.scrollX);break;case 2:n.scrolled=Math.max(n.scrolled,this.lastScrollState.visibleScrollY+this.lastScrollState.scrollY)}},n.prototype.initializeKeyframeData=function(n,t){var i=this;this.keyFrameData={};n.forEach(function(n){var r=t?t[n.id]:null;switch(n.getCoverageMethod()){case 1:i.keyFrameData[n.id]=r?r:{visited:!1,scrollability:0,scrollExtent:0,scrolled:0};break;case 2:var f=n.getScrollWidth(),e=n.getScrollHeight(),u=n.getScrollability();i.keyFrameData[n.id]={visited:!1,scrollability:u,scrollExtent:u==1?f:e,scrolled:0};r&&(i.keyFrameData[n.id].visited=r.visited,i.keyFrameData[n.id].scrolled=r.scrolled)}})},n}();t.KeyframeTraveler=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(){function n(n){this.triggerManager=n}return n.prototype.getTriggerSetsForEvent=function(n){return n.type==t.EventConstants.MouseWheelEventType?this.onMouseWheel(n):this.onMouseClick(n)},n.prototype.onMouseWheel=function(n){var t=n.wheelDelta;return this.triggerManager.findTriggerSets(t>=0?7:8,function(n){return n.getMethod()===7&&t>=0||n.getMethod()===8&&t<0})},n.prototype.onMouseClick=function(n){var e=n.type==t.EventConstants.ClickEventType?2:3,o=n.target,f;if(StoryPageSettings.Mode!==2&&n.pageX&&n.pageY&&StoryLog.StructuredTraceTag(5858772,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.verbose,"User Action: Mouse event",{Type:n.type,X:n.pageX.toString(),Y:n.pageY.toString(),"User Id":CommonSettings.AnonUserId,"Story Id":StoryPageSettings.StoryId}),n.which==t.EventConstants.LeftMouseButton&&!(o.firstChild instanceof Text)){for(var s=[],i=TDB.ViewElement.dataFor(o),h=!1,c=n.pageX===-1&&n.pageY===-1;i&&i!==this.triggerManager.rootViewElement;){var l=i.getModelObjectId(),u=i,r=u!==undefined?u._model?u._model.getFlags():undefined:undefined;if(r&&r.has(1024)&&!(h||c))break;if(f=this.getPickingTriggerSet(e,l),!f)if(r&&r.has(512)&&(h=!0),i=i.parent,i)continue;else break;s.push(f);break}return s.concat(this.getClickTriggerSets(e))}return null},n.prototype.getClickTriggerSets=function(n){return this.triggerManager.findTriggerSets(n,function(t){return t.getMethod()===n?t.getTarget()===0:!1})},n.prototype.getPickingTriggerSet=function(n,t){var i=this.triggerManager.findTriggerSets(n,function(i){if(i.getMethod()===n){var r=i.getTarget(),u=r!==0;return u&&i.getTargetId()===t}return!1});return!i||i.length==0?null:(i.length>1&&StoryLog.TraceTag(5858773,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"More than one trigger set found for element with ID "+t,null),i[0])},n}();t.MouseEventMapper=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r=function(){function n(){}return n.getDetailViewKeyFrameType=function(){return"DetailViewPage"},n.getFsmNodeIdFromContentId=function(n,t){if(!t)return null;var i=n.getContentNavigationMarkerCollections().getCollection().firstOrDefault(function(n){return n.getContentId()===t});return i?i.navigationMarkers.itemAtIndex(0).getFsmNodeId():null},n.navigateToContentId=function(t,i,r,u,f,e,o){var v=this,s,h,l,c,a;t&&i&&(s=t.getInteractionModel(),s)&&(h=n.getFsmNodeIdFromContentId(s,i),h)&&(r&&!t.parent.parent.isEditMode.getValue()&&(l=s.nodes.getCollection(),c=l.firstOrDefault(function(n){var t=n.getKeyFrame();return t.getType()===v.getDetailViewKeyFrameType()&&t.layoutElements.getCollection()[0].getContentId()===i}),c&&(h=c.id)),a=this.getRootKeyframe(t),t._interactionEngine.navigateTo(h,u,f,o),n.scrollToContentId(t,i,a,u,e))},n.getRootActor=function(n){var t=n._interactionEngine.actor(),i;return t?(i=t.getCurrentNode(),!i)?null:i.getKeyFrame().getIsDefaultNavigation()?t.children().firstOrDefault(function(n){var t=n.startnode;return t&&!t.getKeyFrame().getIsDefaultNavigation()}):t:null},n.scrollToContentId=function(n,t,i,r,u){var s,a,e,o,f,h,l,c;if(n&&t&&i&&!n.is3DWorldWatcher.getValue()&&(s=n.scroller.getValue(),s)&&(a=n.cullingRootWatcher.getValue(),e=this.findLayoutElement(a,t),e)){for(o=new Point(e.position.getLeft(),e.position.getTop()),f=e.getParentContainer();f;)o.left+=f.position.getLeft(),o.top+=f.position.getTop(),f=f.getParentContainer();h=[Math.max(0,Math.min(i.getScrollWidth(),o.left)),Math.max(0,Math.min(i.getScrollHeight(),o.top))];u&&(l=n.parent.parent.appBar,l&&l.getScrollVisibleManager().initScrollPositions(h));c=n._interactionEngine.getAnimationEngine();r&&c.hideOutput();s.setScrollValues(h);s.getScrollChecker().updateScrollMemory(i,h);r&&c.showOutput(null,this.animationClockAdvanceAmount);n.changed(c.cameraTransform(),!0)}},n.getScrollDirection=function(n,t){var i=this.getRootKeyframe(n);return i===null?0:i.getScrollability(t)},n.hasContentThreshold=function(){var u=t.ViewModel.previewVE._root.getValue(),n=u._interactionEngine.getAnimationEngine(),i,r,f,o=this.getScrollDirection(u),e,s;if(o===2)i=2,r=1,f=n.interrogations().get(r)/n.interrogations().get(i);else if(o===1)i=5,r=4,f=n.interrogations().get(r)/n.interrogations().get(i);else return e=u.getTraveler(),e?(s=Obj.properties(e.getKeyframeData()).length,s>1):!1;return f>=.75},n.hasContentOverflow=function(){var f=t.ViewModel.previewVE._root.getValue(),i=f._interactionEngine.getAnimationEngine(),r,u,n,o=this.getScrollDirection(f),e,s;return o===2?(r=2,u=1,n=i.interrogations().get(u)>i.interrogations().get(r)):o===1?(r=5,u=4,n=i.interrogations().get(u)>i.interrogations().get(r)):(e=f.getTraveler(),e?(s=Obj.properties(e.getKeyframeData()).length,n=s>1):n=!1),n},n.getRootKeyframe=function(n){var t=this.getRootActor(n);return t?t.startnode.getKeyFrame():null},n.findLayoutElement=function(n,t){var u,r,f;if(!n||!t)return null;if(n instanceof i.ContainerLayoutElement)for(u=n.children.getCollection(),r=0;r<u.length;r++)if(f=this.findLayoutElement(u[r],t),f)return f;return n.getContentId()===t?n:null},n.animationClockAdvanceAmount=1e6,n}();t.NavigationHelper=r})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var i=n.Model.RM,r=n.Common,u=function(){function n(){}return n.generateRestoreUrl=function(n){return n?r.UrlHelper.getInstance().storyRestoreUrl(StoryPageSettings.LookupId,n):null},n.generateRestoreUrlFromRestorePoint=function(n){var t=this.createRestoreState(n);return t?this.generateRestoreUrl(t.contentId,t.isDetailView):null},n.createRestoreState=function(n){var r,u,f,h,e,y;if(!n)return null;var c=n.getTraveler(),p=c?c.getKeyframeData():null,l=!1,a=n.parent.parent.appBar;if(a&&(l=a.getVisible()),r=this.getCurrentFsmNode(n),!r)return null;var i=null,o=null,s=n.getInteractionModel().getContentNavigationMarkerCollections().getCollection(),v={};for(u=0;u<s.length;u++)for(f=s[u].getContentId(),v[f]=!0,h=s[u].navigationMarkers.getCollection(),e=0;e<h.length&&!i;e++)y=h[e],y.getFsmNodeId()==r.id?i=f:r.getKeyFrame().getType()==t.NavigationHelper.getDetailViewKeyFrameType()&&r.getKeyFrame().layoutElements.getCollection()[0].getContentId()==f&&(i=f,o=!0);return i=o?i:this.getVisibleContentId(n,r.getKeyFrame().layoutElements.getCollection().firstOrDefault(),v)||i,{contentId:i,appbarVisible:l,scrollApproximation:this.getApproximateScrollPosition(n),oldCoverageData:p,isDetailView:o}},n.restore=function(n){if(n){var i=n.getRestoreState();i&&(n.initializeTraveler(i.oldCoverageData),t.NavigationHelper.navigateToContentId(n,i.contentId,i.isDetailView,!0,"RestoreState: restore",i.appbarVisible,!0))}},n.getCurrentFsmNode=function(n){var i=t.NavigationHelper.getRootActor(n);return i?(i=i.getMostRecentActor(!0),i?i.getCurrentNode():null):null},n.getVisibleContentId=function(n,t,i){var u,r,f;return!t||!n?null:(u=n.scroller.getValue(),!u)?null:(r=u.fetchScrollValues(),r[0]==0&&r[1]==0)?null:(f=u.visibleViewportSize(),f.left+=r[0],f.top+=r[1],this.findLayoutContentId(f,t,i))},n.findLayoutContentId=function(n,t,r,u){var f,o,s,e,h,c;if(!n||!t||!t.position||(u||(u=new BaseRect(0,0,0,0)),f=t.position,o=new BaseRect(f.getLeft()+u.left,f.getTop()+u.top,f.getWidth(),f.getHeight()),!n.overlapsRect(o)))return null;if(t instanceof i.ContainerLayoutElement){for(s=t.children.getCollection(),e=0;e<s.length;e++)if(h=this.findLayoutContentId(n,s[e],r,o),h)return h;return null}return c=t.getContentId(),r[c]?c:null},n.getApproximateScrollPosition=function(n){var u=n.scroller.getValue(),t=n.cullingRootWatcher.getValue(),i,r;return!u||!t||!t.getScrollability?null:(i=u.fetchScrollValues(),i[0]==0&&i[1]==0&&(i=u.getScrollChecker().fetchStateScroll(t.id)),r=0,t.position.getWidth()>0&&t.getScrollability()===1?r=i[0]/t.position.getWidth():t.position.getHeight()>0&&t.getScrollability()===2&&(r=i[1]/t.position.getHeight()),r)},n}();t.RestoreState=u})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(n){this.triggerManager=n}return n.prototype.getTriggerSetsForEvent=function(n){return[{modelTriggerSet:n.triggerSet,firedTriggerIndex:n.triggerIndex}]},n}();n.TimingEventMapper=t})(t=n.ViewElements||(n.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){var r=n.Model.RM,i=function(){function n(n){this.triggerManager=n}return n.prototype.getTriggerSetsForEvent=function(n){return Utilities.weblog("im","swipe detected! "+TDB.Touch.SwipeDirection[n.direction]),this.getTriggerSetsBySwipe(n.direction)},n.prototype.getTriggerSetsBySwipe=function(n){return this.triggerManager.findTriggerSets(1,function(t){if(t.getMethod()===1){var i=t.getKeyNames().toUpperCase();if(n===0&&i==="UP"||n===3&&i==="DOWN"||n===2&&i==="LEFT"||n===1&&i==="RIGHT")return!0}return!1})},n}();t.TouchEventMapper=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i;(function(t){function r(n,t){for(var u,r=t.modelTriggerSet.triggers.getCollection(),i=0;i<r.length;i++)if(u=r[i].selectMethods.getCollection(),u.some(n))return t.firedTriggerIndex=i,!0;return!1}var u=n.Model.RM,i=function(n){function i(i,r,u){n.call(this,i);this.owner=i;this.rootViewElement=r;this.onTimeout=u;this.eventMappers={};this.runningTimers={};this.triggerSetMap=TDB.watcherTag(5858774,this,this,this.createTriggersetMap);this.interactionModel=TDB.watcherTag(5858775,this,this,this.getInteractionModel);this.eventMappers[0]=new t.KeyboardEventMapper(this);this.eventMappers[1]=new t.MouseEventMapper(this);this.eventMappers[2]=new t.TouchEventMapper(this);this.eventMappers[3]=new t.TimingEventMapper(this);this.eventMappers[4]=new t.ClientEventMapper(this)}return __extends(i,n),i.prototype.mapEventToTriggerSets=function(n){var t=this.triggerSetMap.getValue();for(var i in t)t[i].forEach(function(n){return n.firedTriggerIndex=-1});return this.hasTriggers()?this.eventMappers[n.eventType].getTriggerSetsForEvent(n.inputEvent):null},i.prototype.findTriggerSets=function(n,t){var i=this.triggerSetMap.getValue()[n];return i?i.filter(r.bind(null,t)):[]},i.prototype.killDelayTimer=function(n){var t=n.inputEvent,i;t.triggerSet&&(i=this.runningTimers[t.triggerSet.id],i&&(clearTimeout(i),delete this.runningTimers[t.triggerSet.id]))},i.prototype.startDelayTimers=function(n,t){var r=this,i;(t===void 0&&(t=null),t||this.killTimers(),i=this.triggerSetMap.getValue()[9],i&&i.length!==0)&&i.map(function(n){return n.modelTriggerSet}).forEach(function(i){t&&t.id!==i.id||(t&&Utilities.weblog("timer","timer trigger was reset: "+i.id),i.triggers.getCollection().forEach(function(t,u){return t.selectMethods.getCollection().forEach(function(t){var f,e,o,s;t.getMethod()===9&&(f=500,e=n&&t.getTimingSelect().getFireOnStart(),e?Utilities.weblog("timer","immediately firing timer trigger: "+i.id):(f=r.parseInterval(t.getTimingSelect().getTime()),Utilities.weblog("timer","setting up timer trigger: "+i.id+" for interval: "+f),o=t.getTimingSelect().getVariance(),o&&(s=Math.floor(Math.random()*o),f=Math.max(0,f+s),Utilities.weblog("timer","adjusted timer trigger: "+i.id+" to interval: "+f))),r.addTimer(f,e,i,u))})}))})},i.prototype.dispose=function(){n.prototype.dispose.call(this);this.killTimers();this.rootViewElement=null;this.onTimeout=null},i.prototype.parseInterval=function(n){var t=n.split(":");return t.length===3?parseInt(t[0])*6e4+parseInt(t[1])*1e3+parseInt(t[2]):(StoryLog.StructuredTraceTag(7951963,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.warning,"Invalid time interval string "+n,null),0)},i.prototype.addTimer=function(n,t,i,r){var u=this;this.onTimeout&&(this.runningTimers[i.id]=setTimeout(function(){u.onTimeout({triggerSet:i,triggerIndex:r,quickTrigger:t})},n))},i.prototype.killTimers=function(){for(var n in this.runningTimers)clearTimeout(this.runningTimers[n]);this.runningTimers={}},i.prototype.hasTriggers=function(){return!!this.interactionModel.getValue()&&!!this.interactionModel.getValue().triggerSets},i.prototype.createTriggersetMap=function(n){var f=n.watchValue(this.interactionModel),t,e,u;if(!f)return{};var r={},i=f.triggerSets.getCollection(n),o=this.getUseableTriggerSetIds(f,i);for(t=0;t<i.length;t++)for(e=i[t].triggers.getCollection(n),u=0;u<e.length;u++)e[u].selectMethods.getCollection(n).forEach(function(u){var f=u.getMethod(n),e=r[f];e||(r[f]=[]);o.contains(i[t].id)&&r[f].push({firedTriggerIndex:-1,modelTriggerSet:i[t]})});return r},i.prototype.getUseableTriggerSetIds=function(n,t){var i=n.nodes.getCollection().mapmany(function(n){return n.edges.getCollection().filter(function(n){return n.getTriggerSet()!=null}).map(function(n){return n.getTriggerSet().id})});return t.forEach(function(n){n.triggers.getCollection().forEach(function(t){t.defaultActions.getCollection().length>0&&i.push(n.id)})}),i},i.prototype.getInteractionModel=function(n){var i,t,r;return this.rootViewElement?(i=this.rootViewElement.getLayout(n),!i)?null:(t=i.getInteractionModel(n),!t)?null:(StoryPageSettings&&StoryPageSettings.Mode!==2&&(r=t.keyFrames?t.keyFrames.getCollection().length:0,StoryLog.StructuredTraceTag(5858776,Diag.ULSCat.msoulscat_Story_InteractionModel,Diag.ULSTraceLevel.verbose,"Total number of keyframes",{"KeyFrames count":r.toString(),"User Id":CommonSettings.AnonUserId,"Story Id":StoryPageSettings.StoryId})),t):null},i.quickTriggerRetryDelay=500,i}(Disposable);t.TriggerManager=i})(i=t.ViewElements||(t.ViewElements={}))})(t=n.View||(n.View={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(t){function i(n){t.call(this);this._dialog=n}return __extends(i,t),i.prototype.getButtons=function(){for(var u,f,i=[],r=this._dialog.getButtons(),t=0;t<r.length;t++)u=r[t],f=new n.DialogButtonOM(u),i.push(f);return i},i.prototype.getTitleText=function(){return this._dialog.getTitleText(null)},i.prototype.getContentHTML=function(){return""},i.prototype.updateContent=function(){this._dialog.updateDialog(null)},i.prototype.showModal=function(){this._dialog.show()},i.prototype.close=function(n){this._dialog.close(function(){n(null,null)})},i.prototype.cancel=function(){this._dialog.cancel()},i}(ObjectOM);n.DialogOM=t})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i=function(t){function i(n){t.call(this);this._button=n}return __extends(i,t),i.prototype.getCaption=function(){return this._button.caption},i.prototype.isLink=function(){return this._button.link},i.prototype.getOnAction=function(){return this._button.onAction},i.prototype.isDefault=function(){return this._button.isDefault},i.prototype.isDismissOnAction=function(){return this._button.dismissOnAction},i.prototype.getId=function(){return this._button.id},i.prototype.triggerClick=function(){var t=this;t.isDismissOnAction()!==!1?n.View.Common.DialogManager.closeCurrentDialog(function(){t.getOnAction()&&t.getOnAction()(null,t._button)}):t.getOnAction()&&t.getOnAction()(null,t._button)},i}(ObjectOM);t.DialogButtonOM=i})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var r=n.View.ViewElements,i;t.CurrentDialogsOM=null;i=function(i){function u(){i.call(this)}return __extends(u,i),u.prototype.createDialog=function(i,u,f,e,o,s,h,c){for(var l,p,y=[],v=0;v<f.length;v++)l=f[v],p={caption:l.getCaption(),link:l.isLink(),onAction:l.getOnAction(),isDefault:l.isDefault(),dismissOnAction:l.isDismissOnAction(),id:l.getId()},y.push(p);var w={title:u,width:s,noFocus:e,dialogType:o,buttonsArgs:y,onCancel:h,onShowing:c},a=n.View.Common.DialogManager.createDialog(w),b=new r.DialogHtmlContainerVE(a,{innerHTML:i});return a.updateContent(b),n.View.Common.DialogManager.showDialog(a),new t.DialogOM(a)},u.prototype.createDialogButton=function(n,i,r,u,f,e){var o={caption:n,link:i,onAction:r,isDefault:u,dismissOnAction:f,id:e};return new t.DialogButtonOM(o)},u.prototype.getOpenDialog=function(){var r=this,i=n.View.Common.DialogManager;return i.getCurrentDialog()?new t.DialogOM(i.getCurrentDialog()):null},u}(ObjectOM);t.DialogsOM=i})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){var i=function(t){function i(n){t.call(this);this._notBar=n}return __extends(i,t),i.prototype.getNotificationBarManager=function(){return n.View.Common.NotificationBarManager.getInstance()},i.prototype.getContentText=function(){return this._notBar.getText()},i.prototype.show=function(){var n=this;n.getNotificationBarManager().setCurrentNotificationBar(n._notBar,!0)},i.prototype.hide=function(){var n=this;n._notBar.dismiss()},i}(ObjectOM);t.NotificationBarOM=i})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){t.CurrentNotificationBarsOM=null;var i=function(i){function r(){i.call(this)}return __extends(r,i),r.prototype.getNotificationBarManager=function(){return n.View.Common.NotificationBarManager.getInstance()},r.prototype.createNotificationBar=function(n){var i=this,r=i.getNotificationBarManager().createNotificationBar({text:n});return new t.NotificationBarOM(r)},r.prototype.getCurrentNotificationBarVE=function(){var n=this;return n.getNotificationBarManager().getCurrentNotificationBar()},r.prototype.getCurrentNotificationBar=function(){var i=this,n=i.getCurrentNotificationBarVE();return n?new t.NotificationBarOM(n):null},r.prototype.isNotificationBarOpen=function(){var n=this;return!!n.getCurrentNotificationBarVE()},r}(ObjectOM);t.NotificationBarsOM=i})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){t.CurrentRequestManagerOM=null;var i=function(t){function i(){t.call(this)}return __extends(i,t),i.prototype.setLogToDiagnosticPane=function(t){n.RequestManager.LogToDiagnosticPane=t},i}(ObjectOM);t.RequestManagerOM=i})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){t.CurrentStoryAppOM=null;t.inAutomation=!1;var i=function(i){function r(n){i.call(this);var r=this;r.previewOM=new t.PreviewOM(n.previewVE);r.sharingOM=new t.SharingOM;r._viewModel=n}return __extends(r,i),r.prototype.init=function(){StoryLog.TraceTag(3682463,Diag.ULSCat.msoulscat_Story_Automation,Diag.ULSTraceLevel.info,"In automation.");t.inAutomation=!0},r.prototype.isUpdating=function(){return this._viewModel.waitingForUpdate.getValue()||this._viewModel.blockingUpdate.getValue()},r.prototype.editControlsVisible=function(){var n=this;return n._viewModel.isEditMode.getValue()},r.prototype.toggleEditControls=function(){},r.prototype.showFeedback=function(){Feedback.OnFeedbackClick(StoryPageSettings.StoryId)},r.prototype.fullscreenMode=function(){var n=this;return n._viewModel.fullScreenManager.isFullscreen()},r.prototype.toggleFullScreen=function(){var n=this;n._viewModel.fullScreenManager.toggleFullscreen()},r.prototype.storyID=function(){return StoryPageSettings.StoryId},r.prototype.lookupID=function(){return StoryPageSettings.LookupId},r.prototype.embedUrl=function(){return n.Common.UrlHelper.getInstance().embedUrl(this.lookupID())},r}(ObjectOM);t.StoryAppOM=i})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f,e){n.call(this);var o=this;o.xOffset=t!==undefined?t:0;o.yOffset=i!==undefined?i:0;o.blur=r!==undefined?r:0;o.color=u!==undefined?u:"#00000000";o.spread=f!==undefined?f:0;o.inset=e!==undefined?e:!1}return __extends(t,n),t.prototype.set=function(n){var t=this;t.xOffset=n.xOffset;t.yOffset=n.yOffset;t.blur=n.blur;t.color=n.color;t.spread=n.spread;t.inset=n.inset},t.prototype.equals=function(n){var t=this;return t.xOffset===n.xOffset&&t.yOffset===n.yOffset&&t.blur===n.blur&&t.color===n.color&&t.spread===n.spread&&t.inset===n.inset},t}(ObjectOM);n.DropShadowOM=t})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(n){function t(t,i,r,u){n.call(this);var f=this;f.svgPath=t||"";f.viewBox=i||"";f.type=r||"";f.strokeWidth=u||0}return __extends(t,n),t.prototype.set=function(n){var t=this;t.svgPath=n.svgPath;t.viewBox=n.viewBox;t.type=n.type;t.strokeWidth=n.strokeWidth},t.prototype.equals=function(n){var t=this;return t.svgPath===n.svgPath&&t.viewBox===n.viewBox&&t.type===n.type&&t.strokeWidth===n.strokeWidth},t}(ObjectOM);n.PathOM=t})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(t){function i(n,t){var i=TDB.watcherTag(4476956,n,null,t),r=i.getValue();return i.dispose(),r}var r=n.Model.RM,h=n.Model.Store,o=function(u){function e(n){u.call(this);var t=this;t._previewVE=n}return __extends(e,u),e.prototype.overridden=function(){var n=this;return n._previewVE.currentStory.renderModelOverriden()},e.prototype.layoutModel=function(){return this._previewVE.currentStory.getRenderModel()},e.prototype.override=function(n){var t=this,i,u;if(t.overridden())throw new Error("Already overridden.");i=t._previewVE.currentStory.getRenderModel();n||(i=new r.RenderModel(new h(r.RenderModel.RootId)).renderModelRoot);u=JSON.stringify(i.serialize(),null,"  ");TDB.applyUpdate(function(){var n=r.RenderModelRoot.Deserialize(new r.RenderModel(new h(r.RenderModel.RootId)),JSON.parse(u),{});t._previewVE.currentStory.overrideRenderModel(n)})},e.prototype.clearOverride=function(){var n=this;if(!n.overridden())throw new Error("Not overridden.");TDB.applyUpdate(function(){n._previewVE.currentStory.overrideRenderModel(null)})},e.prototype.getFullWorldList=function(){var t=n.WorldList.GetWorlds(null,!1);return t.map(function(n){return n.id})},e.prototype.setViewportHeight=function(n){TDB.applyUpdate(function(){f.setValue(n)})},e.prototype.setViewportSize=function(n,t){TDB.applyUpdate(function(){f.setValue(n-UX.GetScrollbarSize());s.setValue(t)})},e.prototype.clearViewportHeight=function(){TDB.applyUpdate(function(){f.setValue(0);s.setValue(0)})},e.prototype.viewportWidth=function(){return $("#rootve")[0]._context.getWidth()},e.prototype.viewportHeight=function(){return $("#rootve")[0]._context.getHeight()},e.prototype.storyLength=function(){var i=this._previewVE._root.getValue(),n,t;return i?(n=i.cullingRootWatcher.getValue(),!n)?0:(t=this._previewVE.currentStory.getRenderModel().getWorldId(),t=="VerticalWorld")?n.position.getHeight():t=="PanoramaWorld"?n.position.getWidth():0:0},e.prototype.getRootScroller=function(){var n=this._previewVE._root.getValue();return n?n.scroller.getValue():null},e.prototype.storyPosition=function(){var i=this.getRootScroller(),n,t;return i?(n=i.fetchScrollValues(),t=this._previewVE.currentStory.getRenderModel().getWorldId(),t=="VerticalWorld")?n[1]:t=="PanoramaWorld"?n[0]:0:0},e.prototype.setStoryPosition=function(n,t){var i=this.getRootScroller(),r;i&&(r=this._previewVE.currentStory.getRenderModel().getWorldId(),r=="VerticalWorld"?i.setScroll(1,t):r=="PanoramaWorld"&&i.setScroll(0,t));setTimeout(function(){n(!0)},0)},e.prototype.getPreviewPosition=function(){var n=null,t=$("#preview"),i=t.offset();return i&&(n=new Rect,n.top=i.top,n.left=i.left,n.width=t.width(),n.height=t.height()),n},e.prototype.getElementZOrder=function(n){var t=$("#"+n);return t[0].style.zIndex},e.prototype.showAccessibilityView=function(){var n=this,t,i;return n._accessiblityViewWindow=undefined,t=n._previewVE.parent,i=t.appBar.getOverflowMenu(),n._accessiblityViewWindow=i.navigateAccessibilityView(),!!n._accessiblityViewWindow},e.prototype.isAccessibilityViewReady=function(){var t=this,n=t._accessiblityViewWindow;return n&&n.document.readyState==="complete"&&$(n.document).find(".endOfStoryGetStarted").length>0},e.prototype.verifyAccessibilityView=function(n){var e=this,u,i,f,o,t,r,s,h;try{if(u=e._accessiblityViewWindow,!u)return"Accessibility view windows is not opened. It must be opened before verification can proceed.";if(u.document.title.indexOf("(Accessibility view)")<0)return"Accessibility view windows title does not contain '(Accessibility view)' in the title.";if(i=$(u.document).find(".focusable"),i.length!==n)return"We expected "+n+" focusable elements but found "+i.length+" instead.";for(f=0,o=i.length;f<o;f++){if(t=$(i[f]),r=t.attr("tabindex"),!r||parseInt(r)<0)return"We expected element "+t+" to have non-negative tabindex but it has tabindex of "+r;if(s=t.attr("role"),s!=="region")return"We expected element "+t+" to have a role of region but it has role of "+r;if(h=t.attr("aria-label"),!h)return"We expected element "+t+" to have an aria-label attribute set but it is not."}}finally{e._accessiblityViewWindow=undefined}return null},e.prototype.getContainerPosition=function(n){var o=this.getContainer(n),i=$("#rootve"),r=o.offset(),u=i.offset(),f,t,e;if(r&&u)return f={left:i[0]._context.getScrollOffset(0),top:i[0]._context.getScrollOffset(1)},t=new Rect,t.left=Math.round(r.left-u.left+f.left),t.top=Math.round(r.top-u.top+f.top),e=o[0].getBoundingClientRect(),t.width=Math.round(e.width),t.height=Math.round(e.height),t},e.prototype.getContainer=function(n){return $("#container_"+n+", #image_"+n+", #iframe_"+n)},e.prototype.getColor=function(n){var s="#00000000",t=$("#container_"+n).children().filter(".container_background"),r;if(t.length||(t=this.getSvgContainer(n).find("path.path_shape")),t.length||(t=$("#container_"+n)),t.length){var h=t.css("backgroundColor"),u=0,f=0,e=0,o=0,i=h.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*([0-9]*[.]?[0-9]+)\)$/);i&&(u=parseInt(i[1]),f=parseInt(i[2]),e=parseInt(i[3]),o=parseFloat(i[4]));r=h.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);r&&(u=parseInt(r[1]),f=parseInt(r[2]),e=parseInt(r[3]),o=1);s=new Color(u,f,e,o).toArgbString()}return s},e.prototype.getDropShadow=function(n){var r=$("#image_"+n+", #container_"+n),i;if(!r.length)throw new Error("failed to find element with id: "+n);return(i=r[0].dropShadow,!i)?null:new t.DropShadowOM(i.xOffset,i.yOffset,i.blur,i.color.toArgbString(),i.spread,i.inset)},e.prototype.getTextShadow=function(n){var r=new t.TextShadowOM(0,0,0,"#00000000"),u=$("#text_"+n),i;if(u.length){if(i=u.css("textShadow"),!i)return null;r.xOffset=i.xOffset/i.scale;r.yOffset=i.yOffset/i.scale;r.blur=i.blur/i.scale;r.color=i.color}return r},e.prototype.getSvgContainer=function(n){return $(Utilities.format("svg#container_{0}, #container_{0} > svg",n))},e.prototype.getBackgroundPathShadow=function(n){var o=0,s=0,h=0,c="#00000000",r=this.getSvgContainer(n),u,f,e;if(r.length&&(u=r.find("feOffset"),u.length&&(o=parseFloat(u.attr("dx")),s=parseFloat(u.attr("dy"))),f=r.find("feGaussianBlur"),f.length&&(h=f.get(0).stdDeviationX.baseVal),e=r.find("path.path_shadow"),e.length)){var l=e.css("fill"),i=l.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9]*[.]?[0-9]+))?\)$/),a=parseInt(i[1]),v=parseInt(i[2]),y=parseInt(i[3]),p=parseFloat(i[4]===undefined?1:i[4]);c=new Color(a,v,y,p).toArgbString()}return new t.DropShadowOM(o,s,h,c,0,!1)},e.prototype.getText=function(n){var t=$("#text_"+n);return t.text()},e.prototype.getTextColor=function(n){var s=$("#text_"+n),o=s.css("color"),r=0,u=0,f=0,e=0,t=o.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*([0-9]*[.]?[0-9]+)\)$/),i;return t&&(r=parseInt(t[1]),u=parseInt(t[2]),f=parseInt(t[3]),e=parseFloat(t[4])),i=o.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),i&&(r=parseInt(i[1]),u=parseInt(i[2]),f=parseInt(i[3]),e=1),new Color(r,u,f,e).toArgbString()},e.prototype.getTextSize=function(n){var t=$("#text_"+n);return t.css("font-size")},e.prototype.getTextAlignment=function(n){var r=$("#text_"+n),t=r.closest(".text_wrapper"),i;if(t.length===0)throw new Error("Text wrapper for object #text_"+n+" not found (text object may not exist)");i=window.getComputedStyle(t[0]).textAlign;switch(i){case"left":return 0;case"right":return 2;case"center":return 1}},e.prototype.getTracking=function(n){var t=$("#text_"+n);return t.css("letter-spacing")},e.prototype.isAgaveDiv=function(n){return $("#agave_"+n).is("div")},e.prototype.getEmbedAttrValue=function(n,t){var r=$("#iframe_"+n),i=r.get()[0].getAttribute(t);return i?i:""},e.prototype.isEmbedIFrame=function(n){return $("#iframe_"+n).is("iframe")},e.prototype.isEmbedVisible=function(n){return $("#iframe_"+n).is(":visible")},e.prototype.getImageUrl=function(n){var i=$("#image_"+n+", #container_"+n),u=i.prop("src"),r,t,f;return u?u:(r=i.find("image"),r.length?r[0].getAttribute("xlink:href"):(t=i.css("background-image"),t&&(f=t[4]==='"'||t[4]==="'",t=f?t.substr(5,t.length-7):t.substr(4,t.length-5)),t))},e.prototype.firstLayoutParent=function(t){while(t&&!(t instanceof n.View.ViewElements.LayoutVE))t=t.parent;if(!t)throw new Error("failed finding first layoutve in parent chain of view element");return t},e.prototype.getImageFilterColor=function(n){var t=$("#multiplyfilter_"+n),u,s;if(t.length){if(u=this.firstLayoutParent(TDB.ViewElement.dataFor(t[0])),!u)return null;var f=parseFloat(t.find("feFuncR").attr("slope"))*255,e=parseFloat(t.find("feFuncG").attr("slope"))*255,o=parseFloat(t.find("feFuncB").attr("slope"))*255,h=i(u,u.getImageFilterColor),r=h.a;return r?(f=255+(f-255)/r,e=255+(e-255)/r,o=255+(o-255)/r,new Color(f,e,o,r).toArgbString()):h.toArgbString()}return(s=$("#image_"+n).next(),s.length)?s.attr("data-color"):null},e.prototype.getPathData=function(n,i,r){r===void 0&&(r="");var f=r?"path."+r:"path",u=n.find(f);return new t.PathOM(u.attr("d"),u.closest("svg")[0].getAttribute("viewBox"),i.info,parseFloat(u.attr("stroke-width")||"0"))},e.prototype.getImageFilterPath=function(n){var t=$("#filterclip_"+n),r=this.firstLayoutParent(TDB.ViewElement.dataFor(t[0]));return this.getPathData(t,i(r,r.getImageFilterPath))},e.prototype.getContainerOpacity=function(n){var t=$("#container_"+n).css("opacity");return t?parseFloat(t):1},e.prototype.getShapePath=function(n){var t=this.getSvgContainer(n),r=TDB.ViewElement.dataFor(t[0]).parent;return this.getPathData(t,i(r.parent,r.getSvgShape),"path_shape")},e.prototype.getClipPath=function(n){var t=$("#clippath_"+n),r=this.firstLayoutParent(TDB.ViewElement.dataFor(t[0]));return this.getPathData(t,i(r,r.getImageClipPath))},e.prototype.getCurrentLayoutId=function(){var n=this._previewVE._root;return i(n.getValue(),n.getValue().getLayout).id},e.prototype.isContainerMasked=function(n){return!!$("#container_"+n).data("masked")},e.prototype.getBackgroundRepeat=function(n){var t=$("#container_"+n),r,u;return t.find("image").length?(r=t[0]._context,u=r.background,i(r,u.getImageRepeat)):t.css("background-repeat")},e.prototype.getVideoThumbnail=function(n){var t=$("#container_"+n+" .VideoLayoutThumbnail")[0];if(t)return t.src},e.prototype.isPlayVisible=function(n){return!!$("#container_"+n).children().find(".clip48x48").children().length},e.prototype.getVideosUrl=function(n){var t=$("#container_"+n+".VideoLayoutPlayer iframe")[0];if(t)return t.src},e.prototype.getVideosPosition=function(n){var r=$("#rootve"),u=r.offset(),f=r[0]._context,e={left:f.getScrollOffset(0),top:f.getScrollOffset(1)},t=new Rect,o=$("#container_"+n+".VideoLayoutPlayer iframe")[0],i;return o&&(i=o.getBoundingClientRect(),t.left=Math.round(i.left-u.left+e.left),t.top=Math.round(i.top-u.top+e.top),t.width=Math.round(i.width),t.height=Math.round(i.height)),t},e.prototype.isVideoInFront=function(n){return $($("#container_"+n).children()[1]).children(".VideoLayoutPlayButton").length==0},e.prototype.clickVideoPlay=function(n){var t=$("#container_"+n),i=t[0]._context;i.playButtonClicked(undefined);return},e.prototype.navigateWithKeyboard=function(n,t){var i=TDB.ViewElement.dataFor($("#rootve")[0])._interactionEngine,r=$.Event("keydown",{keyCode:t,which:t});i.handleKey(r);Utilities.sequence().waitfor(function(){return!!i.actor().findCurrentNode()},100).run(function(){return n(!0)}).start()},e.prototype.clickMouse=function(n){var t=TDB.ViewElement.dataFor($("#rootve")[0])._interactionEngine,i=$.Event("ckick",{type:"click",which:1,target:{}});t.handleMouse(i);Utilities.sequence().waitfor(function(){return!!t.actor().findCurrentNode()},100).run(function(){return n(!0)}).start()},e.prototype.clickElement=function(n,t){var i=TDB.ViewElement.dataFor($("#rootve")[0])._interactionEngine,r=$.Event("ckick",{type:"click",which:1,target:$("#"+t)[0]});i.handleMouse(r);Utilities.sequence().waitfor(function(){return!!i.actor().findCurrentNode()},100).run(function(){return n(!0)}).start()},e.prototype.isHidden=function(n){return n.style.visibility=="hidden"||n.style.visibility=="collapse"},e.prototype.isDetailVisible=function(n){var i=$("#image_"+n),t;if(i.length==0)return!1;for(t=i[0];!this.isHidden(t)&&t.parentElement!=null;)t=t.parentElement;return this.isHidden(t)?!1:!0},e.prototype.isContainerVisible=function(n){var i=$("#container_"+n.id),t;if(i.length==0)return!1;for(t=i[0];t.style.visibility=="inherit"&&t.parentElement!=null;)t=t.parentElement;return t.style.visibility=="hidden"||t.style.visibility=="collapse"?!1:!0},e.prototype.getNumberOfVisibleElementsInPreview=function(n,t){var i=this;t==1?n(i.getElementsInPreview(t).count(function(n){return i.isContainerVisible(n)})):i.getNumberOfElementsInPreview(n,t)},e.prototype.getNumberOfElementsInPreview=function(n,t){var i=this;n(i.getElementsInPreview(t).length)},e.prototype.getElementsInPreview=function(n){var e=this,o=n,t=this._previewVE._root,r=i(t.getValue(),t.getValue().getLayout),u=i(r,r.getRootContainer),f;return u?(f=e.flattenNodes(u),f.filter(function(n){return i(n,n.getContentType)==o})):[]},e.prototype.flattenNodes=function(n){var r=this,t=[],i;return n&&(t.push(n),i=r.enumerateChildNodes(n),i&&i.forEach(function(n){return t=t.concat(r.flattenNodes(n))})),t},e.prototype.enumerateChildNodes=function(n){var f,e,o,s,t,h,c,u;return n instanceof r.ViewportLayoutElement&&(f=n,e=i(f,f.getChild),e)?[e]:n instanceof r.ProjectionLayoutElement&&(o=n,s=i(o,o.getScene3D),s)?[s]:n instanceof r.ContainerSceneGraphElement&&(t=n,t&&t.children)?i(t.children,t.children.getCollection):n instanceof r.TextureSceneGraphElement&&(h=n,c=i(h,h.getTexture),c)?[c]:n instanceof r.ContainerLayoutElement&&(u=n,u&&u.children)?i(u.children,u.children.getCollection):null},e.prototype.getTwitterSource=function(n){var t=$("#container_"+n+" .tweet")[0],i;if(t)return i=t.src,i.replace("%20"," ")},e}(ObjectOM),u,c;t.PreviewOM=o;var f=TDB.watchableTag(4476957,o,0),s=TDB.watchableTag(5280346,o,0),e=0,l=n.View.ViewElements.PreviewVEBase.prototype.getHeight;n.View.ViewElements.PreviewVEBase.prototype.getHeight=function(n){var r=this,t=f.getWatchedValue(n),i=l.call(r,n),u=e>0?e-i:0;return e=i,t?t+UX.GetScrollbarSize()-u:e};u=0;c=n.View.ViewElements.PreviewVEBase.prototype.getWidth;n.View.ViewElements.PreviewVEBase.prototype.getWidth=function(n){var r=this,t=s.getWatchedValue(n),i=c.call(r,n),f=u>0?u-i:0;return u=i,t?t-f:u}})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(n){function t(t,i,r,u){n.call(this);var f=this;f.xOffset=t!==undefined?t:0;f.yOffset=i!==undefined?i:0;f.blur=r!==undefined?r:0;f.color=u!==undefined?u:"#00000000"}return __extends(t,n),t.prototype.set=function(n){var t=this;t.xOffset=n.xOffset;t.yOffset=n.yOffset;t.blur=n.blur;t.color=n.color},t.prototype.equals=function(n){var t=this;return t.xOffset===n.xOffset&&t.yOffset===n.yOffset&&t.blur===n.blur&&t.color===n.color},t}(ObjectOM);n.TextShadowOM=t})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){var t;(function(n){var t=function(n){function t(){n.call(this)}return __extends(t,n),t.prototype.storyAudience=function(){return SharingManager.getCurrentStoryAudience()},t.prototype.changeStoryAudience=function(n,t){SharingManager.changeStoryAudience(t,StoryPageSettings.LookupId,function(){return n(!0)},function(){return n(!1)})},t}(ObjectOM);n.SharingOM=t})(t=n.OM||(n.OM={}))}(StoryApp||(StoryApp={})),function(n){function u(){if(CommonSettings){var u=new i.GlobalExceptionHandler;u.register();t.ServiceSwitches=new r;t.ServiceSwitches.SetupSwitchesFromTransportFormat(CommonSettings.InitialWatchableSwitches);t.ServiceSwitches.siteDisabled.getValue()&&(window.location.href=i.UrlHelper.getInstance().siteDisabledUrl());t.ServiceSwitches.downtimeDeployment.getValue()&&(window.location.href=CommonSettings.SiteRootUrl);Common.YouTubeAPILoader.loadAPI();UX.GetScrollbarSize()===0&&(document.body.style.msOverflowStyle="-ms-autohiding-scrollbar");n.initialize(u)}}var t=StoryApp.Settings,r=StoryApp.Settings.WatchableSwitches,i=StoryApp.Common;UnitTestMode||$(u)}(StoryPageMain||(StoryPageMain={})),function(n){function f(n,f,e,s){var a,l;if(n.getValue()===null){StoryLog.TraceTag(6824858,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.warning,"Error attempting to call GetStory.");Utilities.tryRefreshOnce("a0co0");return}Utilities.query.has("retry")&&window.history.replaceState(null,"",window.location.pathname+Utilities.query.erase("retry"));u.RenderModel=n;var v=e,y=TDB.watchableTag(6324877,null,!1),p={createView:function(n){var r=new h.CurrentStory(StoryPageSettings,u.RenderModel),i=new t.StoryPageVE(n,{userState:c.UserState.getInstance(),currentStory:r});return t.ViewModel=i,t.ViewModel.setup(StoryPageSettings.Mode,f,y,v),s&&s(t.ViewModel.fullScreenManager),i}};Utilities.query.has("profileview")&&console.profile("View Creation");StoryApp.AnimationManager.Updater.initialize();a=new t.PageRootVE(null,p);a.createRoot($(Utilities.eventWrapperSelector)[0]);Utilities.query.has("profileview")&&console.profileEnd();ActionLogger.RecordClientAction(new ClientAction.PageLoadActionData("OpenStory_View",document.referrer,t.ViewModel.getWorldId().toString(),t.ViewModel.getLayoutStyleId().toString()));l=t.ViewModel.getViewElement();i.CurrentNotificationBarsOM=new i.NotificationBarsOM;i.CurrentDialogsOM=new i.DialogsOM;i.CurrentRequestManagerOM=new i.RequestManagerOM;i.CurrentStoryAppOM=new i.StoryAppOM(l);i.CurrentAppBarOM=new StoryApp.OM.AppBarOM(TDB.watcherTag(7399555,l,l,t.ViewModel.appBarArgs));o();StoryApp.View.ViewElements.NavigationHelper.hasContentOverflow()&&r.StoryFirstRunHelper.triggerPlayEntered()}function e(){new StoryApp.View.Common.IframeLoadingManager;StoryLog.setupForStoryPage(StoryPageSettings.StoryId,StoryPageSettings.LookupId,StoryPageSettings.Mode);StoryApp.RequestManager.commonHeaders[StoryApp.RequestManager.StoryIdHeader]=StoryPageSettings.StoryId;StoryApp.RequestManager.commonHeaders[StoryApp.RequestManager.LookupIdHeader]=StoryPageSettings.LookupId}function l(){e();CommonSettings.ContextualFirstRunEnabled&&(r.initializeFirstRunManager(r.StoryFirstRunHelper.showFirstRunExperience(StoryPageSettings.Mode)),r.getCalloutManager().setup());SharingManager.setup(undefined,undefined);var i=new n.RenderModelManager;i.initialize().pipe(function(n){f(n,i.waitingForUpdate,i.hidden,function(){i.fullScreenManager=t.ViewModel.fullScreenManager})});CommonSettings.ContextualFirstRunEnabled&&r.CommonFirstRunHelper.incrementCookieCount("ConsumptionExperienceCount")}function o(){$(".loading-barrier").addClass("done").one("transitionend webkitTransitionEnd",s);window.setTimeout(s,1500)}function s(){$(".loading-barrier").remove()}var u=StoryApp.Model,i=StoryApp.OM,t=StoryApp.View.ViewElements,h=StoryApp.View.Common,r=StoryApp.View.Common.FRE,c=StoryApp.Common;n.setupRenderModel=f;n.commonInitialize=e;n.initialize=l;n.clearBarrier=o}(StoryPageMain||(StoryPageMain={})),function(n){var i=StoryApp.Model.Store,t=StoryApp.Model.RM,r=StoryApp.Model.WP,u=StoryApp.Common,f=function(){function n(){this.hidden=TDB.watchableTag(6603600,this,!1);this.windowWidth=$(window).width();this.windowHeight=$(window).height();var n=this;n._currentRenderModel=TDB.watchableTag(6324878,n,null);n._getNewRenderModelTask=null;n.waitingForUpdate=TDB.watchableTag(6324879,n,!1);n._renderKeys={};n._renderModels={};n._skipNextResize=!1;ActionLogger.CreateClientCounter(ClientAction.AggregationCounter[7]);ActionLogger.CreateClientCounter(ClientAction.AggregationCounter[8]);StoryApp.View.Common.LayoutElementLogger.createInstance()}return n.prototype.initialize=function(){var n=this;return n.refreshRenderModel().pipe(function(){if(n._currentRenderModel.getValue()!==null)Utilities.throttledEvent(Utilities.onResize,1e3,n.startWaiting.bind(n),n.refreshRenderModel.bind(n));return n._currentRenderModel})},n.prototype.startWaiting=function(){var t=$(window).width(),i=$(window).height(),n;return t===this.windowWidth&&i===this.windowHeight?$.Deferred().reject():Utilities.ios&&!(+(this.windowWidth>this.windowHeight)^+(t>i))?$.Deferred().reject():(this.windowWidth=t,this.windowHeight=i,n=this,StoryApp.View.ViewElements.VideoLayoutVE.whenNoVideosPlaying().pipe(function(){n.waitingForUpdate.getValue()||n.canSkipResize(!1)||TDB.applyUpdate(function(){n.waitingForUpdate.setValue(!0);Utilities.ios7&&n.hidden.setValue(!0)})}))},n.prototype.refreshRenderModel=function(){var n=this;return this.getRenderModel($(window).width(),$(window).height()).pipe(function(t){TDB.applyUpdate(function(){n.waitingForUpdate.setValue(!1);t&&(ActionLogger.IncrementClientCounter(ClientAction.AggregationCounter[8]),StoryApp.View.Common.LayoutElementLogger.getInstance().start(),n._currentRenderModel.setValue(t.renderModelRoot));Utilities.ios7&&TDB.applyUpdate(function(){return n.hidden.setValue(!1)},1)})})},n.prototype.getRenderModel=function(n,u){var f=this,o,e;return(f._getNewRenderModelTask&&(f._getNewRenderModelTask.reject(),f._getNewRenderModelTask=null),f.canSkipResize(!0))?jQuery.Deferred().resolve(null):(o=n.toString()+"x"+u.toString(),e=f._renderKeys[o],e&&f._renderModels[e])?jQuery.Deferred().resolve(new StoryApp.Model.RM.RenderModel(new i(t.RenderModel.RootId,r.StoryDiff.Flatten(f._renderModels[e],t.RenderModel.PropSerializer)))):f.getNewRenderModel(n,u).pipe(function(n){var e=null,u;return n&&(StoryPageSettings.EnableRenderModelManagerCache&&(f._renderKeys[o]=n.RenderModelKey),u=n.StoryDiff,u?(ActionLogger.IncrementClientCounter(ClientAction.AggregationCounter[7]),e=new StoryApp.Model.RM.RenderModel(new i(t.RenderModel.RootId,r.StoryDiff.Flatten(u,t.RenderModel.PropSerializer))),StoryPageSettings.EnableRenderModelManagerCache&&(f._renderModels[n.RenderModelKey]=u)):e=new StoryApp.Model.RM.RenderModel(new i(t.RenderModel.RootId,r.StoryDiff.Flatten(f._renderModels[n.RenderModelKey],t.RenderModel.PropSerializer)))),jQuery.Deferred().resolve(e)})},n.prototype.getNewRenderModel=function(n,t){var i=this,e,o,r,f;if(i._getNewRenderModelTask)throw new Error("renderModelTask should not be set");e=[];for(o in i._renderModels)i._renderModels.hasOwnProperty(o)&&e.push(o);return r=i._getNewRenderModelTask=jQuery.Deferred(),$.ajax({type:"POST",timeout:CommonSettings.LoadTimeoutMilliseconds,url:u.UrlHelper.getInstance().getStoryUrl(StoryPageSettings.LookupId,StoryPageSettings.ClientVersion),data:{clientDevice:CommonSettings.ClientDevice,width:n.toString(),height:t.toString(),isAccessibleMode:Utilities.query.fetch("accessible"),knownRenderModelKeys:e,inEmbedHostMode:Utilities.query.fetch("host")},cache:!1,dataType:"json",traditional:!0,beforeSend:function(){return f=(new Date).getTime(),!0},dataFilter:function(n){return f=(new Date).getTime()-f,n},success:function(n,t,e){var h=+e.getResponseHeader("X-Server-Time-Elapsed"),o=+e.getResponseHeader("X-Payload-Size"),s,c;(o==0||isNaN(o))&&(o=+e.getResponseHeader("Content-Length"));s=i.calculateBandwidth(f,h,o);c={operationName:"RenderModelLoaded",elapsedTimeMs:f,serverTimeMs:h,contentLengthBytes:o,availableBandwidthKbps:s};StoryLog.StructuredTraceTag(7082018,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"API Performance : Call Metrics :",c);u.Environment.getInstance().setAvailableBandwidth(s);i._getNewRenderModelTask==r&&(r.resolve(n),i._getNewRenderModelTask=null)},error:function(n,t,u){if(i._getNewRenderModelTask){var f={status:n.status,textStatus:t,errorThrown:u};StoryLog.StructuredTraceTag(6824859,Diag.ULSCat.msoulscat_Story_Site,Diag.ULSTraceLevel.info,"Call to GetStory didn't complete.",f);r.resolve(null);i._getNewRenderModelTask=null}}}),r},n.prototype.calculateBandwidth=function(n,t,i){var u=n-t,r=i/u*8;return isNaN(r)&&(r=0),r},n.prototype.canSkipResize=function(n){var t=this,i,r;return State.PauseUpdates?!0:(i=StoryApp.View.Common.DialogManager.getCurrentDialog(),i&&i.isVisible())?!0:(r=t.fullScreenManager&&t.fullScreenManager.isExternalFullScreen(),r)?(t._skipNextResize=!0,!0):t._skipNextResize?(n&&(t._skipNextResize=!1),!0):!1},n}();n.RenderModelManager=f}(StoryPageMain||(StoryPageMain={}));
//# sourceMappingURL=StoryPage_min.js.map
